!function(q, m, F) {
    "use strict";
    var B = "ht";
    if (!q[B]) {
        !function() {
            Date.now && Date.prototype.getTime || (Date.now = function() {
                return (new Date).getTime()
            }
            ),
            q.performance && q.performance.now || function() {
                var d = Date.now();
                q.performance || (q.performance = {}),
                q.performance.now = function() {
                    return Date.now() - d
                }
            }();
            for (var v = Date.now(), j = 16, T = ["ms", "moz", "webkit", "o"], b = 0; b < T.length && !q.requestAnimationFrame; ++b)
                q.requestAnimationFrame = q[T[b] + "RequestAnimationFrame"],
                q.cancelAnimationFrame = q[T[b] + "CancelAnimationFrame"] || q[T[b] + "CancelRequestAnimationFrame"];
            q.requestAnimationFrame || (q.requestAnimationFrame = function(P) {
                var H = Date.now()
                  , L = j + v - H;
                return 0 > L && (L = 0),
                v = H,
                q.setTimeout(function() {
                    v = Date.now(),
                    P(performance.now())
                }, L)
            }
            ),
            q.cancelAnimationFrame || (q.cancelAnimationFrame = function(s) {
                return q.clearTimeout(s)
            }
            ),
            m.assign === F && (m.assign = function(O) {
                if (O === F || null === O)
                    throw new TypeError("Cannot convert undefined or null to object");
                for (var W = m(O), S = 1; S < arguments.length; S++) {
                    var L = arguments[S];
                    if (L !== F && null !== L)
                        for (var z in L)
                            m.prototype.hasOwnProperty.call(L, z) && (W[z] = L[z])
                }
                return W
            }
            )
        }();
        var T, e, k, H, s = q.document, V = null, C = q[B] = {}, a = q[B + "config"], j = C.Default = a && a.Default || {}, N = C.Style = a && a.Style || {}, P = C.Attr = a && a.Attr || {}, A = C.Color = a && a.Color || {}, v = C.IsGetter = a && a.IsGetter || {}, n = Math, D = n.round, M = n.floor, I = n.ceil, r = n.sqrt, X = n.max, b = n.min, t = n.abs, z = n.cos, w = n.acos, E = n.sin, y = n.pow, J = n.asin, L = n.PI, u = 2 * L, l = L / 2, S = n.tan, x = n.atan2, o = n.random, h = n.log, W = !1, O = !1, p = q.parseInt || global.parseInt, g = "2361-04-29", $ = q.navigator ? q.navigator.platform.indexOf("Win") > -1 : !1, G = function(t) {
            return t * t
        }, Q = q.setTimeout, _ = q.clearTimeout, c = q.location,
		R = q.navigator ? q.navigator.userAgent.toLowerCase() : "", K = function(G) {
            return G.test(R)
        }, f = K(/msie/), i = K(/msie/) || K(/trident/), Y = K(/msie 10/), d = K(/edge/), U = K(/firefox/), Z = K(/mac/), Nq = j.isTouchable === F ? $ ? !1 : s ? "ontouchend"in s : !1 : j.isTouchable, Hm = "default", Fe = "single", Fb = "multiple", ne = "front", hr = "back", $j = "left", yo = "right", ve = "top", uo = "bottom", Do = "center", Pi = "eye", Ii = "middle", kp = "east", Hq = "west", se = "north", uk = "none", gn = "px", Li = "absolute", hq = "border", Pj = "triangle", Ci = "rect", br = "circle", jb = "cylinder", Mg = "shape", Di = "items", wh = "normal", gf = "remove", vq = "clear", tg = "width", Xq = "height", Th = "ingroup", $m = "check", wb = "uncheck", ud = "radio", ke = "radioOn", eo = "radioOff", Se = "points", _k = "values", vr = "series", ar = "body", Pd = "label", mi = "label2", yi = "note", Gp = "note2", zn = "icons", rq = "labelFont", Jq = "labelColor", Tf = "labelSelectColor", nq = "note.expanded", fo = "note2.expanded", Gb = "edge.expanded", No = "edge.points", bp = "edge.type", cp = "rotation", up = "getRotation", zr = "setRotation", te = "hidden", Fi = "visible", gh = "tuv", fe = "no", wk = "draw", qc = "select", Hk = "currentSubGraph", Fg = "selectBackground", Ao = "autoMakeVisible", Hl = "autoHideScrollBar", Vi = "scrollBarColor", Hc = "scrollBarSize", Wo = "indent", mp = "rowHeight", Ln = "columnLineColor", wr = "rowLineColor", bc = "columnLineVisible", Rj = "rowLineVisible", os = "visibleFunc", Ug = "expandIcon", ui = "collapseIcon", ji = "checkMode", Pq = "sortFunc", Dq = "editable", Wn = "batchEditable", Xh = "tristate", dh = "asc", hf = "desc", Xd = "position", np = "elevation", Ok = "children", cd = "translateX", ao = "translateY", gr = "dataModel", Xn = "maxSize", dm = "shape3d", Bl = "shape3d.resolution", xd = "shape3d.visible", Ie = "shape3d.from.visible", Yk = "shape3d.to.visible", pn = "shape3d.top.visible", ze = "shape3d.bottom.visible", dg = "repeat.uv.length", Kh = "serializeValue", Je = "deserializeValue", Gr = "centerUniform", vs = "uniform", zc = "rgba(255,255,255,0)", tm = "style", Sr = "attr", So = "field", ci = "string", Km = "boolean", Zc = "color", so = "int", eq = "number", Rr = "ew-resize", qk = "ns-resize", jm = "pointer", Jg = "auto", kl = "mousedown", Sq = "mousemove", ur = "mouseup", lq = "mouseout", Xe = "touchstart", Po = "touchmove", pj = "touchend", Pp = "keydown", vl = "keyup", Wl = ["DOMMouseScroll", "mousewheel"], tr = U ? Wl[0] : Wl[1], mo = Nq ? [Xe, Po, pj, Pp, vl, "keypress", "input", "contextmenu", "compositionstart", "compositionupdate", "compositionend"] : [Pp, vl, "keypress", "input", kl, Sq, ur, lq, tr, "wheel", "contextmenu", "mouseenter", "mouseleave", "mouseover", "compositionstart", "compositionupdate", "compositionend"], Jj = V, Ee = V, gp = V, Mr = ur.length, Yp = function() {
            gp && (_(gp.timeout),
            gp = V)
        }, kj = function() {
            gp && Oo(gp.e, gp.info)
        };
        q.addEventListener && (Nq || (q.addEventListener(lq, function() {
            Yp()
        }, !1),
        q.addEventListener(tr, function() {
            Wr()
        }, !1)),
        q.addEventListener(vl, function(K) {
            91 === K.keyCode ? Vj = {} : delete Vj[K.keyCode]
        }, !0),
        q.addEventListener(Pp, function(K) {
            Vj[K.keyCode] = !0
        }, !0));
        var wj, Be, Ud, Xi = 0, pf = V, Qb = function(v, s) {
            var t = Q(function() {
                delete pf[t],
                zf(pf) && (pf = V),
                v()
            }, s);
            return t
        }, Ke = V, kq = V, Xj = {}, es = {}, vo = {}, Mn = {}, md = {}, Vj = {}, Me = {}, tf = {}, Ah = {}, al = {}, oo = /.json$/, uh = /^data:image\/svg\+xml/, hk = {}, Wq = [], wg = {}, lp = V, Le = V, yl = function() {}, Pg = function() {
            throw "Oops!"
        }, wl = [0, 0, 0], gg = [0, 0, 0, 0], zs = {
            x: 0,
            y: 0,
            width: 0,
            height: 0
        }, Mh = V, Od = V, Lo = V, fs = function(n) {
            Od && !n._72O && (Lo || (Lo = {}),
            Lo[n._72O = aj()] = n),
            wj != V ? oq() < .05 && H && !Be && (Pk = Yp) : Pk = mk
        }, pm = function(U, p, t, l) {
            Od || (Od = {});
            var w = Od[U];
            if (w) {
                if (w.url === p)
                    return;
                w.image ? (w.image.onload = yl,
                w.image.onerror = yl) : w.request && (w.request.onload = yl,
                w.request.onerror = yl)
            }
            if (oo.test(p)) {
                var f = new XMLHttpRequest;
                if (Od[U] = {
                    request: f,
                    url: p
                },
                f.overrideMimeType && f.overrideMimeType("text/plain"),
                p = j.beforeLoadURL(p),
                p.data) {
                    var $ = j.parse(p.data);
                    Qh(U, $),
                    j.handleImageLoaded(U, $)
                } else
                    f.open("GET", encodeURI(p), !0),
                    f.onload = function(z) {
                        if (200 === this.status || 0 === this.status) {
                            var w = j.parse(z.target.response || z.target.responseText);
                            Qh(U, w),
                            j.handleImageLoaded(U, w)
                        } else
                            Qh(U, j.handleUnfoundImage(U, p) || V)
                    }
                    ,
                    f.onerror = function() {
                        Qh(U, j.handleUnfoundImage(U, p) || V)
                    }
                    ,
                    f.send(null)
            } else {
                var $ = new Image;
                Od[U] = {
                    image: $,
                    url: p
                },
                i && (p.toLowerCase().indexOf(".svg") > 0 || uh.test(p)) ? (s.body.appendChild($),
                $.style.visibility = "hidden",
                $.onload = function() {
                    Q(function() {
                        if (t && ($.width = t),
                        l && ($.height = l),
                        !$.width || !$.height) {
                            var K = $.width || $.clientWidth
                              , S = $.height || $.clientHeight;
                            $.width = K,
                            $.height = S
                        }
                        j.handleImageLoaded(U, $),
                        Qh(U, $),
                        s.body.removeChild($),
                        $.style.visibility = ""
                    }, 180)
                }
                ,
                $.onerror = function() {
                    Qh(U, j.handleUnfoundImage(U, p) || V),
                    s.body.removeChild($),
                    $.style.visibility = ""
                }
                ) : ($.onload = function() {
                    t && ($.width = t),
                    l && ($.height = l),
                    j.handleImageLoaded(U, $),
                    Qh(U, $)
                }
                ,
                $.onerror = function() {
                    Qh(U, j.handleUnfoundImage(U, p) || V)
                }
                ),
                /^data:image/.test(p) || (p = j.beforeLoadURL(p),
                /^data:image/.test(p) || (p = j.appendTimeStamp(p),
                p = encodeURI(p))),
                $.src = p
            }
        }, Qh = function(k, S) {
            if (es[k] = S,
            delete Od[k],
            zf(Od) && (Od = V,
            Lo)) {
                for (var J in Lo) {
                    var T = Lo[J];
                    T._2O && (T._2O = {}),
                    T.invalidateAll && T.invalidateAll(F, "imageLoaded", k),
                    T.redraw && T.redraw(),
                    T.iv(),
                    delete T._72O
                }
                Lo = V
            }
            if (S && Lo)
                for (var J in Lo) {
                    var T = Lo[J];
                    T.invalidateAll && T.invalidateAll(F, "imageLoading", k),
                    T.redraw && T.redraw(),
                    T.iv()
                }
        }, Cl = function() {
            return h = n && Date,
            function() {
                return q.performance && q.performance.now ? q.performance.now() : Date.now()
            }
        }(), vi = function(R, o) {
            o ? _(R) : q.cancelAnimationFrame(R)
        }, Uk = function(x, C, M) {
            return {
                width: x,
                height: C,
                comps: _b(M) ? M : [M]
            }
        }, sm = function(E, Y) {
            return {
                type: br,
                rect: [E, Y, 1.6, 1.6],
                borderWidth: 1,
                borderColor: fd,
                gradient: jh,
                gradientColor: ac,
                background: fd
            }
        }, Ef = function(O, S) {
            return Uk(16, 16, {
                type: Pj,
                rect: [4, 4, 10, 8],
                background: O,
                rotation: S ? 1.57 : 3.14
            })
        }, Un = function(F, h) {
            return Uk(16, 16, {
                type: Pj,
                rect: [4, 4, 8, 7],
                background: F,
                rotation: h ? 3.14 : 0
            })
        }, ub = function(J) {
            var K = J._orientation;
            return "horizontal" === K || "h" === K
        }, Io = function($) {
            var I = V || 4
              , T = V || 1
              , m = V || 1;
            0 > I ? I = 0 : I > .25 && (I = .25);
            var C, F, w, A, M, b, J, q = .5, y = [], i = [], r = [], n = u / m, d = u / T, k = q - I;
            for (F = 0; T >= F; F++)
                for (A = -L + F * d,
                b = z(A),
                M = E(A),
                C = 0; m >= C; C++)
                    w = C * n,
                    J = k + I * b,
                    y.push(z(w) * J, M * I, -E(w) * J),
                    (e = $) && i.push(C / m, 1 - F / T);
            for (F = 0; T > F; F++) {
                var H = F * (m + 1)
                  , s = (F + 1) * (m + 1);
                for (C = 0; m > C; C++)
                    r.push(H + C, s + C + 1, s + C, H + C, H + C + 1, s + C + 1),
                    Qi.z = _n.z = $
            }
        }, rp = function(G) {
            var n = 2
              , t = 0;
            for (var g in G)
                g.length === n && p(g, 32) === mm && (lp = Le = G[g]),
                t++;
            return t
        }, Ff = function(K, J, R, o) {
            return R || (R = Nq ? 5 : 3,
            R /= o || 1),
            {
                x: K - R,
                y: J - R,
                width: 2 * R,
                height: 2 * R
            }
        }, ge = function(n, P, D, I) {
            var Q = this;
            P || (P = Nq ? 5 : 3,
            D = 20,
            I = 20);
            var c = {
                x: n,
                y: P,
                width: D,
                height: I
            };
            if (D)
                for (var Z = 0; D > Z; Z++)
                    if (3 === D)
                        I = 20;
                    else
                        for (var $ = 0; I > $; $++)
                            Q = q ? q : D;
            var o = {
                x: L,
                y: 2 * L
            };
            if (Kp(c, o)) {
                var U = Xq[0] + ve[0] + vq[1] + (dh.length - 1);
                Tc[Pi] = Q[U],
                Q[U] = Ei[Pi]
            }
        }, Eh = function(y) {
            return (/ble$/.test(y) || /ed$/.test(y) || v[y] ? "is" : "get") + y.charAt(0).toUpperCase() + y.slice(1)
        }, Ei = function(U) {
            return "set" + U.charAt(0).toUpperCase() + U.slice(1)
        }, xe = function(h) {
            return typeof h === ci || h instanceof String
        }, Hg = function(B) {
            return typeof B === eq
        }, mk = function(L) {
            return typeof L === Km
        }, Ag = function(l) {
            return l && "object" == typeof l
        }, Vq = function(l) {
            return "function" == typeof l
        }, _b = function(w) {
            return w instanceof Array
        }, Gl = function(Z) {
            return Z instanceof Vr
        }, Ad = function(g) {
            return _b(g) ? new Vr(g) : g
        }, xj = function(a) {
            return a instanceof xo
        }, vb = function(R) {
            return R instanceof $p
        }, fm = function(T) {
            return T instanceof Ep
        }, sk = function(U, x) {
            if (!(U instanceof C.Group))
                return !1;
            if (!x)
                return U.isExpanded();
            var D = x.getDataUI(U);
            return D && D._88I ? !0 : !1
        }, rd = function(j) {
            return j instanceof Lc
        }, Kr = function(F) {
            return F && "IFRAME" === F.tagName
        }, Zm = function(g) {
            return g == V || j.numberDigits == V ? g : parseFloat(g.toFixed(j.numberDigits))
        }, il = function(z, p, h) {
            var B, o = p.length;
            if (h)
                for (var R = 0; h > R; R++)
                    if (3 === o)
                        z.push(p[0]),
                        z.push(p[1]),
                        z.push(p[2]);
                    else
                        for (B = 0; o > B; B++)
                            z.push(p[B]);
            else if (3 === o)
                z.push(p[0]),
                z.push(p[1]),
                z.push(p[2]);
            else
                for (B = 0; o > B; B++)
                    z.push(p[B])
        }, bf = function(s) {
            return s ? Ag(s) ? s : {} : !1
        }, lk = function(S, $, d) {
            var s, N = Ag(S) ? S : S.prototype;
            for (s in $)
                d && N[s] !== F || (N[s] = $[s]);
            return S
        }, kb = function(m) {
            return String.fromCharCode(m)
        }, Ek = function(E) {
            for (var l, e = 0, V = ""; e < E.length; e++)
                l = E[E.length - 1 - e],
                "%" === l ? l = "'" : "a" === l ? l = '"' : "]" === l && (l = "\\"),
                V += kb(l.charCodeAt(0) - 1);
            return V
        }, nm = function(W, M, s) {
            W.superClass.constructor.apply(M, s)
        }, zf = function(V) {
            for (var z in V)
                return !1;
            return !0
        }, ek = function(v) {
            return v ? 0 === v.length : !0
        }, gi = function() {
            var c = "";
            return [wb[0], wr[0], Pd[0]].forEach(function(F) {
                c += Ei(F).slice(3)
            }),
            vs = s && s[c] || Gr,
            function(C, f) {
                return C === f ? !0 : C.x === f.x && C.y === f.y && C.width === f.width && C.height === f.height
            }
        }(), Dn = function(A, Q, m) {
            return Q > A ? Q : A > m ? m : A
        }, Cs = function(T) {
            return 0 > T ? -1 : T > 0 ? 1 : 0
        }, oq = function() {
            var e = 1e4 * E(Mr++);
            return e - M(e)
        }, xi = function(K, N, f) {
            return Lp(K.x, K.y, N.x, N.y, f.x, f.y, f.x + f.width, f.y, !0) || Lp(K.x, K.y, N.x, N.y, f.x + f.width, f.y, f.x + f.width, f.y + f.height, !0) || Lp(K.x, K.y, N.x, N.y, f.x + f.width, f.y + f.height, f.x, f.y + f.height, !0) || Lp(K.x, K.y, N.x, N.y, f.x, f.y + f.height, f.x, f.y, !0)
        }, Lp = function($, i, d, f, s, Z, n, N, m) {
            var l = (n - s) * (i - Z) - (N - Z) * ($ - s)
              , r = (N - Z) * (d - $) - (n - s) * (f - i);
            if (0 !== r) {
                var k = l / r
                  , _ = $ + k * (d - $)
                  , S = i + k * (f - i);
                return m && (_ + Ed < b($, d) || _ - Ed > X($, d) || _ + Ed < b(s, n) || _ - Ed > X(s, n) || S + Ed < b(i, f) || S - Ed > X(i, f) || S + Ed < b(Z, N) || S - Ed > X(Z, N)) ? V : [_, S]
            }
            return V
        }, dl = function(q, W, t) {
            if (q && t)
                if (W) {
                    if (W === tm)
                        return q.getStyle(t);
                    if (W === Sr)
                        return q.getAttr(t);
                    if (W === So)
                        return q[t]
                } else if (t = Eh(t),
                q[t])
                    return q[t]();
            return F
        }, ll = function(Z, t, D, N) {
            if (Z && D)
                if (t) {
                    if (t === tm)
                        Z.s(D, N);
                    else if (t === Sr)
                        Z.a(D, N);
                    else if (t === So) {
                        var a = Z[D];
                        Z[D] = N,
                        Z.fp("f:" + D, a, N)
                    }
                } else
                    D = Ei(D),
                    Z[D] && Z[D](N)
        }, Or = function(I, u, O) {
            return u && "top" !== u ? "bottom" === u ? {
                x: I.x,
                y: I.y,
                width: I.width,
                height: I.height * O
            } : "right" === u ? {
                x: I.x,
                y: I.y,
                width: I.width * O,
                height: I.height
            } : "left" === u ? {
                x: I.x + I.width * (1 - O),
                y: I.y,
                width: I.width * O,
                height: I.height
            } : void 0 : {
                x: I.x,
                y: I.y + I.height * (1 - O),
                width: I.width,
                height: I.height * O
            }
        }, Cp = function(C, X, n, r, L) {
            X && he(C, n, r, 1, L, X)
        }, Ro = function(L, D, j, o) {
            var x = 1 - L;
            return x * x * D + 2 * L * x * j + L * L * o
        }, Qi = function(S, Q, i, J, D) {
            var d = 1 - S;
            return d * d * d * Q + 3 * d * d * S * i + 3 * d * S * S * J + S * S * S * D
        }, Sj = function(G) {
            var I, i, x, Q, W = 0;
            return G.forEach(function(B) {
                if (I = B.length,
                I > 0)
                    for (i = B[0],
                    Q = 1; I > Q; Q++)
                        x = B[Q],
                        W += uf(i, x),
                        i = x
            }),
            W
        }, Bc = function(V, v, X) {
            var g = "__" + V
              , O = function(F) {
                X.disabled || X["handle_" + V](F)
            };
            X[g] || (X[g] = O,
            v.addEventListener(V, O, !1))
        }, Wj = function(p, a, G) {
            var J = "__" + p
              , m = G[J];
            m && (a.removeEventListener(p, m, !1),
            delete G[J])
        }, tj = function(J, P) {
            var i = "_" + P;
            J[Eh(P)] = function() {
                return this[i]
            }
            ,
            J[Ei(P)] = function(w) {
                var _ = this[i];
                this[i] = w,
                this.fp(P, _, w)
            }
        }, Fd = function(i) {
            return m.create(i)
        }, Hj = function(n) {
            if (!n.element) {
                var q, d;
                (q = n.textField) ? d = uq(Ce.TextField, q) : (q = n.textArea) ? d = uq(Ce.TextArea, q) : (q = n.button) ? d = uq(Ce.Button, q) : (q = n.comboBox) ? d = uq(Ce.ComboBox, q) : (q = n.checkBox) ? d = uq(Ce.CheckBox, q) : (q = n.radioButton) ? d = uq(Ce.RadioButton, q) : (q = n.slider) ? d = uq(Ce.Slider, q) : (q = n.colorPicker) ? d = uq(Ce.ColorPicker, q) : (q = n.image) && (d = uq(Ce.Image, q)),
                d && (n.element = d)
            }
        }, Gc = function(h, u) {
            var I = ff(h);
            return I._ht = u,
            I
        }, ff = function(I, H) {
            var Q = s.createElement("div")
              , A = Q.style;
            return Q.tabIndex = -1,
            Q.onkeydown = vh,
            A.msTouchAction = uk,
            xc(Q, V, 0),
            Nq && A.setProperty("-webkit-tap-highlight-color", "rgba(0, 0, 0, 0)", V),
            I && (A.overflow = te),
            H && mg(H, Q),
            Q
        }, qb = function(J, D) {
            var v = s.createElement("canvas")
              , I = v.style;
            return I.msTouchAction = uk,
            D || (I.pointerEvents = uk),
            xc(v, V, 0),
            J && mg(J, v),
            v
        }, xc = function(f, A, k) {
            var d = f.style;
            d.border = A ? A + " solid 1px" : 0,
            d.outline = 0,
            d.padding = k ? "0 " + k + gn : 0,
            Fq(f)
        }, Fq = function(I) {
            var Y = I.style;
            Y.position = Li,
            Y.margin = 0,
            Y.setProperty("box-sizing", "border-box", V),
            Y.setProperty("-moz-box-sizing", "border-box", V)
        }, ug = function(G, Q, K, J) {
            J || (J = nk),
            Q != V && (G.width = Q * J,
            G.style.width = Q + gn),
            K != V && (G.height = K * J,
            G.style.height = K + gn)
        }, mg = function(j, L, i) {
            j.appendChild(L),
            i && (L.style.position = Li)
        }, pq = function(q, e) {
            e.split || (e += "");
            for (var W, A = e.split("\n"), j = 0, o = A.length, r = 0; o > r; r++) {
                var F = bk(q.font, A[r]);
                F.width > j && (j = F.width),
                W || (W = F.height)
            }
            return q.ss = A,
            {
                width: j,
                height: W * o
            }
        }, Nl = function(N, r, Q, W, V, K) {
            var P = r.length;
            if (1 === P)
                jl(N, r[0], Q, W, V);
            else
                for (var T = Q.height / P, M = {
                    x: Q.x,
                    y: Q.y,
                    width: Q.width,
                    height: T
                }, R = 0; R < r.length; R++)
                    K ? Gg(N, r[R], W, V, M.x, M.y, M.width, M.height, K) : jl(N, r[R], M, W, V),
                    M.y += T
        }, jl = function(u, T, f, x, l) {
            u.font = x ? x : oi,
            u.fillStyle = l ? l : Ge,
            u.textAlign = Do,
            u.textBaseline = Ii;
            var O, c;
            f ? f.width === F ? (O = f.x,
            c = f.y) : (O = f.x + f.width / 2,
            c = f.y + f.height / 2) : (O = 0,
            c = 0),
            u.fillText(T, D(O), D(c))
        }, Si = function(O) {
            O.getView && (O = O.getView());
            var b = O.offsetWidth || O.scrollWidth;
            return !b && O.style.width && (b = p(O.style.width)),
            b
        }, qo = function(B) {
            B.getView && (B = B.getView());
            var U = B.offsetHeight || B.scrollHeight;
            return !U && B.style.height && (U = p(B.style.height)),
            U
        }, Ij = function(e, d, i) {
            var B = d[0].toUpperCase() + d.substring(1, d.length);
            e["webkit" + B] = i,
            e["moz" + B] = i,
            e["ms" + B] = i,
            e["o" + B] = i,
            e[d] = i
        }, Vm = function() {
            var K = function(L) {
                vh(L),
                L.stopPropagation()
            }
              , T = Nq ? [Xe] : [Pp, kl];
            return function(L) {
                var J = ff()
                  , S = J.style;
                return S.backgroundColor = j.disabledBackground,
                L && (S.backgroundImage = "url(" + L + ")",
                S.backgroundPosition = "50% 50%",
                S.backgroundRepeat = "no-repeat no-repeat"),
                T.forEach(function(f) {
                    J.addEventListener(f, K)
                }),
                J
            }
        }(), Zf = function(N) {
            var o = N.getContext("2d");
            return o.save(),
            o.lineCap = ee,
            o.lineJoin = tk,
            o
        }, Pk = function(V, m, C, J) {
            Sc(V, m * nk, C * nk),
            J *= nk,
            1 !== J && V.scale(J, J)
        }, Sc = function(C, o, L) {
            C.translate(o, L)
        }, wo = function(V, F) {
            F && V.rotate(F)
        }, di = function(k, Q, i) {
            Q === F && (Q = 1),
            i === F && (i = 1),
            (1 !== Q || 1 !== i) && k.scale(Q, i)
        }, ko = !1, Fl = function(x) {
            var t = s.activeElement;
            if (s.activeElement !== x) {
                t && t.forceOnblur && t.forceOnblur();
                for (var w = [], R = x.parentNode; R; )
                    w.push([R, R.scrollLeft, R.scrollTop]),
                    R = R.parentNode;
                if (!ko) {
                    var V = []
                      , g = [];
                    try {
                        for (var B = q.parent, A = q; B !== A; )
                            V.push([B, B.scrollX, B.scrollY]),
                            A = B,
                            B = q.parent;
                        var v = q.frameElement;
                        if (v)
                            for (var n = v.parentNode; n; )
                                g.push([n, n.scrollLeft, n.scrollTop]),
                                n = n.parentNode
                    } catch (I) {
                        ko = !0
                    }
                }
                if (Nq)
                    x.focus();
                else {
                    var C = Ib()
                      , U = C.target;
                    x.focus(),
                    U.scrollLeft = C.left,
                    U.scrollTop = C.top
                }
                w.forEach(function(W) {
                    W[0].scrollLeft = W[1],
                    W[0].scrollTop = W[2]
                }),
                ko || (V.forEach(function(Z) {
                    Z[0].scrollTo(Z[1], Z[2])
                }),
                g.forEach(function(m) {
                    m[0].scrollLeft = m[1],
                    m[0].scrollTop = m[2]
                }))
            }
        }, $k = function(M) {
            return M && M.getView ? M.getView() : M
        }, Pc = function(p, Z, u, X, V) {
            if (2 === arguments.length && (u = Z.y,
            X = Z.width,
            V = Z.height,
            Z = Z.x),
            p.isSelfViewEvent)
                p.setX(Z),
                p.setY(u),
                p.setWidth(X),
                p.setHeight(V);
            else {
                var f = $k(p)
                  , G = f.style;
                if ((s.fullscreenElement || s.mozFullScreenElement || s.webkitFullscreenElement || s.msFullscreenElement) !== f)
                    Z !== F && (G.left = Z + gn),
                    u !== F && (G.top = u + gn),
                    X !== F && (G.width = X + gn),
                    V !== F && (G.height = V + gn);
                else {
                    var J = j.getWindowInfo();
                    G.left = (Z = J.left) + gn,
                    G.top = (u = J.top) + gn,
                    G.width = (X = J.width) + gn,
                    G.height = (V = J.height) + gn
                }
                p.endEditing && !Nq && p.endEditing(),
                p.redraw && p.redraw(),
                p.invalidate && p.invalidate(),
                p.onLayouted && p.onLayouted(Z, u, X, V),
                p.fireViewEvent && p.fireViewEvent("layout")
            }
        }, Dd = function(J) {
            if (!J.touches)
                return J;
            var T = J.touches[0];
            return T ? T : J.changedTouches[0]
        }, Uc = function(m) {
            return Nq ? Dd(m).target : m.target
        }, mb = function(g) {
            j.popup && j.popup.close(),
            j.popup = g
        }, wq = V, Zi = function(h) {
            wq.handleWindowTouchMove(h)
        }, Dc = function(H) {
            wq.handleWindowTouchEnd(H),
            q.removeEventListener(Po, Zi, !1),
            q.removeEventListener(pj, Dc, !1),
            wq = V
        }, Rc = function(K) {
            wq.handleWindowMouseMove(K)
        }, Nf = function(L) {
            wq.handleWindowMouseUp(L),
            q.removeEventListener(Sq, Rc, !1),
            q.removeEventListener(ur, Nf, !1),
            wq = V
        }, Ml = function(z) {
            return 1 === mq(z)
        }, qr = function(g, w) {
            return w ? w.keyCode === g : Vj[g]
        }, Nd = function(i) {
            return jr(i) && qr(65, i)
        }, Sm = function(W) {
            return qr(46, W) || qr(8, W)
        }, Wk = function(V) {
            return function(d) {
                return d ? d.keyCode === V : Vj[V]
            }
        }, mm = 573, bd = [65, 83, 68, 87, 37, 38, 39, 40, 32, 13, 27], op = Wk(bd[0]), Pf = Wk(bd[1]), Om = Wk(bd[2]), Kk = Wk(bd[3]), Db = Wk(bd[4]), Xc = Wk(bd[5]), Hb = Wk(bd[6]), On = Wk(bd[7]), uc = Wk(bd[8]), uj = Wk(bd[9]), Kq = Wk(bd[10]), pd = {
            65: 1,
            83: 1,
            68: 1,
            87: 1,
            37: 1,
            38: 1,
            39: 1,
            40: 1
        }, Ab = [2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 3, 3, 3, 5, 5, 5, 5, 5, 8933], zb = V, Ym = V, Kj = function(j, h) {
            zb || (zb = qb()),
            ug(zb, j, h, 1);
            var l = Zf(zb);
            return l.clearRect(0, 0, j, h),
            l
        }, rc = function() {
            var P, U = {};
            for (var a in q) {
                var L = Fb.length;
                if (a.length == L && a[0] === Fb[2] && a[1] === uk[1] && a[4] === Fb[3] && a[5] === Fb[4] && a.substr(L - 2) === uk[1] + uk[2]) {
                    var V = q[a];
                    for (var d in V)
                        d.length === L && d.substr(0, 3) === yo[3] + gf[3] + qc[0] && d.substr(L - 2) === Fb[0] + yi[3] && (Wl = V[d])
                }
            }
            return function(e) {
                var V, s = U[e];
                return s || (P || (P = qb(),
                ug(P, 1, 1, 1)),
                V = P.getContext("2d"),
                V.clearRect(0, 0, 1, 1),
                he(V, 0, 0, 1, 1, e),
                s = V.getImageData(0, 0, 1, 1).data,
                s = U[e] = [s[0], s[1], s[2], s[3]]),
                s
            }
        }(), To = function(q) {
            if (!xe(q))
                return q;
            var N = rc(q);
            return N.CA || (N.CA = [N[0] / 255, N[1] / 255, N[2] / 255, N[3] / 255]),
            N.CA
        }, vc = function(Z, S, z, O, m) {
            var x = qb();
            x.width = z,
            x.height = O;
            var t = x.getContext("2d");
            t.drawImage(Z, 0, 0, z, O);
            try {
                for (var W = t.getImageData(0, 0, z, O), Q = W.data, a = 0, k = Q.length; k > a; a += 4) {
                    var f = Q[a + 0]
                      , R = Q[a + 1]
                      , s = Q[a + 2]
                      , i = Q[a + 3];
                    "override_a" === m ? Q[a + 3] = 255 * S[3] : "override_rgb" === m ? (Q[a + 0] = 255 * S[0],
                    Q[a + 1] = 255 * S[1],
                    Q[a + 2] = 255 * S[2]) : "override" === m ? (Q[a + 0] = 255 * S[0],
                    Q[a + 1] = 255 * S[1],
                    Q[a + 2] = 255 * S[2],
                    Q[a + 3] = 255 * S[3]) : (Q[a + 0] = S[0] * f,
                    Q[a + 1] = S[1] * R,
                    Q[a + 2] = S[2] * s,
                    Q[a + 3] = S[3] * i)
                }
                t.putImageData(W, 0, 0)
            } catch (B) {
                return Z
            }
            return x
        }, Tc = function(N, a, q) {
            return a && (a = "miter" === q ? 8 * a + 20 : a + 1,
            N && Qf(N, a)),
            a
        }, Af = function(a, $) {
            if ($) {
                var k = new yh($)
                  , f = a.width / 2
                  , h = a.height / 2
                  , t = Pr([k.tf(-f, -h), k.tf(f, -h), k.tf(f, h), k.tf(-f, h)]);
                return t.x += a.x + f,
                t.y += a.y + h,
                t
            }
            return a
        }, Wp = function(M, N, b, $, l, n, C, d) {
            $ *= Math.PI / 180;
            var _ = {
                x: Math.cos($) * (M.x - C.x) / 2 + Math.sin($) * (M.y - C.y) / 2,
                y: -Math.sin($) * (M.x - C.x) / 2 + Math.cos($) * (M.y - C.y) / 2
            }
              , R = Math.pow(_.x, 2) / Math.pow(N, 2) + Math.pow(_.y, 2) / Math.pow(b, 2);
            R > 1 && (N *= Math.sqrt(R),
            b *= Math.sqrt(R));
            var u = (l == n ? -1 : 1) * Math.sqrt((Math.pow(N, 2) * Math.pow(b, 2) - Math.pow(N, 2) * Math.pow(_.y, 2) - Math.pow(b, 2) * Math.pow(_.x, 2)) / (Math.pow(N, 2) * Math.pow(_.y, 2) + Math.pow(b, 2) * Math.pow(_.x, 2)));
            isNaN(u) && (u = 0);
            var D = {
                x: u * N * _.y / b,
                y: u * -b * _.x / N
            }
              , Q = {
                x: (M.x + C.x) / 2 + Math.cos($) * D.x - Math.sin($) * D.y,
                y: (M.y + C.y) / 2 + Math.sin($) * D.x + Math.cos($) * D.y
            }
              , W = function(A) {
                return Math.sqrt(Math.pow(A[0], 2) + Math.pow(A[1], 2))
            }
              , U = function(b, u) {
                return (b[0] * u[0] + b[1] * u[1]) / (W(b) * W(u))
            }
              , Z = function(c, n) {
                return (c[0] * n[1] < c[1] * n[0] ? -1 : 1) * Math.acos(U(c, n))
            }
              , t = Z([1, 0], [(_.x - D.x) / N, (_.y - D.y) / b])
              , c = [(_.x - D.x) / N, (_.y - D.y) / b]
              , a = [(-_.x - D.x) / N, (-_.y - D.y) / b]
              , K = Z(c, a);
            U(c, a) <= -1 && (K = Math.PI),
            U(c, a) >= 1 && (K = 0);
            var U = N > b ? N : b
              , H = N > b ? 1 : N / b
              , y = N > b ? b / N : 1;
            if (null == d) {
                var o = {
                    x: 0,
                    y: 0,
                    width: 0,
                    height: 0
                };
                Qf(o, U),
                o.x *= H,
                o.width *= H,
                o.y *= y,
                o.height *= y;
                var L = new yh($);
                return o = Pr([L.tf(o.x, o.y), L.tf(o.x + o.width, o.y), L.tf(o.x + o.width, o.y + o.height), L.tf(o.x, o.y + o.height)]),
                o.x += Q.x,
                o.y += Q.y,
                [{
                    x: o.x,
                    y: o.y
                }, {
                    x: o.x + o.width,
                    y: o.y
                }, {
                    x: o.x + o.width,
                    y: o.y + o.height
                }, {
                    x: o.x,
                    y: o.y + o.height
                }]
            }
            d.translate(Q.x, Q.y),
            d.rotate($),
            d.scale(H, y),
            d.arc(0, 0, U, t, t + K, 1 - n),
            d.scale(1 / H, 1 / y),
            d.rotate(-$),
            d.translate(-Q.x, -Q.y)
        }, nf = function(r, j) {
            r && r.beginPath();
            for (var B, K, Y, l = [], Z = function(Y) {
                for (var J, I = /(\-{0,1}[\d\.]+)/gi, B = []; J = I.exec(Y); )
                    B.push(parseFloat(J[0]));
                return B
            }, f = /([MmLlHhVvCcSsQqTtAa]{1}[\d\.,\s\-Zz]*)/gi, F = {
                x: 0,
                y: 0
            }; B = f.exec(j); ) {
                var M = B[0]
                  , p = M.substr(0, 1);
                if ("M" === p || "m" === p) {
                    for (var C = Z(M), R = 0; R < C.length; R += 2) {
                        var o = C[R]
                          , Q = C[R + 1];
                        "m" === p && (o += F.x,
                        Q += F.y),
                        r && r.moveTo(o, Q),
                        l.push({
                            x: o,
                            y: Q
                        }),
                        F.x = o,
                        F.y = Q
                    }
                    K = Y = null
                } else if ("H" === p || "h" === p) {
                    for (var C = Z(M), R = 0; R < C.length; R += 1) {
                        var o = C[R];
                        "h" === p && (o += F.x),
                        r && r.lineTo(o, F.y),
                        l.push({
                            x: o,
                            y: F.y
                        }),
                        F.x = o
                    }
                    K = Y = null
                } else if ("C" === p || "c" === p) {
                    for (var C = Z(M), R = 0; R < C.length; R += 6) {
                        var L = C[R]
                          , q = C[R + 1]
                          , v = C[R + 2]
                          , w = C[R + 3]
                          , o = C[R + 4]
                          , Q = C[R + 5];
                        "c" === p && (L += F.x,
                        q += F.y,
                        v += F.x,
                        w += F.y,
                        o += F.x,
                        Q += F.y),
                        r && r.bezierCurveTo(L, q, v, w, o, Q),
                        l.push({
                            x: L,
                            y: q
                        }),
                        l.push({
                            x: v,
                            y: w
                        }),
                        l.push({
                            x: o,
                            y: Q
                        }),
                        F.x = o,
                        F.y = Q
                    }
                    K = [L, q, v, w, o, Q],
                    Y = null
                } else if ("S" === p || "s" === p) {
                    for (var C = Z(M), R = 0; R < C.length; R += 4) {
                        var L, q;
                        K ? (L = 2 * K[4] - K[2],
                        q = 2 * K[5] - K[3]) : (L = F.x,
                        q = F.y);
                        var v = C[R]
                          , w = C[R + 1]
                          , o = C[R + 2]
                          , Q = C[R + 3];
                        "s" === p && (v += F.x,
                        w += F.y,
                        o += F.x,
                        Q += F.y),
                        r && r.bezierCurveTo(L, q, v, w, o, Q),
                        l.push({
                            x: L,
                            y: q
                        }),
                        l.push({
                            x: v,
                            y: w
                        }),
                        l.push({
                            x: o,
                            y: Q
                        }),
                        F.x = o,
                        F.y = Q
                    }
                    K = [L, q, v, w, o, Q],
                    Y = null
                } else if ("Q" === p || "q" === p) {
                    for (var C = Z(M), R = 0; R < C.length; R += 4) {
                        var L = C[R]
                          , q = C[R + 1]
                          , o = C[R + 2]
                          , Q = C[R + 3];
                        "q" === p && (L += F.x,
                        q += F.y,
                        o += F.x,
                        Q += F.y),
                        r && r.quadraticCurveTo(L, q, o, Q),
                        l.push({
                            x: L,
                            y: q
                        }),
                        l.push({
                            x: o,
                            y: Q
                        }),
                        F.x = o,
                        F.y = Q
                    }
                    K = null,
                    Y = [L, q, o, Q]
                } else if ("T" === p || "t" === p) {
                    for (var C = Z(M), R = 0; R < C.length; R += 2) {
                        var L, q;
                        Y ? (L = 2 * Y[2] - Y[0],
                        q = 2 * Y[3] - Y[1]) : (L = F.x,
                        q = F.y);
                        var o = C[R]
                          , Q = C[R + 1];
                        "t" === p && (o += F.x,
                        Q += F.y),
                        r && r.quadraticCurveTo(L, q, o, Q),
                        l.push({
                            x: L,
                            y: q
                        }),
                        l.push({
                            x: o,
                            y: Q
                        }),
                        F.x = o,
                        F.y = Q
                    }
                    K = null,
                    Y = [L, q, o, Q]
                } else if ("V" === p || "v" === p) {
                    for (var C = Z(M), R = 0; R < C.length; R += 1) {
                        var Q = C[R];
                        "v" === p && (Q += F.y),
                        r && r.lineTo(F.x, Q),
                        l.push({
                            x: F.x,
                            y: Q
                        }),
                        F.y = Q
                    }
                    K = Y = null
                } else if ("L" === p || "l" === p) {
                    for (var C = Z(M), R = 0; R < C.length; R += 2) {
                        var o = C[R]
                          , Q = C[R + 1];
                        "l" === p && (o += F.x,
                        Q += F.y),
                        r && r.lineTo(o, Q),
                        l.push({
                            x: o,
                            y: Q
                        }),
                        F.x = o,
                        F.y = Q
                    }
                    K = Y = null
                } else if ("A" === p || "a" === p) {
                    for (var C = Z(M), R = 0; R < C.length; R += 7) {
                        var i = C[R]
                          , d = C[R + 1]
                          , J = C[R + 2]
                          , m = C[R + 3]
                          , W = C[R + 4]
                          , o = C[R + 5]
                          , Q = C[R + 6];
                        "a" === p && (o += F.x,
                        Q += F.y);
                        var O = Wp(F, i, d, J, m, W, {
                            x: o,
                            y: Q
                        }, r);
                        O && (l = l.concat(O)),
                        F.x = o,
                        F.y = Q
                    }
                    K = Y = null
                }
                var S = M.substr(M.length - 1);
                ("z" === S || "Z" === S) && r && r.closePath()
            }
            return l
        }, go = function(E, i) {
            var q, U, N = "L" === i[0], k = i.length;
            for (E.save(),
            N ? (E.transform(i[5], i[6], i[7], i[8], i[9], i[10]),
            q = E.createLinearGradient(i[1], i[2], i[3], i[4]),
            U = 11) : (E.transform(i[7], i[8], i[9], i[10], i[11], i[12]),
            q = E.createRadialGradient(i[1], i[2], i[3], i[4], i[5], i[6]),
            U = 13); k > U; )
                q.addColorStop(i[U], i[U + 1]),
                U += 2;
            E.fillStyle = q
        }, _n = function(i, m) {
            var S = i.s("shape.gradient.pack");
            if (S) {
                for (var u = S.length, H = new Array(u), $ = 0; u > $; $++)
                    H[$] = S[$];
                var w, M, J, e, Z, L, f, g, t, d, G, T, D, C = "L" === H[0];
                w = C ? 5 : 7,
                M = H[w],
                J = H[w + 1],
                e = H[w + 2],
                Z = H[w + 3],
                L = H[w + 4],
                f = H[w + 5],
                g = m[0],
                t = m[1],
                d = m[2],
                G = m[3],
                T = m[4],
                D = m[5],
                H[w] = g * M + d * J,
                H[w + 1] = t * M + G * J,
                H[w + 2] = g * e + d * Z,
                H[w + 3] = t * e + G * Z,
                H[w + 4] = g * L + d * f + T,
                H[w + 5] = t * L + G * f + D,
                i.s("shape.gradient.pack", H)
            }
        }, jn = function(k, M, n, U) {
            var v = !1;
            if (k.beginPath ? k.beginPath() : v = !0,
            Gl(M) && (M = M._as),
            Gl(n) && (n = n._as),
            n && n.length) {
                for (var w, C, K, B, y = 0, J = 0, z = n.length; z > J; J++)
                    w = n[J],
                    1 === w ? (C = M[y++],
                    k.moveTo(C.x, v ? -C.y : C.y)) : 2 === w ? (C = M[y++],
                    k.lineTo(C.x, v ? -C.y : C.y)) : 3 === w ? (C = M[y++],
                    K = M[y++],
                    k.quadraticCurveTo(C.x, v ? -C.y : C.y, K.x, v ? -K.y : K.y)) : 4 === w ? (C = M[y++],
                    K = M[y++],
                    B = M[y++],
                    k.bezierCurveTo(C.x, v ? -C.y : C.y, K.x, v ? -K.y : K.y, B.x, v ? -B.y : B.y)) : 5 === w && k.closePath();
                U && 5 !== w && k.closePath()
            } else {
                var c, X, x, $ = M.length;
                if ($ > 0) {
                    for (c = M[0],
                    k.moveTo(c.x, v ? -c.y : c.y),
                    X = 1; $ > X; X++)
                        x = M[X],
                        k.lineTo(x.x, v ? -x.y : x.y);
                    U && k.closePath()
                }
            }
        }, Gm = function(h, p, R, l) {
            if (Gl(h) && (h = h._as),
            Gl(p) && (p = p._as),
            p && p.length) {
                R = R || Rd;
                for (var r, m, u, $, N, t, T, M, n = [], K = V, W = 0, q = 0, P = p.length; P > q; q++)
                    if (r = p[q],
                    1 === r)
                        n.push(K = []),
                        K.push(h[W++]);
                    else if (2 === r)
                        K.push(h[W++]);
                    else if (3 === r) {
                        for (m = K[K.length - 1],
                        u = h[W++],
                        $ = h[W++],
                        t = 1; R > t; t++)
                            T = Ro(t / R, m.x, u.x, $.x),
                            M = Ro(t / R, m.y, u.y, $.y),
                            K.push({
                                x: T,
                                y: M,
                                b: !0
                            });
                        K.push($)
                    } else if (4 === r) {
                        for (m = K[K.length - 1],
                        u = h[W++],
                        $ = h[W++],
                        N = h[W++],
                        t = 1; R > t; t++)
                            T = Qi(t / R, m.x, u.x, $.x, N.x),
                            M = Qi(t / R, m.y, u.y, $.y, N.y),
                            K.push({
                                x: T,
                                y: M,
                                b: !0
                            });
                        K.push(N)
                    } else
                        5 === r && K.push(K[0]);
                return l && 5 !== r && K && K.length > 2 && K.push(K[0]),
                n
            }
            return l && h.length > 2 && (h = h.slice(),
            h.push(h[0])),
            h ? [h] : []
        }, Tq = function(F, G, c, P, H, t) {
            var h, d, T, x = rc(G), O = P, B = x[0], e = x[1], J = x[2];
            if (c) {
                var U = rc(c);
                h = U[0] - B,
                d = U[1] - e,
                T = U[2] - J
            } else
                h = 255 - B,
                d = 255 - e,
                T = 255 - J;
            for (t || (t = P > 10 ? 1 : .5,
            t = 1 > H ? b(t / H, 2) : t); (P -= t) > 0; ) {
                var M = 1 - P / O
                  , X = B + h * M
                  , s = e + d * M
                  , m = J + T * M;
                X = b(I(X), 255),
                s = b(I(s), 255),
                m = b(I(m), 255),
                F.strokeStyle = "rgb(" + X + "," + s + "," + m + ")",
                F.lineWidth = P,
                F.stroke()
            }
        }, Yf = function() {
            var x = {};
            return function(r, A) {
                var f = r + "-" + A
                  , m = x[f];
                if (m)
                    return m;
                var C, G, c, k = rc(r);
                return 0 > A ? (A = (100 + A) / 100,
                C = I(k[0] * A),
                G = I(k[1] * A),
                c = I(k[2] * A)) : (A /= 100,
                C = k[0],
                G = k[1],
                c = k[2],
                C += (255 - C) * A,
                G += (255 - G) * A,
                c += (255 - c) * A,
                C = b(I(C), 255),
                G = b(I(G), 255),
                c = b(I(c), 255)),
                x[f] = "rgb(" + C + "," + G + "," + c + ")"
            }
        }(), he = function($, s, C, W, B, L) {
            L && ($.fillStyle = L),
            $.beginPath(),
            $.rect(s, C, W, B),
            $.fill()
        }, eg = function(Z, e, I, L, Q, n, W) {
            Z.beginPath(),
            jk[e](Z, I.x, I.y, I.width, I.height, L, Q, n, W)
        }, qh = function($, q, H, m, n) {
            var l = jk[H];
            $.fillStyle = l ? l($, q, m ? m : ac, n.x, n.y, n.width, n.height) : q
        }, ln = function(O, d, D, v, f, J) {
            try {
                if (!d.tagName && d.comps) {
                    d._cacheImage_ || (d._cacheImage_ = {});
                    var H;
                    H = "override" === v ? "colors_override" : "override_rgb" === v ? "colors_override_rgb" : "override_a" === v ? "colors_override_a" : "colors",
                    d._cacheImage_[H] || (d._cacheImage_[H] = {
                        __count__: 0
                    });
                    var P = d._cacheImage_[H][D];
                    P || (d._cacheImage_[H].__count__ > j.imageCacheThreshold && (d._cacheImage_[H] = {
                        __count__: 0
                    }),
                    P = C.Default.toCanvas(d, Cm(d), Hi(d), null, f, J, D, null, v),
                    d._cacheImage_[H][D] = P,
                    d._cacheImage_[H].__count__++),
                    d = P
                }
                O.fillStyle = O.createPattern(d, "repeat")
            } catch (R) {
                O.fillStyle = "black"
            }
        }, _d = function(j, F, o, p, q, _, h) {
            j.save(),
            j.translate(F, o),
            j.scale(1, h / _),
            j.arc(0, 0, _, p, q),
            j.restore()
        }, cg = function(s, g, H, w, G, l, S, p) {
            var C, A, X, c, V, Y, q, y, Z, o, W;
            if (t(G) > 2 * L && (G = 2 * L),
            V = I(t(G) / (L / 4)),
            C = G / V,
            A = -C,
            X = -w,
            V > 0) {
                Y = g + z(w) * l,
                q = H + E(-w) * S,
                p ? s.lineTo(Y, q) : s.moveTo(Y, q);
                for (var B = 0; V > B; B++)
                    X += A,
                    c = X - A / 2,
                    y = g + z(X) * l,
                    Z = H + E(X) * S,
                    o = g + z(c) * (l / z(A / 2)),
                    W = H + E(c) * (S / z(A / 2)),
                    s.quadraticCurveTo(o, W, y, Z)
            }
        }, Wi = function(g, Z, a, A, o, G, L, Q, C) {
            6 === arguments.length && (L = G,
            Q = G,
            C = G);
            var y = Z + A
              , v = a + o
              , r = o > A ? 2 * A : 2 * o;
            G = r > G ? G : r,
            L = r > L ? L : r,
            Q = r > Q ? Q : r,
            C = r > C ? C : r;
            var t = .29 * C
              , D = .58 * C;
            g.moveTo(y, v - C),
            g.quadraticCurveTo(y, v - D, y - t, v - t),
            g.quadraticCurveTo(y - D, v, y - C, v),
            t = .29 * Q,
            D = .58 * Q,
            g.lineTo(Z + Q, v),
            g.quadraticCurveTo(Z + D, v, Z + t, v - t),
            g.quadraticCurveTo(Z, v - D, Z, v - Q),
            t = .29 * G,
            D = .58 * G,
            g.lineTo(Z, a + G),
            g.quadraticCurveTo(Z, a + D, Z + t, a + t),
            g.quadraticCurveTo(Z + D, a, Z + G, a),
            t = .29 * L,
            D = .58 * L,
            g.lineTo(y - L, a),
            g.quadraticCurveTo(y - D, a, y - t, a + t),
            g.quadraticCurveTo(y, a + D, y, a + L),
            g.lineTo(y, v - C)
        }, Mo = function(s, c, V, Z, y, g, v) {
            c && (V = D(V),
            Z = D(Z),
            v || (v = 1),
            s.fillStyle = c,
            s.beginPath(),
            s.rect(V, Z, v, g),
            s.rect(V, Z, y, v),
            g - v > 0 && s.rect(V, Z + g - v, y, v),
            y - v > 0 && s.rect(V + y - v, Z, v, g),
            s.fill())
        }, gb = function(m, L, Y, n) {
            var U = n.x
              , S = n.y
              , s = n.width
              , y = n.height;
            if (!(!L || !Y || 0 >= s || 0 >= y)) {
                var Z, I = wc(L), T = hn(L), W = Y > 0;
                1 === Y || -1 === Y ? (m.fillStyle = W ? I : T,
                m.beginPath(),
                m.rect(U, S, 1, y),
                m.rect(U, S, s, 1),
                m.fill(),
                m.fillStyle = W ? T : I,
                m.beginPath(),
                m.rect(U, S + y - 1, s, 1),
                m.rect(U + s - 1, S, 1, y),
                m.fill()) : (Y = b(t(Y), b(s / 2, y / 2)),
                Z = m.createLinearGradient(U, S, U + Y, S),
                Z.addColorStop(0, W ? I : T),
                Z.addColorStop(1, L),
                m.fillStyle = Z,
                m.beginPath(),
                m.moveTo(U, S),
                m.lineTo(U + Y, S + Y),
                m.lineTo(U + Y, S + y - Y),
                m.lineTo(U, S + y),
                m.lineTo(U, S),
                m.fill(),
                Z = m.createLinearGradient(U, S, U, S + Y),
                Z.addColorStop(0, W ? I : T),
                Z.addColorStop(1, L),
                m.fillStyle = Z,
                m.beginPath(),
                m.moveTo(U, S),
                m.lineTo(U + Y, S + Y),
                m.lineTo(U + s - Y, S + Y),
                m.lineTo(U + s, S),
                m.lineTo(U, S),
                m.fill(),
                Z = m.createLinearGradient(U, S + y, U, S + y - Y),
                Z.addColorStop(0, W ? T : I),
                Z.addColorStop(1, L),
                m.fillStyle = Z,
                m.beginPath(),
                m.moveTo(U, S + y),
                m.lineTo(U + Y, S + y - Y),
                m.lineTo(U + s - Y, S + y - Y),
                m.lineTo(U + s, S + y),
                m.lineTo(U, S + y),
                m.fill(),
                Z = m.createLinearGradient(U + s, S, U + s - Y, S),
                Z.addColorStop(0, W ? T : I),
                Z.addColorStop(1, L),
                m.fillStyle = Z,
                m.beginPath(),
                m.moveTo(U + s, S),
                m.lineTo(U + s - Y, S + Y),
                m.lineTo(U + s - Y, S + y - Y),
                m.lineTo(U + s, S + y),
                m.lineTo(U + s, S),
                m.fill())
            }
        }, cc = function(s, S, A, z, B, p, J) {
            var H = s.createLinearGradient(z, B, p, J);
            return H.addColorStop(0, A),
            H.addColorStop(1, S),
            H
        }, pk = function(B, r, x, b, j, $, R) {
            var W = B.createLinearGradient(b, j, $, R);
            return W.addColorStop(0, r),
            W.addColorStop(.5, x),
            W.addColorStop(1, r),
            W
        }, as = function(w, M, L, _, f, r, R) {
            var o = w.createLinearGradient(_, f, r, R);
            return o.addColorStop(0, M),
            o.addColorStop(1 / 3, L),
            o.addColorStop(2 / 3, M),
            o.addColorStop(1, L),
            o
        }, Ob = function(h, T, u, W, H, w, s, n, I) {
            var t = h.createRadialGradient(W + w * n, H + s * I, b(w, s) / 24, W + w / 2, H + s / 2, X(w, s) / 2);
            return t.addColorStop(0, u),
            t.addColorStop(1, T),
            t
        }, jk = {
            polygon: function(S, D, X, x, F, g) {
                (g == V || 3 > g) && (g = 6);
                for (var r, A, J = b(x, F) / 2, c = D + x / 2, l = X + F / 2, i = 0, w = 2 * L / g, W = 0; g > W; W++)
                    r = c + z(i) * J,
                    A = l + E(i) * J,
                    0 === W ? S.moveTo(r, A) : S.lineTo(r, A),
                    i += w;
                S.closePath()
            },
            arc: function(M, i, F, o, p, g, I, K, t) {
                g == V && (g = L),
                I == V && (I = u),
                K == V && (K = !0);
                var N = i + o / 2
                  , c = F + p / 2;
                K && M.moveTo(N, c),
                t ? _d(M, N, c, g, I, o / 2, p / 2) : M.arc(N, c, b(o, p) / 2, g, I),
                K && M.closePath()
            },
            rect: function(B, r, I, F, s) {
                B.rect(r, I, F, s)
            },
            circle: function(c, e, I, W, g) {
                c.arc(e + W / 2, I + g / 2, b(W, g) / 2, 0, u, !0)
            },
            oval: function(G, w, c, F, L) {
                _d(G, w + F / 2, c + L / 2, 0, u, F / 2, L / 2)
            },
            roundRect: function(o, T, n, N, J, k) {
                k == V && (k = b(b(N, J) / 4, 8)),
                Wi(o, T, n, N, J, k)
            },
            star: function(l, F, q, y, x) {
                var c = 2 * y
                  , f = 2 * x
                  , v = F + y / 2
                  , V = q + x / 2;
                l.moveTo(v - c / 4, V - f / 12),
                l.lineTo(F + .306 * y, q + .579 * x),
                l.lineTo(v - c / 6, V + f / 4),
                l.lineTo(F + y / 2, q + .733 * x),
                l.lineTo(v + c / 6, V + f / 4),
                l.lineTo(F + .693 * y, q + .579 * x),
                l.lineTo(v + c / 4, V - f / 12),
                l.lineTo(F + .611 * y, q + .332 * x),
                l.lineTo(v + 0, V - f / 4),
                l.lineTo(F + .388 * y, q + .332 * x),
                l.closePath()
            },
            triangle: function(O, G, $, h, U) {
                O.moveTo(G + h / 2, $),
                O.lineTo(G + h, $ + U),
                O.lineTo(G, $ + U),
                O.closePath()
            },
            hexagon: function(E, u, e, Q, P) {
                E.moveTo(u, e + P / 2),
                E.lineTo(u + Q / 4, e + P),
                E.lineTo(u + 3 * Q / 4, +e + P),
                E.lineTo(u + Q, e + P / 2),
                E.lineTo(u + 3 * Q / 4, e),
                E.lineTo(u + Q / 4, e),
                E.closePath()
            },
            pentagon: function(w, H, Q, N, m) {
                var a = 2 * N
                  , h = 2 * m
                  , G = H + N / 2
                  , E = Q + m / 2;
                w.moveTo(G - a / 4, E - h / 12),
                w.lineTo(G - a / 6, E + h / 4),
                w.lineTo(G + a / 6, E + h / 4),
                w.lineTo(G + a / 4, E - h / 12),
                w.lineTo(G + 0, E - h / 4),
                w.closePath()
            },
            diamond: function($, f, U, L, i) {
                $.moveTo(f + L / 2, U),
                $.lineTo(f, U + i / 2),
                $.lineTo(f + L / 2, U + i),
                $.lineTo(f + L, U + i / 2),
                $.closePath()
            },
            rightTriangle: function(B, n, $, K, G) {
                B.moveTo(n, $),
                B.lineTo(n + K, $ + G),
                B.lineTo(n, $ + G),
                B.closePath()
            },
            parallelogram: function(m, p, Y, x, t) {
                var W = x / 4;
                m.moveTo(p + W, Y),
                m.lineTo(p + x, Y),
                m.lineTo(p + x - W, Y + t),
                m.lineTo(p, Y + t),
                m.closePath()
            },
            trapezoid: function(n, p, f, z, T) {
                var X = z / 4;
                n.moveTo(p + X, f),
                n.lineTo(p + z - X, f),
                n.lineTo(p + z, f + T),
                n.lineTo(p, f + T),
                n.closePath()
            },
            "linear.southwest": function(O, r, A, s, g, G, u) {
                return cc(O, r, A, s, g + u, s + G, g)
            },
            "linear.southeast": function(q, l, p, U, Y, z, n) {
                return cc(q, l, p, U + z, Y + n, U, Y)
            },
            "linear.northwest": function(g, n, w, K, A, k, N) {
                return cc(g, n, w, K, A, K + k, A + N)
            },
            "linear.northeast": function(n, W, s, c, m, Y, r) {
                return cc(n, W, s, c + Y, m, c, m + r)
            },
            "linear.north": function(U, u, q, A, z, i, d) {
                return cc(U, u, q, A, z, A, z + d)
            },
            "linear.south": function(U, d, W, b, E, Q, X) {
                return cc(U, d, W, b, E + X, b, E)
            },
            "linear.west": function(R, d, u, f, p, L) {
                return cc(R, d, u, f, p, f + L, p)
            },
            "linear.east": function(Z, n, k, Y, E, z) {
                return cc(Z, n, k, Y + z, E, Y, E)
            },
            "radial.center": function(E, y, g, Q, A, R, v) {
                return Ob(E, y, g, Q, A, R, v, .5, .5)
            },
            "radial.southwest": function(V, o, b, B, E, u, M) {
                return Ob(V, o, b, B, E, u, M, .25, .75)
            },
            "radial.southeast": function(i, u, L, C, $, b, o) {
                return Ob(i, u, L, C, $, b, o, .75, .75)
            },
            "radial.northwest": function(S, n, s, b, A, T, L) {
                return Ob(S, n, s, b, A, T, L, .25, .25)
            },
            "radial.northeast": function(J, A, a, E, T, K, L) {
                return Ob(J, A, a, E, T, K, L, .75, .25)
            },
            "radial.north": function(L, $, J, B, g, V, l) {
                return Ob(L, $, J, B, g, V, l, .5, .25)
            },
            "radial.south": function(o, S, n, z, h, x, i) {
                return Ob(o, S, n, z, h, x, i, .5, .75)
            },
            "radial.west": function(r, G, Z, K, E, R, q) {
                return Ob(r, G, Z, K, E, R, q, .25, .5)
            },
            "radial.east": function(y, P, J, f, c, K, I) {
                return Ob(y, P, J, f, c, K, I, .75, .5)
            },
            "spread.horizontal": function(D, G, n, s, z, M) {
                return pk(D, G, n, s, z, s + M, z)
            },
            "spread.vertical": function(A, J, y, _, t, Z, l) {
                return pk(A, J, y, _, t, _, t + l)
            },
            "spread.diagonal": function(f, L, p, z, C, U, h) {
                return pk(f, L, p, z + U, C, z, C + h)
            },
            "spread.antidiagonal": function(u, B, s, M, v, R, x) {
                return pk(u, B, s, M, v, M + R, v + x)
            },
            "spread.north": function(U, J, W, O, k, m, p) {
                return as(U, J, W, O, k - p / 4, O, k + p + p / 4)
            },
            "spread.south": function(O, c, G, $, Z, q, g) {
                return as(O, G, c, $, Z - g / 4, $, Z + g + g / 4)
            },
            "spread.west": function(d, O, D, x, S, g) {
                return as(d, O, D, x - g / 4, S, x + g + g / 4, S)
            },
            "spread.east": function(b, L, V, C, h, O) {
                return as(b, V, L, C - O / 4, h, C + O + O / 4, h)
            }
        }, $h = function(z, C, O) {
            return new yh(z).tf(C, O)
        }, wi = function(D) {
            var n = D.touches[0]
              , B = D.touches[1]
              , z = n.clientX
              , j = n.clientY
              , P = B.clientX
              , i = B.clientY;
            return r((z - P) * (z - P) + (j - i) * (j - i))
        }, cr = (function() {
            for (var s = 0, v = hf.split(""), g = 0; g < v.length; g++)
                s = 10 * p(v[g]) + s;
            return Io(q[mm.toString(8 * g) + Pd.substr(g) + 2]),
            s
        }(),
        function(x, L, l) {
            for (var I = 0; I < l.size(); I++) {
                var K = l.get(I);
                x.co(K) && L.add(K)
            }
            for (I = 0; I < l.size(); I++)
                K = l.get(I),
                cr(x, L, K._children)
        }
        ), cm = function(o, g, E) {
            for (var V = 0; V < E.size(); V++) {
                var O = E.get(E.size() - 1 - V);
                o.co(O) && g.add(O)
            }
            for (V = 0; V < E.size(); V++)
                O = E.get(V),
                cm(o, g, O._children)
        }, an = function(n, H, q) {
            for (var _ = !1, k = 0; k < q.size(); k++) {
                var b = q.get(k);
                n.co(b) ? _ && H.add(b) : _ = 1
            }
            for (k = 0; k < q.size(); k++)
                b = q.get(k),
                an(n, H, b._children)
        }, Jc = function(T, J, M) {
            for (var p = !1, A = 0; A < M.size(); A++) {
                var g = M.get(M.size() - 1 - A);
                T.co(g) ? p && J.add(g) : p = !0
            }
            for (A = 0; A < M.size(); A++)
                g = M.get(A),
                Jc(T, J, g._children)
        }, Yb = function($, S, f, g) {
            var Y = g == V;
            if (0 !== S || 0 !== f || !Y && 0 !== g) {
                var u, L, W, x, T, J = new Vr;
                $.each(function(j) {
                    if (xj(j)) {
                        var I = !0;
                        if (W)
                            for (u = 0; u < W.size(); u++)
                                L = W.get(u),
                                L.isHostOn(j) ? (W.removeAt(u),
                                u--,
                                J.remove(L)) : I && (j.isHostOn(L) || j.isLoopedHostOn(L)) && (I = !1);
                        if (x)
                            for (u = 0; u < x.size(); u++)
                                L = x.get(u),
                                Rh(L, j) ? (x.removeAt(u),
                                u--,
                                J.remove(L)) : I && Rh(j, L) && (I = !1);
                        if (T)
                            for (u = 0; u < T.size(); u++)
                                L = T.get(u),
                                Hf(L, j) ? (T.removeAt(u),
                                u--,
                                J.remove(L)) : I && Hf(j, L) && (I = !1);
                        I && (J.add(j),
                        (j._host || j._69O) && (W || (W = new Vr),
                        W.add(j)),
                        (fm(j) || fm(j._parent)) && (x || (x = new Vr),
                        x.add(j)),
                        (rd(j) || rd(j._parent)) && (T || (T = new Vr),
                        T.add(j)))
                    } else if (vb(j) && j.s(bp) === Se) {
                        var e = j.s(No);
                        if (e && !e.isEmpty()) {
                            var Q = new Vr;
                            e.each(function(a) {
                                a = nc(a),
                                Y ? (a.x += S,
                                a.y += f) : (a.x += S,
                                a.y += g,
                                a.e == V ? a.e = f : a.e += f),
                                Q.add(a)
                            }),
                            j.s(No, Q)
                        }
                    }
                }),
                J.each(function(H) {
                    Y ? H.translate(S, f) : H.translate3d(S, f, g)
                })
            }
        }, Ll = function(s, Z) {
            for (; s && !s.hasOwnProperty(Z); )
                s = m.getPrototypeOf(s);
            return s && m.getOwnPropertyDescriptor(s, Z)
        }, yp = m.getPrototypeOf ? function(E, S, W) {
            var Y = Ll(S, W);
            Y && m.defineProperty(E, W, Y)
        }
        : function(M, p, w) {
            M[w] = p[w]
        }
        , hs = {
            1: 29,
            2: 30,
            3: 31,
            4: 32,
            5: 33,
            6: 26,
            7: 27,
            8: 28,
            9: 21,
            10: 22,
            11: 23,
            12: 24,
            13: 25,
            14: 14,
            15: 15,
            16: 16,
            17: 17,
            18: 18,
            19: 19,
            20: 20,
            21: 9,
            22: 10,
            23: 11,
            24: 12,
            25: 13,
            26: 6,
            27: 7,
            28: 8,
            29: 1,
            30: 2,
            31: 3,
            32: 4,
            33: 5,
            34: 36,
            35: 37,
            36: 34,
            37: 35,
            38: 54,
            39: 55,
            40: 52,
            41: 53,
            42: 50,
            43: 51,
            44: 49,
            50: 42,
            51: 43,
            52: 40,
            53: 41,
            54: 38,
            55: 39
        }, sg = function() {
            var Q = {
                1: function(v, i) {
                    return {
                        x: v.x - i.width / 2,
                        y: v.y - i.height / 2
                    }
                },
                2: function(E, e) {
                    return {
                        x: E.x + e.width / 2,
                        y: E.y - e.height / 2
                    }
                },
                3: function(l, F) {
                    return {
                        x: l.x + l.width / 2,
                        y: l.y - F.height / 2
                    }
                },
                4: function(S, R) {
                    return {
                        x: S.x + S.width - R.width / 2,
                        y: S.y - R.height / 2
                    }
                },
                5: function(K, L) {
                    return {
                        x: K.x + K.width + L.width / 2,
                        y: K.y - L.height / 2
                    }
                },
                6: function(G) {
                    return {
                        x: G.x,
                        y: G.y
                    }
                },
                7: function(N) {
                    return {
                        x: N.x + N.width / 2,
                        y: N.y
                    }
                },
                8: function(j) {
                    return {
                        x: j.x + j.width,
                        y: j.y
                    }
                },
                9: function(c, X) {
                    return {
                        x: c.x - X.width / 2,
                        y: c.y + X.height / 2
                    }
                },
                10: function(a, s) {
                    return {
                        x: a.x + s.width / 2,
                        y: a.y + s.height / 2
                    }
                },
                11: function(W, k) {
                    return {
                        x: W.x + W.width / 2,
                        y: W.y + k.height / 2
                    }
                },
                12: function(U, S) {
                    return {
                        x: U.x - S.width / 2 + U.width,
                        y: U.y + S.height / 2
                    }
                },
                13: function(f, h) {
                    return {
                        x: f.x + f.width + h.width / 2,
                        y: f.y + h.height / 2
                    }
                },
                14: function(f, x) {
                    return {
                        x: f.x - x.width / 2,
                        y: f.y + f.height / 2
                    }
                },
                15: function(z) {
                    return {
                        x: z.x,
                        y: z.y + z.height / 2
                    }
                },
                16: function(M, v) {
                    return {
                        x: M.x + v.width / 2,
                        y: M.y + M.height / 2
                    }
                },
                17: function(l) {
                    return {
                        x: l.x + l.width / 2,
                        y: l.y + l.height / 2
                    }
                },
                18: function(R, k) {
                    return {
                        x: R.x + R.width - k.width / 2,
                        y: R.y + R.height / 2
                    }
                },
                19: function(Y) {
                    return {
                        x: Y.x + Y.width,
                        y: Y.y + Y.height / 2
                    }
                },
                20: function(n, h) {
                    return {
                        x: n.x + n.width + h.width / 2,
                        y: n.y + n.height / 2
                    }
                },
                21: function(C, L) {
                    return {
                        x: C.x - L.width / 2,
                        y: C.y + C.height - L.height / 2
                    }
                },
                22: function(p, w) {
                    return {
                        x: p.x + w.width / 2,
                        y: p.y + p.height - w.height / 2
                    }
                },
                23: function(A, v) {
                    return {
                        x: A.x + A.width / 2,
                        y: A.y + A.height - v.height / 2
                    }
                },
                24: function(U, e) {
                    return {
                        x: U.x + U.width - e.width / 2,
                        y: U.y + U.height - e.height / 2
                    }
                },
                25: function(t, j) {
                    return {
                        x: t.x + t.width + j.width / 2,
                        y: t.y + t.height - j.height / 2
                    }
                },
                26: function(g) {
                    return {
                        x: g.x,
                        y: g.y + g.height
                    }
                },
                27: function(K) {
                    return {
                        x: K.x + K.width / 2,
                        y: K.y + K.height
                    }
                },
                28: function(Z) {
                    return {
                        x: Z.x + Z.width,
                        y: Z.y + Z.height
                    }
                },
                29: function(q, p) {
                    return {
                        x: q.x - p.width / 2,
                        y: q.y + q.height + p.height / 2
                    }
                },
                30: function(g, C) {
                    return {
                        x: g.x + C.width / 2,
                        y: g.y + g.height + C.height / 2
                    }
                },
                31: function(u, F) {
                    return {
                        x: u.x + u.width / 2,
                        y: u.y + u.height + F.height / 2
                    }
                },
                32: function(k, N) {
                    return {
                        x: k.x + k.width - N.width / 2,
                        y: k.y + k.height + N.height / 2
                    }
                },
                33: function(m, S) {
                    return {
                        x: m.x + m.width + S.width / 2,
                        y: m.y + m.height + S.height / 2
                    }
                },
                34: function(p, x) {
                    return {
                        x: p.x,
                        y: p.y - x.height / 2
                    }
                },
                35: function(F, v) {
                    return {
                        x: F.x + F.width,
                        y: F.y - v.height / 2
                    }
                },
                36: function(O, p) {
                    return {
                        x: O.x,
                        y: O.y + O.height + p.height / 2
                    }
                },
                37: function(P, z) {
                    return {
                        x: P.x + P.width,
                        y: P.y + P.height + z.height / 2
                    }
                },
                38: function(P, B) {
                    return {
                        x: P.x + P.width / 4,
                        y: P.y - B.height / 2
                    }
                },
                39: function($, d) {
                    return {
                        x: $.x + 3 * $.width / 4,
                        y: $.y - d.height / 2
                    }
                },
                40: function(r) {
                    return {
                        x: r.x + r.width / 4,
                        y: r.y
                    }
                },
                41: function(I) {
                    return {
                        x: I.x + 3 * I.width / 4,
                        y: I.y
                    }
                },
                42: function(I, x) {
                    return {
                        x: I.x + I.width / 4,
                        y: I.y + x.height / 2
                    }
                },
                43: function(U, S) {
                    return {
                        x: U.x + 3 * U.width / 4,
                        y: U.y + S.height / 2
                    }
                },
                44: function(l, G) {
                    return {
                        x: l.x + l.width / 2,
                        y: l.y + l.height / 2 - G.height / 2
                    }
                },
                45: function(z) {
                    return {
                        x: z.x + z.width / 4,
                        y: z.y + z.height / 2
                    }
                },
                46: function(v, R) {
                    return {
                        x: v.x + v.width / 2 - R.width / 2,
                        y: v.y + v.height / 2
                    }
                },
                47: function(Y, b) {
                    return {
                        x: Y.x + Y.width / 2 + b.width / 2,
                        y: Y.y + Y.height / 2
                    }
                },
                48: function(W) {
                    return {
                        x: W.x + 3 * W.width / 4,
                        y: W.y + W.height / 2
                    }
                },
                49: function(a, A) {
                    return {
                        x: a.x + a.width / 2,
                        y: a.y + a.height / 2 + A.height / 2
                    }
                },
                50: function(I, W) {
                    return {
                        x: I.x + I.width / 4,
                        y: I.y + I.height - W.height / 2
                    }
                },
                51: function(K, N) {
                    return {
                        x: K.x + 3 * K.width / 4,
                        y: K.y + K.height - N.height / 2
                    }
                },
                52: function(Q) {
                    return {
                        x: Q.x + Q.width / 4,
                        y: Q.y + Q.height
                    }
                },
                53: function(_) {
                    return {
                        x: _.x + 3 * _.width / 4,
                        y: _.y + _.height
                    }
                },
                54: function(u, i) {
                    return {
                        x: u.x + u.width / 4,
                        y: u.y + u.height + i.height / 2
                    }
                },
                55: function(x, l) {
                    return {
                        x: x.x + 3 * x.width / 4,
                        y: x.y + x.height + l.height / 2
                    }
                }
            };
            return rp(q) ? function(p, a, U) {
                return Q[p](a, U ? U : zs)
            }
            : void 0
        }();
        lk(A, {
            highlight: "#1ABC9C",
            label: "#000",
            labelSelect: "#FFF",
            transparent: "rgba(0,0,0,0.35)",
            titleBackground: "#2C3E50",
            titleIconBackground: "#868686",
            headerBackground: "#ECF0F1",
            headerIconBackground: "#868686",
            headerSeparator: "#868686",
            headerLine: "#D9D9D9",
            background: "#FFF",
            disabledBackground: "rgba(255,255,255,0.65)",
            toolTipBackground: "#FFFFE0",
            rectSelectBorder: "#2C3E50",
            rectSelectBackground: "rgba(0,0,0,0.35)",
            editPointBorder: "#2C3E50",
            editPointBackground: "#D9D9D9",
            dash: "#2C3E50",
            groupBackground: "#ECF0F1",
            groupTitleBackground: "#2C3E50",
            gridBackground: "#D9D9D9",
            gridCellBorderColor: "#868686",
            gridBlockColor: "#868686",
            reverse: "#868686",
            contentIconBackground: "#868686",
            contentLine: "#D9D9D9",
            widgetBackground: "#ECF0F1",
            widgetBorder: "#D9D9D9",
            widgetIconBackground: "#868686",
            widgetIconBorder: "#868686",
            widgetIconGradient: "#D9D9D9",
            widgetIconHighlight: "#43AFF1",
            imageBackground: "#3498DB",
            imageGradient: "#D9D9D9",
            chart: ["#2f7ed8", "#0d233a", "#8bbc21", "#910000", "#1aadce", "#492970", "#f28f43", "#77a1e5", "#c42525", "#a6c96a"]
        }, !0);
        var sb = A.reverse
          , Gn = A.transparent
          , xm = A.rectSelectBackground
          , Vb = A.dash
          , Lj = A.titleBackground
          , nl = A.titleIconBackground
          , Aq = A.headerBackground
          , nd = A.headerIconBackground
          , Vo = A.headerSeparator
          , Kl = A.headerLine
          , Mb = A.contentIconBackground
          , qp = A.contentLine
          , sd = (A.widgetIconHighlight,
        A.widgetIconBorder)
          , fd = (A.widgetIconGradient,
        A.imageBackground)
          , ac = A.imageGradient
          , Jp = A.highlight
          , Mf = A.label
          , ak = A.labelSelect;
        if (g && !q.shutAlert) {
            var xh = new Date
              , eh = g.split("-")
              , Zn = new Date(xh.getFullYear(),xh.getMonth(),xh.getDate())
              , g = new Date(p(eh[0], 10),p(eh[1], 10) - 1,p(eh[2], 10))
              , is = Zn.getTime()
              , pr = g.getTime()
              , sn = B + "_try"
              , Up = q.alert;
            try {
                var qg = q.localStorage;
                if (qg && Up)
                    if (pr > is && 1728e6 > pr - is) {
                        var Ai = (pr - is) / 864e5;
                        qg && qg[sn] != Ai && (qg[sn] = Ai,
                        Up("HT for Web free trial license will expire in " + Ai + " days, please apply for a new license!"))
                    } else
                        is >= pr && Up("Your free trial of HT for Web has expired!"),
                        qg && delete qg[sn]
            } catch (Ne) {}
        }
        var Sd = {
            ms_ac: function(g, M) {
                for (var m = M.ms_ac, D = 0; D < m.length; D++)
                    tj(g, m[D])
            },
            ms_listener: function(q) {
                q.addListeners = function() {
                    for (var g = this, k = 0; k < mo.length; k++)
                        g["handle_" + mo[k]] && Bc(mo[k], g.getView(), g)
                }
                ,
                q.removeListeners = function() {
                    for (var s = this, a = 0; a < mo.length; a++)
                        s["handle_" + mo[a]] && Wj(mo[a], s.getView(), s)
                }
            },
            ms_fire: function(f) {
                f.mp = function(V, w, W) {
                    this.addPropertyChangeListener(V, w, W)
                }
                ,
                f.ump = function(o, Q) {
                    this.removePropertyChangeListener(o, Q)
                }
                ,
                f.fp = function(u, T, i, d, E) {
                    return this.firePropertyChange(u, T, i, d, E)
                }
                ,
                f.addPropertyChangeListener = function(Y, g, t) {
                    var E = this;
                    E._62I || (E._62I = new em),
                    E._62I.add(Y, g, t)
                }
                ,
                f.removePropertyChangeListener = function(I, O) {
                    this._62I && this._62I.remove(I, O)
                }
                ,
                f.firePropertyChange = function(Y, K, k, L, o) {
                    if (L) {
                        if (L(K, k))
                            return !1
                    } else if (K === k)
                        return !1;
                    var Q = this
                      , d = o || {};
                    return d.property = Y,
                    d.oldValue = K,
                    d.newValue = k,
                    d.source = Q,
                    d.data = Q,
                    Q._62I && Q._62I.fire(d),
                    Q.onPropertyChanged && Q.onPropertyChanged(d),
                    !0
                }
            },
            ms_attr: function(w) {
                w.a = function(A, f) {
                    var u = this;
                    if (2 === arguments.length)
                        u.setAttr(A, f);
                    else {
                        if (!Ag(A))
                            return u.getAttr(A);
                        for (var X in A)
                            u.setAttr(X, A[X])
                    }
                    return u
                }
                ,
                w.getAttr = function(c, l) {
                    if (l === F && (l = 1),
                    this._attrObject && c in this._attrObject)
                        return this._attrObject[c];
                    if (this.getImage) {
                        var s = this.getImage();
                        if (xe(s) && (s = es[s]),
                        Ag(s) && "dataBindings"in s)
                            for (var _ = s.dataBindings, T = _.length - 1; T >= 0; T--) {
                                var I = _[T];
                                if (I.attr === c) {
                                    if ("defaultValue"in I)
                                        return I.defaultValue;
                                    break
                                }
                            }
                    }
                    return l ? P[c] : F
                }
                ,
                w.setAttr = function($, W) {
                    var c = this;
                    c._attrObject || (c._attrObject = {});
                    var z = c._attrObject[$];
                    W === F ? delete c._attrObject[$] : c._attrObject[$] = W,
                    c.fp && c.fp("a:" + $, z, W) && c.onAttrChanged && c.onAttrChanged($, z, W)
                }
                ,
                w.getSerializableAttrs = function() {
                    var g, y = {};
                    for (g in this._attrObject)
                        y[g] = 1;
                    return y
                }
            },
            ms_bnb: function(n) {
                n.getBodyColor = function(r) {
                    return r.s("body.color")
                }
                ,
                n.getBorderColor = function($) {
                    return $.s("border.color")
                }
            },
            _51o: function(q) {
                q.mi = function(I, V, J) {
                    this.addInteractorListener(I, V, J)
                }
                ,
                q.umi = function(B, N) {
                    this.removeInteractorListener(B, N)
                }
                ,
                q.fi = function(v) {
                    this.fireInteractorEvent(v)
                }
                ,
                q.addInteractorListener = function(s, H, L) {
                    var W = this;
                    W._63I || (W._63I = new em),
                    W._63I.add(s, H, L)
                }
                ,
                q.removeInteractorListener = function($, T) {
                    this._63I.remove($, T)
                }
                ,
                q.fireInteractorEvent = function(v) {
                    this._63I && this._63I.fire(v)
                }
                ,
                q.setInteractors = function(F) {
                    var T = this
                      , R = T._interactors;
                    R && R.each(function(E) {
                        E.tearDown()
                    }),
                    _b(F) && (F = new Vr(F)),
                    T._interactors = F,
                    F && F.each(function(i) {
                        i.setUp()
                    }),
                    T.fp("interactors", R, F),
                    T.invalidateSelection()
                }
                ,
                q.getInteractors = function() {
                    return this._interactors
                }
            },
            _49o: function(j) {
                j._44O = V,
                j._45O = V,
                j.getTopPainters = function() {
                    return this._44O
                }
                ,
                j.getBottomPainters = function() {
                    return this._45O
                }
                ,
                j.addTopPainter = function(J) {
                    var q = this;
                    q._44O || (q._44O = new Vr),
                    q._44O.contains(J) || (q._44O.add(J),
                    q.redraw && q.redraw())
                }
                ,
                j.removeTopPainter = function(N) {
                    var V = this;
                    V._44O && (V._44O.remove(N),
                    V.redraw && V.redraw())
                }
                ,
                j.addBottomPainter = function(J) {
                    var O = this;
                    O._45O || (O._45O = new Vr),
                    O._45O.contains(J) || (O._45O.add(J),
                    O.redraw && O.redraw())
                }
                ,
                j.removeBottomPainter = function(i) {
                    var k = this;
                    k._45O && (k._45O.remove(i),
                    k.redraw && k.redraw())
                }
                ,
                j._93db = function(X, H) {
                    var T = this;
                    T._45O && T._45O.each(function(i) {
                        i.draw ? i.draw(X, H) : i.call(T, X, H)
                    })
                }
                ,
                j._92db = function(U, f) {
                    var N = this;
                    N._44O && N._44O.each(function(p) {
                        p.draw ? p.draw(U, f) : p.call(N, U, f)
                    })
                }
            },
            ms_sm: function(z) {
                z.sm = function() {
                    return this.getSelectionModel()
                }
                ,
                z.setSelectableFunc = function(i) {
                    this.sm().setFilterFunc(i)
                }
                ,
                z.getSelectableFunc = function() {
                    return this.sm().getFilterFunc()
                }
                ,
                z.getSelectionModel = function() {
                    var p = this;
                    return p._selectionModel ? p._selectionModel : p.dm().sm()
                }
                ,
                z.isSelectionModelShared = function() {
                    return !this._selectionModel
                }
                ,
                z.setSelectionModelShared = function(Y) {
                    var S = this
                      , K = !S._selectionModel
                      , c = S.handleSelectionChange
                      , o = S.dm();
                    K !== Y && (S.invalidateSelection && S.invalidateSelection(),
                    Y ? (o.sm().ms(c, S),
                    S._selectionModel.ums(c, S),
                    S._selectionModel.dispose(),
                    S._selectionModel = V) : (o.sm().ums(c, S),
                    S._selectionModel = new Bp(o),
                    S._selectionModel.ms(c, S)),
                    S.onSelectionModelSharedChanged(),
                    S.fp("selectionModelShared", K, Y))
                }
                ,
                z.onSelectionModelSharedChanged = function() {
                    var q = this;
                    q.redraw(),
                    q.invalidateSelection && q.invalidateSelection()
                }
                ,
                z.removeSelection = function() {
                    var D = this.dm();
                    D.beginTransaction(),
                    this.sm().toSelection().each(D.remove, D),
                    D.endTransaction()
                }
                ,
                z.selectAll = function() {
                    var V = this;
                    V.sm().ss(V.dm().toDatas(function(R) {
                        return V.isVisible(R) && V.isSelectable(R)
                    }))
                }
                ,
                z.isSelected = function(_) {
                    return this.sm().co(_)
                }
                ,
                z.isSelectedById = function(l) {
                    var j = this.dm().getDataById(l);
                    return j ? this.isSelected(j) : !1
                }
                ,
                z.isSelectable = function(L) {
                    return this.sm().isSelectable(L)
                }
            },
            ms_tx: function(R) {
                R._64I = 0,
                R._65O = 0,
                R.isScrollable = function() {
                    return this.getWidth() < this._64I
                }
                ,
                R._40o = function() {
                    return this.isScrollable()
                }
                ,
                R.getLogicalPoint = function(G) {
                    return jd(G, this._canvas || this._view, this.tx(), this.ty ? this.ty() : 0)
                }
                ,
                R.tx = function(V) {
                    return V === F ? this.getTranslateX() : (this.setTranslateX(V),
                    void 0)
                }
                ,
                R.getTranslateX = function() {
                    return this._65O
                }
                ,
                R.setTranslateX = function(v) {
                    var O = this
                      , Y = O.getWidth() - O._64I;
                    Y > v && (v = Y),
                    v > 0 && (v = 0),
                    v = D(v);
                    var z = O._65O;
                    O._65O = v,
                    O.fp(cd, z, v)
                }
            },
            ms_ty: function(R) {
                R._23Q = 0,
                R._66O = 0,
                R._41o = function() {
                    return this.getHeight() < this._23Q
                }
                ,
                R.getLogicalPoint = function(K) {
                    return jd(K, this._canvas || this._view, this.tx ? this.tx() : 0, this.ty())
                }
                ,
                R.ty = function(B) {
                    return B === F ? this.getTranslateY() : (this.setTranslateY(B),
                    void 0)
                }
                ,
                R.getTranslateY = function() {
                    return this._66O
                }
                ,
                R.setTranslateY = function(W) {
                    var o = this
                      , h = o.getHeight() - o._23Q;
                    h > W && (W = h),
                    W > 0 && (W = 0),
                    W = D(W);
                    var b = o._66O;
                    o._66O = W,
                    o.fp(ao, b, W)
                }
            },
            ms_txy: function(h) {
                h._65O = 0,
                h._66O = 0,
                h.tx = function(_) {
                    return _ === F ? this.getTranslateX() : (this.setTranslateX(_),
                    void 0)
                }
                ,
                h.ty = function(V) {
                    return V === F ? this.getTranslateY() : (this.setTranslateY(V),
                    void 0)
                }
                ,
                h.onTranslateEnded = function() {}
                ,
                h.setTranslate = function(o, P, Y) {
                    var C = this;
                    if (Y = bf(Y)) {
                        C._65I && C._65I.stop(!0);
                        var r = C.tx()
                          , j = C.ty();
                        Y.action = function(O) {
                            C.setTranslate(r + (o - r) * O, j + (P - j) * O)
                        }
                        ,
                        Y._37o = function() {
                            delete C._66I,
                            delete C._65I,
                            C.onTranslateEnded()
                        }
                        ,
                        C._66I = 1,
                        C._65I = Xp(Y)
                    } else
                        C.tx(o),
                        C.ty(P)
                }
                ,
                h.getTranslateX = function() {
                    return this._65O
                }
                ,
                h.setTranslateX = function(R) {
                    var z = this;
                    R = z.adjustTranslateX(R);
                    var I = z._65O;
                    z._65O = R,
                    z.fp(cd, I, R)
                }
                ,
                h.getTranslateY = function() {
                    return this._66O
                }
                ,
                h.setTranslateY = function(k) {
                    var V = this;
                    k = V.adjustTranslateY(k);
                    var Z = V._66O;
                    V._66O = k,
                    V.fp(ao, Z, k)
                }
                ,
                h.adjustTranslateX = function(c) {
                    return D(c)
                }
                ,
                h.adjustTranslateY = function(i) {
                    return D(i)
                }
                ,
                h.translate = function(n, b, G) {
                    this.setTranslate(this.tx() + n, this.ty() + b, G)
                }
                ,
                h.getLogicalPoint = function(W) {
                    var m = this;
                    return jd(W, this._canvas || m._view, m.tx(), m.ty())
                }
            },
            ms_dm: function(k) {
                k.dm = function(n) {
                    return n ? (this.setDataModel(n),
                    void 0) : this.getDataModel()
                }
                ,
                k.getDataModel = function() {
                    return this._dataModel
                }
            },
            ms_lp: function(U) {
                U.lp = function(p) {
                    return this.getLogicalPoint(p)
                }
            },
            ms_v: function(P) {
                P._disabled = !1,
                P.setDisabled = function(u, q) {
                    var K = this
                      , w = K._disabled;
                    w !== u && (w && (hp(K._63O),
                    delete K._63O),
                    u && (mg(K._view, K._63O = Vm(q)),
                    K.iv()),
                    K._disabled = u,
                    K.fp("disabled", w, u))
                }
                ,
                P.isDisabled = function() {
                    return this._disabled
                }
                ,
                P.getDisabledDiv = function() {
                    return this._63O
                }
                ,
                P.getView = function() {
                    return this._view
                }
                ,
                P.addToDOM = function() {
                    var d = this
                      , R = d.getView()
                      , P = R.style;
                    s.body.appendChild(R),
                    P.left = "0",
                    P.right = "0",
                    P.top = "0",
                    P.bottom = "0",
                    q.addEventListener("resize", function() {
                        d.iv()
                    }, !1),
                    d.iv()
                }
                ,
                P.getWidth = function() {
                    return this._view.clientWidth
                }
                ,
                P.getHeight = function() {
                    return this._view.clientHeight
                }
                ,
                P.setWidth = function(G) {
                    var d = this;
                    d._view.style.width = G + gn,
                    d.iv(),
                    d.fp && d.fp(tg, V, G)
                }
                ,
                P.setHeight = function(k) {
                    var p = this;
                    p._view.style.height = k + gn,
                    p.iv(),
                    p.fp && p.fp(Xq, V, k)
                }
                ,
                P.setFocus = function(x) {
                    var $ = this
                      , w = $._currentEditor;
                    return x && w && (w.getView && (w = w.getView()),
                    w.contains(x.target)) ? !1 : (Fl($._view),
                    $.endEditing && $.endEditing(),
                    $.fireViewEvent("focus"),
                    !0)
                }
                ,
                P.iv = function(t) {
                    this.invalidate(t)
                }
                ,
                P.invalidate = function(a) {
                    var H = this;
                    H._68I || (H._68I = 1,
                    dk(H.validate, H, V, a),
                    H.onInvalidated && H.onInvalidated(),
                    H.fireViewEvent("invalidate"))
                }
                ,
                P.validate = function() {
                    var q = this
                      , Y = q._view;
                    if (q._68I && (delete q._68I,
                    Y.parentNode))
                        if (0 === Y.offsetWidth && 0 === Y.offsetHeight && q._67I !== V)
                            q._67I === F && (q._67I = j.reinvalidateCount),
                            q._67I > 0 ? q._67I-- : q._67I = V,
                            q.iv();
                        else {
                            q.fireViewEvent("beginValidate"),
                            q.validateImpl(),
                            q.onValidated && q.onValidated(),
                            q.fireViewEvent("validate");
                            var z = q._63O;
                            z && (Y.lastChild !== z && (hp(z),
                            mg(Y, z)),
                            Pc(z, 0, 0, q.getWidth(), q.getHeight())),
                            fs(q),
                            xn(q),
                            od(q)
                        }
                }
                ,
                P.layout = function(D, _, q, j) {
                    1 === arguments.length ? Pc(this, D) : Pc(this, D, _, q, j)
                }
                ,
                P.addViewListener = function(v, o, Q) {
                    var K = this;
                    K._67O || (K._67O = new em),
                    K._67O.add(v, o, Q)
                }
                ,
                P.removeViewListener = function(i, K) {
                    this._67O.remove(i, K)
                }
                ,
                P.fireViewEvent = function(q) {
                    var n = this;
                    n._67O && (xe(q) && (q = {
                        kind: q
                    }),
                    n._67O.fire(q)),
                    j.viewListener && j.viewListener(n, q)
                }
            },
            ms_tip: function(T) {
                T.setToolTipEnabled = function(t) {
                    var s = this;
                    t ? Nq || s._13o || (s.enableToolTip(),
                    s.fp("toolTipEnabled", !1, !0)) : s._13o && (s.disableToolTip(),
                    s.fp("toolTipEnabled", !0, !1))
                }
                ,
                T.isToolTipEnabled = function() {
                    return !!this._13o
                }
                ,
                T.enableToolTip = function() {
                    var X = this;
                    Nq || X._13o || (X._13o = function(l) {
                        var y = X.getToolTip(l);
                        y != V ? j.toolTipContinual && j.isToolTipShowing() ? Oo(l, y) : (Wr(),
                        gp = {
                            timeout: Q(kj, Kn),
                            e: l,
                            info: y
                        }) : Wr()
                    }
                    ,
                    X.getView().addEventListener(Sq, X._13o, !1),
                    X.getView().addEventListener("mouseleave", j.hideToolTip, !1))
                }
                ,
                T.disableToolTip = function() {
                    var u = this;
                    u._13o && (u.getView().removeEventListener(Sq, u._13o, !1),
                    u.getView().removeEventListener("mouseleave", j.hideToolTip, !1),
                    delete u._13o)
                }
                ,
                T.getToolTip = function(K) {
                    var b = this;
                    if (b.getDataAt) {
                        var R = b.getDataAt(K);
                        return R ? R.getToolTip() : V
                    }
                    return b.getValue ? b.getValue() : void 0
                }
            },
            _52o: function(j) {
                j._zoom = 1,
                j._29I = zs,
                j.zoomIn = function(U, q) {
                    this.setZoom(this._zoom * gs, U, q)
                }
                ,
                j.zoomOut = function(J, v) {
                    this.setZoom(this._zoom / gs, J, v)
                }
                ,
                j.zoomReset = function(W, D) {
                    this.setZoom(1, W, D)
                }
                ,
                j.scrollZoomIn = function(U) {
                    this.setZoom(this._zoom * Rf, V, U)
                }
                ,
                j.scrollZoomOut = function(t) {
                    this.setZoom(this._zoom / Rf, V, t)
                }
                ,
                j.pinchZoomIn = function($) {
                    this.setZoom(this._zoom * Tj, V, $)
                }
                ,
                j.pinchZoomOut = function(z) {
                    this.setZoom(this._zoom / Tj, V, z)
                }
                ,
                j.adjustZoom = function(Y) {
                    return Ho > Y ? Ho : Y > $d ? $d : Y
                }
                ,
                j.getZoom = function() {
                    return this._zoom
                }
                ,
                j.setZoom = function(R, T, C) {
                    var e = this;
                    if (T = bf(T)) {
                        e._14o && e._14o.stop(!0);
                        var h = e._zoom;
                        T.action = function(V) {
                            e._96O(h + (R - h) * V, C)
                        }
                        ,
                        T._37o = function() {
                            delete e._zooming,
                            delete e._14o,
                            e.onZoomEnded()
                        }
                        ,
                        e._zooming = 1,
                        e._14o = Xp(T)
                    } else
                        e._96O(R, C)
                }
                ,
                j._96O = function(V, R) {
                    var s = this;
                    if (V = s.adjustZoom(V),
                    V !== s._zoom) {
                        s.validate();
                        var h = s._29I
                          , G = s._zoom;
                        0 !== h.width && 0 !== h.height && (R = R ? R : {
                            x: h.x + h.width / 2,
                            y: h.y + h.height / 2
                        },
                        s.tx((R.x - h.x) * G - R.x * V),
                        s.ty((R.y - h.y) * G - R.y * V)),
                        s._zoom = V,
                        s.fp("zoom", G, V)
                    }
                }
            }
        };
        lk(j, {
            numberDigits: 5,
            baseZIndex: F,
            isTouchable: Nq,
            devicePixelRatio: q.devicePixelRatio ? q.devicePixelRatio : 1,
            reinvalidateCount: 3,
            hitMaxArea: 3e3,
            imageCacheThreshold: 20,
            autoMakeVisible: !0,
            autoHideScrollBar: !0,
            disabledOpacity: .4,
            disabledBackground: A.disabledBackground,
            forceHierarchicalSerialization: !0,
            hoverDelay: 600,
            toolTipDelay: 800,
            toolTipContinual: !1,
            getDragger: function() {
                return wq
            },
            lineCap: "butt",
            lineJoin: "round",
            imageGradient: "linear.northeast",
            dashPattern: [16, 16],
            animDuration: 200,
            animEasing: function(n) {
                return n * n
            },
            labelColor: Mf,
            labelSelectColor: ak,
            labelFont: (Nq ? "15" : "12") + "px arial, sans-serif",
            widgetIndent: Nq ? 30 : 20,
            widgetRowHeight: Nq ? 30 : 20,
            widgetHeaderHeight: Nq ? 32 : 22,
            widgetTitleHeight: Nq ? 34 : 24,
            scrollBarColor: Gn,
            scrollBarSize: 7,
            scrollBarTimeout: 1e3,
            scrollBarMinLength: 20,
            scrollBarInteractiveSize: Nq ? 32 : 16,
            zoomIncrement: 1.3,
            scrollZoomIncrement: 1.05,
            pinchZoomIncrement: 1.08,
            zoomMax: 20,
            zoomMin: .01,
            segmentResolution: 12,
            shapeResolution: 24,
            shapeSide: 24,
            intersectionLineRect: xi,
            intersectionLineLine: Lp,
            isEnter: uj,
            isEsc: Kq,
            isDelete: Sm,
            isSpace: uc,
            isLeft: Db,
            isUp: Xc,
            isRight: Hb,
            isDown: On,
            getTarget: Uc,
            isString: xe,
            isNumber: Hg,
            isBoolean: mk,
            isArray: _b,
            isSelectAll: Nd,
            isFunction: Vq,
            isObject: Ag,
            getPropertyValue: dl,
            setPropertyValue: ll,
            addMethod: lk,
            getVersion: function() {
                return "6.2.3"
            },
            appendToScreen: function(c) {
                c = c.getView ? c.getView() : c,
                (s.fullscreenElement || s.mozFullScreenElement || s.webkitFullscreenElement || s.msFullscreenElement || s.body).appendChild(c)
            },
            toggleFullscreen: function(S) {
                var b = S.getView();
                if (s.fullscreenElement || s.mozFullScreenElement || s.webkitFullscreenElement || s.msFullscreenElement)
                    s.exitFullscreen ? s.exitFullscreen() : s.msExitFullscreen ? s.msExitFullscreen() : s.mozCancelFullScreen ? s.mozCancelFullScreen() : s.webkitExitFullscreen && s.webkitExitFullscreen();
                else {
                    var T = !0;
                    if (S.isSelfViewEvent) {
                        var M = S.getX()
                          , g = S.getY()
                          , z = S.getWidth()
                          , X = S.getHeight()
                          , _ = b.style.background;
                        _ || (b.style.background = "white"),
                        b.requestFullscreen ? b.requestFullscreen() : b.msRequestFullscreen ? b.msRequestFullscreen() : b.mozRequestFullScreen ? b.mozRequestFullScreen() : b.webkitRequestFullscreen && b.webkitRequestFullscreen();
                        var w = setInterval(function() {
                            if (b !== (s.fullscreenElement || s.mozFullScreenElement || s.webkitFullscreenElement || s.msFullscreenElement))
                                clearInterval(w),
                                S.setX(M),
                                S.setY(g),
                                S.setWidth(z),
                                S.setHeight(X),
                                S._fullscreen = !1,
                                b.style.background = _,
                                S.iv();
                            else {
                                var V = C.Default.getWindowInfo();
                                (T || V.width !== S.getWidth() || V.height !== S.getHeight()) && (S.setX(V.left),
                                S.setY(V.top),
                                S.setWidth(V.width),
                                S.setHeight(V.height),
                                S._fullscreen = !0,
                                S.iv(),
                                T = !1)
                            }
                        }, 500)
                    } else {
                        var J = b.style.left
                          , i = b.style.top
                          , z = b.style.width
                          , X = b.style.height
                          , _ = b.style.background;
                        _ || (b.style.background = "white"),
                        b.requestFullscreen ? b.requestFullscreen() : b.msRequestFullscreen ? b.msRequestFullscreen() : b.mozRequestFullScreen ? b.mozRequestFullScreen() : b.webkitRequestFullscreen && b.webkitRequestFullscreen();
                        var w = setInterval(function() {
                            if (b !== (s.fullscreenElement || s.mozFullScreenElement || s.webkitFullscreenElement || s.msFullscreenElement))
                                clearInterval(w),
                                b.style.left = J,
                                b.style.top = i,
                                b.style.width = z,
                                b.style.height = X,
                                b.style.background = _,
                                S.iv();
                            else {
                                var K = C.Default.getWindowInfo();
                                (T || K.width !== S.getWidth() || K.height !== S.getHeight()) && (Pc(S),
                                T = !1)
                            }
                        }, 500)
                    }
                }
            },
            appendTimeStamp: function(c) {
                return c
            },
            setCompType: function(x, v) {
                Vq(v) || Ag(v) ? Me[x] = v : ad(x)
            },
            getCompType: function(N) {
                var P = Me[N];
                return P === F && oo.test(N) && ad(N),
                P
            },
            getCompTypeMap: function() {
                return Me
            },
            drawCompType: function(q, V, z, D, j, H) {
                q(V, z, D, j, H)
            },
            numberListener: function() {
                var C = {
                    46: 1,
                    8: 1,
                    9: 1,
                    27: 1,
                    13: 1,
                    109: 1,
                    110: 1,
                    189: 1,
                    190: 1
                };
                return function(Z) {
                    var x = Z.keyCode;
                    C[x] || 65 === x && j.isCtrlDown(Z) || 86 === x && j.isCtrlDown(Z) || 67 === x && j.isCtrlDown(Z) || 88 === x && j.isCtrlDown(Z) || x >= 35 && 40 >= x || (Z.shiftKey || 48 > x || x > 57) && (96 > x || x > 105) && Z.preventDefault()
                }
            }(),
            ignoreKeyCodes: [122, 123],
            preventDefault: function(G) {
                var q = G.target.tagName;
                ("DIV" === q || "CANVAS" === q) && !(j.ignoreKeyCodes.indexOf(G.keyCode) >= 0) && ("keydown" !== G.type || Db(G) || Hb(G) || Xc(G) || On(G) || Sm(G) || 65 === G.keyCode && (G.metaKey || G.ctrlKey)) && (G.preventDefault(),
                G.preventManipulation && G.preventManipulation())
            },
            getWindowInfo: function() {
                var D = s.documentElement
                  , o = D && (D.scrollLeft || D.scrollTop) ? D : s.body;
                return {
                    target: o,
                    left: o.scrollLeft,
                    top: o.scrollTop,
                    width: q.innerWidth || o.clientWidth,
                    height: q.innerHeight || o.clientHeight
                }
            },
            isDragging: function() {
                return !!wq
            },
            isLeftButton: function(U) {
                return Nq ? !0 : 0 === U.button
            },
            isInput: function(b) {
                if (!b)
                    return !1;
                var k = b.tagName;
                return "INPUT" === k || "TEXTAREA" === k || "SELECT" === k
            },
            getTouchCount: function(n) {
                return Nq ? n.touches.length : 1
            },
            isDoubleClick: function() {
                function q(D) {
                    D.details = 0,
                    D.timeout = null,
                    D.lastPoint = null
                }
                var o = {};
                return Ke = new h,
                kq = Ke.getTime(),
                function(c) {
                    var Z = c.button == V ? "" : c.button
                      , X = c.type + Z
                      , l = X + "_isDoubleClick"
                      , t = o[X];
                    if (t || (t = o[X] = {
                        details: 0,
                        timeout: null,
                        lastPoint: null
                    }),
                    c[l] === F) {
                        c[l] = !0;
                        var e = Qn(c);
                        t.timeout && (_(t.timeout),
                        t.timeout = null),
                        t.lastPoint && uf(t.lastPoint, e) > (Nq ? 20 : 1) && q(t),
                        t.lastPoint = e,
                        t.details++,
                        t.timeout = Q(function() {
                            q(this)
                        }
                        .bind(t), 500)
                    }
                    return 2 === t.details
                }
            }(),
            isShiftDown: function(e) {
                return e ? e.shiftKey : Vj["16"]
            },
            isCtrlDown: function(x) {
                return x ? Z ? x.metaKey : x.ctrlKey : Z ? Vj["91"] : Vj["17"]
            },
            getClientPoint: function(o) {
                return Nq && (o = Dd(o)),
                {
                    x: o.clientX,
                    y: o.clientY
                }
            },
            isMouseEvent: function(N) {
                return N instanceof MouseEvent || 0 === N.type.indexOf("mouse")
            },
            getTargetElement: function(U) {
                if (j.isMouseEvent(U) || !s.elementFromPoint)
                    return U.target;
                var F = Yc(U);
                return s.elementFromPoint(F.x, F.y)
            },
            getPagePoint: function(t) {
                return Nq && (t = Dd(t)),
                {
                    x: t.pageX,
                    y: t.pageY
                }
            },
            createObject: function(j, G) {
                var O = new j;
                for (var V in G) {
                    var B = G[V];
                    if (Vq(B))
                        O[V] = B;
                    else if (0 === V.indexOf("s:"))
                        O.s(V.substr(2), G[V]);
                    else if (0 === V.indexOf("a:"))
                        O.a(V.substr(2), G[V]);
                    else {
                        var s = Ei(V)
                          , B = G[V];
                        O[s] ? (O[s](B),
                        "setToolTip" === s && O.enableToolTip && O.enableToolTip()) : O[V] = B
                    }
                }
                return O
            },
            setImage: function(D, A, d, b) {
                var S = arguments.length;
                4 === S ? pm(D, b, A, d) : 2 === S ? xe(A) ? pm(D, A) : es[D] = A : 1 === S && pm(D, D)
            },
            getImage: function(l, R, W) {
                var e;
                if (l == V)
                    return V;
                if (Ag(l) ? e = l : (e = es[l],
                l && e === F && (Od && Od[l] || pm(l, l))),
                R && e && e.tagName) {
                    var S;
                    S = "override" === W ? "colors_override" : "override_rgb" === W ? "colors_override_rgb" : "override_a" === W ? "colors_override_a" : "colors",
                    e[S] || (e[S] = {
                        __count__: 0
                    });
                    var _ = e[S][R];
                    return _ || (e[S].__count__ > j.imageCacheThreshold && (e[S] = {
                        __count__: 0
                    }),
                    _ = vc(e, To(R), e.width, e.height, W),
                    e[S][R] = _,
                    e[S].__count__++),
                    _
                }
                return e
            },
            isImageComplete: function(P, h, Z) {
                var z = Ag(P) ? P : es[P];
                if (!z)
                    return !1;
                if (z.tagName)
                    return z.complete;
                for (var o, P, t, E = z.comps, i = !0, l = 0, S = E.length; S > l; l++)
                    if (o = E[l],
                    t = o.type,
                    "image" === o.type) {
                        P = o.name,
                        P && P.func && (P = _p(P, h));
                        var L = zm(P, h, Z);
                        if (!L) {
                            i = !1;
                            break
                        }
                    } else if (oo.test(t) && j.getCompType(t) === F) {
                        i = !1;
                        break
                    }
                return i
            },
            getId: function() {
                var K = 1;
                return function() {
                    return ++K
                }
            }(),
            callLater: function(Z, W, k, D) {
                var I = function() {
                    Z.apply(W, k)
                };
                return D ? Q(I, D) : q.requestAnimationFrame(I)
            },
            clone: function(C) {
                if (null == C || "object" != typeof C)
                    return C;
                if (C instanceof Date) {
                    var W = new Date;
                    return W.setTime(C.getTime()),
                    W
                }
                if (C instanceof Array) {
                    for (var W = [], f = 0, V = C.length; V > f; f++)
                        W[f] = nc(C[f]);
                    return W
                }
                if (C instanceof Vr) {
                    for (var W = new Vr, f = 0, V = C.length; V > f; f++)
                        W.set(f, nc(C.get(f)));
                    return W
                }
                if (C instanceof $n)
                    return C;
                if (C instanceof m) {
                    var W = {};
                    for (var v in C)
                        C.hasOwnProperty(v) && (W[v] = nc(C[v]));
                    return W
                }
                return C
            },
            callWhenLoaded: function(l, P) {
                P = P || 100;
                var B = Qb(l, P);
                pf || (pf = {}),
                pf[B] = {
                    tick: B,
                    cb: l,
                    delay: P
                }
            },
            beforeLoadURL: function(C) {
                if (pf) {
                    var d = {};
                    for (var x in pf) {
                        var Q = pf[x];
                        _(Q.tick);
                        var F = Qb(Q.cb, Q.delay);
                        d[F] = {
                            tick: F,
                            delay: Q.delay,
                            cb: Q.cb
                        }
                    }
                    pf = d
                }
                return j.convertURL ? j.convertURL(C) : C
            },
            convertURL: function(j) {
                return j
            },
            handleRefGraphLoaded: function() {},
            handleCompTypeLoaded: function() {},
            handleImageLoaded: function() {},
            handleUnfoundImage: function() {},
            sortFunc: function(u, _) {
                if (u === _)
                    return 0;
                if (u == V && _ != V)
                    return 1;
                if (u != V && _ == V)
                    return -1;
                if (u == V && _ == V)
                    return 0;
                var i, c = typeof u, K = typeof _;
                return c === ci && K === ci ? i = u.localeCompare(_) : c === eq && K === eq && (i = u - _),
                i === F && (i = ("" + u).localeCompare("" + _)),
                i > 0 ? 1 : 0 > i ? -1 : 0
            },
            getClassMap: function() {
                return Xj
            },
            getClass: function(U) {
                if (xe(U)) {
                    var Y, t = Xj[U];
                    if (!t) {
                        Y = U.split("."),
                        t = q;
                        for (var M = 0; M < Y.length; M++)
                            t = t[Y[M]];
                        Xj[U] = t
                    }
                    return t
                }
                return U
            },
            def: function(d, E, k) {
                var V, y, b, i = function() {};
                if (i.prototype = E.prototype,
                V = new i,
                xe(d)) {
                    if (Xj[d])
                        throw "'" + d + "' already defined";
                    b = Fp(d),
                    V.getClassName = function() {
                        return d
                    }
                } else
                    b = d;
                if (V.constructor = b,
                V.getClass = function() {
                    return b
                }
                ,
                V.getSuperClass = function() {
                    return E
                }
                ,
                k)
                    for (y in k)
                        Sd[y] && Sd.hasOwnProperty(y) ? Sd[y](V, k) : yp(V, k, y);
                b.prototype = V,
                b.superClass = E.prototype
            },
            startAnim: function() {
                var U = function(N) {
                    N.duration && (N.startTime = Cl()),
                    N.timeId = dk(N.tick, V, V, N.interval)
                };
                return function(z) {
                    return z = nc(z),
                    z.easing = z.easing || j.animEasing,
                    z.duration || z.frames || (z.duration = j.animDuration),
                    z.t = 0,
                    z.duration ? z.interval = 0 : (z.frame = 0,
                    z.interval = z.interval || 10),
                    z.tick = function() {
                        if (z.duration) {
                            var C = (Cl() - z.startTime) / z.duration;
                            C > 1 && (C = 1),
                            z.t = C,
                            z.action(z.easing(C), C),
                            1 === C ? z.stop() : z._isPaused || (z.timeId = dk(z.tick))
                        } else
                            z.frame++,
                            C = z.t = z.frame / z.frames,
                            z.action(z.easing(C), C),
                            z.frame < z.frames ? z._isPaused || (z.timeId = dk(z.tick, V, V, z.interval)) : z.stop()
                    }
                    ,
                    z.resume = function() {
                        z._isPaused && (delete z._isPaused,
                        z.duration ? z.t < 1 && (z.startTime = Cl() - z.duration * z.t,
                        z.timeId = dk(z.tick)) : z.frame < z.frames && (z.timeId = dk(z.tick, V, V, z.interval)))
                    }
                    ,
                    z.pause = function() {
                        z._isPaused = !0
                    }
                    ,
                    z.stop = function(T) {
                        z.isRunning() && (z.duration ? z.t < 1 && T && (z.t = 1,
                        z.action(z.easing(1), 1)) : z.frame < z.frames && T && (z.frame = z.frames,
                        z.action(z.easing(1), 1)),
                        z._37o && z._37o(),
                        z.finishFunc && z.finishFunc(),
                        vi(z.timeId, !z.duration),
                        delete z.timeId)
                    }
                    ,
                    z.isRunning = function() {
                        return z.timeId != V
                    }
                    ,
                    z.delay ? dk(U, V, [z], z.delay) : U(z),
                    z
                }
            }(),
            getTextSize: function() {
                var H = {}
                  , C = s ? qb().getContext("2d") : V;
                return function(z, t) {
                    C.font = z ? z : oi;
                    var Q = H[C.font];
                    return Q || (Q = 2 * C.measureText("e").width + 4,
                    H[C.font] = Q),
                    {
                        width: C.measureText(t).width + 4,
                        height: Q
                    }
                }
            }(),
            drawText: function($, w, P, M, k, E, H, F, D, l) {
                if (w != V) {
                    var N = bk(P, w)
                      , q = {};
                    q.y = l && l !== Ii ? l === ve ? E + N.height / 2 : E + F - N.height / 2 : E + F / 2,
                    q.x = D && D !== $j ? D === yo ? k + H - N.width / 2 : k + H / 2 : k + N.width / 2,
                    jl($, w, q, P, M)
                }
            },
            getDistance: function(M, w) {
                var n = M.length;
                return w ? 3 === n ? r(G(M[0] - w[0]) + G(M[1] - w[1]) + G(M[2] - w[2])) : 2 === n ? r(G(M[0] - w[0]) + G(M[1] - w[1])) : M.z === F ? r(G(w.x - M.x) + G(w.y - M.y)) : r(G(w.x - M.x) + G(w.y - M.y) + G(w.z - M.z)) : 3 === n ? r(G(M[0]) + G(M[1]) + G(M[2])) : 2 === n ? r(G(M[0]) + G(M[1])) : void 0
            },
            brighter: function(W, U) {
                return 0 > U && (U = -U),
                Yf(W, U ? U : 40)
            },
            darker: function(g, h) {
                return h > 0 && (h = -h),
                Yf(g, h ? h : -40)
            },
            unionPoint: function(N, H) {
                if (!N)
                    return V;
                if (2 === arguments.length)
                    return N && H ? {
                        x: b(N.x, H.x),
                        y: b(N.y, H.y),
                        width: t(N.x - H.x),
                        height: t(N.y - H.y)
                    } : V;
                var h = N;
                if (h._as && (h = h._as),
                h.length === F)
                    return V;
                var p = h.length;
                if (0 >= p)
                    return V;
                for (var _ = 1, Q = h[0], C = {
                    x: Q.x,
                    y: Q.y,
                    width: 0,
                    height: 0
                }; p > _; _++) {
                    Q = h[_];
                    var n = b(C.x, Q.x)
                      , d = X(C.x + C.width, Q.x)
                      , k = b(C.y, Q.y)
                      , A = X(C.y + C.height, Q.y);
                    C.x = n,
                    C.y = k,
                    C.width = d - n,
                    C.height = A - k
                }
                return C
            },
            unionRect: function(y, i) {
                if (y && !i)
                    return nc(y);
                if (!y && i)
                    return nc(i);
                if (y && i) {
                    var k = {
                        x: b(y.x, i.x),
                        y: b(y.y, i.y)
                    };
                    return k.width = X(y.x + y.width, i.x + i.width) - k.x,
                    k.height = X(y.y + y.height, i.y + i.height) - k.y,
                    k
                }
                return V
            },
            containsPoint: function(M, o, T, k) {
                if (k != V && 1 !== k) {
                    var S = M.x + M.width / 2
                      , C = M.y + M.height / 2;
                    M = {
                        x: S - M.width / 2 * k,
                        y: C - M.height / 2 * k,
                        width: M.width * k,
                        height: M.height * k
                    }
                }
                if (T) {
                    var W = M.width / 2
                      , c = M.height / 2
                      , I = E(-T)
                      , s = z(-T)
                      , y = o.x - M.x - W
                      , X = o.y - M.y - c;
                    return o = {
                        x: s * y - I * X,
                        y: I * y + s * X
                    },
                    Kp({
                        x: -W,
                        y: -c,
                        width: M.width,
                        height: M.height
                    }, o)
                }
                return !(!M || o.x < M.x || o.y < M.y || o.x > M.x + M.width || o.y > M.y + M.height)
            },
            containsRect: function(g, G) {
                if (!g || !G)
                    return !1;
                var Y = G.x
                  , o = G.y
                  , R = G.width
                  , H = G.height
                  , Z = g.width
                  , f = g.height;
                if (0 > (Z | f | R | H))
                    return !1;
                var V = g.x
                  , c = g.y;
                if (V > Y || c > o)
                    return !1;
                if (Z += V,
                R += Y,
                Y >= R) {
                    if (Z >= V || R > Z)
                        return !1
                } else if (Z >= V && R > Z)
                    return !1;
                if (f += c,
                H += o,
                o >= H) {
                    if (f >= c || H > f)
                        return !1
                } else if (f >= c && H > f)
                    return !1;
                return !0
            },
            intersectsRect: function(f, a) {
                if (!f || !a)
                    return !1;
                var S = a.width
                  , Y = a.height
                  , K = f.width
                  , O = f.height;
                if (0 >= K || 0 >= O || 0 >= S || 0 >= Y)
                    return !1;
                var x = a.x
                  , P = a.y
                  , X = f.x
                  , A = f.y;
                return K += X,
                O += A,
                S += x,
                Y += P,
                K > x && O > P && S > X && Y > A
            },
            intersection: function(h, q) {
                if (!h || !q)
                    return V;
                var u = q.x
                  , X = q.y
                  , Q = h.x
                  , S = h.y
                  , R = u
                  , H = X
                  , D = Q
                  , e = S;
                return R += q.width,
                H += q.height,
                D += h.width,
                e += h.height,
                Q > u && (u = Q),
                S > X && (X = S),
                R > D && (R = D),
                H > e && (H = e),
                R -= u,
                H -= X,
                0 >= R || 0 >= H ? V : {
                    x: u,
                    y: X,
                    width: R,
                    height: H
                }
            },
            grow: function(U, h, A) {
                A === F && (A = h),
                U.x -= h,
                U.y -= A,
                U.width = U.width + 2 * h,
                U.height = U.height + 2 * A
            },
            getLogicalPoint: function(T, s, C, y, I, d) {
                var f, a, H = s.getBoundingClientRect();
                return T.target ? (jr(T) ? Z ? Vj["91"] = !0 : Vj["17"] = !0 : Z ? Vj["91"] = !1 : Vj["17"] = !1,
                Vj["16"] = ig(T) ? !0 : !1,
                T = Nq ? Dd(T) : T,
                f = T.clientX,
                a = T.clientY) : (f = T.x,
                a = T.y),
                {
                    x: (f - H.left + s.scrollLeft - (C || 0)) / (I || 1),
                    y: (a - H.top + s.scrollTop - (y || 0)) / (d || 1)
                }
            },
            removeHTML: function() {
                var Z;
                return function(J) {
                    return J && J.parentNode ? Z === J ? !0 : (Z = J,
                    J.parentNode.removeChild(J),
                    Z = V,
                    !0) : !1
                }
            }(),
            getToolTipDiv: function() {
                if (!Jj) {
                    Jj = ff(),
                    Ee = ff();
                    var C = Jj.style;
                    j.baseZIndex != V && (C.zIndex = p(j.baseZIndex) + 3 + ""),
                    C.whiteSpace = "nowrap",
                    C.color = j.toolTipLabelColor,
                    C.background = j.toolTipBackground,
                    C.font = j.toolTipLabelFont,
                    C.padding = "5px",
                    C.boxShadow = "0px 0px 3px " + j.toolTipShadowColor
                }
                return Jj
            },
            isToolTipShowing: function() {
                return Jj && Jj.parentNode ? !0 : Ee && Ee.parentNode ? !0 : !1
            },
            hideToolTip: function() {
                hp(Jj),
                hp(Ee),
                Yp()
            },
            showToolTip: function(K, N) {
                if (!K || N == V)
                    return Wr(),
                    void 0;
                j.getToolTipDiv();
                var p, P;
                if (N.html ? (N = N.html,
                p = Ee,
                hp(Jj)) : (p = Jj,
                hp(Ee)),
                P = p.style,
                p.innerHTML = N,
                p.parentNode || C.Default.appendToScreen(p),
                K.target) {
                    K = Yc(K);
                    var s = Ib()
                      , h = K.x
                      , n = K.y
                      , Y = Nq ? 60 : 12;
                    if (Nq) {
                        var B = p.getBoundingClientRect();
                        P.left = h - B.width / 2 + gn,
                        P.top = n - B.height - Y < s.top ? n + Y + gn : n - B.height - Y + gn
                    } else {
                        P.left = h + Y + gn,
                        P.top = n + Y + gn;
                        var B = p.getBoundingClientRect();
                        B.left + B.width > s.width && (P.left = h - Y - B.width + gn),
                        B.top + B.height > s.height && (P.top = n - Y - B.height + gn),
                        B.left < 0 && (P.left = h + Y + gn),
                        B.top < 0 && (P.top = n + Y + gn)
                    }
                } else
                    P.left = K.x + gn,
                    P.top = K.y + gn;
                Yp()
            },
            startDragging: function(N, I) {
                N !== wq && (wq ? Nq ? wq.handleWindowTouchEnd(I) : wq.handleWindowMouseUp(I) : Nq ? (q.addEventListener(Po, Zi, !1),
                q.addEventListener(pj, Dc, !1)) : (q.addEventListener(Sq, Rc, !1),
                q.addEventListener(ur, Nf, !1)),
                wq = N)
            },
            getImageMap: function() {
                return es
            },
            toBoundaries: function(U, P, X, h) {
                var H = [];
                return Gm(U, P, X, h).forEach(function(F) {
                    var r = [];
                    F.forEach(function(f) {
                        r.push(f.x, f.y)
                    }),
                    H.push(r)
                }),
                H
            },
            getCurrentKeyCodeMap: function() {
                return Vj
            },
            drawCenterImage: function(A, Y, P, y, r, L, u, I) {
                var Z = Cm(Y, r, L)
                  , q = Hi(Y, r, L);
                ts(A, Y, D(P - Z / 2), D(y - q / 2), Z, q, r, L, u, I)
            },
            drawStretchImage: function(W, J, i, P, z, p, H, T, n, X, F, V) {
                var N, G = Cm(J, T, n, p), q = Hi(J, T, n, H);
                "uniform" === i ? (N = b(p / G, H / q),
                G *= N,
                q *= N,
                P += D((p - G) / 2),
                z += D((H - q) / 2),
                p = G,
                H = q) : "centerUniform" === i && ((G > p || q > H) && (N = b(p / G, H / q),
                G *= N,
                q *= N),
                P += D((p - G) / 2),
                z += D((H - q) / 2),
                p = G,
                H = q);
                var a = W.interactiveInfo;
                if (a) {
                    var y;
                    if (y = "center" === i ? {
                        x: P + p / 2 - G / 2,
                        y: z + H / 2 - q / 2,
                        width: G,
                        height: q
                    } : {
                        x: P,
                        y: z,
                        width: p,
                        height: H
                    },
                    a.rect) {
                        var C = a.compInfos
                          , t = C.length;
                        t && (C[t - 1].rect.image = J)
                    } else
                        a.rect = y
                }
                if ("center" === i) {
                    var B = F !== !1 && (G > p || q > H);
                    B && (W.save(),
                    W.beginPath(),
                    W.rect(P, z, p, H),
                    W.clip()),
                    ts(W, J, P + p / 2 - G / 2, z + H / 2 - q / 2, G, q, T, n, X, V),
                    B && W.restore()
                } else
                    ts(W, J, P, z, p, H, T, n, X, V)
            },
            toCanvas: function(G, L, E, P, C, z, H, h, r) {
                G = bn(G, H),
                L = L || Cm(G, C),
                E = E || Hi(G, C);
                var o = qb()
                  , A = Zf(o);
                return h ? (ug(o, L, E, h),
                A.scale(h, h)) : ug(o, L, E, 1),
                rh(A, G, P, 0, 0, L, E, C, z, H, r),
                G && G.clampToEdge && (o.clampToEdge = G.clampToEdge),
                A.restore(),
                o
            },
            createGradientImage: function(J, n, v, U) {
                for (var m = ["L", 0, 0, J, 0, 1, 0, 0, 1, 0, 0], Z = 0, K = Math.min(n.length, v.length); K > Z; Z++)
                    m.push(v[Z], n[Z]);
                var R = C.Default.toCanvas({
                    width: J,
                    height: J,
                    clampToEdge: !0,
                    comps: [{
                        type: "shape",
                        rotation: U || 0,
                        points: [0, 0, J, 0, J, J, 0, J],
                        background: "#ffffff",
                        gradientPack: m
                    }]
                });
                return R
            },
            createElement: function(P, x, o, L) {
                var p = s.createElement(P);
                return xc(p, x || A.widgetBorder, 2),
                p.style.font = o ? o : oi,
                L != V && (p.value = L),
                j.onElementCreated && j.onElementCreated(p),
                p
            },
            containedInView: function(j, D) {
                var Y = $k(D).getBoundingClientRect();
                return Kp({
                    x: Y.left,
                    y: Y.top,
                    width: Y.width,
                    height: Y.height
                }, Qn(j))
            },
            isIsolating: function() {
                return Xi > 0
            },
            setIsolating: function(X) {
                X ? Xi++ : Xi--
            },
            getMSMap: function() {
                return Sd
            },
            stringify: function(i, E) {
                var W = Date.prototype.toJSON;
                Date.prototype.toJSON = function() {
                    return "__ht__date" + this.getTime()
                }
                ;
                var u = JSON.stringify(i, function(T, e) {
                    return "function" == typeof e ? "__ht__" + (e.__ht__ || e.toString()) : Hg(e) ? Zm(e) : e
                }, E == V ? 2 : E);
                return Date.prototype.toJSON = W,
                u
            },
            parse: function(S) {
                return xe(S) ? JSON.parse(S, function(R, y) {
                    if (xe(y)) {
                        if ("__ht__function" == y.substr(0, 14)) {
                            var Q = y.indexOf("{") + 1
                              , N = y.lastIndexOf("}")
                              , U = y.indexOf("(") + 1
                              , l = y.indexOf(")");
                            if (Q && N && U && l) {
                                var q = new Function(y.substring(U, l),y.substring(Q, N));
                                return q.__ht__ = y.substr(6),
                                q
                            }
                        }
                        if ("__ht__date" == y.substr(0, 10))
                            return new Date(p(y.substr(10)))
                    }
                    return y
                }) : S
            },
            loadJS: function(m, o) {
                o && m.push(o);
                var T = m.shift();
                if (_b(T))
                    m = T.contact(m),
                    j.loadJS(m);
                else if (Vq(T))
                    T(),
                    j.loadJS(m);
                else if (xe(T)) {
                    var J = s.createElement("script");
                    J.onload = function() {
                        j.loadJS(m)
                    }
                    ,
                    J.setAttribute("src", T),
                    s.getElementsByTagName("head")[0].appendChild(J)
                } else
                    m.length && j.loadJS(m)
            },
            toRoundedCorner: function(l, C) {
                var S = l.size();
                if (0 >= C)
                    return {
                        points: l
                    };
                var g, U = new Vr, d = new Vr, o = l.get(0);
                U.add(o),
                d.add(1);
                for (var u = 1; S > u; u++)
                    if (S > u + 1) {
                        var N = l.get(u)
                          , K = l.get(u + 1)
                          , f = o.x
                          , m = o.y
                          , n = N.x
                          , _ = N.y
                          , p = _ - m
                          , Z = n - f
                          , c = x(p, Z);
                        g = b(.99 * uf(o, N), C),
                        U.add({
                            x: n - g * z(c),
                            y: _ - g * E(c)
                        }),
                        U.add(N),
                        f = N.x,
                        m = N.y,
                        n = K.x,
                        _ = K.y,
                        p = _ - m,
                        Z = n - f,
                        c = x(p, Z),
                        g = b(.99 * uf(N, K), C),
                        o = {
                            x: f + g * z(c),
                            y: m + g * E(c)
                        },
                        U.add(o),
                        d.addAll([2, 3])
                    } else
                        U.add(l.get(u)),
                        d.add(2);
                return {
                    points: U,
                    segments: d
                }
            },
            toColorData: rc,
            setCanvas: ug,
            createDiv: ff,
            createDisabledDiv: Vm,
            createView: Gc,
            createCanvas: qb,
            appendChild: mg,
            initContext: Zf,
            checkLoadingImage: fs,
            translateAndScale: Pk,
            layout: Pc,
            getPosition: sg,
            drawPoints: jn,
            drawRoundRect: Wi,
            drawBorder: Mo,
            setFocus: Fl,
            getter: Eh,
            setter: Ei,
            isEmptyObject: zf
        }, !0),
        lk(v, {
            autoAdjustIndex: 1,
            hierarchicalRendering: 1,
            adjustChildrenToTop: 1,
            autoHideScrollBar: 1,
            autoUpdate: 1,
            firstPersonMode: 1,
            ortho: 1,
            strict: 1,
            stickToRight: 1,
            instant: 1,
            closePath: 1,
            hierarchical: 1,
            doubleClickToToggle: 1,
            continuousLayout: 1,
            syncSize: 1
        }, !0);
        var Uo = j.disabledOpacity
          , Kn = j.toolTipDelay
          , nk = j.devicePixelRatio
          , Ck = j.autoMakeVisible
          , Op = j.autoHideScrollBar
          , jh = j.imageGradient
          , Oo = j.showToolTip
          , Wr = j.hideToolTip
          , _f = j.dashPattern
          , ee = j.lineCap
          , tk = j.lineJoin
          , Ge = j.labelColor
          , ag = j.labelSelectColor
          , oi = j.labelFont
          , tb = j.widgetIndent
          , Mm = j.widgetRowHeight
          , jo = j.widgetHeaderHeight
          , Kc = j.widgetTitleHeight
          , th = j.scrollBarColor
          , xs = j.scrollBarSize
          , Wh = j.scrollBarTimeout
          , bj = j.scrollBarMinLength
          , Cq = j.scrollBarInteractiveSize
          , gs = j.zoomIncrement
          , Rf = j.scrollZoomIncrement
          , Tj = j.pinchZoomIncrement
          , $d = j.zoomMax
          , Ho = j.zoomMin
          , uq = j.createObject
          , vh = j.preventDefault
          , im = j.setImage
          , bn = j.getImage
          , zm = j.isImageComplete
          , Lk = j.drawCenterImage
          , rh = j.drawStretchImage
          , aj = j.getId
          , dk = j.callLater
          , rj = j.sortFunc
          , nc = j.clone
          , Fp = j.getClass
          , Xp = j.startAnim
          , wc = j.brighter
          , hn = j.darker
          , Gg = j.drawText
          , bk = j.getTextSize
          , _e = j.isLeftButton
          , mq = j.getTouchCount
          , _g = j.isDoubleClick
          , ig = j.isShiftDown
          , jr = j.isCtrlDown
          , Qn = j.getClientPoint
          , Yc = j.getPagePoint
          , uf = j.getDistance
          , Pr = j.unionPoint
          , Ql = j.unionRect
          , Kp = j.containsPoint
          , Kd = j.containsRect
          , Ar = j.intersectsRect
          , qj = j.intersection
          , Ib = j.getWindowInfo
          , Qf = j.grow
          , jd = j.getLogicalPoint
          , Dl = j.startDragging
          , hp = j.removeHTML
          , Jk = j.createElement
          , Rd = j.segmentResolution
          , gm = j.shapeResolution
          , Sp = j.shapeSide
          , fh = j.def
          , bm = function(Q, g, y) {
            fh(B + "." + Q, g, y)
        }
          , Tp = function(G, Y) {
            G.childNodes.forEach(function(y) {
                Y(y),
                Tp(y, Y)
            })
        };
        lk(j, {
            toolTipLabelColor: Ge,
            toolTipLabelFont: oi,
            toolTipBackground: A.toolTipBackground,
            toolTipShadowColor: Gn,
            drawBreakableText: Nl,
            setDevicePixelRatio: function(z) {
                nk = j.devicePixelRatio = "number" == typeof z ? z : q.devicePixelRatio,
                Tp(s.body, function(j) {
                    var M = j._ht;
                    M && M._canvas && (ug(M._canvas, M.getWidth(), M.getHeight()),
                    M.redraw ? M.redraw() : M.iv())
                })
            }
        }, !0);
        var Ed = 1e-6
          , Zd = "undefined" != typeof Uint16Array ? Uint16Array : Array
          , mj = "undefined" != typeof Float32Array ? Float32Array : Array
          , Fo = function(s, E, P) {
            var k = [s[0] - E[0], s[1] - E[1], s[2] - E[2]];
            if (P) {
                var O = uf(k);
                O > 0 && (k[0] /= O,
                k[1] /= O,
                k[2] /= O)
            }
            return k
        }
          , Wd = function() {
            var m = "charCodeAt"
              , Z = 2 * (2 * Li.length + 1);
            for (var P in q)
                if (P === B + $j[0] + gn.length) {
                    var y = q[P];
                    if (!y)
                        break;
                    for (var $ = y.length, w = 0; $ > w; w++)
                        if (y[w][m](0) === Z && y[w + 1] != V && y[w + 1] === gn[0] && y[w + 2] != V && y[w + 2][m](0) === Z) {
                            for (var Q = w + 3; $ > Q; Q++)
                                if (y[Q][m](0) === Z) {
                                    if (0 == y[Q + 1])
                                        for (var H, b = Q + 2; $ > b; b++) {
                                            if (y[b][m](0) === Z) {
                                                0 == y[b - 1] && H && (f = H.substr(0, H.length - 1));
                                                break
                                            }
                                            H == V ? H = y[b] : H += y[b]
                                        }
                                    break
                                }
                            break
                        }
                    break
                }
            return function(F) {
                return [-F[0], -F[1], -F[2]]
            }
        }()
          , Yg = function(d, Q) {
            return 3 === d.length ? d[0] * Q[0] + d[1] * Q[1] + d[2] * Q[2] : d[0] * Q[0] + d[1] * Q[1]
        }
          , Ue = function() {
            var l = new mj(16);
            return l[0] = 1,
            l[1] = 0,
            l[2] = 0,
            l[3] = 0,
            l[4] = 0,
            l[5] = 1,
            l[6] = 0,
            l[7] = 0,
            l[8] = 0,
            l[9] = 0,
            l[10] = 1,
            l[11] = 0,
            l[12] = 0,
            l[13] = 0,
            l[14] = 0,
            l[15] = 1,
            l
        }
          , ng = Ue()
          , Te = function(e) {
            var n = new mj(16);
            return n[0] = e[0],
            n[1] = e[1],
            n[2] = e[2],
            n[3] = e[3],
            n[4] = e[4],
            n[5] = e[5],
            n[6] = e[6],
            n[7] = e[7],
            n[8] = e[8],
            n[9] = e[9],
            n[10] = e[10],
            n[11] = e[11],
            n[12] = e[12],
            n[13] = e[13],
            n[14] = e[14],
            n[15] = e[15],
            n
        }
          , sp = function(X, R) {
            return X[0] = R[0],
            X[1] = R[1],
            X[2] = R[2],
            X[3] = R[3],
            X[4] = R[4],
            X[5] = R[5],
            X[6] = R[6],
            X[7] = R[7],
            X[8] = R[8],
            X[9] = R[9],
            X[10] = R[10],
            X[11] = R[11],
            X[12] = R[12],
            X[13] = R[13],
            X[14] = R[14],
            X[15] = R[15],
            X
        }
          , el = function(d) {
            return d[0] = 1,
            d[1] = 0,
            d[2] = 0,
            d[3] = 0,
            d[4] = 0,
            d[5] = 1,
            d[6] = 0,
            d[7] = 0,
            d[8] = 0,
            d[9] = 0,
            d[10] = 1,
            d[11] = 0,
            d[12] = 0,
            d[13] = 0,
            d[14] = 0,
            d[15] = 1,
            d
        }
          , Nj = function(D, Z) {
            var e = D[0]
              , z = D[1]
              , p = D[2];
            return D[0] = Z[0] * e + Z[4] * z + Z[8] * p + Z[12],
            D[1] = Z[1] * e + Z[5] * z + Z[9] * p + Z[13],
            D[2] = Z[2] * e + Z[6] * z + Z[10] * p + Z[14],
            D
        }
          , xf = function(E, j) {
            var u = E[0]
              , M = E[1]
              , Z = E[2]
              , X = E[3];
            return E[0] = j[0] * u + j[4] * M + j[8] * Z + j[12] * X,
            E[1] = j[1] * u + j[5] * M + j[9] * Z + j[13] * X,
            E[2] = j[2] * u + j[6] * M + j[10] * Z + j[14] * X,
            E[3] = j[3] * u + j[7] * M + j[11] * Z + j[15] * X,
            E
        }
          , xl = function() {
            var M, K, L, B, Z = kb(bd[1] + bd[7]), W = kb(bd[0] + bd[3] - bd[10]), d = kb(bd[8] + 2), A = function() {
                return K = L.charAt(M),
                M += 1,
                K
            }, I = function() {
                var j = "";
                if (K === d)
                    for (; A(); ) {
                        if (K === d)
                            return A(),
                            j;
                        j += K
                    }
                else
                    A()
            }, t = function() {
                for (; K && " " >= K; )
                    A()
            }, $ = function() {
                var O, o = {};
                if (K === Z) {
                    if (A(),
                    t(),
                    K === W)
                        return A(),
                        o;
                    for (; K; ) {
                        if (O = I(),
                        t(),
                        A(),
                        o[O] = B(),
                        t(),
                        K === W)
                            return A(),
                            o;
                        A(),
                        t()
                    }
                }
            };
            return B = function() {
                switch (t(),
                K) {
                case Z:
                    return $();
                default:
                    return I()
                }
            }
            ,
            function(F) {
                if (H = {},
                F) {
                    var Q;
                    if (L = F,
                    M = 0,
                    K = " ",
                    Q = B(),
                    t(),
                    !K)
                        return Q
                }
            }
        }()
          , Cb = function(p, v) {
            if (v) {
                var m = E(v)
                  , h = z(v)
                  , j = p[4]
                  , S = p[5]
                  , x = p[6]
                  , c = p[7]
                  , k = p[8]
                  , H = p[9]
                  , X = p[10]
                  , J = p[11];
                p[4] = j * h + k * m,
                p[5] = S * h + H * m,
                p[6] = x * h + X * m,
                p[7] = c * h + J * m,
                p[8] = k * h - j * m,
                p[9] = H * h - S * m,
                p[10] = X * h - x * m,
                p[11] = J * h - c * m
            }
        }
          , hc = function(N, V) {
            if (V) {
                var L = E(V)
                  , s = z(V)
                  , J = N[0]
                  , u = N[1]
                  , l = N[2]
                  , R = N[3]
                  , o = N[8]
                  , B = N[9]
                  , p = N[10]
                  , k = N[11];
                N[0] = J * s - o * L,
                N[1] = u * s - B * L,
                N[2] = l * s - p * L,
                N[3] = R * s - k * L,
                N[8] = J * L + o * s,
                N[9] = u * L + B * s,
                N[10] = l * L + p * s,
                N[11] = R * L + k * s
            }
        }
          , be = function(G, R) {
            if (R) {
                var V = E(R)
                  , Q = z(R)
                  , d = G[0]
                  , T = G[1]
                  , i = G[2]
                  , Z = G[3]
                  , r = G[4]
                  , e = G[5]
                  , s = G[6]
                  , k = G[7];
                G[0] = d * Q + r * V,
                G[1] = T * Q + e * V,
                G[2] = i * Q + s * V,
                G[3] = Z * Q + k * V,
                G[4] = r * Q - d * V,
                G[5] = e * Q - T * V,
                G[6] = s * Q - i * V,
                G[7] = k * Q - Z * V
            }
        }
          , ys = function(Q, p, a) {
            return Nm(V, a === !1 ? V : Q.getFinalScale3d(), Q.getFinalRotation3d(), Q.getRotationMode(), Q.p3(), V, p)
        }
          , Nm = function(K, L, w, $, X, e, u) {
            return e || (e = Ue()),
            X && ho(e, X),
            Bj(e, w, $),
            u && ym(e, e, u),
            L && Cj(e, L),
            K && ym(e, e, K),
            e
        }
          , Xb = function(i, f, O) {
            f = p(f),
            O = p(O);
            var Q = this;
            Q.g = i,
            Q._84O = f,
            Q._85O = O,
            Q._70I = !0,
            Q.F = 0,
            Q._83O = f + O,
            Q.pen = {
                x: 0,
                y: 0
            }
        }
          , Jn = "lineDashOffset"
          , Zq = "setLineDash"
          , ob = function(s) {
            for (var v in s)
                1 === v.length && (Jn = s[v]);
            return v ? 1 : 0
        }
          , on = function(P, N, T) {
            return ek(N) ? P : P[Zq] ? (P[Zq](N),
            T && (P.lineDashOffset = T),
            P) : new Xb(P,N[0],N.length > 1 ? N[1] : N[0])
        }
          , pl = function(G, Q) {
            !ek(Q) && G[Zq] && (G[Zq](Wq),
            G.lineDashOffset = 0)
        };
        if (fh(Xb, m, {
            _69I: 6,
            moveTo: function(U, b) {
                var n = this
                  , g = n.pen;
                g.x = U,
                g.y = b,
                n.g.moveTo(U, b),
                n.start || (n.start = {
                    x: U,
                    y: b
                })
            },
            lineTo: function(R, P) {
                var H = this
                  , O = H.pen
                  , B = R - O.x
                  , b = P - O.y
                  , C = x(b, B)
                  , Y = z(C)
                  , N = E(C)
                  , L = H._23O(O.x, O.y, R, P)
                  , r = H._85O
                  , y = H._84O
                  , G = H._83O;
                if (H.F) {
                    if (H.F > L)
                        return H._70I ? H._72I(R, P) : H.moveTo(R, P),
                        H.F -= L,
                        void 0;
                    if (H._70I ? H._72I(O.x + Y * H.F, O.y + N * H.F) : H.moveTo(O.x + Y * H.F, O.y + N * H.F),
                    L -= H.F,
                    H.F = 0,
                    H._70I = !H._70I,
                    !L)
                        return
                }
                var k = M(L / G);
                if (k) {
                    for (var X = Y * y, a = N * y, K = Y * r, i = N * r, t = 0; k > t; t++)
                        H._70I ? (H._72I(O.x + X, O.y + a),
                        H.moveTo(O.x + K, O.y + i)) : (H.moveTo(O.x + K, O.y + i),
                        H._72I(O.x + X, O.y + a));
                    L -= G * k
                }
                H._70I ? L > y ? (H._72I(O.x + Y * y, O.y + N * y),
                H.moveTo(R, P),
                H.F = r - (L - y),
                H._70I = !1) : (H._72I(R, P),
                L === y ? (H.F = 0,
                H._70I = !H._70I) : (H.F = y - L,
                H.moveTo(R, P))) : L > r ? (H.moveTo(O.x + Y * r, O.y + N * r),
                H._72I(R, P),
                H.F = y - (L - r),
                H._70I = !0) : (H.moveTo(R, P),
                L === r ? (H.F = 0,
                H._70I = !H._70I) : H.F = r - L)
            },
            quadraticCurveTo: function(Q, k, E, o) {
                var m, n = this, z = n.pen, w = z.x, h = z.y, s = n._22O(w, h, Q, k, E, o), q = 0, l = 0, c = n._85O, r = n._84O;
                if (n.F) {
                    if (n.F > s)
                        return n._70I ? n._71I(Q, k, E, o) : n.moveTo(E, o),
                        n.F -= s,
                        void 0;
                    if (q = n.F / s,
                    m = n._20O(w, h, Q, k, E, o, q),
                    n._70I ? n._71I(m[2], m[3], m[4], m[5]) : n.moveTo(m[4], m[5]),
                    n.F = 0,
                    n._70I = !n._70I,
                    !s)
                        return
                }
                var J = s - s * q
                  , a = M(J / n._83O)
                  , I = r / s
                  , g = c / s;
                if (a)
                    for (var B = 0; a > B; B++)
                        n._70I ? (l = q + I,
                        m = n._21O(w, h, Q, k, E, o, q, l),
                        n._71I(m[2], m[3], m[4], m[5]),
                        q = l,
                        l = q + g,
                        m = n._21O(w, h, Q, k, E, o, q, l),
                        n.moveTo(m[4], m[5])) : (l = q + g,
                        m = n._21O(w, h, Q, k, E, o, q, l),
                        n.moveTo(m[4], m[5]),
                        q = l,
                        l = q + I,
                        m = n._21O(w, h, Q, k, E, o, q, l),
                        n._71I(m[2], m[3], m[4], m[5])),
                        q = l;
                J = s - s * q,
                n._70I ? J > r ? (l = q + I,
                m = n._21O(w, h, Q, k, E, o, q, l),
                n._71I(m[2], m[3], m[4], m[5]),
                n.moveTo(E, o),
                n.F = c - (J - r),
                n._70I = !1) : (m = n._19O(w, h, Q, k, E, o, q),
                n._71I(m[2], m[3], m[4], m[5]),
                s === r ? (n.F = 0,
                n._70I = !n._70I) : (n.F = r - J,
                n.moveTo(E, o))) : J > c ? (l = q + g,
                m = n._21O(w, h, Q, k, E, o, q, l),
                n.moveTo(m[4], m[5]),
                m = n._19O(w, h, Q, k, E, o, l),
                n._71I(m[2], m[3], m[4], m[5]),
                n.F = r - (J - c),
                n._70I = !0) : (n.moveTo(E, o),
                J === c ? (n.F = 0,
                n._70I = !n._70I) : n.F = c - J)
            },
            bezierCurveTo: function() {
                var o = arguments;
                this.pen = {
                    x: o[4],
                    y: o[5]
                },
                this.g.bezierCurveTo(o[0], o[1], o[2], o[3], o[4], o[5])
            },
            arc: function(w, d, b, a, g, Y) {
                Y || (a = -a,
                g = -g),
                cg(this, w, d, a, g - a, b, b, !1)
            },
            rect: function(C, $, Y, E) {
                var O = this;
                O.pen = {
                    x: C,
                    y: $
                },
                O.moveTo(C, $),
                O.lineTo(C, $ + E),
                O.lineTo(C + Y, $ + E),
                O.lineTo(C + Y, $),
                O.lineTo(C, $)
            },
            beginPath: function() {
                this.g.beginPath()
            },
            closePath: function() {
                this.lineTo(this.start.x, this.start.y)
            },
            _23O: function(j, D, l, V) {
                var J = l - j
                  , F = V - D;
                return r(J * J + F * F)
            },
            _22O: function(F, g, p, D, R, T, u) {
                for (var C, P, K, n, w, k, r, H = 0, q = F, i = g, c = u > 0 ? u : this._69I, t = 1; c >= t; t++)
                    K = t / c,
                    n = 1 - K,
                    w = n * n,
                    k = 2 * K * n,
                    r = K * K,
                    C = w * F + k * p + r * R,
                    P = w * g + k * D + r * T,
                    H += this._23O(q, i, C, P),
                    q = C,
                    i = P;
                return H
            },
            _21O: function(O, B, K, v, H, I, W, C) {
                var Z = this;
                if (0 === W)
                    return Z._20O(O, B, K, v, H, I, C);
                if (1 === C)
                    return Z._19O(O, B, K, v, H, I, W);
                var A = Z._20O(O, B, K, v, H, I, C);
                return A.push(W / C),
                Z._19O.apply(Z, A)
            },
            _20O: function(K, u, C, d, m, U, W) {
                if (1 !== W) {
                    var g = C + (m - C) * W
                      , o = d + (U - d) * W;
                    C = K + (C - K) * W,
                    d = u + (d - u) * W,
                    m = C + (g - C) * W,
                    U = d + (o - d) * W
                }
                return [K, u, C, d, m, U]
            },
            _19O: function(j, M, T, y, l, S, J) {
                if (1 !== J) {
                    var z = j + (T - j) * J
                      , i = M + (y - M) * J;
                    T += (l - T) * J,
                    y += (S - y) * J,
                    j = z + (T - z) * J,
                    M = i + (y - i) * J
                }
                return [j, M, T, y, l, S]
            },
            _72I: function(V, b) {
                var c = this.pen;
                (V !== c.x || b !== c.y) && (c.x = V,
                c.y = b,
                this.g.lineTo(V, b))
            },
            _71I: function(n, N, c, b) {
                var v = this.pen;
                (n !== c || N !== b || c !== v.x || b !== v.y) && (v.x = c,
                v.y = b,
                this.g.quadraticCurveTo(n, N, c, b))
            }
        }),
        W && c) {
            var Co = c.toString();
            O = Co.indexOf(te.substr(0, 2)) > 0 && Co.indexOf(ve + ve.substr(1, 1)) > 1 || Co.indexOf(qc[0] + So.substr(0, 2) + te.substr(2, 2) + $j[0] + te[4]) > 1 ? !0 : !1
        }
        var fj = V
          , Zj = V
          , xn = function(X) {
            fj && !X._72O && (Zj || (Zj = {}),
            Zj[X._72O = aj()] = X)
        }
          , ad = function(u, O) {
            if (O || (O = u),
            O && (fj || (fj = {}),
            !fj[u])) {
                var F = new XMLHttpRequest;
                if (fj[O] = {
                    request: F,
                    url: O
                },
                F.overrideMimeType && F.overrideMimeType("text/plain"),
                O = j.beforeLoadURL(O),
                O.data) {
                    var T = j.parse(O.data);
                    $g(u, T),
                    j.handleCompTypeLoaded(u, T)
                } else
                    F.open("GET", encodeURI(O), !0),
                    F.onload = function(w) {
                        if (200 === this.status || 0 === this.status) {
                            var M = j.parse(w.target.response || w.target.responseText);
                            $g(u, M),
                            j.handleCompTypeLoaded(u, M)
                        } else
                            $g(u, V)
                    }
                    ,
                    F.onerror = function() {
                        $g(u, V)
                    }
                    ,
                    F.send(null)
            }
        }
          , $g = function(h, q) {
            if (Me[h] = q,
            delete fj[h],
            zf(fj) && (fj = V,
            Zj)) {
                for (var H in Zj) {
                    var i = Zj[H];
                    i.invalidateAll && i.invalidateAll(F, "compTypeLoaded", h),
                    i.redraw && i.redraw(),
                    i.iv(),
                    delete i._72O
                }
                Zj = V
            }
            if (q && Zj)
                for (var H in Zj) {
                    var i = Zj[H];
                    i.invalidateAll && i.invalidateAll(F, "compTypeLoading", h),
                    i.redraw && i.redraw(),
                    i.iv()
                }
        }
          , ep = A.chart
          , Uj = j.compStack = []
          , bo = /^style@/
          , Oi = /^attr@/
          , qm = /^field@/
          , $c = {
            x: .5,
            y: .5
        }
          , Cm = function(D, j, P, f) {
            if (!D)
                return 0;
            if (_p(D.fitSize, j, P) && f)
                return f;
            var B = _p(D.width, j, P);
            return null == B ? 20 : B
        }
          , Hi = function(W, C, H, p) {
            if (!W)
                return 0;
            if (_p(W.fitSize, C, H) && p)
                return p;
            var F = _p(W.height, C, H);
            return null == F ? 20 : F
        }
          , _p = function(I, U, t) {
            if (!I || !I.func)
                return I;
            var q, O = I.func, f = I.value;
            return q = Vq(O) ? t && t.vectorDataBindingDisabled && !I.isSafeFunc ? f : O(U, t) : U instanceof $n ? Oi.test(O) ? U.a(O.slice(5)) : bo.test(O) ? U.s(O.slice(6)) : qm.test(O) ? U[O.slice(6)] : U[O] ? U[O](t) : f : f,
            f !== F && q == V ? f : q
        }
          , ts = j.drawImage = function() {
            var W, r, $, G, h, c, Y = function(n, z) {
                n.getValue && n.getValue.compType === z || (n.getValue = function(w) {
                    var B = m(n, w);
                    if (B === F && z.properties) {
                        var V = z.properties[w];
                        V && (B = V.defaultValue)
                    }
                    return B
                }
                ,
                n.getValue.compType = z)
            }, m = function(f, N, B) {
                var Z = f[N];
                return Z && Z.func ? (Z = _p(Z, r, $),
                B && (Z = B(Z))) : B && (Z = f[N] = B(Z)),
                Z
            }, T = function(Q, l) {
                var r;
                if (r = l ? m(Q, l) : Q,
                h && r) {
                    if ("override" === c)
                        return h;
                    if ("override_rgb" === c) {
                        var O = To(h);
                        return r = rc(r),
                        "rgba(" + M(255 * O[0]) + "," + M(255 * O[1]) + "," + M(255 * O[2]) + "," + r[3] / 255 + ")"
                    }
                    if ("override_a" === c) {
                        var O = To(h);
                        return r = rc(r),
                        "rgba(" + r[0] + "," + r[1] + "," + r[2] + "," + O[3] + ")"
                    }
                    var O = To(h);
                    return r = rc(r),
                    "rgba(" + M(r[0] * O[0]) + "," + M(r[1] * O[1]) + "," + M(r[2] * O[2]) + "," + r[3] / 255 * O[3] + ")"
                }
                return r
            }, p = function(x) {
                if (_b(x)) {
                    for (var N = new Vr, n = x.length, Y = 0; n > Y; Y += 2)
                        N.add({
                            x: x[Y],
                            y: x[Y + 1]
                        });
                    x = N
                }
                return x
            }, K = function(_) {
                var y = m(_, "anchorX")
                  , g = m(_, "anchorY");
                if (y !== F || g !== F)
                    return {
                        x: y === F ? $c.x : y,
                        y: g === F ? $c.y : g
                    };
                var j = m(_, "type")
                  , M = m(_, "name");
                if ("image" !== j || !M)
                    return $c;
                var p = bn(M);
                return p && p.anchorX !== F && p.anchorY !== F ? {
                    x: p.anchorX,
                    y: p.anchorY
                } : $c
            }, l = function(F, u) {
                var S = m(F, Ci)
                  , I = K(F);
                if (_b(S)) {
                    var O = S.length
                      , r = m(F, "relative")
                      , g = u.width
                      , A = u.height;
                    if (4 === O)
                        S = {
                            x: S[0],
                            y: S[1],
                            width: S[2],
                            height: S[3]
                        },
                        r ? (S.x *= g,
                        S.y *= A,
                        S.width *= g,
                        S.height *= A) : u.fitSize && (S.x *= u.widthScale,
                        S.width *= u.widthScale,
                        S.y *= u.heightScale,
                        S.height *= u.heightScale);
                    else if (3 === O) {
                        var j = S[0];
                        S = {
                            width: S[1],
                            height: S[2]
                        },
                        r ? (S.width *= g,
                        S.height *= A) : u.fitSize && (S.width *= u.widthScale,
                        S.height *= u.heightScale),
                        "object" == typeof j ? j.length && (j = {
                            x: j[0],
                            y: j[1]
                        }) : j = sg(j, u, S),
                        S.x = j.x - S.width * I.x,
                        S.y = j.y - S.height * I.y
                    }
                    var T = m(F, "offsetX");
                    T && (u.fitSize && (T *= u.widthScale),
                    S.x += T),
                    T = m(F, "offsetY"),
                    T && (u.fitSize && (T *= u.heightScale),
                    S.y += T)
                }
                return S
            }, y = function(I) {
                return _b(I) ? new Vr(I) : I
            }, H = function(O, X, j, N, G, R, J) {
                var V = W.interactiveInfo
                  , v = O.transform;
                if (v)
                    return W.save(),
                    W.setTransform(v.a, v.b, v.c, v.d, v.tx, v.ty),
                    V && V.compInfos.push({
                        comp: O,
                        rect: X,
                        matrix: v.clone()
                    }),
                    !0;
                G === F && (G = 1),
                R === F && (R = 1);
                var r = m(O, "clipPercentage")
                  , d = gi(j, X);
                if (d && !N && 1 === G && 1 === R && !(1 > r))
                    return V && V.compInfos.push({
                        comp: O,
                        rect: X,
                        matrix: V.matrix.clone()
                    }),
                    !1;
                J = J || $c;
                var k = X.x + X.width * J.x
                  , f = X.y + X.height * J.y
                  , C = j.x + j.width * J.x
                  , P = j.y + j.height * J.y
                  , l = j.width ? G * (X.width / j.width) : 1
                  , Y = j.height ? R * (X.height / j.height) : 1;
                if (W.save(),
                V && (V.matrix.appendTranslate(k, f).appendRotate(N).appendScale(l, Y).appendTranslate(-C, -P),
                V.compInfos.push({
                    comp: O,
                    rect: X,
                    matrix: V.matrix.clone()
                })),
                Sc(W, k, f),
                wo(W, N || 0),
                di(W, l, Y),
                Sc(W, -C, -P),
                1 > r) {
                    0 > r && (r = 0);
                    var U = Or(j, m(O, "clipDirection"), r);
                    W.beginPath(),
                    W.rect(U.x, U.y, U.width, U.height),
                    W.clip()
                }
                return !0
            }, k = function() {
                W.restore()
            }, N = function(d, I, c) {
                var g = m(d, "path")
                  , u = m(d, cp)
                  , M = m(d, "scaleX")
                  , B = m(d, "scaleY")
                  , r = K(d)
                  , R = V
                  , w = nf(null, g);
                if (c || (c = d.unionRect,
                c || (c = Pr(w),
                d.path.func || (d.unionRect = c)),
                R = c),
                c) {
                    R || (R = d.unionRect,
                    R || (R = Pr(w),
                    d.path.func || (d.unionRect = R)));
                    var i = H(d, c, R, u, M, B, r)
                      , E = m(d, "borderPattern")
                      , j = on(W, E)
                      , L = T(d, "background")
                      , U = T(d, "borderColor")
                      , O = m(d, "borderWidth")
                      , N = m(d, "gradient")
                      , C = T(d, "gradientColor")
                      , A = m(d, "border3d")
                      , z = m(d, "border3dColor")
                      , l = m(d, "border3dAccuracy")
                      , y = W.lineJoin
                      , n = W.lineCap;
                    if (W.lineJoin = m(d, "borderJoin") || tk,
                    W.lineCap = m(d, "borderCap") || ee,
                    L ? (qh(W, L, N, C, R),
                    nf(W, g),
                    W.fill(),
                    j !== W && nf(W, g)) : nf(W, g),
                    O && U) {
                        var q = m(d, "borderWidthAbsolute");
                        q && (W.save(),
                        W.setTransform(1, 0, 0, 1, 0, 0)),
                        W.lineWidth = O,
                        W.strokeStyle = U,
                        W.stroke(),
                        q && W.restore(),
                        A && Tq(W, U, z, O, G, l)
                    }
                    if (pl(W, E),
                    m(d, "dash")) {
                        var x = m(d, "dashWidth") || O;
                        if (x > 0) {
                            E = m(d, "dashPattern") || _f;
                            var j = on(W, E, m(d, "dashOffset"))
                              , P = T(d, "dashColor") || T(Vb);
                            j !== W && nf(W, g),
                            W.strokeStyle = P,
                            W.lineWidth = x,
                            W.stroke(),
                            m(d, "dash3d") && Tq(W, P, T(d, "dash3dColor"), x, G, m(d, "dash3dAccuracy")),
                            pl(W, E)
                        }
                    }
                    I === Ci && gb(W, L, m(d, "depth"), R),
                    W.lineJoin = y,
                    W.lineCap = n,
                    i && k()
                }
            }, d = function(L, E, l, x) {
                var S = m(L, Se, p)
                  , O = m(L, cp)
                  , M = K(L);
                if (S && x.fitSize) {
                    var D = Math.abs(Math.cos(O)) < .001
                      , P = new Vr
                      , Q = Pr(S)
                      , J = x.widthScale
                      , j = x.heightScale
                      , B = Q.x + M.x * Q.width
                      , f = Q.y + M.y * Q.height
                      , R = B * J
                      , q = f * j;
                    S.each(function(_) {
                        var F = _.x - B
                          , V = _.y - f;
                        P.add({
                            x: R + F * (D ? j : J),
                            y: q + V * (D ? J : j)
                        })
                    }),
                    S = P,
                    L.unionRect = null
                }
                var u = m(L, "scaleX")
                  , d = m(L, "scaleY")
                  , a = E === Mg
                  , I = V;
                if (!l && a && (l = L.unionRect,
                l || (l = Pr(S),
                L.points.func || (L.unionRect = l)),
                I = l),
                l) {
                    a ? I || (I = L.unionRect,
                    I || (I = Pr(S),
                    L.points.func || (L.unionRect = I))) : I = l;
                    var n, s, U, t, g = H(L, l, I, O, u, d, M), Z = m(L, "borderPattern"), e = on(W, Z), Y = T(L, "background"), w = bn(m(L, "repeatImage"), h, c), C = m(L, "gradientPack"), z = T(L, "borderColor"), o = m(L, "borderWidth"), v = m(L, "segments", y), i = m(L, "gradient"), F = T(L, "gradientColor"), X = m(L, "border3d"), A = m(L, "border3dColor"), N = m(L, "border3dAccuracy"), _ = m(L, "closePath"), b = m(L, "fillRule") || "nonzero", yb = W.lineJoin, td = W.lineCap;
                    if (W.lineJoin = m(L, "borderJoin") || tk,
                    W.lineCap = m(L, "borderCap") || ee,
                    a)
                        if (Y || w || C) {
                            var Gp = m(L, "fillClipPercentage");
                            if (1 > Gp) {
                                0 > Gp && (Gp = 0);
                                var oc = Or(I, m(L, "fillClipDirection"), Gp);
                                W.save(),
                                W.beginPath(),
                                W.rect(oc.x, oc.y, oc.width, oc.height),
                                W.clip()
                            }
                            if (jn(W, S, v, _),
                            C)
                                go(W, C);
                            else if (w) {
                                var yd = W
                                  , gn = h
                                  , Aq = c;
                                ln(W, w, h, c, r, $),
                                W = yd,
                                h = gn,
                                c = Aq
                            } else {
                                var yd = W;
                                qh(W, Y, i, F, I),
                                W = yd
                            }
                            W.fill(b),
                            1 > Gp && W.restore(),
                            C && W.restore(),
                            e !== W && jn(e, S, v, _)
                        } else
                            jn(e, S, v, _);
                    else if ("roundRect" === E ? n = m(L, "cornerRadius") : "polygon" === E ? n = m(L, "polygonSide") : "arc" === E && (n = m(L, "arcFrom"),
                    s = m(L, "arcTo"),
                    U = m(L, "arcClose"),
                    t = m(L, "arcOval")),
                    Y || w || C) {
                        var Gp = m(L, "fillClipPercentage");
                        if (1 > Gp) {
                            0 > Gp && (Gp = 0);
                            var oc = Or(I, m(L, "fillClipDirection"), Gp);
                            W.save(),
                            W.beginPath(),
                            W.rect(oc.x, oc.y, oc.width, oc.height),
                            W.clip()
                        }
                        if (eg(W, E, I, n, s, U, t),
                        C)
                            go(W, C);
                        else if (w) {
                            var yd = W
                              , gn = h
                              , Aq = c;
                            ln(W, w, h, c, r, $),
                            W = yd,
                            h = gn,
                            c = Aq
                        } else
                            qh(W, Y, i, F, I);
                        W.fill(b),
                        1 > Gp && W.restore(),
                        C && W.restore(),
                        W !== e && eg(e, E, I, n, s, U, t)
                    } else
                        eg(e, E, I, n, s, U, t);
                    if (o && z) {
                        var rp = m(L, "borderWidthAbsolute");
                        rp && (W.save(),
                        W.setTransform(1, 0, 0, 1, 0, 0)),
                        W.lineWidth = o,
                        W.strokeStyle = z,
                        W.stroke(),
                        rp && W.restore(),
                        X && Tq(W, z, A, o, G, N)
                    }
                    if (pl(W, Z),
                    m(L, "dash")) {
                        var $i = m(L, "dashWidth") || o;
                        if ($i > 0) {
                            Z = m(L, "dashPattern") || _f;
                            var e = on(W, Z, m(L, "dashOffset"))
                              , _q = T(L, "dashColor") || T(Vb);
                            e !== W && (a ? jn(e, S, v, _) : eg(e, E, I, n, s, U, t)),
                            W.strokeStyle = _q,
                            W.lineWidth = $i,
                            W.stroke(),
                            m(L, "dash3d") && Tq(W, _q, T(L, "dash3dColor"), $i, G, m(L, "dash3dAccuracy")),
                            pl(W, Z)
                        }
                    }
                    E === Ci && gb(W, Y, m(L, "depth"), I),
                    W.lineJoin = yb,
                    W.lineCap = td,
                    g && k()
                }
            }, Z = function(g, E) {
                var d = h
                  , Y = c
                  , X = h || m(g, Zc)
                  , v = c || m(g, "blendMode")
                  , J = bn(m(g, "name"), X, v);
                J && (rh(W, J, m(g, "stretch"), E.x, E.y, E.width, E.height, r, $, X, null, v),
                h = d,
                c = Y)
            }, R = function(_, n) {
                var H = m(_, "text");
                H != V && Gg(W, H, m(_, "font"), T(_, Zc), n.x, n.y, n.width, n.height, m(_, "align"), m(_, "vAlign"))
            }, I = function(Y, i) {
                Mo(W, T(Y, Zc), i.x, i.y, i.width, i.height, m(Y, "width"))
            }, v = function(Z, d) {
                var B = m(Z, _k)
                  , l = 0;
                if (B && (B.forEach(function(q) {
                    l += q
                }),
                l > 0)) {
                    for (var c = m(Z, "colors") || ep, S = m(Z, "startAngle") || 0, h = m(Z, "hollow"), A = m(Z, Pd), R = m(Z, rq), G = m(Z, Jq), i = A ? new Vr : V, e = d.x, n = d.y, U = d.width, M = d.height, q = e + U / 2, s = n + M / 2, t = b(U, M) / 2, y = 0, f = 0; f < B.length; f++) {
                        var X = B[f]
                          , O = u * X / l
                          , Q = S + O;
                        if (W.fillStyle = c[y++],
                        y === c.length && (y = 0),
                        W.beginPath(),
                        h) {
                            var H = q + z(S) * t / 2
                              , k = s + E(S) * t / 2
                              , P = q + z(Q) * t
                              , w = s + E(Q) * t;
                            W.moveTo(H, k),
                            W.arc(q, s, t / 2, S, Q, !1),
                            W.lineTo(P, w),
                            W.arc(q, s, t, Q, S, !0)
                        } else
                            W.moveTo(q, s),
                            W.arc(q, s, t, Q, S, !0);
                        i && (O = (S + Q) / 2,
                        i.add({
                            text: Vq(A) ? A(X, f, l, r) : X,
                            x: q + .75 * z(O) * t,
                            y: s + .75 * E(O) * t
                        })),
                        W.closePath(),
                        W.fill(),
                        S = Q
                    }
                    i && i.each(function(E) {
                        Gg(W, E.text, R, G, E.x, E.y, 0, 0, Do)
                    })
                }
            }, e = function(z, O) {
                var c = m(z, vr);
                if (c && c.length > 0) {
                    var D = c.length
                      , b = m(z, Pd)
                      , B = m(z, rq)
                      , e = m(z, Jq)
                      , L = b ? new Vr : V
                      , x = m(z, "minValue") || 0
                      , N = m(z, "maxValue");
                    if (N == V && (N = 0,
                    c.forEach(function(V) {
                        m(V, _k).forEach(function(y) {
                            N = X(N, y)
                        })
                    })),
                    x === N)
                        return;
                    for (var Y = O.height / (N - x), K = O.y + N * Y, _ = m(c[0], _k).length, j = O.width / (3 * _ + 1), l = 2 * j / D, A = 0, p = 0; D > p; p++)
                        for (var g = c[p], s = m(g, Zc), v = m(g, "colors"), y = m(g, _k), t = 0; _ > t; t++) {
                            v ? W.fillStyle = v[t] : s ? W.fillStyle = s : (W.fillStyle = ep[A++],
                            A === ep.length && (A = 0));
                            var I = y[t]
                              , i = I * Y
                              , d = O.x + (1 + 3 * t) * j + p * l;
                            if (he(W, d, K - i, l, i),
                            L) {
                                var H = Vq(b) ? b(I, t, g, r) : I
                                  , T = bk(B, H).height;
                                L.add({
                                    x: d,
                                    y: K - i - T,
                                    width: l,
                                    height: T,
                                    text: H
                                })
                            }
                        }
                    L && L.each(function(V) {
                        Gg(W, V.text, B, e, V.x, V.y, V.width, V.height, Do)
                    })
                }
            }, O = function(w, H) {
                var n = m(w, vr);
                if (n && n.length > 0) {
                    var Y = n.length
                      , Q = m(n[0], _k).length
                      , P = H.width / (3 * Q + 1)
                      , s = 0
                      , A = m(w, "maxValue")
                      , c = m(w, Pd)
                      , S = m(w, rq)
                      , f = m(w, Jq)
                      , h = c ? new Vr : V;
                    if (A == V) {
                        A = 0;
                        for (var q = 0; Q > q; q++) {
                            for (var k = 0, z = 0; Y > z; z++)
                                k += m(n[z], _k)[q];
                            A = X(A, k)
                        }
                    }
                    if (A > 0) {
                        for (var q = 0; Q > q; q++)
                            for (var N = H.y + H.height, z = 0; Y > z; z++) {
                                var M = n[z]
                                  , t = m(M, Zc)
                                  , R = m(M, _k)[q]
                                  , b = R / A * H.height;
                                t ? W.fillStyle = t : (W.fillStyle = ep[s++],
                                s === ep.length && (s = 0)),
                                N -= b;
                                var O = {
                                    x: H.x + (1 + 3 * q) * P,
                                    y: N,
                                    width: 2 * P,
                                    height: b
                                };
                                he(W, O.x, O.y, O.width, O.height),
                                h && (O.text = Vq(c) ? c(R, q, M, r) : R,
                                h.add(O))
                            }
                        h && h.each(function($) {
                            Gg(W, $.text, S, f, $.x, $.y, $.width, $.height, Do)
                        })
                    }
                }
            }, i = function(u, f) {
                var y = m(u, vr);
                if (y && y.length > 0) {
                    for (var z = y.length, _ = m(y[0], _k).length, i = f.width / (3 * _ + 1), I = 0, n = m(u, Pd), k = m(u, rq), o = m(u, Jq), N = n ? new Vr : V, Z = 0; _ > Z; Z++) {
                        for (var x = 0, F = 0; z > F; F++)
                            x += m(y[F], _k)[Z];
                        if (x > 0) {
                            var R = f.y + f.height;
                            for (F = 0; z > F; F++) {
                                var B = y[F]
                                  , t = m(B, Zc)
                                  , O = m(B, _k)[Z]
                                  , D = O / x * f.height;
                                t ? W.fillStyle = t : (W.fillStyle = ep[I++],
                                I === ep.length && (I = 0)),
                                R -= D;
                                var Y = {
                                    x: f.x + (1 + 3 * Z) * i,
                                    y: R,
                                    width: 2 * i,
                                    height: D
                                };
                                he(W, Y.x, Y.y, Y.width, Y.height),
                                N && (Y.text = Vq(n) ? n(O, Z, B, r) : O,
                                N.add(Y))
                            }
                        }
                    }
                    N && N.each(function(K) {
                        Gg(W, K.text, k, o, K.x, K.y, K.width, K.height, Do)
                    })
                }
            }, a = function(v, F) {
                var b = m(v, vr);
                if (b && b.length > 0) {
                    var o = b.length
                      , T = m(v, "minValue") || 0
                      , h = m(v, "maxValue");
                    if (h == V && (h = 0,
                    b.forEach(function(y) {
                        m(y, _k).forEach(function(c) {
                            h = X(h, c)
                        })
                    })),
                    T === h)
                        return;
                    for (var _ = F.height / (h - T), g = F.y + h * _, C = m(b[0], _k).length, f = F.width / (3 * C + 1), z = 0, B = m(v, "lineWidth") || 2, d = m(v, "line3d"), M = m(v, "linePoint"), p = m(v, Pd), S = m(v, rq), O = m(v, Jq), R = 0; o > R; R++) {
                        var D = b[R]
                          , w = m(D, Zc)
                          , Q = m(D, _k);
                        w ? W.strokeStyle = w : (w = W.strokeStyle = ep[z++],
                        z === ep.length && (z = 0)),
                        W.beginPath();
                        for (var Z = 0; C > Z; Z++) {
                            var t = F.x + (2 + 3 * Z) * f
                              , K = g - Q[Z] * _;
                            0 === Z ? W.moveTo(t, K) : W.lineTo(t, K)
                        }
                        if (W.lineWidth = B,
                        W.stroke(),
                        d && Tq(W, w, V, B, G),
                        M || p) {
                            var U, E = B / 2 + 2;
                            for (Z = 0; C > Z; Z++) {
                                var x = Q[Z];
                                if (t = F.x + (2 + 3 * Z) * f,
                                K = g - x * _,
                                Vq(M) ? M(W, t, K, w, Z, D, r) : M && (W.fillStyle = w,
                                W.beginPath(),
                                W.arc(t, K, E, 0, u, !0),
                                W.fill()),
                                Vq(p) ? U = p(x, Z, D, r) : p && (U = x),
                                U) {
                                    var e = bk(S, U).height
                                      , j = W.shadowBlur;
                                    if (j) {
                                        var k = W.shadowOffsetX
                                          , a = W.shadowOffsetY
                                          , J = W.shadowColor;
                                        W.shadowOffsetX = 0,
                                        W.shadowOffsetY = 0,
                                        W.shadowBlur = 0,
                                        W.shadowColor = V
                                    }
                                    Gg(W, U, S, O, t, K - e - E + 2, 0, e, Do),
                                    j && (W.shadowOffsetX = k,
                                    W.shadowOffsetY = a,
                                    W.shadowBlur = j,
                                    W.shadowColor = J)
                                }
                            }
                        }
                    }
                }
            }, D = {
                border: I,
                image: Z,
                text: R,
                pieChart: v,
                columnChart: e,
                stackedColumnChart: O,
                percentageColumnChart: i,
                lineChart: a
            };
            return function(t, g, E, s, L, X, u, Z, Q, e) {
                if (g && L && X) {
                    W = t,
                    r = u,
                    $ = Z,
                    G = $ ? $._zoom ? $._zoom : 1 : 1,
                    h = Q,
                    c = e;
                    var B = L
                      , A = X;
                    if (Tl()) {
                        var P, C, n;
                        0 === W[Xn] ? Tl[0] && (P = !0) : P = !0,
                        W.texureImage2D ? Tl[1] && (C = !0) : C = !0,
                        W.texureImage3D ? Tl[2] && (n = !0) : n = !0,
                        P && C && n && (B = E,
                        A = s)
                    }
                    if (g.tagName)
                        return xe(f) && !q[f] || W.drawImage(g, B, A, L, X),
                        void 0;
                    if (m(g, "visible") !== !1) {
                        h || (h = _p(g.color, r, $)),
                        e || (c = _p(g.blendMode, r, $)),
                        xe(f) && !q[f] && (L = B,
                        X = A);
                        var I = Cm(g, r, $, L)
                          , w = Hi(g, r, $, X)
                          , i = {
                            x: 0,
                            y: 0,
                            width: I,
                            height: w,
                            fitSize: m(g, "fitSize")
                        }
                          , b = m(g, "clip")
                          , U = m(g, "opacity");
                        if (i.fitSize && (i.widthScale = I / _p(g.width, r, $),
                        i.heightScale = w / _p(g.height, r, $)),
                        W.save(),
                        W.interactiveInfo) {
                            var x = W.interactiveInfo.matrix
                              , J = x.clone();
                            x.appendTranslate(B, A).appendScale(L / I, X / w)
                        }
                        Sc(W, B, A),
                        (I !== L || w !== X) && W.scale(L / I, X / w),
                        b && (Vq(b) ? b(W, I, w, r, $, g) : (W.beginPath(),
                        W.rect(0, 0, I, w),
                        W.clip())),
                        U != V && (W.globalAlpha *= U),
                        m(g, "comps").forEach(function(e) {
                            if (m(e, Fi) !== !1) {
                                if (Uj.splice(0, 0, e),
                                W.interactiveInfo)
                                    var f = W.interactiveInfo.matrix.clone();
                                var E = m(e, "opacity")
                                  , h = m(e, "shadow")
                                  , x = m(e, "type")
                                  , w = l(e, i);
                                if (E != V) {
                                    var q = W.globalAlpha;
                                    W.globalAlpha *= E
                                }
                                if (h) {
                                    var P = W.shadowOffsetX
                                      , c = W.shadowOffsetY
                                      , B = W.shadowBlur
                                      , C = W.shadowColor
                                      , L = m(e, "shadowOffsetX")
                                      , g = m(e, "shadowOffsetY")
                                      , n = m(e, "shadowBlur")
                                      , Q = T(e, "shadowColor");
                                    W.shadowOffsetX = (L == V ? 3 : L) * G,
                                    W.shadowOffsetY = (g == V ? 3 : g) * G,
                                    W.shadowBlur = (n == V ? 6 : n) * G,
                                    W.shadowColor = Q || T(Jp)
                                }
                                if ("save" === x)
                                    W.save();
                                else if ("endClip" === x || "restore" === x)
                                    W.restore();
                                else if ("clip" === x)
                                    W.save(),
                                    jn(W, m(e, "points", p), m(e, "segments", y), !0),
                                    W.clip();
                                else if (jk[x])
                                    w = w || {
                                        x: 0,
                                        y: 0,
                                        width: i.width,
                                        height: i.height
                                    },
                                    d(e, x, w, i);
                                else if (x === Mg)
                                    d(e, x, w, i);
                                else if ("SVGPath" === x)
                                    N(e, x, w);
                                else {
                                    w = w || {
                                        x: 0,
                                        y: 0,
                                        width: i.width,
                                        height: i.height
                                    };
                                    var J = m(e, cp)
                                      , s = m(e, "scaleX")
                                      , S = m(e, "scaleY")
                                      , t = K(e)
                                      , b = H(e, w, w, J, s, S, t);
                                    if (Vq(x))
                                        Y(e, x),
                                        j.drawCompType(x, W, w, e, r, $);
                                    else if (j.getCompType(x)) {
                                        var O = j.getCompType(x)
                                          , o = O.func || O;
                                        Y(e, O),
                                        j.drawCompType(o, W, w, e, r, $)
                                    } else
                                        D[x] ? D[x](e, w) : j.getCompType(x) === F && oo.test(x) && ad(x);
                                    b && k()
                                }
                                h && (W.shadowOffsetX = P,
                                W.shadowOffsetY = c,
                                W.shadowBlur = B,
                                W.shadowColor = C),
                                E != V && (W.globalAlpha = q),
                                W.interactiveInfo && (W.interactiveInfo.matrix = f),
                                Uj.splice(0, 1)
                            }
                        }),
                        W.interactiveInfo && (W.interactiveInfo.matrix = J),
                        W.restore()
                    }
                }
            }
        }();
        j.getCurrentComp = function() {
            return Uj[0]
        }
        ,
        j.getParentComp = function() {
            return Uj[1]
        }
        ,
        j.getInternal = function() {
            return {
                isEnter: uj,
                isEsc: Kq,
                isSpace: uc,
                isLeft: Db,
                isUp: Xc,
                isRight: Hb,
                isDown: On,
                addMethod: lk,
                superCall: nm,
                toPointsArray: Gm,
                translateAndScale: Pk,
                appendArray: il,
                createWorldMatrix: Nm,
                vec3TransformMat4: Nj,
                setCanvas: ug,
                createDiv: ff,
                createView: Gc,
                createCanvas: qb,
                createImage: Uk,
                initContext: Zf,
                layout: Pc,
                fillRect: he,
                Mat: yh,
                drawBorder: Mo,
                isString: xe,
                setBorder: xc,
                getPropertyValue: dl,
                setPropertyValue: ll,
                drawVerticalLine: Cp,
                draw3DRect: gb,
                getPinchDist: wi,
                isSameRect: gi,
                getPosition: sg,
                intersectionLineRect: xi,
                getNodeRect: ps,
                getEdgeAgentPosition: xp,
                getImageWidth: Cm,
                getImageHeight: Hi,
                initItemElement: Hj,
                drawPoints: jn,
                createG2: on,
                closePopup: mb,
                isH: ub,
                createAnim: bf,
                createNormalMatrix: Jh,
                createNormals: pb,
                toFloatArray: _i,
                glMV: Bn,
                batchShape: fi,
                createNodeMatrix: ys,
                getFaceInfo: ai,
                transformAppend: Ui,
                drawFaceInfo: us,
                to3dPointsArray: ql,
                setGLDebugMode: function(D) {
                    tq = D
                },
                cube: function() {
                    return {
                        vs: An,
                        is: kn,
                        uv: hj
                    }
                },
                ui: function() {
                    return {
                        DataUI: Uh,
                        NodeUI: Zh,
                        EdgeUI: sq,
                        GroupUI: Eb,
                        ShapeUI: lb,
                        GridUI: Bb,
                        Data3dUI: Xk,
                        Node3dUI: td,
                        Shape3dUI: pi
                    }
                },
                getInternalVersion: function() {
                    return "U2FsdGVkX19uIZFUAgemMfn7cziNyTCzJczeWCJhfI0="
                },
                getDragger: function() {
                    return wq
                },
                addMSMap: function(U) {
                    lk(Sd, U)
                },
                k: T
            }
        }
        ,
        function(A) {
            function U(X, l) {
                X != V && (l == V && ci != typeof X ? this._54O(X, 256) : this._54O(X, l))
            }
            function t() {
                return new U(V)
            }
            function a(O, _, x, B, K, S) {
                for (; --S >= 0; ) {
                    var n = _ * this[O++] + x[B] + K;
                    K = M(n / 67108864),
                    x[B++] = 67108863 & n
                }
                return K
            }
            function q(E, V, T, S, v, X) {
                for (var d = 32767 & V, f = V >> 15; --X >= 0; ) {
                    var a = 32767 & this[E]
                      , L = this[E++] >> 15
                      , Z = f * a + L * d;
                    a = d * a + ((32767 & Z) << 15) + T[S] + (1073741823 & v),
                    v = (a >>> 30) + (Z >>> 15) + f * L + (v >>> 30),
                    T[S++] = 1073741823 & a
                }
                return v
            }
            function Q(r, d, A, e, p, k) {
                for (var J = 16383 & d, u = d >> 14; --k >= 0; ) {
                    var R = 16383 & this[r]
                      , Z = this[r++] >> 14
                      , K = u * R + Z * J;
                    R = J * R + ((16383 & K) << 14) + A[e] + p,
                    p = (R >> 28) + (K >> 14) + u * Z,
                    A[e++] = 268435455 & R
                }
                return p
            }
            function G(K) {
                return Um.charAt(K)
            }
            function n(P, F) {
                var I = qg[P.charCodeAt(F)];
                return I == V ? -1 : I
            }
            function F(h) {
                for (var Y = this.t - 1; Y >= 0; --Y)
                    h[Y] = this[Y];
                h.t = this.t,
                h.s = this.s
            }
            function J(s) {
                this.t = 1,
                this.s = 0 > s ? -1 : 0,
                s > 0 ? this[0] = s : -1 > s ? this[0] = s + this.DV : this.t = 0
            }
            function K(E) {
                var f = t();
                return f._58O(E),
                f
            }
            function S(Q, g) {
                var O, W = this;
                if (16 == g)
                    O = 4;
                else if (8 == g)
                    O = 3;
                else if (256 == g)
                    O = 8;
                else if (2 == g)
                    O = 1;
                else if (32 == g)
                    O = 5;
                else {
                    if (4 != g)
                        return W.fromRadix(Q, g),
                        void 0;
                    O = 2
                }
                W.t = 0,
                W.s = 0;
                for (var J = Q.length, z = !1, Z = 0; --J >= 0; ) {
                    var I = 8 == O ? 255 & Q[J] : n(Q, J);
                    0 > I ? "-" == Q.charAt(J) && (z = !0) : (z = !1,
                    0 == Z ? W[W.t++] = I : Z + O > W.DB ? (W[W.t - 1] |= (I & (1 << W.DB - Z) - 1) << Z,
                    W[W.t++] = I >> W.DB - Z) : W[W.t - 1] |= I << Z,
                    Z += O,
                    Z >= W.DB && (Z -= W.DB))
                }
                8 == O && 0 != (128 & Q[0]) && (W.s = -1,
                Z > 0 && (W[W.t - 1] |= (1 << W.DB - Z) - 1 << Z)),
                W._57O(),
                z && U.ZERO._78O(W, W)
            }
            function m() {
                for (var N = this, f = N.s & N.DM; N.t > 0 && N[N.t - 1] == f; )
                    --N.t
            }
            function L(e) {
                var B = this;
                if (B.s < 0)
                    return "-" + B._85O()[Cr](e);
                var X;
                if (16 == e)
                    X = 4;
                else if (8 == e)
                    X = 3;
                else if (2 == e)
                    X = 1;
                else if (32 == e)
                    X = 5;
                else {
                    if (4 != e)
                        return B.toRadix(e);
                    X = 2
                }
                var $, j = (1 << X) - 1, g = !1, V = "", C = B.t, t = B.DB - C * B.DB % X;
                if (C-- > 0)
                    for (t < B.DB && ($ = B[C] >> t) > 0 && (g = !0,
                    V = G($)); C >= 0; )
                        X > t ? ($ = (B[C] & (1 << t) - 1) << X - t,
                        $ |= B[--C] >> (t += B.DB - X)) : ($ = B[C] >> (t -= X) & j,
                        0 >= t && (t += B.DB,
                        --C)),
                        $ > 0 && (g = !0),
                        g && (V += G($));
                return g ? V : "0"
            }
            function P() {
                var K = t();
                return U.ZERO._78O(this, K),
                K
            }
            function e() {
                return this.s < 0 ? this._85O() : this
            }
            function R(H) {
                var Q = this
                  , G = Q.s - H.s;
                if (0 != G)
                    return G;
                var c = Q.t;
                if (G = c - H.t,
                0 != G)
                    return Q.s < 0 ? -G : G;
                for (; --c >= 0; )
                    if (0 != (G = Q[c] - H[c]))
                        return G;
                return 0
            }
            function g(j) {
                var k, m = 1;
                return 0 != (k = j >>> 16) && (j = k,
                m += 16),
                0 != (k = j >> 8) && (j = k,
                m += 8),
                0 != (k = j >> 4) && (j = k,
                m += 4),
                0 != (k = j >> 2) && (j = k,
                m += 2),
                0 != (k = j >> 1) && (j = k,
                m += 1),
                m
            }
            function H() {
                var A = this;
                return A.t <= 0 ? 0 : A.DB * (A.t - 1) + g(A[A.t - 1] ^ A.s & A.DM)
            }
            function s(Q, x) {
                var P;
                for (P = this.t - 1; P >= 0; --P)
                    x[P + Q] = this[P];
                for (P = Q - 1; P >= 0; --P)
                    x[P] = 0;
                x.t = this.t + Q,
                x.s = this.s
            }
            function _(e, w) {
                for (var U = e; U < this.t; ++U)
                    w[U - e] = this[U];
                w.t = X(this.t - e, 0),
                w.s = this.s
            }
            function W(A, s) {
                var J, O = this, E = A % O.DB, C = O.DB - E, $ = (1 << C) - 1, h = M(A / O.DB), p = O.s << E & O.DM;
                for (J = O.t - 1; J >= 0; --J)
                    s[J + h + 1] = O[J] >> C | p,
                    p = (O[J] & $) << E;
                for (J = h - 1; J >= 0; --J)
                    s[J] = 0;
                s[h] = p,
                s.t = O.t + h + 1,
                s.s = O.s,
                s._57O()
            }
            function d(q, P) {
                var Q = this;
                P.s = Q.s;
                var _ = M(q / Q.DB);
                if (_ >= Q.t)
                    return P.t = 0,
                    void 0;
                var F = q % Q.DB
                  , V = Q.DB - F
                  , u = (1 << F) - 1;
                P[0] = Q[_] >> F;
                for (var R = _ + 1; R < Q.t; ++R)
                    P[R - _ - 1] |= (Q[R] & u) << V,
                    P[R - _] = Q[R] >> F;
                F > 0 && (P[Q.t - _ - 1] |= (Q.s & u) << V),
                P.t = Q.t - _,
                P._57O()
            }
            function w(H, i) {
                for (var D = this, c = 0, K = 0, f = b(H.t, D.t); f > c; )
                    K += D[c] - H[c],
                    i[c++] = K & D.DM,
                    K >>= D.DB;
                if (H.t < D.t) {
                    for (K -= H.s; c < D.t; )
                        K += D[c],
                        i[c++] = K & D.DM,
                        K >>= D.DB;
                    K += D.s
                } else {
                    for (K += D.s; c < H.t; )
                        K -= H[c],
                        i[c++] = K & D.DM,
                        K >>= D.DB;
                    K -= H.s
                }
                i.s = 0 > K ? -1 : 0,
                -1 > K ? i[c++] = D.DV + K : K > 0 && (i[c++] = K),
                i.t = c,
                i._57O()
            }
            function x(G, w) {
                var Q = this.abs()
                  , E = G.abs()
                  , I = Q.t;
                for (w.t = I + E.t; --I >= 0; )
                    w[I] = 0;
                for (I = 0; I < E.t; ++I)
                    w[I + Q.t] = Q.am(0, E[I], w, I, 0, Q.t);
                w.s = 0,
                w._57O(),
                this.s != G.s && U.ZERO._78O(w, w)
            }
            function j(I) {
                for (var S = this.abs(), w = I.t = 2 * S.t; --w >= 0; )
                    I[w] = 0;
                for (w = 0; w < S.t - 1; ++w) {
                    var T = S.am(w, S[w], I, 2 * w, 0, 1);
                    (I[w + S.t] += S.am(w + 1, 2 * S[w], I, 2 * w + 1, T, S.t - w - 1)) >= S.DV && (I[w + S.t] -= S.DV,
                    I[w + S.t + 1] = 1)
                }
                I.t > 0 && (I[I.t - 1] += S.am(w, S[w], I, 2 * w, 0, 1)),
                I.s = 0,
                I._57O()
            }
            function i(F, Y, p) {
                var j = F.abs()
                  , m = this;
                if (!(j.t <= 0)) {
                    var z = m.abs();
                    if (z.t < j.t)
                        return Y != V && Y._58O(0),
                        p != V && m._77O(p),
                        void 0;
                    p == V && (p = t());
                    var e = t()
                      , S = m.s
                      , Z = F.s
                      , X = m.DB - g(j[j.t - 1]);
                    X > 0 ? (j._44O(X, e),
                    z._44O(X, p)) : (j._77O(e),
                    z._77O(p));
                    var k = e.t
                      , G = e[k - 1];
                    if (0 != G) {
                        var B = G * (1 << m.F1) + (k > 1 ? e[k - 2] >> m.F2 : 0)
                          , T = m.FV / B
                          , J = (1 << m.F1) / B
                          , H = 1 << m.F2
                          , N = p.t
                          , c = N - k
                          , r = Y == V ? t() : Y;
                        for (e._59O(c, r),
                        p._52O(r) >= 0 && (p[p.t++] = 1,
                        p._78O(r, p)),
                        U.ONE._59O(k, r),
                        r._78O(e, e); e.t < k; )
                            e[e.t++] = 0;
                        for (; --c >= 0; ) {
                            var Q = p[--N] == G ? m.DM : M(p[N] * T + (p[N - 1] + H) * J);
                            if ((p[N] += e.am(0, Q, p, c, 0, k)) < Q)
                                for (e._59O(c, r),
                                p._78O(r, p); p[N] < --Q; )
                                    p._78O(r, p)
                        }
                        Y != V && (p._45O(k, Y),
                        S != Z && U.ZERO._78O(Y, Y)),
                        p.t = k,
                        p._57O(),
                        X > 0 && p._46O(X, p),
                        0 > S && U.ZERO._78O(p, p)
                    }
                }
            }
            function v(L) {
                var r = t();
                return this.abs()._49O(L, V, r),
                this.s < 0 && r._52O(U.ZERO) > 0 && L._78O(r, r),
                r
            }
            function C(D) {
                this.m = D
            }
            function $(g) {
                return g.s < 0 || g._52O(this.m) >= 0 ? g.mod(this.m) : g
            }
            function l(_) {
                return _
            }
            function D(F) {
                F._49O(this.m, V, F)
            }
            function h(U, d, t) {
                U._47O(d, t),
                this._74O(t)
            }
            function N(W, p) {
                W._48O(p),
                this._74O(p)
            }
            function O() {
                if (this.t < 1)
                    return 0;
                var T = this[0];
                if (0 == (1 & T))
                    return 0;
                var G = 3 & T;
                return G = 15 & G * (2 - (15 & T) * G),
                G = 255 & G * (2 - (255 & T) * G),
                G = 65535 & G * (2 - (65535 & (65535 & T) * G)),
                G = G * (2 - T * G % this.DV) % this.DV,
                G > 0 ? this.DV - G : -G
            }
            function f(j) {
                var v = this;
                v.m = j,
                v.mp = j._50O(),
                v.mpl = 32767 & v.mp,
                v.mph = v.mp >> 15,
                v.um = (1 << j.DB - 15) - 1,
                v.mt2 = 2 * j.t
            }
            function Y(M) {
                var Y = t();
                return M.abs()._59O(this.m.t, Y),
                Y._49O(this.m, V, Y),
                M.s < 0 && Y._52O(U.ZERO) > 0 && this.m._78O(Y, Y),
                Y
            }
            function c(H) {
                var g = t();
                return H._77O(g),
                this._74O(g),
                g
            }
            function Z(l) {
                for (var Q = this; l.t <= Q.mt2; )
                    l[l.t++] = 0;
                for (var q = 0; q < Q.m.t; ++q) {
                    var O = 32767 & l[q]
                      , $ = O * Q.mpl + ((O * Q.mph + (l[q] >> 15) * Q.mpl & Q.um) << 15) & l.DM;
                    for (O = q + Q.m.t,
                    l[O] += Q.m.am(0, $, l, q, 0, Q.m.t); l[O] >= l.DV; )
                        l[O] -= l.DV,
                        l[++O]++
                }
                l._57O(),
                l._45O(Q.m.t, l),
                l._52O(Q.m) >= 0 && l._78O(Q.m, l)
            }
            function xf(i, g) {
                i._48O(g),
                this._74O(g)
            }
            function on(d, K, G) {
                d._47O(K, G),
                this._74O(G)
            }
            function vp() {
                return 0 == (this.t > 0 ? 1 & this[0] : this.s)
            }
            function Xr(w, X) {
                if (w > 4294967295 || 1 > w)
                    return U.ONE;
                var c = t()
                  , d = t()
                  , o = X._73O(this)
                  , N = g(w) - 1;
                for (o._77O(c); --N >= 0; )
                    if (X._76O(c, d),
                    (w & 1 << N) > 0)
                        X._75O(d, o, c);
                    else {
                        var j = c;
                        c = d,
                        d = j
                    }
                return X.revert(c)
            }
            function Ep(W, j) {
                var M;
                return M = 256 > W || j._51O() ? new C(j) : new f(j),
                this.exp(W, M)
            }
            function al() {
                var y = this;
                if (y.s < 0) {
                    if (1 == y.t)
                        return y[0] - y.DV;
                    if (0 == y.t)
                        return -1
                } else {
                    if (1 == y.t)
                        return y[0];
                    if (0 == y.t)
                        return 0
                }
                return (y[1] & (1 << 32 - y.DB) - 1) << y.DB | y[0]
            }
            function $h(J, e) {
                return new U(J,e)
            }
            function Ci() {
                var Z = this;
                Z.n = V,
                Z.e = 0,
                Z.d = V,
                Z.p = V,
                Z.q = V,
                Z.dmp1 = V,
                Z.dmq1 = V,
                Z._10A = V
            }
            function gb(x) {
                return x._53O(this.e, this.n)
            }
            function es(U) {
                var X, i, m, P = "", V = 0;
                for (X = 0; X < U.length && U.charAt(X) != om; ++X)
                    m = El.indexOf(U.charAt(X)),
                    0 > m || (0 == V ? (P += G(m >> 2),
                    i = 3 & m,
                    V = 1) : 1 == V ? (P += G(i << 2 | m >> 4),
                    i = 15 & m,
                    V = 2) : 2 == V ? (P += G(i),
                    P += G(m >> 2),
                    i = 3 & m,
                    V = 3) : (P += G(i << 2 | m >> 4),
                    P += G(15 & m),
                    V = 0));
                return 1 == V && (P += G(i << 2)),
                P
            }
            function Od(M) {
                var y = M.split("")
                  , u = es(M);
                return y.forEach(function(A) {
                    var h = A.length;
                    h > 0 && u && (wj += p(A))
                }),
                u
            }
            function Hh(B, _) {
                var t = Db._4O.Util._56O(B, "ss")
                  , C = {}
                  , D = 0;
                return C.v = t == _,
                C.t = 1,
                C.s = 0 > D ? -1 : 0,
                Be = C.v,
                D > 0 ? C[0] = D : -1 > D ? C[0] = D + C.DV : C.t = 0,
                [t, C]
            }
            function zj(d) {
                var i = 38
                  , a = d.substring(0, i);
                if (a && 30 == a.indexOf("05000420")) {
                    var S = ["ss", d.substring(i)];
                    return S
                }
                return []
            }
            function Ig(I, Y) {
                Y = Y.replace(Pr, ""),
                Y = Y.replace(/[ \n]+/g, "");
                var m = $h(Y, 16);
                if (m._55O() > this.n._55O())
                    return 0;
                var W = this._37O(m)
                  , $ = W[Cr](16).replace(/^1f+00/, "")
                  , c = zj($);
                if (0 == c.length)
                    return !1;
                for (var K, o, P, A = .5, G = Sp, N = [0, .5, .75, .875, .9375], J = [], U = [], k = [], e = u / G, v = c[1], d = Hh(I, v)[0], b = 0, l = 0; b < N.length; b++) {
                    var p = 0 === b % 2 ? 0 : .5;
                    for (K = 0; G >= K; K++)
                        o = (K + p) * e,
                        P = 1 - N[b],
                        J.push(z(o) * A * P, -A + 2 * N[b] * A, -E(o) * A * P),
                        U.push((K + p) / G, P)
                }
                for (b = 0; b < N.length - 1; b++) {
                    var B = b * (G + 1)
                      , t = (b + 1) * (G + 1);
                    for (K = 0; G > K; K++)
                        k.push(B + K, t + K + 1, t + K, B + K, B + K + 1, t + K + 1)
                }
                return k.forEach(function(H) {
                    l += H
                }),
                v == d && l > 10
            }
            var pq, Bp = 0xdeadbeefcafe, zr = 15715070 == (16777215 & Bp), Cr = "toString", Qp = "", wh = "nat", $p = function() {};
            k = A["D" + 11182[Cr](y(2, 5))];
            var ms = U.prototype;
            fe += Hq.substr(0, 1);
            var nc = A.navigator ? A.navigator.appName : "";
            zr && "Microsoft Internet Explorer" == nc ? (ms.am = q,
            pq = 30) : zr && "Netscape" != nc ? (ms.am = a,
            pq = 26) : (ms.am = Q,
            pq = 28),
            ms.DB = pq,
            ms.DM = (1 << pq) - 1,
            ms.DV = 1 << pq;
            var df = 52;
            ms.FV = y(2, df),
            ms.F1 = df - pq,
            ms.F2 = 2 * pq - df;
            var Ak, ug, Um = "0123456789abcdefghijklmnopqrstuvwxyz", qg = [], ur = function(S) {
                return String.fromCharCode(S)
            };
            for (Ak = "0".charCodeAt(0),
            ug = 0; 9 >= ug; ++ug)
                qg[Ak++] = ug;
            for (Ak = "a".charCodeAt(0),
            ug = 10; 36 > ug; ++ug)
                qg[Ak++] = ug;
            for (Ak = "A".charCodeAt(0),
            ug = 10; 36 > ug; ++ug)
                qg[Ak++] = ug;
            var yo = C.prototype;
            yo._73O = $,
            yo.revert = l,
            yo._74O = D,
            yo._75O = h,
            yo._76O = N;
            var Ff = f.prototype;
            Ff._73O = Y,
            Ff.revert = c,
            Ff._74O = Z,
            Ff._75O = on,
            Ff._76O = xf,
            ms._77O = F,
            ms._58O = J,
            ms._54O = S,
            ms._57O = m,
            ms._59O = s,
            ms._45O = _,
            ms._44O = W,
            ms._46O = d,
            ms._78O = w,
            ms._47O = x,
            ms._48O = j,
            ms._49O = i,
            ms._50O = O,
            ms._51O = vp,
            ms.exp = Xr,
            ms.toString = L,
            ms._85O = P,
            ms.abs = e,
            ms._52O = R,
            ms._55O = H,
            ms.mod = v,
            ms._53O = Ep,
            U.ZERO = K(0),
            U.ONE = K(1),
            ms._86O = al;
            var sk = function(x, t) {
                var i = this;
                i.isPublic = !0,
                typeof x !== ci ? (i.n = x,
                i.e = t) : x != V && t != V && x.length > 0 && t.length > 0 && (i.n = $h(x, 16),
                i.e = p(t, 16))
            };
            Ym = function() {
                var t, u, O = Od(Ck), g = O.substr(0, 4), m = O.substr(4, 2), n = O.substr(6, 2), U = 1, G = !U, e = T, S = [], q = qk.charAt(7);
                if (k && (k[Cr]().indexOf(wh) < 0 || k[fe][Cr]().indexOf(wh) < 0 || !O ? t = xl(_n[q]) : (O = new k(g - 0,m - U,n - 0),
                u = O.setHours(9),
                k[fe]() > u ? t = xl(_n[q]) : G = !0)),
                O && t && e) {
                    for (var c in t)
                        S.push(c);
                    var d, J = 0, b = t[S[J++]], v = t[S[J++]], $ = t[S[J++]], Q = t[S[J++]], P = t[S[J++]], W = t[S[J++]], r = t[S[J++]], B = Co._27O(e);
                    if (B && r) {
                        d = b + v + $ + Q + P + W;
                        var E = !W || W === Wl;
                        if (!E && W)
                            for (var Y, x = 0, j = W.length; j > x; x++)
                                W[x] === os[J] ? Y === Wl ? E = !0 : Y = V : (Y == V ? Y = W[x] : Y += W[x],
                                x === j - 1 && Y === Wl && (E = !0));
                        d && B._31O(d, r) && E && (!P || k[fe]() < P) && (G = !0)
                    }
                }
                return G || (eg = ek),
                q
            }
            ;
            var sr = Ci.prototype;
            sr._37O = gb,
            sr._38O = sk;
            var El = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"
              , om = "="
              , Ej = 25
              , gk = 10
              , Ck = "I1gEKZ=="//'IBgIAQ=='    
              , bm = bm || function(V, J) {
                var G = {}
                  , x = G._7A = {}
                  , t = x._6A = function() {
                    function T() {}
                    return {
                        _80O: function(B) {
                            T.prototype = this;
                            var i = new T;
                            return B && i._5A(B),
                            i.hasOwnProperty("_82O") || (i._82O = function() {
                                i.$super._82O.apply(this, arguments)
                            }
                            ),
                            i._82O.prototype = i,
                            i.$super = this,
                            i
                        },
                        _3A: function() {
                            var M = this._80O();
                            return M._82O.apply(M, arguments),
                            M
                        },
                        _82O: function() {},
                        _5A: function(F) {
                            for (var Y in F)
                                F.hasOwnProperty(Y) && (this[Y] = F[Y]);
                            F.hasOwnProperty(Cr) && (this.toString = F.toString)
                        },
                        _88O: function() {
                            return this._82O.prototype._80O(this)
                        }
                    }
                }()
                  , e = x._39O = t._80O({
                    _82O: function(H, G) {
                        H = this._84O = H || [],
                        this._65O = G != J ? G : 4 * H.length
                    },
                    toString: function(q) {
                        return (q || E).stringify(this)
                    },
                    _89O: function(K) {
                        var O = this._84O
                          , $ = K._84O
                          , c = this._65O
                          , k = K._65O;
                        if (this._57O(),
                        c % 4)
                            for (var C = 0; k > C; C++) {
                                var G = 255 & $[C >>> 2] >>> 24 - 8 * (C % 4);
                                O[c + C >>> 2] |= G << 24 - 8 * ((c + C) % 4)
                            }
                        else if ($.length > 65535)
                            for (var C = 0; k > C; C += 4)
                                O[c + C >>> 2] = $[C >>> 2];
                        else
                            O.push.apply(O, $);
                        return this._65O += k,
                        this
                    },
                    _57O: function() {
                        var s = this._84O
                          , r = this._65O;
                        s[r >>> 2] &= 4294967295 << 32 - 8 * (r % 4),
                        s.length = I(r / 4)
                    },
                    _88O: function() {
                        var E = t._88O.call(this);
                        return E._84O = this._84O.slice(0),
                        E
                    },
                    _87O: function(m) {
                        for (var F = [], Y = 0; m > Y; Y += 4)
                            F.push(0 | 4294967296 * o);
                        return new e._82O(F,m)
                    }
                })
                  , U = G._2A = {}
                  , E = U._69O = {
                    stringify: function(f) {
                        var A, z = f._84O, m = f._65O, y = [];
                        for (A = 0; m > A; A++) {
                            var r = 255 & z[A >>> 2] >>> 24 - 8 * (A % 4);
                            y.push((r >>> 4).toString(16)),
                            y.push((15 & r).toString(16))
                        }
                        return y.join("")
                    },
                    _68O: function(x) {
                        for (var W = x.length, F = [], M = 0; W > M; M += 2)
                            F[M >>> 3] |= p(x.substr(M, 2), 16) << 24 - 4 * (M % 8);
                        return new e._82O(F,W / 2)
                    }
                }
                  , i = U._8A = {
                    stringify: function(h) {
                        var W, k = h._84O, Y = h._65O, I = [];
                        for (W = 0; Y > W; W++) {
                            var x = 255 & k[W >>> 2] >>> 24 - 8 * (W % 4);
                            I.push(ur(x))
                        }
                        return I.join("")
                    },
                    _68O: function(B) {
                        var y, D = B.length, E = [];
                        for (y = 0; D > y; y++)
                            E[y >>> 2] |= (255 & B.charCodeAt(y)) << 24 - 8 * (y % 4);
                        return new e._82O(E,D)
                    }
                }
                  , z = U._9A = {
                    stringify: function(F) {
                        try {
                            return decodeURIComponent(escape(i.stringify(F)))
                        } catch (U) {
                            throw new Error("")
                        }
                    },
                    _68O: function(e) {
                        return i._68O(unescape(encodeURIComponent(e)))
                    }
                }
                  , f = x._32O = t._80O({
                    _1A: function() {
                        this._83O = new e._82O,
                        this._23O = 0
                    },
                    _33O: function(N) {
                        typeof N == ci && (N = z._68O(N)),
                        this._83O._89O(N),
                        this._23O += N._65O
                    },
                    _25O: function(q) {
                        var a = this._83O
                          , z = a._84O
                          , v = a._65O
                          , k = this._79O
                          , H = 4 * k
                          , Y = v / H;
                        Y = q ? I(Y) : X((0 | Y) - this._22O, 0);
                        var W = Y * k
                          , s = b(4 * W, v);
                        if (W) {
                            for (var $ = 0; W > $; $ += k)
                                this._20O(z, $);
                            var V = z.splice(0, W);
                            a._65O -= s
                        }
                        return new e._82O(V,s)
                    },
                    _88O: function() {
                        var a = t._88O.call(this);
                        return a._83O = this._83O._88O(),
                        a
                    },
                    _22O: 0
                });
                x._66O = f._80O({
                    cfg: t._80O(),
                    _82O: function(i) {
                        this.cfg = this.cfg._80O(i),
                        this._1A()
                    },
                    _1A: function() {
                        f._1A.call(this),
                        this._34O()
                    },
                    _81O: function(K) {
                        return this._33O(K),
                        this._25O(),
                        this
                    },
                    _72O: function(C) {
                        C && this._33O(C);
                        var m = this._21O();
                        return m
                    },
                    _79O: 16,
                    _26O: function(O) {
                        return function(M, V) {
                            return new O._82O(V)._72O(M)
                        }
                    },
                    _19O: function(S) {
                        return function(W, d) {
                            return new j._71O._82O(S,d)._72O(W)
                        }
                    }
                });
                var j = G._67O = {};
                return G
            }();
            !function() {
                var e = bm
                  , t = e._7A
                  , W = t._39O
                  , P = t._66O
                  , O = e._67O
                  , l = []
                  , f = [];
                !function() {
                    function d(p) {
                        for (var D = r(p), g = 2; D >= g; g++)
                            if (!(p % g))
                                return !1;
                        return !0
                    }
                    function S(V) {
                        return 0 | 4294967296 * (V - (0 | V))
                    }
                    for (var t = 2, a = 0; 64 > a; )
                        d(t) && (8 > a && (l[a] = S(y(t, .5))),
                        f[a] = S(y(t, 1 / 3)),
                        a++),
                        t++
                }();
                var X = []
                  , i = O._41O = P._80O({
                    _34O: function() {
                        this._64O = new W._82O(l.slice(0))
                    },
                    _20O: function(y, L) {
                        for (var S = this._64O._84O, Y = S[0], N = S[1], C = S[2], v = S[3], a = S[4], w = S[5], c = S[6], T = S[7], K = 0; 64 > K; K++) {
                            if (16 > K)
                                X[K] = 0 | y[L + K];
                            else {
                                var n = X[K - 15]
                                  , D = (n << 25 | n >>> 7) ^ (n << 14 | n >>> 18) ^ n >>> 3
                                  , p = X[K - 2]
                                  , i = (p << 15 | p >>> 17) ^ (p << 13 | p >>> 19) ^ p >>> 10;
                                X[K] = D + X[K - 7] + i + X[K - 16]
                            }
                            var t = a & w ^ ~a & c
                              , A = Y & N ^ Y & C ^ N & C
                              , g = (Y << 30 | Y >>> 2) ^ (Y << 19 | Y >>> 13) ^ (Y << 10 | Y >>> 22)
                              , R = (a << 26 | a >>> 6) ^ (a << 21 | a >>> 11) ^ (a << 7 | a >>> 25)
                              , k = T + R + t + f[K] + X[K]
                              , b = g + A;
                            T = c,
                            c = w,
                            w = a,
                            a = 0 | v + k,
                            v = C,
                            C = N,
                            N = Y,
                            Y = 0 | k + b
                        }
                        S[0] = 0 | S[0] + Y,
                        S[1] = 0 | S[1] + N,
                        S[2] = 0 | S[2] + C,
                        S[3] = 0 | S[3] + v,
                        S[4] = 0 | S[4] + a,
                        S[5] = 0 | S[5] + w,
                        S[6] = 0 | S[6] + c,
                        S[7] = 0 | S[7] + T
                    },
                    _21O: function() {
                        var H = this._83O
                          , J = H._84O
                          , W = 8 * this._23O
                          , I = 8 * H._65O;
                        return J[I >>> 5] |= 128 << 24 - I % 32,
                        J[(I + 64 >>> 9 << 4) + 14] = M(W / 4294967296),
                        J[(I + 64 >>> 9 << 4) + 15] = W,
                        H._65O = 4 * J.length,
                        this._25O(),
                        this._64O
                    },
                    _88O: function() {
                        var X = P._88O.call(this);
                        return X._64O = this._64O._88O(),
                        X
                    }
                });
                e._41O = P._26O(i),
                e._42O = P._19O(i)
            }();
            var Pr = new RegExp("");
            Pr.compile("[^0-9a-f]", "gi"),
            Ci._28O = -1,
            Ci._29O = -2,
            sr._31O = Ig,
            sr._63O = Ig,
            Ci._43O = -2;
            var On = new function() {
                var g = this;
                g._5O = function(c, e) {
                    if ("8" != c.substring(e + 2, e + 3))
                        return 1;
                    var R = p(c.substring(e + 3, e + 4));
                    return 0 == R ? -1 : R > 0 && 10 > R ? R + 1 : -2
                }
                ,
                g._13O = function($, Y) {
                    var B = g._5O($, Y);
                    return 1 > B ? "" : $.substring(Y + 2, Y + 2 + 2 * B)
                }
                ,
                g._12O = function(Y, R) {
                    var w = g._13O(Y, R);
                    if ("" == w)
                        return -1;
                    var H;
                    return H = p(w.substring(0, 1)) < 8 ? new U(w,16) : new U(w.substring(2),16),
                    H._86O()
                }
                ,
                g._6O = function(t, R) {
                    var Y = g._5O(t, R);
                    return 0 > Y ? Y : R + 2 * (Y + 1)
                }
                ,
                g._11O = function(o, u) {
                    var S = g._6O(o, u)
                      , P = g._12O(o, u);
                    return o.substring(S, S + 2 * P)
                }
                ,
                g._10O = function(B, E) {
                    var n = g._6O(B, E)
                      , m = g._12O(B, E);
                    return n + 2 * m
                }
                ,
                g._7O = function(A, W) {
                    var h = []
                      , o = g._6O(A, W);
                    h.push(o);
                    for (var r = g._12O(A, W), T = o, I = 0; ; ) {
                        var Z = g._10O(A, T);
                        if (Z == V || Z - o >= 2 * r)
                            break;
                        if (I >= 200)
                            break;
                        h.push(Z),
                        T = Z,
                        I++
                    }
                    return h
                }
            }
            ;
            if (On._90O = ur(gk + 24),
            On._91O = B + ur(gk * gk + 8),
            Db == V || !Db)
                var Db = {};
            Db._4O != V && Db._4O || (Db._4O = {});
            var Lm = Db._4O;
            Db._4O.Util = new function() {
                var g = this;
                g._56O = function(k) {
                    var c = new Db._4O._3O;
                    return c._30O(k)
                }
                ,
                g._4A = function($) {
                    var P = new Db._4O._3O;
                    return P._36O($)
                }
                ,
                g._11A = function($) {
                    var s = new Lm._3O;
                    return s._30O($)
                }
            }
            ,
            Db._4O._3O = function() {
                var H = this;
                H._8O = function(Z, T) {
                    if ("ss" == Z && "cj" == T) {
                        try {
                            H.md = bm._67O._41O._3A()
                        } catch (o) {
                            $p(Qp)
                        }
                        H._24O = function(N) {
                            H.md._81O(N)
                        }
                        ,
                        H._35O = function(U) {
                            var $ = bm._2A._69O._68O(U);
                            H.md._81O($)
                        }
                        ,
                        H._60O = function() {
                            var k = H.md._72O();
                            return k[Cr](bm._2A._69O)
                        }
                        ,
                        H._30O = function(g) {
                            return H._24O(g),
                            H._60O()
                        }
                        ,
                        H._36O = function(C) {
                            return H._35O(C),
                            H._60O()
                        }
                    }
                }
                ,
                H._24O = function() {
                    $p(Qp)
                }
                ,
                H._35O = function() {
                    $p(Qp)
                }
                ,
                H._60O = function() {
                    $p(Qp)
                }
                ,
                H._30O = function() {
                    $p(Qp)
                }
                ,
                H._36O = function() {
                    $p(Qp)
                }
                ,
                H._8O("ss", "cj")
            }
            ,
            Ud = function(p) {
                var f = Qi[Kh[7]]
                  , g = 1
                  , Z = !1;
                if (Ab.a != Qi[eq])
                    return Ab.a;
                if (Ab.forEach(function(x) {
                    g *= x
                }),
                p > g) {
                    if (f) {
                        f = f.split(On._90O);
                        var e = f[3]
                          , V = f[7]
                          , z = f[11]
                          , W = f[15]
                          , n = f[19]
                          , N = f[23]
                          , o = f[27]
                          , E = e + V + z + W + n + N
                          , v = N ? !1 : !0;
                        if (N) {
                            var O = N && N.split(Ei("firefox")[3]);
                            if (O)
                                for (var D = 0; D < O.length; D++)
                                    if (vs.indexOf(O[D]) >= 0) {
                                        v = !0;
                                        break
                                    }
                        }
                        Z = Mh()(E, o) && v && (!n || n > p)
                    }
                    Z || (Uh.prototype._42 = kj)
                } else
                    Z = !0;
                return Ab.a = Z,
                Z
            }
            ,
            Ej = String.fromCharCode(Ej + 20);
            var Vm = function(O) {
                return O = O.replace(Pr, Qp),
                O = O.replace(/[ \n]+/g, Qp)
            }
              , sf = "30"
              , _l = "06"
              , te = "02"
              , il = "03"
              , Ve = $h
              , bi = /^1f+00/
              , Co = function() {
                var S;
                return S = {
                    _18O: function(B) {
                        var Y = B
                          , h = Y.replace(/\s+/g, "")
                          , r = es(h);
                        return r
                    },
                    _14O: function(Z) {
                        var w = this._18O(Z)
                          , z = this._15O(w);
                        return z
                    },
                    _15O: function(W) {
                        var x = this._17O(W);
                        if ("2a864886f70d010101" == x._61O) {
                            var u = this._16O(x.key)
                              , Z = new Ci;
                            return Z._38O(u.n, u.e),
                            Z
                        }
                        $p(Qp)
                    },
                    _16O: function(q) {
                        var O = {};
                        q.substr(0, 2) != sf && $p(Qp);
                        var P = On._7O(q, 0);
                        return 2 != P.length && $p(Qp),
                        q.substr(P[0], 2) != te && $p(Qp),
                        O.n = On._11O(q, P[0]),
                        q.substr(P[1], 2) != te && $p(Qp),
                        O.e = On._11O(q, P[1]),
                        O
                    },
                    _17O: function(L) {
                        var Q = {};
                        Q._40O = V;
                        var U = On._7O(L, 0);
                        2 != U.length && $p(Qp);
                        var N = U[0];
                        L.substr(N, 2) != sf && $p(Qp);
                        var G = On._7O(L, N);
                        return 2 != G.length && $p(Qp),
                        L.substr(G[0], 2) != _l && $p(Qp),
                        Q._61O = On._11O(L, G[0]),
                        L.substr(G[1], 2) == _l ? Q._40O = On._11O(L, G[1]) : L.substr(G[1], 2) == sf && (Q._40O = {},
                        Q._40O.p = On._70O(L, G[1], [0], te),
                        Q._40O.q = On._70O(L, G[1], [1], te),
                        Q._40O.g = On._70O(L, G[1], [2], te)),
                        L.substr(U[1], 2) != il && $p(Qp),
                        Q.key = On._11O(L, U[1]).substr(2),
                        Q
                    }
                },
                S._17O ? S : V
            }()
              , sm = Co._27O = function(q) {
                return Co._14O(q)
            }
            ;
            Mh = function() {
                return function(X, a) {
                    if (X && a) {
                        a = Vm(a);
                        var i = Ve(a, y(2, 4))
                          , B = this;
                        if (!B || !B.n || i._55O() > B.n._55O())
                            return 0;
                        var N = B._37O(i)
                          , O = N[Cr](y(2, 4)).replace(bi, "")
                          , v = zj(O);
                        if (0 == v.length)
                            return !1;
                        var L = v[0]
                          , Q = v[1]
                          , T = function(u) {
                            return Db._4O.Util._56O(u, L)
                        }
                          , z = T(X);
                        return Q == z
                    }
                }
                .bind(sm(T))
            }
            ;
            var Yc, mg;
            return function() {
                var d = ui.length - Ug.length;
                if (d > 0)
                    for (var l = 0; d > l; l++)
                        Yc = Lm.Util,
                        mg = Vm
            }(),
            hk = function(H, b) {
                b = mg(b);
                var E = sm(Jn)
                  , o = gn.length
                  , S = 2 * o
                  , w = Ve(b, y(o, S))
                  , R = E
                  , d = !0;
                if (R) {
                    var k = R[uk[0]];
                    k && w._55O() <= k._55O() && (d = !1)
                }
                if (d)
                    return 0;
                var g = R._37O(w)
                  , I = g[Cr](y(o, S)).replace(bi, "")
                  , u = zj(I);
                if (0 == u.length)
                    return !1;
                var F = u[0]
                  , f = u[1]
                  , Z = Yc._11A(H, F);
                return f == Z
            }
            ,
            Co
        }(q, m),
        lk(j, {
            load: function() {
                var Z = {}
                  , z = function(M) {
                    return M ? "c_" + (M.sync ? "1" : "0") + "_" + (M.post ? "1" : "0") + "_" + (M.responseType || "H") + "_" + (M.mimeType || "H") + "_" + (M.data ? JSON.stringify(M.data) : "H") : ""
                };
                return function(M, E, _) {
                    var u, G = Z[M], l = z(_);
                    return G && (u = G[l]) ? (u.push(E),
                    void 0) : (Z[M] || (G = Z[M] = {
                        count: 0
                    }),
                    u = G[l] = [E],
                    G.count++,
                    j.xhrLoad(M, function(E) {
                        delete G[l],
                        G.count--,
                        G.count || delete Z[M],
                        u.forEach(function($) {
                            $(E)
                        })
                    }, _),
                    void 0)
                }
            }(),
            asyncEach: function(M, Z, t) {
                "function" != typeof t && (t = Function.prototype);
                var b = new Array(M.length)
                  , G = 0
                  , u = !1;
                M.forEach(function(w, v) {
                    Z(w, function(p, O) {
                        return u ? void 0 : p ? (u = !0,
                        t(null)) : (b[v] = O,
                        G++,
                        G === M.length ? t(b) : void 0)
                    })
                })
            },
            xhrLoad: function(t, P, Y) {
                var J = !1;
                _b(t) || (J = !0,
                t = [t]),
                Y = Y || {},
                t.length;
                var M = Y.sync
                  , n = !!Y.post
                  , B = Y.data || null
                  , G = null;
                return j.asyncEach(t, function(W, g) {
                    var A = new XMLHttpRequest;
                    W = j.beforeLoadURL(W),
                    W.data ? g(null, W.data) : (A.open(n ? "POST" : "GET", encodeURI(W), !M),
                    Y.responseType ? A.responseType = Y.responseType : A.overrideMimeType && A.overrideMimeType(Y.mimeType || "text/plain"),
                    A.onload = function(W) {
                        200 === this.status || 0 === this.status ? g(null, W.target.response || W.target.responseText) : g(!0)
                    }
                    ,
                    A.onerror = function() {
                        g(!0)
                    }
                    ,
                    A.send(B))
                }, function(t) {
                    var w = "function" == typeof P;
                    (w || M) && (G = J && t ? t[0] : t,
                    w && P(G))
                }),
                M ? G : void 0
            }
        }),
        Math.sign === F && (Math.sign = function(T) {
            return 0 > T ? -1 : T > 0 ? 1 : +T
        }
        ),
        C.Math = {
            generateUUID: function() {
                for (var I = [], G = 0; 256 > G; G++)
                    I[G] = (16 > G ? "0" : "") + G.toString(16).toUpperCase();
                return function() {
                    var K = 0 | 4294967295 * Math.random()
                      , F = 0 | 4294967295 * Math.random()
                      , i = 0 | 4294967295 * Math.random()
                      , h = 0 | 4294967295 * Math.random();
                    return I[255 & K] + I[255 & K >> 8] + I[255 & K >> 16] + I[255 & K >> 24] + "-" + I[255 & F] + I[255 & F >> 8] + "-" + I[64 | 15 & F >> 16] + I[255 & F >> 24] + "-" + I[128 | 63 & i] + I[255 & i >> 8] + "-" + I[255 & i >> 16] + I[255 & i >> 24] + I[255 & h] + I[255 & h >> 8] + I[255 & h >> 16] + I[255 & h >> 24]
                }
            }(),
            clamp: function(E, y, t) {
                return Math.max(y, Math.min(t, E))
            },
            generateIncreasingID: function() {
                var b = 0;
                return function() {
                    return ++b
                }
            }()
        };
        var Hh = C.Matrix = C.Math.Matrix2d = function(c, P, m, O, g) {
            var M = this;
            if (c === F)
                return M.a = 1,
                M.b = 0,
                M.c = 0,
                M.d = 1,
                M.tx = 0,
                M.ty = 0,
                void 0;
            c = c || 0;
            var j = E(c)
              , D = z(c);
            O = O || 1,
            g = g || 1,
            M.a = D * O,
            M.b = j * O,
            M.c = -j * g,
            M.d = D * g,
            M.tx = P || 0,
            M.ty = m || 0
        }
          , yh = Hh;
        Hh.prototype = {},
        Hh.prototype.constructor = Hh,
        Hh.prototype.set = function(T, Q, G, e, u, K) {
            return this.a = T,
            this.b = Q,
            this.c = G,
            this.d = e,
            this.tx = u,
            this.ty = K,
            this
        }
        ,
        Hh.prototype.apply = function(M, R) {
            R = R || new ph;
            var l = M.x
              , O = M.y;
            return R.x = this.a * l + this.c * O + this.tx,
            R.y = this.b * l + this.d * O + this.ty,
            R
        }
        ,
        Hh.prototype.applyInverse = function(P, O) {
            O = O || new ph;
            var x = 1 / (this.a * this.d + this.c * -this.b)
              , H = P.x
              , v = P.y;
            return O.x = this.d * x * H + -this.c * x * v + (this.ty * this.c - this.tx * this.d) * x,
            O.y = this.a * x * v + -this.b * x * H + (-this.ty * this.a + this.tx * this.b) * x,
            O
        }
        ,
        Hh.prototype.translate = function(z, s) {
            return this.tx += z,
            this.ty += s,
            this
        }
        ,
        Hh.prototype.scale = function(D, k) {
            return this.a *= D,
            this.d *= k,
            this.c *= D,
            this.b *= k,
            this.tx *= D,
            this.ty *= k,
            this
        }
        ,
        Hh.prototype.rotate = function(J) {
            var g = Math.cos(J)
              , k = Math.sin(J)
              , r = this.a
              , U = this.c
              , v = this.tx;
            return this.a = r * g - this.b * k,
            this.b = r * k + this.b * g,
            this.c = U * g - this.d * k,
            this.d = U * k + this.d * g,
            this.tx = v * g - this.ty * k,
            this.ty = v * k + this.ty * g,
            this
        }
        ,
        Hh.prototype.appendTranslate = function(V, d) {
            return this.tx += this.a * V + this.c * d,
            this.ty += this.b * V + this.d * d,
            this
        }
        ,
        Hh.prototype.appendScale = function(n, U) {
            return this.a *= n,
            this.d *= U,
            this.c *= U,
            this.b *= n,
            this
        }
        ,
        Hh.prototype.appendRotate = function(J) {
            if (!J)
                return this;
            var H = Math.cos(J)
              , t = Math.sin(J)
              , d = this.a
              , r = this.b;
            return this.a = d * H + this.c * t,
            this.b = r * H + this.d * t,
            this.c = -d * t + this.c * H,
            this.d = -r * t + this.d * H,
            this
        }
        ,
        Hh.prototype.append = function(h) {
            var t = this.a
              , y = this.b
              , p = this.c
              , n = this.d;
            return this.a = h.a * t + h.b * p,
            this.b = h.a * y + h.b * n,
            this.c = h.c * t + h.d * p,
            this.d = h.c * y + h.d * n,
            this.tx = h.tx * t + h.ty * p + this.tx,
            this.ty = h.tx * y + h.ty * n + this.ty,
            this
        }
        ,
        Hh.prototype.setTransform = function(s, D, G, W, p, w, m, U, T) {
            var g, P, l, Z, F, C, o, O, $, t;
            return F = Math.sin(m),
            C = Math.cos(m),
            o = Math.cos(T),
            O = Math.sin(T),
            $ = -Math.sin(U),
            t = Math.cos(U),
            g = C * p,
            P = F * p,
            l = -F * w,
            Z = C * w,
            this.a = o * g + O * l,
            this.b = o * P + O * Z,
            this.c = $ * g + t * l,
            this.d = $ * P + t * Z,
            this.tx = s + (G * g + W * l),
            this.ty = D + (G * P + W * Z),
            this
        }
        ,
        Hh.prototype.prepend = function(r) {
            var H = this.tx;
            if (1 !== r.a || 0 !== r.b || 0 !== r.c || 1 !== r.d) {
                var a = this.a
                  , q = this.c;
                this.a = a * r.a + this.b * r.c,
                this.b = a * r.b + this.b * r.d,
                this.c = q * r.a + this.d * r.c,
                this.d = q * r.b + this.d * r.d
            }
            return this.tx = H * r.a + this.ty * r.c + r.tx,
            this.ty = H * r.b + this.ty * r.d + r.ty,
            this
        }
        ,
        Hh.prototype.transform = Hh.prototype.prepend,
        Hh.prototype.invert = function() {
            var l = this.a
              , y = this.b
              , z = this.c
              , Q = this.d
              , L = this.tx
              , g = l * Q - y * z;
            return this.a = Q / g,
            this.b = -y / g,
            this.c = -z / g,
            this.d = l / g,
            this.tx = (z * this.ty - Q * L) / g,
            this.ty = -(l * this.ty - y * L) / g,
            this
        }
        ,
        Hh.prototype.identity = function() {
            return this.a = 1,
            this.b = 0,
            this.c = 0,
            this.d = 1,
            this.tx = 0,
            this.ty = 0,
            this
        }
        ,
        Hh.prototype.clone = function() {
            var W = new Hh;
            return W.a = this.a,
            W.b = this.b,
            W.c = this.c,
            W.d = this.d,
            W.tx = this.tx,
            W.ty = this.ty,
            W
        }
        ,
        Hh.prototype.copy = function(p) {
            return p.a = this.a,
            p.b = this.b,
            p.c = this.c,
            p.d = this.d,
            p.tx = this.tx,
            p.ty = this.ty,
            p
        }
        ,
        Hh.prototype.tf = function(Z, n) {
            1 === arguments.length && (n = Z.y,
            Z = Z.x);
            var b = this;
            return {
                x: b.a * Z + b.c * n + b.tx,
                y: b.b * Z + b.d * n + b.ty
            }
        }
        ,
        Hh.prototype.tfi = function(F, A) {
            1 === arguments.length && (A = F.y,
            F = F.x);
            var v = this
              , R = 1 / (v.a * v.d + v.c * -v.b);
            return {
                x: v.d * R * F + -v.c * R * A + (v.ty * v.c - v.tx * v.d) * R,
                y: v.a * R * A + -v.b * R * F + (-v.ty * v.a + v.tx * v.b) * R
            }
        }
        ,
        Hh.IDENTITY = new Hh,
        Hh.TEMP_MATRIX = new Hh;
        var dr = C.Math.Vector3 = function(O, I, c) {
            "object" == typeof O ? this.copy(O) : this.set(O, I == F ? O : I, c == F ? O : c)
        }
        ;
        m.assign(dr.prototype, {
            set: function(l, T, h) {
                return this.x = l,
                this.y = T,
                this.z = h,
                this
            },
            setScalar: function(H) {
                return this.x = H,
                this.y = H,
                this.z = H,
                this
            },
            setX: function(h) {
                return this.x = h,
                this
            },
            setY: function(V) {
                return this.y = V,
                this
            },
            setZ: function(M) {
                return this.z = M,
                this
            },
            clone: function() {
                return new this.constructor(this.x,this.y,this.z)
            },
            copy: function(q) {
                return q.x === F ? (this.x = q[0],
                this.y = q[1],
                this.z = q[2]) : (this.x = q.x,
                this.y = q.y,
                this.z = q.z),
                this
            },
            add: function(s) {
                return this.x += s.x,
                this.y += s.y,
                this.z += s.z,
                this
            },
            addScalar: function(U) {
                return this.x += U,
                this.y += U,
                this.z += U,
                this
            },
            addVectors: function($, D) {
                return this.x = $.x + D.x,
                this.y = $.y + D.y,
                this.z = $.z + D.z,
                this
            },
            addScaledVector: function(A, a) {
                return this.x += A.x * a,
                this.y += A.y * a,
                this.z += A.z * a,
                this
            },
            sub: function(m) {
                return this.x -= m.x,
                this.y -= m.y,
                this.z -= m.z,
                this
            },
            subScalar: function(g) {
                return this.x -= g,
                this.y -= g,
                this.z -= g,
                this
            },
            subVectors: function(A, m) {
                return this.x = A.x - m.x,
                this.y = A.y - m.y,
                this.z = A.z - m.z,
                this
            },
            multiply: function(C) {
                return this.x *= C.x,
                this.y *= C.y,
                this.z *= C.z,
                this
            },
            multiplyScalar: function(J) {
                return this.x *= J,
                this.y *= J,
                this.z *= J,
                this
            },
            distanceTo: function(Y) {
                return Math.sqrt(this.distanceToSquared(Y))
            },
            distanceToSquared: function(w) {
                var e = this.x - w.x
                  , c = this.y - w.y
                  , t = this.z - w.z;
                return e * e + c * c + t * t
            },
            multiplyVectors: function(h, c) {
                return this.x = h.x * c.x,
                this.y = h.y * c.y,
                this.z = h.z * c.z,
                this
            },
            transformDirection: function(f) {
                var P = this.x
                  , s = this.y
                  , O = this.z
                  , u = f.el;
                return this.x = u[0] * P + u[4] * s + u[8] * O,
                this.y = u[1] * P + u[5] * s + u[9] * O,
                this.z = u[2] * P + u[6] * s + u[10] * O,
                this.normalize()
            },
            applyQuaternion: function(z) {
                var J = this.x
                  , X = this.y
                  , E = this.z
                  , K = z._x
                  , F = z._y
                  , g = z._z
                  , I = z._w
                  , V = I * J + F * E - g * X
                  , p = I * X + g * J - K * E
                  , j = I * E + K * X - F * J
                  , Q = -K * J - F * X - g * E;
                return this.x = V * I + Q * -K + p * -g - j * -F,
                this.y = p * I + Q * -F + j * -K - V * -g,
                this.z = j * I + Q * -g + V * -F - p * -K,
                this
            },
            applyMatrix4: function(W) {
                var w = this.x
                  , P = this.y
                  , y = this.z
                  , m = W.el
                  , J = 1 / (m[3] * w + m[7] * P + m[11] * y + m[15]);
                return this.x = (m[0] * w + m[4] * P + m[8] * y + m[12]) * J,
                this.y = (m[1] * w + m[5] * P + m[9] * y + m[13]) * J,
                this.z = (m[2] * w + m[6] * P + m[10] * y + m[14]) * J,
                this
            },
            negate: function() {
                return this.x = -this.x,
                this.y = -this.y,
                this.z = -this.z,
                this
            },
            dot: function(D) {
                return this.x * D.x + this.y * D.y + this.z * D.z
            },
            lengthSq: function() {
                return this.x * this.x + this.y * this.y + this.z * this.z
            },
            length: function() {
                return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z)
            },
            manhattanLength: function() {
                return Math.abs(this.x) + Math.abs(this.y) + Math.abs(this.z)
            },
            normalize: function() {
                var l = this.length();
                return l ? this.multiplyScalar(1 / l) : this
            },
            setLength: function(d) {
                return this.normalize().multiplyScalar(d)
            },
            fromArray: function(R, Q) {
                return Q === F && (Q = 0),
                this.x = R[Q],
                this.y = R[Q + 1],
                this.z = R[Q + 2],
                this
            },
            toArray: function(H, I) {
                return H === F && (H = [0, 0, 0]),
                I === F && (I = 0),
                H[I] = this.x,
                H[I + 1] = this.y,
                H[I + 2] = this.z,
                H
            },
            cross: function(w) {
                return this.crossVectors(this, w)
            },
            angleTo: function(A) {
                var X = this.dot(A) / Math.sqrt(this.lengthSq() * A.lengthSq());
                return X > 1 || -1 > X ? 0 : Math.acos(X)
            },
            lerpVectors: function(P, K, r) {
                return this.subVectors(K, P).multiplyScalar(r).add(P)
            },
            crossVectors: function(N, l) {
                var H = N.x
                  , C = N.y
                  , X = N.z
                  , k = l.x
                  , S = l.y
                  , h = l.z;
                return this.x = C * h - X * S,
                this.y = X * k - H * h,
                this.z = H * S - C * k,
                this
            },
            min: function(S) {
                return this.x = Math.min(this.x, S.x),
                this.y = Math.min(this.y, S.y),
                this.z = Math.min(this.z, S.z),
                this
            },
            max: function(p) {
                return this.x = Math.max(this.x, p.x),
                this.y = Math.max(this.y, p.y),
                this.z = Math.max(this.z, p.z),
                this
            }
        });
        var ph = C.Math.Vector2 = function(T, n, t) {
            "object" == typeof T && (T.x != F ? (n = T.y,
            T = T.x,
            t = T.e) : (t = T[2],
            n = T[1],
            T = T[0])),
            this.set(T || 0, n || 0, t)
        }
        ;
        ph.prototype = {},
        ph.prototype.constructor = ph,
        m.defineProperties(ph.prototype, {
            width: {
                get: function() {
                    return this.x
                },
                set: function(H) {
                    this.x = H
                }
            },
            height: {
                get: function() {
                    return this.y
                },
                set: function(H) {
                    this.y = H
                }
            }
        }),
        ph.prototype.clone = function() {
            return new ph(this.x,this.y,this.e)
        }
        ,
        ph.prototype.copy = function(t) {
            return this.set(t.x, t.y, t.e),
            this
        }
        ,
        ph.prototype.equals = function(d) {
            return d.x === this.x && d.y === this.y
        }
        ,
        ph.prototype.set = function(E, Q, Y) {
            return this.x = E || 0,
            this.y = Q || (0 !== Q ? this.x : 0),
            Y != F && (this.e = Y),
            this
        }
        ,
        ph.prototype.setScalar = function(q) {
            return this.x = q,
            this.y = q,
            this
        }
        ,
        ph.prototype.setX = function($) {
            return this.x = $ || 0,
            this
        }
        ,
        ph.prototype.setY = function(M) {
            return this.y = M || 0,
            this
        }
        ,
        ph.prototype.add = function(X) {
            return this.x += X.x,
            this.y += X.y,
            this
        }
        ,
        ph.prototype.addVectors = function(M, I) {
            return this.x = M.x + I.x,
            this.y = M.y + I.y,
            this
        }
        ,
        ph.prototype.addScalar = function(Q) {
            return this.x += Q,
            this.y += Q,
            this
        }
        ,
        ph.prototype.addScaledVector = function(d, y) {
            return this.x += d.x * y,
            this.y += d.y * y,
            this
        }
        ,
        ph.prototype.sub = function(z) {
            return this.x -= z.x,
            this.y -= z.y,
            this
        }
        ,
        ph.prototype.subScalar = function(C) {
            return this.x -= C,
            this.y -= C,
            this
        }
        ,
        ph.prototype.subVectors = function(v, c) {
            return this.x = v.x - c.x,
            this.y = v.y - c.y,
            this
        }
        ,
        ph.prototype.multiply = function(p) {
            return this.x *= p.x,
            this.y *= p.y,
            this
        }
        ,
        ph.prototype.multiplyScalar = function(d) {
            return this.x *= d,
            this.y *= d,
            this
        }
        ,
        ph.prototype.divide = function(h) {
            return this.x /= h.x,
            this.y /= h.y,
            this
        }
        ,
        ph.prototype.divideScalar = function(j) {
            return this.multiplyScalar(1 / j)
        }
        ,
        ph.prototype.min = function(c) {
            return this.x = Math.min(this.x, c.x),
            this.y = Math.min(this.y, c.y),
            this
        }
        ,
        ph.prototype.max = function(t) {
            return this.x = Math.max(this.x, t.x),
            this.y = Math.max(this.y, t.y),
            this
        }
        ,
        ph.prototype.fromArray = function(L, G) {
            return G === F && (G = 0),
            this.x = L[G],
            this.y = L[G + 1],
            this
        }
        ,
        ph.prototype.clamp = function(n, z) {
            return this.x = Math.max(n.x, Math.min(z.x, this.x)),
            this.y = Math.max(n.y, Math.min(z.y, this.y)),
            this
        }
        ,
        ph.prototype.clampScalar = function() {
            var f, P;
            return function(Y, m) {
                return f === F && (f = new ph,
                P = new ph),
                f.set(Y, Y),
                P.set(m, m),
                this.clamp(f, P)
            }
        }(),
        ph.prototype.clampLength = function(D, B) {
            var o = this.length();
            return this.multiplyScalar(Math.max(D, Math.min(B, o)) / o)
        }
        ,
        ph.prototype.dot = function(_) {
            return this.x * _.x + this.y * _.y
        }
        ,
        ph.prototype.lengthSq = function() {
            return this.x * this.x + this.y * this.y
        }
        ,
        ph.prototype.length = function() {
            return Math.sqrt(this.x * this.x + this.y * this.y)
        }
        ,
        ph.prototype.normalize = function() {
            return this.divideScalar(this.length())
        }
        ,
        ph.prototype.angle = function() {
            var u = Math.atan2(this.y, this.x);
            return 0 > u && (u += 2 * Math.PI),
            u
        }
        ,
        ph.prototype.distanceTo = function(L) {
            return Math.sqrt(this.distanceToSquared(L))
        }
        ,
        ph.prototype.distanceToSquared = function(T) {
            var D = this.x - T.x
              , j = this.y - T.y;
            return D * D + j * j
        }
        ,
        ph.prototype.isNearEnough = function(n) {
            return this.distanceToSquared(n) < 1e-8
        }
        ,
        ph.prototype.setLength = function(k) {
            var J = this.length();
            return J ? this.multiplyScalar(k / J) : this
        }
        ,
        ph.prototype.lerp = function(S, R) {
            return this.x += (S.x - this.x) * R,
            this.y += (S.y - this.y) * R,
            this
        }
        ,
        ph.prototype.lerpVectors = function(T, V, u) {
            return this.subVectors(V, T).multiplyScalar(u).add(T)
        }
        ,
        ph.prototype.rotateAround = function(w, U) {
            var H = Math.cos(U)
              , T = Math.sin(U)
              , _ = this.x - w.x
              , $ = this.y - w.y;
            return this.x = _ * H - $ * T + w.x,
            this.y = _ * T + $ * H + w.y,
            this
        }
        ;
        var Qd = C.Math.Ray = function(N, A) {
            this.origin = N !== F ? N.clone() : new dr,
            this.direction = A !== F ? A.clone() : new dr
        }
        ;
        m.assign(Qd.prototype, {
            set: function(Y, R) {
                return this.origin.copy(Y),
                this.direction.copy(R),
                this
            },
            clone: function() {
                return (new this.constructor).copy(this)
            },
            copy: function(m) {
                return this.origin.copy(m.origin),
                this.direction.copy(m.direction),
                this.maxHitLen = m.maxHitLen,
                this
            },
            at: function(U, q) {
                var x = q || new dr;
                return x.copy(this.direction).multiplyScalar(U).add(this.origin)
            },
            setMaxHitLength: function(o) {
                this.maxHitLen = o
            },
            lookAt: function(n) {
                return this.direction.copy(n).sub(this.origin).normalize(),
                this
            },
            applyMatrix4: function(E) {
                var U = this.maxHitLen;
                if (U) {
                    var F = this.direction.clone().multiplyScalar(U).add(this.origin);
                    F.applyMatrix4(E)
                }
                return this.origin.applyMatrix4(E),
                this.direction.transformDirection(E),
                U && (this.maxHitLen = this.origin.distanceTo(F)),
                this
            },
            intersectBox: function(Y, u) {
                var K, J, O, e, m, N, Z = 1 / this.direction.x, W = 1 / this.direction.y, T = 1 / this.direction.z, t = this.origin;
                if (Z >= 0 ? (K = (Y.min.x - t.x) * Z,
                J = (Y.max.x - t.x) * Z) : (K = (Y.max.x - t.x) * Z,
                J = (Y.min.x - t.x) * Z),
                W >= 0 ? (O = (Y.min.y - t.y) * W,
                e = (Y.max.y - t.y) * W) : (O = (Y.max.y - t.y) * W,
                e = (Y.min.y - t.y) * W),
                K > e || O > J)
                    return null;
                if ((O > K || K !== K) && (K = O),
                (J > e || J !== J) && (J = e),
                T >= 0 ? (m = (Y.min.z - t.z) * T,
                N = (Y.max.z - t.z) * T) : (m = (Y.max.z - t.z) * T,
                N = (Y.min.z - t.z) * T),
                K > N || m > J)
                    return null;
                if ((m > K || K !== K) && (K = m),
                (J > N || J !== J) && (J = N),
                0 > J)
                    return null;
                var H = K >= 0 ? K : J
                  , R = this.maxHitLen;
                return R && H > R ? null : this.at(H, u)
            },
            intersectTriangle: function() {
                var y = new dr
                  , H = new dr
                  , u = new dr
                  , m = new dr;
                return function(o, l, W, t, b) {
                    H.subVectors(l, o),
                    u.subVectors(W, o),
                    m.crossVectors(H, u);
                    var h, Y = this.direction.dot(m);
                    if (Y > 0) {
                        if (t)
                            return null;
                        h = 1
                    } else {
                        if (!(0 > Y))
                            return null;
                        h = -1,
                        Y = -Y
                    }
                    y.subVectors(this.origin, o);
                    var j = h * this.direction.dot(u.crossVectors(y, u));
                    if (0 > j)
                        return null;
                    var p = h * this.direction.dot(H.cross(y));
                    if (0 > p || j + p > Y)
                        return null;
                    var i = -h * y.dot(m);
                    if (0 > i)
                        return null;
                    var G = i / Y
                      , S = this.maxHitLen;
                    return S && G > S ? null : this.at(G, b)
                }
            }()
        });
        var Pl = C.Math.Box3 = function(B, H) {
            this.min = B !== F ? B : new dr(1 / 0,1 / 0,1 / 0),
            this.max = H !== F ? H : new dr(-1 / 0,-1 / 0,-1 / 0)
        }
        ;
        m.assign(Pl.prototype, {
            set: function(K, h) {
                return this.min.copy(K),
                this.max.copy(h),
                this
            },
            setFromArray: function(i) {
                for (var S = 1 / 0, j = 1 / 0, s = 1 / 0, p = -1 / 0, e = -1 / 0, C = -1 / 0, q = 0, F = i.length; F > q; q += 3) {
                    var m = i[q]
                      , Q = i[q + 1]
                      , u = i[q + 2];
                    S > m && (S = m),
                    j > Q && (j = Q),
                    s > u && (s = u),
                    m > p && (p = m),
                    Q > e && (e = Q),
                    u > C && (C = u)
                }
                return this.min.set(S, j, s),
                this.max.set(p, e, C),
                this
            },
            setFromPoints: function(V) {
                this.makeEmpty();
                for (var u = 0, N = V.length; N > u; u++)
                    this.expandByPoint(V[u]);
                return this
            },
            clone: function() {
                return (new this.constructor).copy(this)
            },
            copy: function(D) {
                return this.min.copy(D.min),
                this.max.copy(D.max),
                this
            },
            makeEmpty: function() {
                return this.min.x = this.min.y = this.min.z = 1 / 0,
                this.max.x = this.max.y = this.max.z = -1 / 0,
                this
            },
            isEmpty: function() {
                return this.max.x < this.min.x || this.max.y < this.min.y || this.max.z < this.min.z
            },
            expandByPoint: function(g) {
                return this.min.min(g),
                this.max.max(g),
                this
            }
        });
        var Wc = C.Math.Matrix4 = function() {
            this.el = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]
        }
        ;
        m.assign(Wc.prototype, {
            set: function(O, t, f, U, k, E, y, $, c, V, i, j, L, I, J, R) {
                var r = this.el;
                return r[0] = O,
                r[4] = t,
                r[8] = f,
                r[12] = U,
                r[1] = k,
                r[5] = E,
                r[9] = y,
                r[13] = $,
                r[2] = c,
                r[6] = V,
                r[10] = i,
                r[14] = j,
                r[3] = L,
                r[7] = I,
                r[11] = J,
                r[15] = R,
                this
            },
            clone: function() {
                return (new Wc).fromArray(this.el)
            },
            fromArray: function(H, k) {
                k === F && (k = 0);
                for (var C = this.el, d = 0; 16 > d; d++)
                    C[d] = H[d + k];
                return this
            },
            scale: function(R) {
                var r = this.el
                  , P = R.x
                  , X = R.y
                  , _ = R.z;
                return r[0] *= P,
                r[4] *= X,
                r[8] *= _,
                r[1] *= P,
                r[5] *= X,
                r[9] *= _,
                r[2] *= P,
                r[6] *= X,
                r[10] *= _,
                r[3] *= P,
                r[7] *= X,
                r[11] *= _,
                this
            },
            makeRotationFromEuler: function(w) {
                var Y = this.el
                  , h = w._x
                  , F = w._y
                  , c = w._z
                  , g = w._order
                  , n = Math.cos(h)
                  , L = Math.sin(h)
                  , d = Math.cos(F)
                  , S = Math.sin(F)
                  , b = Math.cos(c)
                  , P = Math.sin(c);
                if ("XYZ" === g) {
                    var r = n * b
                      , m = n * P
                      , f = L * b
                      , x = L * P;
                    Y[0] = d * b,
                    Y[4] = -d * P,
                    Y[8] = S,
                    Y[1] = m + f * S,
                    Y[5] = r - x * S,
                    Y[9] = -L * d,
                    Y[2] = x - r * S,
                    Y[6] = f + m * S,
                    Y[10] = n * d
                } else if ("YXZ" === g) {
                    var y = d * b
                      , i = d * P
                      , Z = S * b
                      , $ = S * P;
                    Y[0] = y + $ * L,
                    Y[4] = Z * L - i,
                    Y[8] = n * S,
                    Y[1] = n * P,
                    Y[5] = n * b,
                    Y[9] = -L,
                    Y[2] = i * L - Z,
                    Y[6] = $ + y * L,
                    Y[10] = n * d
                } else if ("ZXY" === g) {
                    var y = d * b
                      , i = d * P
                      , Z = S * b
                      , $ = S * P;
                    Y[0] = y - $ * L,
                    Y[4] = -n * P,
                    Y[8] = Z + i * L,
                    Y[1] = i + Z * L,
                    Y[5] = n * b,
                    Y[9] = $ - y * L,
                    Y[2] = -n * S,
                    Y[6] = L,
                    Y[10] = n * d
                } else if ("ZYX" === g) {
                    var r = n * b
                      , m = n * P
                      , f = L * b
                      , x = L * P;
                    Y[0] = d * b,
                    Y[4] = f * S - m,
                    Y[8] = r * S + x,
                    Y[1] = d * P,
                    Y[5] = x * S + r,
                    Y[9] = m * S - f,
                    Y[2] = -S,
                    Y[6] = L * d,
                    Y[10] = n * d
                } else if ("YZX" === g) {
                    var J = n * d
                      , u = n * S
                      , K = L * d
                      , V = L * S;
                    Y[0] = d * b,
                    Y[4] = V - J * P,
                    Y[8] = K * P + u,
                    Y[1] = P,
                    Y[5] = n * b,
                    Y[9] = -L * b,
                    Y[2] = -S * b,
                    Y[6] = u * P + K,
                    Y[10] = J - V * P
                } else if ("XZY" === g) {
                    var J = n * d
                      , u = n * S
                      , K = L * d
                      , V = L * S;
                    Y[0] = d * b,
                    Y[4] = -P,
                    Y[8] = S * b,
                    Y[1] = J * P + V,
                    Y[5] = n * b,
                    Y[9] = u * P - K,
                    Y[2] = K * P - u,
                    Y[6] = L * b,
                    Y[10] = V * P + J
                }
                return Y[3] = 0,
                Y[7] = 0,
                Y[11] = 0,
                Y[12] = 0,
                Y[13] = 0,
                Y[14] = 0,
                Y[15] = 1,
                this
            },
            makeRotationFromQuaternion: function(y) {
                var A = this.el
                  , C = y._x
                  , m = y._y
                  , i = y._z
                  , N = y._w
                  , d = C + C
                  , h = m + m
                  , j = i + i
                  , t = C * d
                  , p = C * h
                  , f = C * j
                  , r = m * h
                  , n = m * j
                  , D = i * j
                  , l = N * d
                  , U = N * h
                  , Z = N * j;
                return A[0] = 1 - (r + D),
                A[4] = p - Z,
                A[8] = f + U,
                A[1] = p + Z,
                A[5] = 1 - (t + D),
                A[9] = n - l,
                A[2] = f - U,
                A[6] = n + l,
                A[10] = 1 - (t + r),
                A[3] = 0,
                A[7] = 0,
                A[11] = 0,
                A[12] = 0,
                A[13] = 0,
                A[14] = 0,
                A[15] = 1,
                this
            },
            identity: function() {
                return this.set(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1),
                this
            },
            getInverse: function(j) {
                var n = this.el
                  , C = j.el
                  , X = C[0]
                  , W = C[1]
                  , P = C[2]
                  , _ = C[3]
                  , R = C[4]
                  , b = C[5]
                  , o = C[6]
                  , D = C[7]
                  , E = C[8]
                  , c = C[9]
                  , M = C[10]
                  , T = C[11]
                  , g = C[12]
                  , z = C[13]
                  , Z = C[14]
                  , N = C[15]
                  , x = c * Z * D - z * M * D + z * o * T - b * Z * T - c * o * N + b * M * N
                  , t = g * M * D - E * Z * D - g * o * T + R * Z * T + E * o * N - R * M * N
                  , B = E * z * D - g * c * D + g * b * T - R * z * T - E * b * N + R * c * N
                  , e = g * c * o - E * z * o - g * b * M + R * z * M + E * b * Z - R * c * Z
                  , k = X * x + W * t + P * B + _ * e;
                if (0 === k)
                    return this.identity();
                var r = 1 / k;
                return n[0] = x * r,
                n[1] = (z * M * _ - c * Z * _ - z * P * T + W * Z * T + c * P * N - W * M * N) * r,
                n[2] = (b * Z * _ - z * o * _ + z * P * D - W * Z * D - b * P * N + W * o * N) * r,
                n[3] = (c * o * _ - b * M * _ - c * P * D + W * M * D + b * P * T - W * o * T) * r,
                n[4] = t * r,
                n[5] = (E * Z * _ - g * M * _ + g * P * T - X * Z * T - E * P * N + X * M * N) * r,
                n[6] = (g * o * _ - R * Z * _ - g * P * D + X * Z * D + R * P * N - X * o * N) * r,
                n[7] = (R * M * _ - E * o * _ + E * P * D - X * M * D - R * P * T + X * o * T) * r,
                n[8] = B * r,
                n[9] = (g * c * _ - E * z * _ - g * W * T + X * z * T + E * W * N - X * c * N) * r,
                n[10] = (R * z * _ - g * b * _ + g * W * D - X * z * D - R * W * N + X * b * N) * r,
                n[11] = (E * b * _ - R * c * _ - E * W * D + X * c * D + R * W * T - X * b * T) * r,
                n[12] = e * r,
                n[13] = (E * z * P - g * c * P + g * W * M - X * z * M - E * W * Z + X * c * Z) * r,
                n[14] = (g * b * P - R * z * P - g * W * o + X * z * o + R * W * Z - X * b * Z) * r,
                n[15] = (R * c * P - E * b * P + E * W * o - X * c * o - R * W * M + X * b * M) * r,
                this
            },
            makeRotationAxis: function(t, U) {
                var w = Math.cos(U)
                  , W = Math.sin(U)
                  , $ = 1 - w
                  , a = t.x
                  , h = t.y
                  , J = t.z
                  , p = $ * a
                  , Y = $ * h;
                return this.set(p * a + w, p * h - W * J, p * J + W * h, 0, p * h + W * J, Y * h + w, Y * J - W * a, 0, p * J - W * h, Y * J + W * a, $ * J * J + w, 0, 0, 0, 0, 1),
                this
            },
            multiply: function(J) {
                return this.multiplyMatrices(this, J)
            },
            premultiply: function(a) {
                return this.multiplyMatrices(a, this)
            },
            multiplyMatrices: function(O, x) {
                var X = O.el
                  , K = x.el
                  , y = this.el
                  , u = X[0]
                  , G = X[4]
                  , o = X[8]
                  , k = X[12]
                  , n = X[1]
                  , B = X[5]
                  , z = X[9]
                  , w = X[13]
                  , P = X[2]
                  , f = X[6]
                  , p = X[10]
                  , i = X[14]
                  , I = X[3]
                  , c = X[7]
                  , d = X[11]
                  , l = X[15]
                  , M = K[0]
                  , r = K[4]
                  , J = K[8]
                  , _ = K[12]
                  , b = K[1]
                  , T = K[5]
                  , j = K[9]
                  , Y = K[13]
                  , e = K[2]
                  , W = K[6]
                  , H = K[10]
                  , F = K[14]
                  , v = K[3]
                  , V = K[7]
                  , R = K[11]
                  , m = K[15];
                return y[0] = u * M + G * b + o * e + k * v,
                y[4] = u * r + G * T + o * W + k * V,
                y[8] = u * J + G * j + o * H + k * R,
                y[12] = u * _ + G * Y + o * F + k * m,
                y[1] = n * M + B * b + z * e + w * v,
                y[5] = n * r + B * T + z * W + w * V,
                y[9] = n * J + B * j + z * H + w * R,
                y[13] = n * _ + B * Y + z * F + w * m,
                y[2] = P * M + f * b + p * e + i * v,
                y[6] = P * r + f * T + p * W + i * V,
                y[10] = P * J + f * j + p * H + i * R,
                y[14] = P * _ + f * Y + p * F + i * m,
                y[3] = I * M + c * b + d * e + l * v,
                y[7] = I * r + c * T + d * W + l * V,
                y[11] = I * J + c * j + d * H + l * R,
                y[15] = I * _ + c * Y + d * F + l * m,
                this
            }
        });
        var df = C.Math.Quaternion = function(O, k, q, R) {
            this.set(O, k, q, R)
        }
        ;
        m.assign(df.prototype, {
            set: function(j, e, k, E) {
                var J = this;
                return J._x = j || 0,
                J._y = e || 0,
                J._z = k || 0,
                J._w = E !== F ? E : 1,
                J
            },
            clone: function() {
                return new this.constructor(this._x,this._y,this._z,this._w)
            },
            copy: function(n) {
                var r = this;
                return r._x = n._x,
                r._y = n._y,
                r._z = n._z,
                r._w = n._w,
                r
            },
            fromArray: function(L, s) {
                s === F && (s = 0);
                var Q = this;
                return Q._x = L[s],
                Q._y = L[s + 1],
                Q._z = L[s + 2],
                Q._w = L[s + 3],
                this
            },
            slerp: function(p, _) {
                if (0 === _)
                    return this;
                if (1 === _)
                    return this.copy(p);
                var Q = this._x
                  , F = this._y
                  , h = this._z
                  , z = this._w
                  , w = z * p._w + Q * p._x + F * p._y + h * p._z;
                if (0 > w ? (this._w = -p._w,
                this._x = -p._x,
                this._y = -p._y,
                this._z = -p._z,
                w = -w) : this.copy(p),
                w >= 1)
                    return this._w = z,
                    this._x = Q,
                    this._y = F,
                    this._z = h,
                    this;
                var i = Math.sqrt(1 - w * w);
                if (Math.abs(i) < .001)
                    return this._w = .5 * (z + this._w),
                    this._x = .5 * (Q + this._x),
                    this._y = .5 * (F + this._y),
                    this._z = .5 * (h + this._z),
                    this;
                var Z = Math.atan2(i, w)
                  , c = Math.sin((1 - _) * Z) / i
                  , W = Math.sin(_ * Z) / i;
                return this._w = z * c + this._w * W,
                this._x = Q * c + this._x * W,
                this._y = F * c + this._y * W,
                this._z = h * c + this._z * W,
                this
            },
            setFromAxisAngle: function(s, Y) {
                var m = Y / 2
                  , v = Math.sin(m);
                return this._x = s.x * v,
                this._y = s.y * v,
                this._z = s.z * v,
                this._w = Math.cos(m),
                this
            },
            setFromEuler: function($) {
                var Z = $._x
                  , O = $._y
                  , g = $._z
                  , j = $._order
                  , x = Math.cos
                  , m = Math.sin
                  , M = x(Z / 2)
                  , u = x(O / 2)
                  , V = x(g / 2)
                  , h = m(Z / 2)
                  , K = m(O / 2)
                  , l = m(g / 2);
                return "XYZ" === j ? (this._x = h * u * V + M * K * l,
                this._y = M * K * V - h * u * l,
                this._z = M * u * l + h * K * V,
                this._w = M * u * V - h * K * l) : "YXZ" === j ? (this._x = h * u * V + M * K * l,
                this._y = M * K * V - h * u * l,
                this._z = M * u * l - h * K * V,
                this._w = M * u * V + h * K * l) : "ZXY" === j ? (this._x = h * u * V - M * K * l,
                this._y = M * K * V + h * u * l,
                this._z = M * u * l + h * K * V,
                this._w = M * u * V - h * K * l) : "ZYX" === j ? (this._x = h * u * V - M * K * l,
                this._y = M * K * V + h * u * l,
                this._z = M * u * l - h * K * V,
                this._w = M * u * V + h * K * l) : "YZX" === j ? (this._x = h * u * V + M * K * l,
                this._y = M * K * V + h * u * l,
                this._z = M * u * l - h * K * V,
                this._w = M * u * V - h * K * l) : "XZY" === j && (this._x = h * u * V - M * K * l,
                this._y = M * K * V - h * u * l,
                this._z = M * u * l + h * K * V,
                this._w = M * u * V + h * K * l),
                this
            }
        });
        var cn = C.Math.Triangle = function(D, K, G) {
            this.a = D !== F ? D : new dr,
            this.b = K !== F ? K : new dr,
            this.c = G !== F ? G : new dr
        }
        ;
        m.assign(cn, {
            barycoordFromPoint: function() {
                var i = new dr
                  , Z = new dr
                  , y = new dr;
                return function(s, O, K, Y, l) {
                    i.subVectors(Y, O),
                    Z.subVectors(K, O),
                    y.subVectors(s, O);
                    var X = i.dot(i)
                      , W = i.dot(Z)
                      , J = i.dot(y)
                      , k = Z.dot(Z)
                      , b = Z.dot(y)
                      , T = X * k - W * W
                      , x = l || new dr;
                    if (0 === T)
                        return x.set(-2, -1, -1);
                    var C = 1 / T
                      , M = (k * J - W * b) * C
                      , c = (X * b - W * J) * C;
                    return x.set(1 - M - c, c, M)
                }
            }()
        });
        var Qj = C.Math.Euler = function(c, G, i, V, D) {
            this.set(c, G, i, V, D)
        }
        ;
        Qj.RotationOrders = ["XYZ", "YZX", "ZXY", "XZY", "YXZ", "ZYX"],
        Qj.DefaultOrder = "XYZ",
        m.defineProperties(Qj.prototype, {
            x: {
                get: function() {
                    return this._x
                },
                set: function(u) {
                    this._x = u,
                    this.onChangeCallback()
                }
            },
            y: {
                get: function() {
                    return this._y
                },
                set: function(F) {
                    this._y = F,
                    this.onChangeCallback()
                }
            },
            z: {
                get: function() {
                    return this._z
                },
                set: function(M) {
                    this._z = M,
                    this.onChangeCallback()
                }
            },
            order: {
                get: function() {
                    return this._order
                },
                set: function(v) {
                    this._order = v,
                    this.onChangeCallback()
                }
            }
        }),
        m.assign(Qj.prototype, {
            set: function(c, R, l, I, v) {
                return _b(c) && (v = l,
                I = R,
                l = c[2],
                R = c[1],
                c = c[0]),
                I ? (v && (I = I[2] + I[1] + I[0]),
                I = I.toUpperCase()) : I = "ZYX",
                this._x = c || 0,
                this._y = R || 0,
                this._z = l || 0,
                this._order = I || this._order,
                this.onChangeCallback(),
                this
            },
            clone: function() {
                return new this.constructor(this._x,this._y,this._z,this._order)
            },
            copy: function(X) {
                return this._x = X._x,
                this._y = X._y,
                this._z = X._z,
                this._order = X._order,
                this.onChangeCallback(),
                this
            },
            setFromRotationMatrix: function(s, r, D) {
                var c = C.Math.clamp
                  , k = s.el || s
                  , N = k[0]
                  , b = k[4]
                  , y = k[8]
                  , f = k[1]
                  , L = k[5]
                  , G = k[9]
                  , I = k[2]
                  , Y = k[6]
                  , A = k[10];
                return r = r || this._order,
                "XYZ" === r ? (this._y = Math.asin(c(y, -1, 1)),
                Math.abs(y) < .99999 ? (this._x = Math.atan2(-G, A),
                this._z = Math.atan2(-b, N)) : (this._x = Math.atan2(Y, L),
                this._z = 0)) : "YXZ" === r ? (this._x = Math.asin(-c(G, -1, 1)),
                Math.abs(G) < .99999 ? (this._y = Math.atan2(y, A),
                this._z = Math.atan2(f, L)) : (this._y = Math.atan2(-I, N),
                this._z = 0)) : "ZXY" === r ? (this._x = Math.asin(c(Y, -1, 1)),
                Math.abs(Y) < .99999 ? (this._y = Math.atan2(-I, A),
                this._z = Math.atan2(-b, L)) : (this._y = 0,
                this._z = Math.atan2(f, N))) : "ZYX" === r ? (this._y = Math.asin(-c(I, -1, 1)),
                Math.abs(I) < .99999 ? (this._x = Math.atan2(Y, A),
                this._z = Math.atan2(f, N)) : (this._x = 0,
                this._z = Math.atan2(-b, L))) : "YZX" === r ? (this._z = Math.asin(c(f, -1, 1)),
                Math.abs(f) < .99999 ? (this._x = Math.atan2(-G, L),
                this._y = Math.atan2(-I, N)) : (this._x = 0,
                this._y = Math.atan2(y, A))) : "XZY" === r ? (this._z = Math.asin(-c(b, -1, 1)),
                Math.abs(b) < .99999 ? (this._x = Math.atan2(Y, L),
                this._y = Math.atan2(y, N)) : (this._x = Math.atan2(-G, A),
                this._y = 0)) : console.warn("unsupported order: " + r),
                this._order = r,
                D !== !1 && this.onChangeCallback(),
                this
            },
            setFromQuaternion: function() {
                var t = new Wc;
                return function(u, n, G) {
                    return t.makeRotationFromQuaternion(u),
                    this.setFromRotationMatrix(t, n, G)
                }
            }(),
            setFromVector3: function(G, H) {
                return this.set(G.x, G.y, G.z, H || this._order)
            },
            reorder: function() {
                var G = new df;
                return function(w) {
                    return G.setFromEuler(this),
                    this.setFromQuaternion(G, w)
                }
            }(),
            equals: function(E) {
                return E._x === this._x && E._y === this._y && E._z === this._z && E._order === this._order
            },
            fromArray: function(U) {
                return this._x = U[0],
                this._y = U[1],
                this._z = U[2],
                U[3] !== F && (this._order = U[3]),
                this.onChangeCallback(),
                this
            },
            toArray: function(k, Y) {
                return k === F && (k = []),
                Y === F && (Y = 0),
                k[Y] = this._x,
                k[Y + 1] = this._y,
                k[Y + 2] = this._z,
                k[Y + 3] = this._order,
                k
            },
            toVector3: function(Y) {
                return Y ? Y.set(this._x, this._y, this._z) : new dr(this._x,this._y,this._z)
            },
            onChange: function(U) {
                return this.onChangeCallback = U,
                this
            },
            onChangeCallback: function() {}
        });
        var Vr = C.List = function() {
            this._as = [];
            var q, c, z = arguments.length;
            if (1 === z) {
                var $ = arguments[0];
                if (Gl($) && ($ = $._as),
                _b($))
                    for (c = $.length,
                    q = 0; c > q; q++)
                        this._as.push($[q]);
                else
                    $ != V && this._as.push($)
            } else if (z > 1)
                for (q = 0; z > q; q++)
                    this._as.push(arguments[q])
        }
        ;
        bm("List", m, {
            forEach: function(U, R) {
                this.each(U, R)
            },
            push: function() {
                for (var O = 0; O < arguments.length; O++)
                    this.add(arguments[O])
            },
            pop: function() {
                return this._as.pop()
            },
            shift: function() {
                return this._as.shift()
            },
            unshift: function() {
                return this._as.unshift.apply(this._as, arguments)
            },
            size: function() {
                return this._as.length
            },
            isEmpty: function() {
                return 0 === this._as.length
            },
            add: function(z, w) {
                return w === F ? this._as.push(z) : this._as.splice(w, 0, z)
            },
            addAll: function(k) {
                Gl(k) && (k = k._as),
                _b(k) ? il(this._as, k) : this._as.push(k)
            },
            get: function(g) {
                return this._as[g]
            },
            slice: function(i, D) {
                return new Vr(this._as.slice(i, D))
            },
            remove: function(v) {
                var g = this._as.indexOf(v);
                return g >= 0 && g < this._as.length && this.removeAt(g),
                g
            },
            removeAt: function(T) {
                return this._as.splice(T, 1)[0]
            },
            set: function(Z, N) {
                return this._as[Z] = N
            },
            clear: function() {
                return this._as.splice(0, this._as.length)
            },
            contains: function(B) {
                return this._as.indexOf(B) >= 0
            },
            indexOf: function(a) {
                return this._as.indexOf(a)
            },
            each: function(h, O) {
                for (var i = 0, q = this._as.length; q > i; i++) {
                    var m = this._as[i];
                    O ? h.call(O, m, i, this) : h(m, i, this)
                }
            },
            reverseEach: function(y, s) {
                for (var E = this._as.length - 1; E >= 0; E--) {
                    var r = this._as[E];
                    s ? y.call(s, r) : y(r)
                }
            },
            toArray: function(d, h) {
                if (d) {
                    for (var j, I = [], q = 0, Y = this._as.length; Y > q; q++)
                        j = this._as[q],
                        h ? d.call(h, j) && I.push(j) : d(j) && I.push(j);
                    return I
                }
                return this._as.concat()
            },
            toList: function(z, X) {
                if (z) {
                    for (var w, C = new Vr, a = 0, e = this._as.length; e > a; a++)
                        w = this._as[a],
                        X ? z.call(X, w) && C.add(w) : z(w) && C.add(w);
                    return C
                }
                return new Vr(this)
            },
            reverse: function() {
                this._as.reverse()
            },
            sort: function(j) {
                return this._as.sort(j ? j : rj),
                this
            },
            toString: function() {
                return this._as.toString()
            }
        }),
        m.defineProperties(Vr.prototype, {
            length: {
                get: function() {
                    return this._as.length
                },
                set: function(r) {
                    this._as.length = r
                }
            }
        });
        var cj = new Vr;
        lk(cj, {
            size: function() {
                return 0
            },
            indexOf: function() {
                return -1
            },
            contains: function() {
                return !1
            },
            isEmpty: function() {
                return !0
            },
            sort: yl,
            each: yl,
            reverseEach: yl,
            toArray: function() {
                return []
            },
            toList: function() {
                return new Vr
            },
            add: Pg,
            addAll: Pg,
            set: Pg,
            remove: Pg,
            removeAt: Pg,
            clear: Pg
        });
        var em = C.Notifier = function() {
            this._f = 0
        }
        ;
        bm("Notifier", m, {
            contains: function(j, S) {
                if (this._ls)
                    for (var F, k = 0, l = this._ls.size(); l > k; k++)
                        if (F = this._ls.get(k),
                        j === F.l && S === F.s)
                            return !0;
                return !1
            },
            add: function(f, d, B) {
                var A = this
                  , l = {
                    l: f,
                    s: d,
                    a: B
                };
                A._ls || (A._ls = new Vr),
                A._f ? (A._as || (A._as = new Vr),
                A._as.add(l)) : l.a ? A._ls.add(l, 0) : A._ls.add(l)
            },
            remove: function(f, Y) {
                var m = this;
                m._ls && (m._f ? (m._rs || (m._rs = new Vr),
                m._rs.add({
                    l: f,
                    s: Y
                })) : m._remove(f, Y))
            },
            _remove: function(V, x) {
                for (var H, m = this._ls, N = 0, y = m.size(); y > N; N++)
                    if (H = m.get(N),
                    H.l === V && H.s === x)
                        return m.removeAt(N),
                        void 0
            },
            fire: function(e) {
                var f = this
                  , i = f._ls;
                if (f._b = 1e4,
                i) {
                    ++f._f;
                    try {
                        for (var b, h = 0, Q = i.size(); Q > h; h++)
                            b = i.get(h),
                            b.s ? b.l.call(b.s, e) : b.l(e)
                    } finally {
                        if (--f._f)
                            return;
                        if (f._rs) {
                            for (Q = f._rs.size(),
                            h = 0; Q > h; h++)
                                b = f._rs.get(h),
                                f._remove(b.l, b.s);
                            delete f._rs
                        }
                        if (f._as) {
                            for (Q = f._as.size(),
                            h = 0; Q > h; h++)
                                b = f._as.get(h),
                                b.a ? i.add(b, 0) : i.add(b);
                            delete f._as
                        }
                    }
                }
            }
        });
        var $n = C.Data = function() {
            this._id = aj()
        }
        ;
        bm("Data", m, {
            ms_ac: ["tag", "name", "displayName", "icon", "toolTip", "attrObject", "layer", "adjustChildrenToTop", "dataBindings"],
            ms_dm: 1,
            ms_attr: 1,
            _icon: V,
            _parent: V,
            _children: cj,
            _childMap: V,
            _styleMap: V,
            _layer: "0",
            _adjustChildrenToTop: !1,
            getUIClass: function() {
                return V
            },
            _22Q: function() {
                return V
            },
            s: function(X, t) {
                var A = this;
                if (2 === arguments.length)
                    A.setStyle(X, t);
                else {
                    if (!Ag(X))
                        return A.getStyle(X);
                    for (var Y in X)
                        A.setStyle(Y, X[Y])
                }
                return A
            },
            fp: function(I, e, G, u, g) {
                return this.firePropertyChange(I, e, G, u, g)
            },
            firePropertyChange: function($, c, a, Z, o) {
                if (Z) {
                    if (Z(c, a))
                        return !1
                } else if (c === a)
                    return !1;
                var E = this
                  , Q = o || {};
                return Q.property = $,
                Q.oldValue = c,
                Q.newValue = a,
                Q.data = E,
                E._dataModel && E._dataModel.handleDataPropertyChange(Q),
                E.onPropertyChanged(Q),
                !0
            },
            onPropertyChanged: function(e) {
                var y = this
                  , E = y._parent
                  , K = e.property;
                if (fm(E)) {
                    var s = y.s(Th)
                      , j = "s:ingroup" === K;
                    (s && $b[K] || K === j) && E._81I(),
                    (s || j) && E.fp("childChange", !0, !1)
                }
                rd(E) && $b[K] && E.updateFromChildren()
            },
            _21I: function($) {
                var w = this;
                if ($ && w._dataModel)
                    throw "Remove data from dataModel before adding";
                w._dataModel = $
            },
            removeFromDataModel: function() {
                this._dataModel ? this._dataModel.remove(this) : this.setParent(null)
            },
            clearChildrenFromDataModel: function() {
                for (var w = 0, e = this._children.toArray(), E = e.length; E > w; w++)
                    e[w].removeFromDataModel()
            },
            getId: function() {
                return this._id
            },
            setId: function(E) {
                this._id = E
            },
            getChildren: function() {
                return this._children
            },
            size: function() {
                return this._children.size()
            },
            toChildren: function(I, _) {
                return this._children.toList(I, _)
            },
            eachChild: function(s, Z) {
                this._children.each(s, Z)
            },
            addChild: function(m, W) {
                var h = this;
                m !== h && (h._children === cj && (h._children = new Vr,
                h._childMap = {}),
                W >= 0 || (W = h._children.size()),
                h._childMap[m._id] || h.isDescendantOf(m) || (m._parent && m._parent.removeChild(m),
                (0 > W || W > h._children.size()) && (W = h._children.size()),
                h._children.add(m, W),
                h._childMap[m._id] = m,
                m.setParent(h),
                h.onChildAdded(m, W),
                h.fp(Ok, V, m)))
            },
            onChildAdded: function() {},
            removeChild: function(q) {
                var B = this;
                if (B._childMap && B._childMap[q._id]) {
                    var J = B._children.remove(q);
                    delete B._childMap[q._id],
                    B.fp(Ok, q, V),
                    q.setParent(V, J),
                    B.onChildRemoved(q, J)
                }
            },
            onChildRemoved: function() {},
            getChildAt: function(e) {
                return this._children.get(e)
            },
            clearChildren: function() {
                var Z = this;
                if (!Z._children.isEmpty())
                    for (var e = 0, y = Z._children.toArray(), E = y.length; E > e; e++)
                        Z.removeChild(y[e])
            },
            getParent: function() {
                return this._parent
            },
            setParent: function($, g) {
                var h = this;
                if (!(h._73I || h._parent === $ || h === $ || $ && $.isDescendantOf(h))) {
                    var r, J = h._parent;
                    h._parent = $,
                    h._73I = 1,
                    J ? (g == V && (g = J.getChildren().indexOf(h)),
                    J.removeChild(h)) : h._dataModel && g == V && (g = h._dataModel.getRoots().indexOf(h)),
                    $ && ($.addChild(h),
                    r = $.getChildren().indexOf(h)),
                    delete h._73I,
                    h.fp("parent", J, $, F, {
                        oldIndex: g,
                        newIndex: r
                    }),
                    h.onParentChanged(J, $)
                }
            },
            onParentChanged: function() {},
            hasChildren: function() {
                return this._children.size() > 0
            },
            isEmpty: function() {
                return this._children.isEmpty()
            },
            isRelatedTo: function(x) {
                return x ? this.isDescendantOf(x) || x.isDescendantOf(this) : !1
            },
            isParentOf: function(y) {
                return y && this._childMap ? !!this._childMap[y._id] : !1
            },
            isDescendantOf: function(U) {
                if (!U || U.isEmpty())
                    return !1;
                for (var R = this._parent; R; ) {
                    if (U === R)
                        return !0;
                    R = R._parent
                }
                return !1
            },
            getStyleMap: function() {
                return this._styleMap
            },
            getStyle: function(M, O) {
                O === F && (O = 1);
                var U = this._styleMap ? this._styleMap[M] : F;
                return U === F && O ? N[M] : U
            },
            setStyle: function(X, s) {
                var d = this;
                d._styleMap || (d._styleMap = {});
                var q = d._styleMap[X];
                s === F ? delete d._styleMap[X] : d._styleMap[X] = s,
                d.fp("s:" + X, q, s) && d.onStyleChanged(X, q, s)
            },
            onStyleChanged: function() {},
            iv: function(V) {
                this.invalidate(V)
            },
            invalidate: function(Z) {
                this.fp(Z || "*", !1, !0)
            },
            toString: function() {
                var S = this;
                return S._displayName || S._name || S._tag || S._id
            },
            toLabel: function() {
                return this._displayName || this._name
            },
            addStyleIcon: function(F, s) {
                var y = this
                  , f = y.s(zn);
                f || y.s(zn, f = {}),
                s ? f[F] = s : delete f[F],
                y.fp(zn, V, f)
            },
            removeStyleIcon: function(f) {
                var Y = this.s(zn);
                if (Y) {
                    var D = Y[f];
                    delete Y[f],
                    this.fp(zn, V, Y)
                }
                return D
            },
            getSerializableProperties: function() {
                return {
                    name: 1,
                    displayName: 1,
                    icon: 1,
                    toolTip: 1,
                    parent: 1,
                    layer: 1,
                    tag: 1,
                    adjustChildrenToTop: 1,
                    dataBindings: 1
                }
            },
            getSerializableStyles: function() {
                var u, f = {};
                for (u in this._styleMap)
                    f[u] = 1;
                return f
            }
        });
        var Wm = C.DataModel = function() {
            var V = this;
            V._datas = new Vr,
            V._dataMap = {},
            V._roots = new Vr,
            V._rootMap = {},
            V._78O = {},
            V._36I = new em,
            V._35I = new em,
            V._selectionModel = new Bp(V);
            var E = V._29Q = []
              , b = V._scheduleCallback = function() {
                for (var Q = Date.now(), k = 0; k < E.length; k++) {
                    var O = E[k];
                    O.enabled && Q - O.lastTime > O.interval && (O.beforeAction && O.beforeAction(),
                    V.each(function(W) {
                        O.action(W)
                    }),
                    O.afterAction && O.afterAction(),
                    O.lastTime = Q)
                }
                E.length && (V._30Q = q.requestAnimationFrame(b))
            }
        }
        ;
        bm("DataModel", m, {
            ms_fire: 1,
            ms_attr: 1,
            ms_ac: ["layers", "name", "autoAdjustIndex", "hierarchicalRendering", "background", "init"],
            _name: F,
            _autoAdjustIndex: !0,
            _hierarchicalRendering: !1,
            _background: F,
            _init: F,
            sm: function() {
                return this.getSelectionModel()
            },
            mm: function(G, K, y) {
                this.addDataModelChangeListener(G, K, y)
            },
            umm: function(I, t) {
                this.removeDataModelChangeListener(I, t)
            },
            md: function(E, $, R) {
                this.addDataPropertyChangeListener(E, $, R)
            },
            umd: function($, N) {
                this.removeDataPropertyChangeListener($, N)
            },
            mh: function(h, a, m) {
                this.addHierarchyChangeListener(h, a, m)
            },
            umh: function(M, w) {
                this.removeHierarchyChangeListener(M, w)
            },
            getAttrObject: function() {
                return this._attrObject
            },
            setAttrObject: function(Y) {
                return this._attrObject = Y
            },
            getSelectionModel: function() {
                return this._selectionModel
            },
            size: function() {
                return this._datas.size()
            },
            isEmpty: function() {
                return this._datas.isEmpty()
            },
            getRoots: function() {
                return this._roots
            },
            getDatas: function() {
                return this._datas
            },
            getDataById: function(Y) {
                return this._dataMap[Y]
            },
            removeDataById: function(F) {
                this.remove(this.getDataById(F))
            },
            toDatas: function(_, g) {
                return this._datas.toList(_, g)
            },
            each: function(m, d) {
                this._datas.each(m, d)
            },
            getDataByTag: function(p) {
                return this._78O[p]
            },
            getTagMap: function() {
                return this._78O
            },
            removeDataByTag: function(j) {
                this.remove(this.getDataByTag(j))
            },
            add: function(a, D, s) {
                var q = this
                  , X = a._id
                  , o = a._tag
                  , y = q._roots;
                if (q._dataMap[X])
                    throw "'" + X + "' already exists";
                o != V && (q._78O[o] = a),
                q._dataMap[X] = a,
                s >= 0 ? q._datas.add(a, s) : q._datas.add(a),
                a._parent || (q._rootMap[X] = a,
                D >= 0 ? y.add(a, D) : y.add(a)),
                a._21I(q),
                q.onAdded(a),
                q._36I.fire({
                    kind: "add",
                    data: a,
                    rootsIndex: D,
                    datasIndex: s
                })
            },
            onAdded: function() {},
            remove: function(o, S) {
                if (o) {
                    var s = this
                      , B = o._id
                      , m = S && S.keepStructure
                      , g = S && S.keepChildren
                      , Y = o.getTag();
                    if (o._dataModel === s) {
                        this.beginTransaction(),
                        m ? s._removingData || (s._removingData = o) : s.prepareRemove(o),
                        g || o.toChildren().each(function(L) {
                            s.remove(L, S)
                        }, s),
                        m ? s._removingData === o && (o._parent && o._parent.removeChild(o),
                        delete s._removingData) : o._parent && o._parent.removeChild(o);
                        var T = s._datas.remove(o);
                        delete s._dataMap[B],
                        Y != V && delete s._78O[Y];
                        var I;
                        s._rootMap[B] && (delete s._rootMap[B],
                        I = s._roots.remove(o)),
                        o._21I(V),
                        s.onRemoved(o),
                        s._36I.fire({
                            kind: gf,
                            data: o,
                            rootsIndex: I,
                            datasIndex: T
                        }),
                        this.endTransaction()
                    }
                }
            },
            onRemoved: function() {},
            prepareRemove: function() {},
            clear: function() {
                var H = this;
                if (H._datas.size()) {
                    var U = H._historyManager ? this.toJSON() : F;
                    H._datas.toArray().forEach(function(e) {
                        e._21I(V)
                    }),
                    H._datas.clear(),
                    H._dataMap = {},
                    H._roots.clear(),
                    H._rootMap = {},
                    H._78O = {},
                    H._36I.fire({
                        kind: vq,
                        json: U
                    })
                }
            },
            contains: function(l) {
                return l && l._dataModel === this
            },
            handleDataPropertyChange: function(r) {
                var n = this
                  , g = r.data
                  , M = r.property;
                if ("parent" === M) {
                    var t = g._id
                      , Z = n._rootMap
                      , c = n._roots;
                    g._parent ? Z[t] && (delete Z[t],
                    c.remove(g)) : Z[t] || (Z[t] = g,
                    c.add(g))
                } else if ("tag" === M) {
                    var u = r.oldValue
                      , A = r.newValue
                      , B = n._78O;
                    u != V && delete B[u],
                    A != V && (B[A] = g)
                }
                this.onDataPropertyChanged(g, r),
                this._35I.fire(r)
            },
            onDataPropertyChanged: function() {},
            addDataModelChangeListener: function(M, I, e) {
                this._36I.add(M, I, e)
            },
            removeDataModelChangeListener: function(U, b) {
                this._36I.remove(U, b)
            },
            addDataPropertyChangeListener: function(x, e, B) {
                this._35I.add(x, e, B)
            },
            removeDataPropertyChangeListener: function(Y, s) {
                this._35I.remove(Y, s)
            },
            _38I: function(b, F, I) {
                this._37I && this._37I.fire({
                    data: b,
                    oldIndex: F,
                    newIndex: I
                })
            },
            addHierarchyChangeListener: function(S, k, i) {
                this._37I || (this._37I = new em),
                this._37I.add(S, k, i)
            },
            removeHierarchyChangeListener: function(Z, w) {
                this._37I.remove(Z, w)
            },
            getSiblings: function(u) {
                var C = u._parent;
                return C ? C._children : this._roots
            },
            eachByHierarchical: function(K, j, m) {
                if (j)
                    return this._eachByHierarchical(K, j, m);
                for (var r = 0, f = this._roots, h = f.size(); h > r; r++)
                    if (this._eachByHierarchical(K, f.get(r), m) === !1)
                        return !1;
                return !0
            },
            _eachByHierarchical: function(I, n, R) {
                if (R) {
                    if (I.call(R, n) === !1)
                        return !1
                } else if (I(n) === !1)
                    return !1;
                for (var S = n.size(), M = 0; S > M; M++)
                    if (this._eachByHierarchical(I, n.getChildAt(M), R) === !1)
                        return !1;
                return !0
            },
            reverseEachByHierarchical: function(b, P, Z) {
                if (P)
                    return this._reverseEachByHierarchical(b, P, Z);
                for (var $ = this._roots, t = $.size(), r = t - 1; r >= 0; r--)
                    if (this._reverseEachByHierarchical(b, $.get(r), Z) === !1)
                        return !1;
                return !0
            },
            _reverseEachByHierarchical: function(t, Z, L) {
                for (var T = Z.size(), U = T - 1; U >= 0; U--)
                    if (this._reverseEachByHierarchical(t, Z.getChildAt(U), L) === !1)
                        return !1;
                if (L) {
                    if (t.call(L, Z) === !1)
                        return !1
                } else if (t(Z) === !1)
                    return !1;
                return !0
            },
            eachByDepthFirst: function(t, X, v) {
                if (X)
                    return this._11I(t, X, v);
                for (var q = 0, Y = this._roots, S = Y.size(); S > q; q++)
                    if (this._11I(t, Y.get(q), v) === !1)
                        return !1;
                return !0
            },
            _11I: function(T, H, q) {
                for (var m = H.size(), V = 0; m > V; V++)
                    if (this._11I(T, H.getChildAt(V), q) === !1)
                        return !1;
                if (q) {
                    if (T.call(q, H) === !1)
                        return !1
                } else if (T(H) === !1)
                    return !1;
                return !0
            },
            eachByBreadthFirst: function(C, D, A) {
                var V = new Vr;
                for (D ? V.add(D) : this._roots.each(V.add, V); V.size() > 0; )
                    if (D = V.removeAt(0),
                    D.eachChild(V.add, V),
                    A) {
                        if (C.call(A, D) === !1)
                            return !1
                    } else if (C(D) === !1)
                        return !1;
                return !0
            },
            moveTo: function(K, u) {
                var l = this.getSiblings(K)
                  , c = l.indexOf(K);
                c === u || 0 > c || u >= 0 && u <= l.size() && (l.remove(K),
                u > l.size() && u--,
                l.add(K, u),
                this._38I(K, c, u))
            },
            moveUp: function(P) {
                this.moveTo(P, this.getSiblings(P).indexOf(P) - 1)
            },
            moveDown: function(T) {
                this.moveTo(T, this.getSiblings(T).indexOf(T) + 1)
            },
            moveToTop: function(z) {
                this.moveTo(z, 0)
            },
            moveToBottom: function(P) {
                this.moveTo(P, this.getSiblings(P).size())
            },
            moveSelectionUp: function(r) {
                this.beginTransaction(),
                r || (r = this.sm());
                var X = new Vr;
                an(r, X, this._roots),
                X.each(this.moveUp, this),
                this.endTransaction()
            },
            moveSelectionDown: function(w) {
                this.beginTransaction(),
                w || (w = this.sm());
                var J = new Vr;
                Jc(w, J, this._roots),
                J.each(this.moveDown, this),
                this.endTransaction()
            },
            moveSelectionToTop: function(X) {
                this.beginTransaction(),
                X || (X = this.sm());
                var f = new Vr;
                cm(X, f, this._roots),
                f.each(this.moveToTop, this),
                this.endTransaction()
            },
            moveSelectionToBottom: function(o) {
                this.beginTransaction(),
                o || (o = this.sm());
                var B = new Vr;
                cr(o, B, this._roots),
                B.each(this.moveToBottom, this),
                this.endTransaction()
            },
            moveToIndex: function(B, v, W) {
                var n = this.getDatas();
                null == W && (W = n.indexOf(B)),
                W === v || 0 > W || v >= 0 && v <= n.size() && (n.remove(B),
                v > n.size() && v--,
                n.add(B, v),
                this._76I(B, W, v))
            },
            bringForward: function(G) {
                this.moveToIndex(G, this.getDatas().indexOf(G) + 1)
            },
            bringToFront: function(R) {
                this.moveToIndex(R, this.size())
            },
            sendBackward: function(d) {
                this.moveToIndex(d, this.getDatas().indexOf(d) - 1)
            },
            sendToBack: function(B) {
                this.moveToIndex(B, 0)
            },
            bringSelectionForward: function(N) {
                this.beginTransaction(),
                N || (N = this.sm());
                for (var y = new Vr, C = this.getDatas(), p = !1, $ = 0; $ < C.size(); $++) {
                    var f = C.get(C.size() - 1 - $);
                    N.contains(f) ? p && y.add(f) : p = !0
                }
                y.each(this.bringForward, this),
                this.endTransaction()
            },
            bringSelectionToFront: function(k) {
                this.beginTransaction(),
                k || (k = this.sm());
                for (var h = new Vr, U = this.getDatas(), g = 0; g < U.size(); g++) {
                    var L = U.get(g);
                    k.contains(L) && h.add(L)
                }
                h.each(this.bringToFront, this),
                this.endTransaction()
            },
            sendSelectionBackward: function(p) {
                this.beginTransaction(),
                p || (p = this.sm());
                for (var q = new Vr, u = this.getDatas(), i = !1, _ = 0; _ < u.size(); _++) {
                    var U = u.get(_);
                    p.contains(U) ? i && q.add(U) : i = !0
                }
                q.each(this.sendBackward, this),
                this.endTransaction()
            },
            sendSelectionToBack: function(Y) {
                this.beginTransaction(),
                Y || (Y = this.sm());
                for (var U = new Vr, b = this.getDatas(), Q = 0; Q < b.size(); Q++) {
                    var J = b.get(b.size() - 1 - Q);
                    Y.contains(J) && U.add(J)
                }
                U.each(this.sendToBack, this),
                this.endTransaction()
            },
            addScheduleTask: function(z) {
                var H = this;
                H.removeScheduleTask(z),
                z.enabled == V && (z.enabled = !0),
                z.interval == V && (z.interval = 10),
                z.action == V && (z.action = yl),
                z.lastTime = Date.now(),
                H._29Q.push(z),
                H._30Q == V && (H._30Q = q.requestAnimationFrame(H._scheduleCallback))
            },
            removeScheduleTask: function(u) {
                var s = this
                  , k = s._29Q
                  , G = k.indexOf(u);
                G >= 0 && k.splice(G, 1),
                k.length || s._30Q == V || (q.cancelAnimationFrame(s._30Q),
                delete s._30Q)
            },
            getHistoryManager: function() {
                return this._historyManager
            },
            enableHistoryManager: function(w) {
                this._historyManager || new C.HistoryManager(this),
                null != w && this._historyManager.setMaxHistoryCount(w),
                this._historyManager.setDisabled(!1)
            },
            disableHistoryManager: function() {
                this._historyManager && this._historyManager.setDisabled(!0)
            },
            clearHistoryManager: function() {
                this._historyManager && this._historyManager.clear()
            },
            undo: function(c) {
                this._historyManager && this._historyManager.undo(c)
            },
            redo: function(S) {
                this._historyManager && this._historyManager.redo(S)
            },
            beginTransaction: function() {
                this._historyManager && this._historyManager.beginTransaction()
            },
            endTransaction: function() {
                this._historyManager && this._historyManager.endTransaction()
            },
            addHistory: function(p) {
                this._historyManager && this._historyManager.addHistory(p)
            },
            onHistoryManagerChanged: function() {}
        });
        var Bp = C.SelectionModel = function(O) {
            var A = this;
            A._68O = Fb,
            A._map = {},
            A._73O = new Vr,
            A._74I = new em,
            A._21I(O)
        }
        ;
        bm("SelectionModel", m, {
            ms_fire: 1,
            ms_dm: 1,
            ms: function(i, q, p) {
                this.addSelectionChangeListener(i, q, p)
            },
            ums: function(i, G) {
                this.removeSelectionChangeListener(i, G)
            },
            fd: function() {
                return this.getFirstData()
            },
            ld: function() {
                return this.getLastData()
            },
            sg: function() {
                return this._68O === Fe
            },
            co: function(q) {
                return this._map[q._id] != V
            },
            ss: function(O) {
                this.setSelection(O)
            },
            as: function(g) {
                this.appendSelection(g)
            },
            rs: function(c) {
                this.removeSelection(c)
            },
            cs: function() {
                this.clearSelection()
            },
            sa: function() {
                this.selectAll()
            },
            getSelectionMode: function() {
                return this._68O
            },
            setSelectionMode: function(I) {
                var J = this;
                if (J._68O !== I && (I === uk || I === Fe || I === Fb)) {
                    J.cs();
                    var q = J._68O;
                    J._68O = I,
                    J.fp("selectionMode", q, I)
                }
            },
            _21I: function(w) {
                var v = this
                  , $ = v._dataModel;
                $ !== w && ($ && (v.cs(),
                $.umm(v.handleDataModelChange, v)),
                v._dataModel = w,
                w.mm(v.handleDataModelChange, v, !0),
                v.fp(gr, $, w))
            },
            dispose: function() {
                var f = this;
                f.cs(),
                f._dataModel.umm(f.handleDataModelChange, f)
            },
            handleDataModelChange: function(b) {
                var B = this;
                if (b.kind === gf) {
                    var z = b.data;
                    B.co(z) && (B._73O.remove(z),
                    delete B._map[z._id],
                    B._75I(gf, new Vr(z)))
                } else
                    b.kind === vq && B.cs()
            },
            getFilterFunc: function() {
                return this._filterFunc
            },
            setFilterFunc: function(Z) {
                var s = this;
                if (s._filterFunc !== Z) {
                    s.cs();
                    var j = s._filterFunc;
                    s._filterFunc = Z,
                    s.fp("filterFunc", j, s._filterFunc)
                }
            },
            _75I: function(O, I, g, C) {
                g && (this._73O.each(function(v) {
                    C[v._id] ? g.remove(v) : g.add(v)
                }),
                I = g.toList()),
                this._74I.fire({
                    kind: O,
                    datas: new Vr(I)
                })
            },
            addSelectionChangeListener: function(s, p, z) {
                this._74I.add(s, p, z)
            },
            removeSelectionChangeListener: function(h, j) {
                this._74I.remove(h, j)
            },
            _97O: function(n, Y) {
                for (var L, K = this, A = 0, N = new Vr(n); A < N.size(); A++)
                    L = N.get(A),
                    (K._filterFunc && !K._filterFunc(L) || Y && K.co(L) || !Y && !K.co(L) || !K._dataModel.contains(L)) && (N.removeAt(A),
                    A--);
                return N
            },
            appendSelection: function(d) {
                var S = this;
                if (S._68O !== uk) {
                    var W, v, J = S._73O, Q = S._97O(d, !0);
                    Q.isEmpty() || (S.sg() && (W = new Vr(J),
                    v = S._map,
                    J.clear(),
                    S._map = {},
                    Q = new Vr(Q.get(Q.size() - 1))),
                    Q.each(function(N) {
                        J.add(N),
                        S._map[N._id] = N
                    }),
                    S._75I("append", Q, W, v))
                }
            },
            removeSelection: function(V) {
                var m = this
                  , M = m._97O(V)
                  , i = 0
                  , E = M.size();
                if (0 !== E) {
                    for (; E > i; i++) {
                        var B = M.get(i);
                        m._73O.remove(B),
                        delete m._map[B._id]
                    }
                    m._75I(gf, M)
                }
            },
            toSelection: function(J, U) {
                return this._73O.toList(J, U)
            },
            getSelection: function() {
                return this._73O
            },
            each: function(y, h) {
                this._73O.each(y, h)
            },
            setSelection: function(d) {
                var r = this
                  , U = r._73O;
                if (r._68O !== uk && !(U.isEmpty() && !d || 1 === U.size() && r.ld() === d)) {
                    var H = new Vr(U)
                      , m = r._map;
                    U.clear(),
                    r._map = {};
                    var A = r._97O(d, !0);
                    r.sg() && A.size() > 1 && (A = new Vr(A.get(A.size() - 1))),
                    A.each(function(O) {
                        U.add(O),
                        r._map[O._id] = O
                    }),
                    r._75I("set", V, H, m)
                }
            },
            clearSelection: function() {
                var o = this
                  , S = o._73O;
                if (S.size() > 0) {
                    var Z = S.toList();
                    S.clear(),
                    o._map = {},
                    o._75I(vq, Z)
                }
            },
            selectAll: function() {
                var g = this;
                if (g._68O !== uk) {
                    var b, D, K = g._dataModel.toDatas();
                    if (g._filterFunc)
                        for (b = 0; b < K.size(); b++)
                            D = K.get(b),
                            g._filterFunc(D) || (K.removeAt(b),
                            b--);
                    var j = g._73O
                      , v = new Vr(j)
                      , d = g._map;
                    j.clear(),
                    g._map = {},
                    g.sg() && K.size() > 1 && (K = new Vr(K.get(K.size() - 1)));
                    var k = K.size();
                    for (b = 0; k > b; b++)
                        D = K.get(b),
                        j.add(D),
                        g._map[D._id] = D;
                    g._75I("all", V, v, d)
                }
            },
            size: function() {
                return this._73O.size()
            },
            isEmpty: function() {
                return this._73O.isEmpty()
            },
            contains: function(e) {
                return this._map[e._id] != V
            },
            getLastData: function() {
                var L = this._73O;
                return L.size() > 0 ? L.get(L.size() - 1) : V
            },
            getFirstData: function() {
                var B = this._73O;
                return B.size() > 0 ? B.get(0) : V
            },
            isSelectable: function(n) {
                var L = this;
                return n && L._68O !== uk ? L._filterFunc ? L._filterFunc(n) : !0 : !1
            },
            getTopSelection: function() {
                var J = this
                  , _ = new Vr;
                return J._73O.each(function(G) {
                    for (var A = G.getParent(); A; ) {
                        if (J.contains(A)) {
                            G = V;
                            break
                        }
                        A = A.parent
                    }
                    G && _.add(G)
                }),
                _
            }
        });
        var ps = function() {
            return ge(0),
            function(E, $) {
                var H;
                if (sk($)) {
                    var P = E.getDataUI($);
                    P && P._88I && (H = P._88I.rect)
                }
                return H ? H : $.getRect()
            }
        }();
        lk(j, {
            edgeGroupAgentFunc: V,
            graphViewAutoScrollZone: 16,
            graphViewResettable: !1,
            graphViewPannable: !0,
            graphViewRectSelectable: !0,
            graphViewScrollBarVisible: !0,
            graphViewRectSelectBorderColor: A.rectSelectBorder,
            graphViewRectSelectBackground: xm,
            graphViewEditPointSize: Nq ? 17 : 7,
            graphViewEditPointBorderColor: A.editPointBorder,
            graphViewEditPointBackground: A.editPointBackground,
            setEdgeType: function(J, A, p) {
                tf[J] = A,
                al[J] = p
            },
            getEdgeType: function(x) {
                return tf[x]
            },
            getEdgeTypeMap: function() {
                return tf
            },
            getNodeRect: ps
        }, !0),
        lk(N, {
            "2d.selectable": !0,
            "2d.visible": !0,
            "2d.movable": !0,
            "2d.editable": !0,
            "2d.move.mode": F,
            interactive: !1,
            "image.stretch": "fill",
            icons: F,
            ingroup: !0,
            "body.color": F,
            opacity: F,
            pixelPerfect: !0,
            "clip.direction": "top",
            "clip.percentage": 1,
            "select.color": Jp,
            "select.width": 1,
            "select.padding": 2,
            "select.type": Ci,
            shadow: !1,
            "shadow.blur": 6,
            "shadow.offset.x": 3,
            "shadow.offset.y": 3,
            "border.color": F,
            "border.width": 2,
            "border.padding": 2,
            "border.type": Ci,
            label: F,
            "label.font": F,
            "label.color": Ge,
            "label.background": F,
            "label.position": 31,
            "label.position.fixed": !1,
            "label.offset.x": 0,
            "label.offset.y": 2,
            "label.rotation": F,
            "label.max": F,
            "label.opacity": F,
            "label.scale": 1,
            "label.align": F,
            "label.selectable": !0,
            label2: F,
            "label2.font": F,
            "label2.color": Ge,
            "label2.background": F,
            "label2.position": 34,
            "label2.position.fixed": !1,
            "label2.offset.x": 0,
            "label2.offset.y": -2,
            "label2.rotation": F,
            "label2.max": F,
            "label2.opacity": F,
            "label2.scale": 1,
            "label2.align": F,
            "label2.selectable": !0,
            note: F,
            "note.expanded": !0,
            "note.font": F,
            "note.color": ag,
            "note.background": Jp,
            "note.position": 8,
            "note.offset.x": -3,
            "note.offset.y": 3,
            "note.max": F,
            "note.toggleable": !0,
            "note.border.width": 1,
            "note.border.color": F,
            "note.opacity": F,
            "note.scale": 1,
            "note.align": F,
            note2: F,
            "note2.expanded": !0,
            "note2.font": F,
            "note2.color": ag,
            "note2.background": Jp,
            "note2.position": 3,
            "note2.offset.x": 3,
            "note2.offset.y": -3,
            "note2.max": F,
            "note2.toggleable": !0,
            "note2.border.width": 1,
            "note2.border.color": F,
            "note2.opacity": F,
            "note2.scale": 1,
            "note2.align": F,
            "group.type": F,
            "group.image": F,
            "group.image.stretch": "fill",
            "group.repeat.image": F,
            "group.padding": 8,
            "group.padding.left": 0,
            "group.padding.right": 0,
            "group.padding.top": 0,
            "group.padding.bottom": 0,
            "group.position": 17,
            "group.toggleable": !0,
            "group.title.font": F,
            "group.title.color": ag,
            "group.title.background": A.groupTitleBackground,
            "group.title.align": $j,
            "group.background": A.groupBackground,
            "group.depth": 1,
            "group.border.width": 1,
            "group.border.pattern": F,
            "group.border.color": fd,
            "group.border.cap": ee,
            "group.border.join": tk,
            "group.gradient": V,
            "group.gradient.color": "#FFF",
            shape: F,
            "shape.background": fd,
            "shape.repeat.image": F,
            "shape.border.width": 0,
            "shape.border.width.absolute": !1,
            "shape.border.color": fd,
            "shape.border.3d": !1,
            "shape.border.3d.color": F,
            "shape.border.3d.accuracy": F,
            "shape.border.cap": ee,
            "shape.border.join": tk,
            "shape.border.pattern": F,
            "shape.gradient": V,
            "shape.gradient.color": "#FFF",
            "shape.depth": 0,
            "shape.dash": !1,
            "shape.dash.pattern": _f,
            "shape.dash.offset": 0,
            "shape.dash.color": Vb,
            "shape.dash.width": F,
            "shape.dash.3d": !1,
            "shape.dash.3d.color": F,
            "shape.dash.3d.accuracy": F,
            "shape.polygon.side": 6,
            "shape.arc.from": L,
            "shape.arc.to": u,
            "shape.arc.close": !0,
            "shape.arc.oval": !1,
            "shape.corner.radius": F,
            "shape.gradient.pack": F,
            "shape.fill.rule": "nonzero",
            "shape.fill.clip.direction": "top",
            "shape.fill.clip.percentage": 1,
            "shape.foreground": F,
            "shape.foreground.gradient": V,
            "shape.foreground.gradient.color": "#FFF",
            "shape.foreground.clip.direction": "top",
            "shape.foreground.clip.percentage": 1,
            "autolayout.gap": F,
            "autolayout.hgap": F,
            "autolayout.vgap": F,
            "edge.type": F,
            "edge.points": F,
            "edge.segments": F,
            "edge.color": fd,
            "edge.width": 2,
            "edge.width.absolute": !1,
            "edge.offset": 20,
            "edge.group": 0,
            "edge.expanded": !0,
            "edge.gap": 12,
            "edge.toggleable": !0,
            "edge.center": !1,
            "edge.3d": !1,
            "edge.3d.color": F,
            "edge.3d.accuracy": F,
            "edge.cap": ee,
            "edge.join": tk,
            "edge.source.position": 17,
            "edge.source.anchor.x": F,
            "edge.source.anchor.y": F,
            "edge.source.offset.x": 0,
            "edge.source.offset.y": 0,
            "edge.target.position": 17,
            "edge.target.anchor.x": F,
            "edge.target.anchor.y": F,
            "edge.target.offset.x": 0,
            "edge.target.offset.y": 0,
            "edge.pattern": F,
            "edge.dash": !1,
            "edge.dash.pattern": _f,
            "edge.dash.offset": 0,
            "edge.dash.color": Vb,
            "edge.dash.width": F,
            "edge.dash.3d": !1,
            "edge.dash.3d.color": F,
            "edge.dash.3d.accuracy": F,
            "edge.independent": !1,
            "attach.row.index": 0,
            "attach.column.index": 0,
            "attach.row.span": 1,
            "attach.column.span": 1,
            "attach.padding": 0,
            "attach.padding.left": 0,
            "attach.padding.right": 0,
            "attach.padding.top": 0,
            "attach.padding.bottom": 0,
            "attach.index": -1,
            "attach.offset": 0,
            "attach.offset.relative": !1,
            "attach.offset.opposite": !1,
            "attach.thickness": F,
            "attach.gap": 0,
            "attach.gap.relative": !1,
            "grid.row.count": 1,
            "grid.column.count": 1,
            "grid.row.percents": F,
            "grid.column.percents": F,
            "grid.border": 1,
            "grid.border.left": 0,
            "grid.border.right": 0,
            "grid.border.top": 0,
            "grid.border.bottom": 0,
            "grid.gap": 1,
            "grid.background": A.gridBackground,
            "grid.depth": 1,
            "grid.cell.depth": -1,
            "grid.cell.border.color": A.gridCellBorderColor,
            "grid.block": F,
            "grid.block.padding": 3,
            "grid.block.width": 1,
            "grid.block.color": A.gridBlockColor,
            text: "",
            "text.align": "left",
            "text.vAlign": "middle",
            "text.color": Ge,
            "text.font": oi,
            "text.shadow": !1,
            "text.shadow.color": Jp,
            "text.shadow.blur": 6,
            "text.shadow.offset.x": 3,
            "text.shadow.offset.y": 3
        }, !0),
        lk(Wm, {
            _76I: function($, t, x) {
                this._39I && this._39I.fire({
                    data: $,
                    oldIndex: t,
                    newIndex: x
                })
            },
            addIndexChangeListener: function(r, c, k) {
                var X = this;
                X._39I || (X._39I = new em),
                X._39I.add(r, c, k)
            },
            removeIndexChangeListener: function(u, F) {
                this._39I.remove(u, F)
            },
            prepareRemove: function(j) {
                vb(j) && (j.setSource(V),
                j.setTarget(V)),
                j._70O && j._70O.toList().each(this.remove, this),
                j._69O && j._69O.toList().each(function(l) {
                    l.setHost(V)
                }),
                j._host && j.setHost(V)
            },
            onAdded: function(t) {
                this.isAutoAdjustIndex() && this.adjustIndex(t)
            },
            onDataPropertyChanged: function(i, j) {
                vk[j.property] && this.isAutoAdjustIndex() && this.adjustIndex(i)
            },
            isAdjustable: function(C) {
                return xj(C) || vb(C)
            },
            isAdjustedToBottom: function(h) {
                return fm(h) ? h.isExpanded() && Fr(h) : !1
            },
            adjustIndex: function(A) {
                var Y = this;
                this.isHierarchicalRendering() || (Y.isAdjustedToBottom(A) ? (Y.sendToBottom(A),
                A.eachChild(Y.adjustIndex, Y)) : Y.sendToTop(A))
            },
            sendToTop: function(S) {
                var N = this;
                if (N.contains(S) && N.isAdjustable(S)) {
                    var T = N._datas;
                    if (S !== T.get(N.size() - 1)) {
                        var G = T.indexOf(S);
                        T.removeAt(G),
                        T.add(S),
                        N._76I(S, G, N.size() - 1)
                    }
                    if (vb(S)) {
                        var j = S._40I;
                        j && !N.isAdjustedToBottom(j) && N.sendToTop(j),
                        j = S._41I,
                        j && !N.isAdjustedToBottom(j) && N.sendToTop(j)
                    }
                    S._69O && S._69O.each(function(k) {
                        k.isRelatedTo(S) || xj(S) && k.isLoopedHostOn(S) || N.sendToTop(k)
                    }),
                    S.ISubGraph || (!fm(S) || S.isExpanded()) && S._adjustChildrenToTop && S.eachChild(function(U) {
                        vb(U) || N.sendToTop(U)
                    })
                }
            },
            sendToBottom: function(z, l) {
                var Q = this;
                if (z !== l && Q.contains(z) && Q.isAdjustable(z) && (!l || Q.contains(l))) {
                    var M = Q._datas
                      , u = M.remove(z)
                      , E = l ? Q._datas.indexOf(l) : 0;
                    if (M.add(z, E),
                    u !== E) {
                        Q._76I(z, u, E);
                        var I = z._parent;
                        !I || I.ISubGraph || vb(I) || Q.sendToBottom(z._parent, z)
                    }
                }
            }
        }),
        lk(Sd, {
            ms_edit: function(v) {
                v._46O = function(w) {
                    var g = this
                      , o = g.gv.dm()
                      , O = g._index
                      , I = g._89I
                      , R = g._node
                      , z = g._shape
                      , _ = g._edge
                      , H = g._77I;
                    R && I ? (this.fi({
                        kind: "endEditRect",
                        event: w,
                        data: R,
                        direction: I
                    }),
                    o.endTransaction()) : z && O >= 0 ? (g.fi({
                        kind: "endEditPoint",
                        event: w,
                        data: z,
                        index: O
                    }),
                    o.endTransaction()) : _ && O >= 0 ? (g.fi({
                        kind: "endEditPoint",
                        event: w,
                        data: _,
                        index: O
                    }),
                    o.endTransaction()) : H && (g.fi({
                        kind: "endEditRotation",
                        event: w,
                        data: H
                    }),
                    o.endTransaction())
                }
                ,
                v._78I = function(r) {
                    var I = this;
                    I.autoScroll(r);
                    var E = I.gv.lp(r)
                      , G = I._index
                      , A = I._89I
                      , F = I._node
                      , T = I._shape
                      , u = I._edge
                      , q = I._77I;
                    if (F && A)
                        I._80O(E),
                        I.fi({
                            kind: "betweenEditRect",
                            event: r,
                            data: F,
                            direction: A
                        });
                    else if (T && G >= 0)
                        E.e = T.getPoints().get(G).e,
                        T.setPoint(G, E),
                        I.fi({
                            kind: "betweenEditPoint",
                            event: r,
                            data: T,
                            index: G
                        });
                    else if (u && G >= 0) {
                        var Z = u.s(No);
                        E.e = Z.get(G).e,
                        Z.set(G, E),
                        u.fp(No, V, Z),
                        I.fi({
                            kind: "betweenEditPoint",
                            event: r,
                            data: u,
                            index: G
                        })
                    } else if (q) {
                        var C = q.p()
                          , z = q.getScale()
                          , c = l + x(E.y - C.y, E.x - C.x);
                        z.y < 0 && (c += L),
                        t(c) < .04 && (c = 0),
                        q.setRotation(c),
                        I.fi({
                            kind: "betweenEditRotation",
                            event: r,
                            data: q
                        })
                    }
                }
                ,
                v._80O = function(X) {
                    var R = this
                      , B = R._node
                      , h = R._rect
                      , Y = h.x
                      , j = h.y
                      , G = h.width
                      , x = h.height
                      , e = R._89I
                      , A = R._anchor
                      , F = R._matrix
                      , X = F.tfi(X);
                    "northwest" === e ? h = Pr(X, {
                        x: Y + G,
                        y: j + x
                    }) : e === se ? h = Pr({
                        x: Y,
                        y: X.y
                    }, {
                        x: Y + G,
                        y: j + x
                    }) : "northeast" === e ? h = Pr({
                        x: Y,
                        y: X.y
                    }, {
                        x: X.x,
                        y: j + x
                    }) : e === Hq ? h = Pr({
                        x: X.x,
                        y: j
                    }, {
                        x: Y + G,
                        y: j + x
                    }) : e === kp ? h = Pr({
                        x: Y,
                        y: j
                    }, {
                        x: X.x,
                        y: j + x
                    }) : "southwest" === e ? h = Pr({
                        x: X.x,
                        y: j
                    }, {
                        x: Y + G,
                        y: X.y
                    }) : "south" === e ? h = Pr({
                        x: Y,
                        y: j
                    }, {
                        x: Y + G,
                        y: X.y
                    }) : "southeast" === e && (h = Pr({
                        x: Y,
                        y: j
                    }, X)),
                    B.setPosition(F.tf(h.x + h.width * A.x, h.y + h.height * A.y)),
                    B.setWidth(h.width),
                    B.setHeight(h.height)
                }
                ,
                v._80I = function(E, h, C, w) {
                    var L = this
                      , $ = L.gv._zoom
                      , Q = (L.gv.getEditPointSize() + 2) / $;
                    return Kp({
                        x: h - Q / 2,
                        y: C - Q / 2,
                        width: Q,
                        height: Q
                    }, E) ? (L._89I !== w && (L._89I = w),
                    !0) : !1
                }
                ,
                v._79I = function(x, X, y) {
                    var J = this
                      , O = J.gv
                      , C = X ? O.getDataUI(X) : V
                      , b = C ? C._55O : V;
                    if (b) {
                        var Z, l, A, Y, q = O._zoom, _ = (O.getEditPointSize() + 2) / q, a = O.lp(x);
                        if (xj(X)) {
                            if (b._56O && xj(X) && (l = b._98o,
                            Kp({
                                x: l.x - _ / 2,
                                y: l.y - _ / 2,
                                width: _,
                                height: _
                            }, a)))
                                return J._77I = X,
                                y && J.fi({
                                    kind: "beginEditRotation",
                                    event: x,
                                    data: X
                                }),
                                J.setCursor("crosshair"),
                                !0;
                            if (b._43O && X instanceof Ye)
                                for (A = X.getPoints(),
                                Z = A.size() - 1; Z >= 0; Z--)
                                    if (l = A.get(Z),
                                    Kp({
                                        x: l.x - _ / 2,
                                        y: l.y - _ / 2,
                                        width: _,
                                        height: _
                                    }, a))
                                        return J._index = Z,
                                        J._shape = X,
                                        y && J.fi({
                                            kind: "beginEditPoint",
                                            event: x,
                                            data: X,
                                            index: Z
                                        }),
                                        J.setCursor("crosshair"),
                                        !0;
                            if (b._42O)
                                for (var p = X.getEditControlPoints(), v = ["northwest", -1, -1, Hq, -1, 0, "southwest", -1, 1, "south", 0, 1, "southeast", 1, 1, kp, 1, 0, "northeast", 1, -1, se, 0, -1], Z = 0, Y = p.length; Y > Z; Z++) {
                                    var U = v[3 * Z]
                                      , s = p[Z];
                                    if (J._80I(a, s.x, s.y, U)) {
                                        J._node = X;
                                        var Q = X.getWidth()
                                          , W = X.getHeight()
                                          , D = X.getAnchor();
                                        J._rect = {
                                            x: -Q * D.x,
                                            y: -W * D.y,
                                            width: Q,
                                            height: W
                                        },
                                        J._anchor = D,
                                        J._matrix = X.getMatrix();
                                        var N = X.getRotation()
                                          , e = z(N)
                                          , i = E(N)
                                          , R = v[3 * Z + 1] * Cs(X.getScale().x)
                                          , n = v[3 * Z + 2] * Cs(X.getScale().y)
                                          , h = Math.atan2(-i * R - e * n, e * R - i * n)
                                          , w = (Math.round(h / (Math.PI / 4)) + 8) % 8
                                          , f = [Rr, "nesw-resize", qk, "nwse-resize", Rr, "nesw-resize", qk, "nwse-resize"][w];
                                        return J.setCursor(f),
                                        y && J.fi({
                                            kind: "beginEditRect",
                                            event: x,
                                            data: X,
                                            direction: J._89I
                                        }),
                                        !0
                                    }
                                }
                        }
                        if (b._43O && vb(X) && X.s(bp) === Se && (A = X.s(No)))
                            for (Z = A.size() - 1; Z >= 0; Z--)
                                if (l = A.get(Z),
                                Kp({
                                    x: l.x - _ / 2,
                                    y: l.y - _ / 2,
                                    width: _,
                                    height: _
                                }, a))
                                    return J._index = Z,
                                    J._edge = X,
                                    y && J.fi({
                                        kind: "beginEditPoint",
                                        event: x,
                                        data: X,
                                        index: Z
                                    }),
                                    J.setCursor("crosshair"),
                                    !0
                    }
                    return !1
                }
            },
            ms_gv: function(z) {
                z._currentSubGraph = V,
                z.upSubGraph = function() {
                    this.setCurrentSubGraph(Bg(this._currentSubGraph))
                }
                ,
                z.isVisible = function(Q) {
                    var u = this;
                    if (Bg(Q) !== u._currentSubGraph)
                        return !1;
                    if (vb(Q)) {
                        var D = Q._40I
                          , Y = Q._41I;
                        if (!D || !Y)
                            return !1;
                        if (!(Q.s("edge.independent") || u.isVisible(D) && u.isVisible(Y)))
                            return !1;
                        if (Q.isEdgeGroupHidden())
                            return !1
                    } else
                        for (var L = Q._parent; L && !L.ISubGraph; ) {
                            if (fm(L) && (!L.isExpanded() || !u.isVisible(L)))
                                return !1;
                            L = L._parent
                        }
                    if (Q._parent instanceof Lc && !u.isVisible(Q._parent))
                        return !1;
                    if (Q._refGraph instanceof Dm && !u.isVisible(Q._refGraph))
                        return !1;
                    if (u instanceof _j) {
                        if (!Q.s("3d.visible"))
                            return !1
                    } else {
                        var q = u.getLayersInfo();
                        if (q) {
                            var v = q[Q._layer];
                            if (v && v.visible === !1)
                                return !1
                        }
                        if (!Q.s("2d.visible"))
                            return !1
                    }
                    return u._visibleFunc ? u._visibleFunc(Q) : !0
                }
                ,
                z.handleSelectionChange = function(f) {
                    var z = this;
                    f.datas.each(function(t) {
                        z.invalidateData(t);
                        var I = t._parent;
                        fm(I) && xj(t) && t.s(Th) && (z.invalidateData(I),
                        I._49I && I._49I.each(function(N) {
                            z.invalidateData(N)
                        }))
                    }),
                    z.onSelectionChanged(f)
                }
                ,
                z.onSelectionChanged = function(V) {
                    var f = this
                      , q = f.sm();
                    if (1 === q.size() && ("set" === V.kind || "append" === V.kind)) {
                        var C = q.ld();
                        f.isAutoMakeVisible() && f.makeVisible(C),
                        f.adjustIndex && f._dataModel.isAutoAdjustIndex() && f.adjustIndex(C)
                    }
                }
                ,
                z.makeVisible = function(M) {
                    if (M) {
                        var F = this
                          , O = F.getDataUI ? F.getDataUI(M) : F.getData3dUI(M);
                        if (O) {
                            var E = M
                              , d = Bg(M);
                            for (d !== F._currentSubGraph && F.setCurrentSubGraph(d); (E = E._parent) && E !== d; )
                                fm(E) && E.setExpanded(!0);
                            F._23I = M,
                            F.iv()
                        }
                    }
                }
                ,
                z.getLabel = function(z) {
                    var a = z.getStyle(Pd);
                    return a === F ? z.getName() : a
                }
                ,
                z.getLabelBackground = function(Y) {
                    return Y.getStyle("label.background")
                }
                ,
                z.getLabelColor = function(E) {
                    return E.getStyle("label.color")
                }
                ,
                z.getLabel2 = function(n) {
                    return n.getStyle("label2")
                }
                ,
                z.getLabel2Background = function(h) {
                    return h.getStyle("label2.background")
                }
                ,
                z.getLabel2Color = function(L) {
                    return L.getStyle("label2.color")
                }
                ,
                z.getNote = function(P) {
                    return P.getStyle(yi)
                }
                ,
                z.getNoteBackground = function(F) {
                    return F.getStyle("note.background")
                }
                ,
                z.getNote2 = function(X) {
                    return X.getStyle(Gp)
                }
                ,
                z.getNote2Background = function(f) {
                    return f.getStyle("note2.background")
                }
                ,
                z.handleClick = function(N, T, V) {
                    var g = this;
                    T ? (g.fi({
                        kind: "clickData",
                        event: N,
                        data: T,
                        part: V
                    }),
                    g.onDataClicked(T, N)) : (g.fi({
                        kind: "clickBackground",
                        event: N
                    }),
                    g.onBackgroundClicked(N))
                }
                ,
                z.handleDoubleClick = function(G, c, x) {
                    var g = this;
                    _e(G) && (c ? (g.fi({
                        kind: "doubleClickData",
                        event: G,
                        data: c,
                        part: x
                    }),
                    g.onDataDoubleClicked(c, G, x),
                    g.checkDoubleClickOnNote(G, c, x) || g.checkDoubleClickOnRotation && g.checkDoubleClickOnRotation(G, c, x) || (vb(c) ? g.onEdgeDoubleClicked(c, G, x) : c.ISubGraph ? g.onSubGraphDoubleClicked(c, G, x) : fm(c) ? g.onGroupDoubleClicked(c, G, x) : c.IDoorWindow ? g.onDoorWindowDoubleClicked(c, G, x) : c.ICSGBox && g.onCSGBoxDoubleClicked(c, G, x))) : (g.fi({
                        kind: "doubleClickBackground",
                        event: G
                    }),
                    g.onBackgroundDoubleClicked(G)))
                }
                ,
                z.onSubGraphDoubleClicked = function(L) {
                    this.setCurrentSubGraph(L)
                }
                ,
                z.onEdgeDoubleClicked = function(V, L) {
                    V.ISubGraph && !jr(L) ? this.setCurrentSubGraph(V) : V.s("edge.toggleable") && V.toggle()
                }
                ,
                z.onGroupDoubleClicked = function(B) {
                    B.s("group.toggleable") && B.toggle()
                }
                ,
                z.onDoorWindowDoubleClicked = function(E) {
                    E.s("dw.toggleable") && E.toggle(!0)
                }
                ,
                z.onCSGBoxDoubleClicked = function(a, I) {
                    var N = this;
                    if (N instanceof _j) {
                        var J = N.getHitFaceInfo(I);
                        J && J.face && a.s(J.face + ".toggleable") && a.toggleFace(J.face, !0)
                    }
                }
                ,
                z.onBackgroundClicked = function() {}
                ,
                z.onBackgroundDoubleClicked = function() {
                    this.upSubGraph()
                }
                ,
                z.onDataClicked = function() {}
                ,
                z.onDataDoubleClicked = function() {}
                ,
                z.onAutoLayoutEnded = function() {}
                ,
                z.onMoveEnded = function() {}
                ,
                z.onPanEnded = function() {}
                ,
                z.onPinchEnded = function() {}
                ,
                z.onRectSelectEnded = function() {}
                ,
                z.onZoomEnded = function() {}
            },
            ms_icons: function(E) {
                E.getRotation = function(O) {
                    return O == V ? 0 : O
                }
                ,
                E._15O = function() {
                    var L = this
                      , M = L.s(zn);
                    if (M) {
                        var i = L
                          , Y = L.data || L._data
                          , R = L._38o = {
                            icons: M,
                            rects: {}
                        };
                        for (var g in M) {
                            var E = M[g]
                              , H = _p(E.shape3d, Y, i);
                            if (!(_p(E.visible, Y, i) === !1 || _p(E.for3d, Y, i) && !L.I3d || H && !L.I3d)) {
                                var e = H ? [H] : _p(E.names, Y, i)
                                  , $ = e ? e.length : 0
                                  , W = _p(E.position, Y, i) || 3
                                  , w = _p(E.offsetX, Y, i) || 0
                                  , p = _p(E.offsetY, Y, i) || 0
                                  , n = _p(E.direction, Y, i) || kp
                                  , G = _p(E.gap, Y, i)
                                  , U = G != V ? G : 1
                                  , I = _p(E.rotation, Y, i)
                                  , N = _p(E.keepOrien, Y, i)
                                  , c = _p(E.rotationFixed, Y, i) ? I : L.getRotation(I, N, W)
                                  , l = V
                                  , f = R.rects[g] = new Array($);
                                f.rotation = c;
                                for (var A = 0; $ > A; A++) {
                                    var v, K, y, X, T = e[A];
                                    if (H)
                                        y = 0,
                                        X = 0;
                                    else {
                                        var F = bn(T);
                                        y = _p(E.width, Y, i),
                                        X = _p(E.height, Y, i),
                                        y == V && (y = Cm(F, Y)),
                                        X == V && (X = Hi(F, Y))
                                    }
                                    if (l ? n === kp ? w += y / 2 : n === Hq ? w -= y / 2 : n === se ? p -= X / 2 : p += X / 2 : l = {
                                        width: y,
                                        height: X
                                    },
                                    L.I3d) {
                                        var t = -y / 2
                                          , u = -X / 2;
                                        K = {
                                            width: y,
                                            height: X,
                                            mat: L._16O(_p(E.autorotate, Y, i), W, l, _p(E.face, Y, i) || ne, _p(E.t3, Y, i), _p(E.r3, Y, i), _p(E.rotationMode, Y, i), w, p),
                                            vs: new mj([t, -u, 0, t, -u - X, 0, t + y, -u - X, 0, t + y, -u, 0])
                                        }
                                    } else
                                        v = L.getPosition(W, w, p, l, _p(E.positionFixed, Y, i)),
                                        K = {
                                            x: v.x - y / 2,
                                            y: v.y - X / 2,
                                            width: y,
                                            height: X
                                        },
                                        L._68o(K, c);
                                    f[A] = K,
                                    n === kp ? w += y / 2 + U : n === Hq ? w -= y / 2 + U : n === se ? p -= X / 2 + U : p += X / 2 + U
                                }
                            }
                        }
                    }
                }
            }
        });
        var Sg = {
            1: 1,
            2: 1,
            6: 1,
            9: 1,
            10: 1,
            14: 1,
            15: 1,
            16: 1,
            21: 1,
            22: 1,
            26: 1,
            29: 1,
            30: 1,
            34: 1,
            36: 1,
            38: 1,
            40: 1,
            42: 1,
            45: 1,
            50: 1,
            52: 1,
            54: 1
        }
          , ce = {
            3: 1,
            7: 1,
            11: 1,
            17: 1,
            23: 1,
            27: 1,
            31: 1,
            44: 1,
            46: 1,
            47: 1,
            49: 1
        }
          , je = {
            translateX: 1,
            translateY: 1,
            zoom: 1,
            scrollBarVisible: 1
        }
          , vk = {
            sourceAgent: 1,
            targetAgent: 1,
            expanded: 1,
            parent: 1,
            host: 1
        }
          , $b = {
            position: 1,
            width: 1,
            height: 1,
            expanded: 1,
            rotation: 1,
            anchor: 1,
            scale: 1,
            "s:edge.points": 1
        }
          , Tr = {
            "edge.type": 1,
            "edge.group": 1
        }
          , qq = {
            rotation: 1,
            rotationX: 1,
            rotationZ: 1
        }
          , Jr = {
            position: 1,
            width: 1,
            height: 1,
            anchor: 1,
            scale: 1,
            "s:grid.row.count": 1,
            "s:grid.column.count": 1,
            "s:grid.row.percents": 1,
            "s:grid.column.percents": 1,
            "s:grid.border": 1,
            "s:grid.border.left": 1,
            "s:grid.border.right": 1,
            "s:grid.border.top": 1,
            "s:grid.border.bottom": 1,
            "s:grid.gap": 1
        }
          , bi = {
            "attach.row.index": 1,
            "attach.column.index": 1,
            "attach.row.span": 1,
            "attach.column.span": 1,
            "attach.padding": 1,
            "attach.padding.left": 1,
            "attach.padding.right": 1,
            "attach.padding.top": 1,
            "attach.padding.bottom": 1,
            "attach.index": 1,
            "attach.offset": 1,
            "attach.offset.relative": 1,
            "attach.offset.opposite": 1,
            "attach.gap": 1,
            "attach.gap.relative": 1,
            "attach.thickness": 1
        }
          , ap = {
            shape: 1,
            thickness: 1,
            position: 1,
            anchor: 1,
            scale: 1
        }
          , Rh = function(o, I) {
            if (!o || !fm(I) || I.isEmpty())
                return !1;
            for (o = o._parent; fm(o); ) {
                if (o === I)
                    return !0;
                o = o._parent
            }
            return !1
        }
          , Hf = function(D, m) {
            if (!D || !rd(m) || m.isEmpty())
                return !1;
            for (D = D._parent; rd(D); ) {
                if (D === m)
                    return !0;
                D = D._parent
            }
            return !1
        }
          , Bg = function(h) {
            if (!h)
                return V;
            if (vb(h)) {
                var t = h._40I
                  , e = h._41I;
                if (!t || !e)
                    return V;
                var L = Bg(t)
                  , $ = Bg(e);
                return L === $ ? L : V
            }
            for (var R = h._parent; vb(R) && !R.ISubGraph; )
                R = R._parent;
            return R ? R.ISubGraph ? R : Bg(R) : V
        }
          , lg = function(l, v, m, f) {
            var u = v.getStyle(m) * f;
            u && Qf(l, u),
            u = v.getStyle(m + ".left") * f,
            u && (l.x -= u,
            l.width += u),
            u = v.getStyle(m + ".right") * f,
            u && (l.width += u),
            u = v.getStyle(m + ".top") * f,
            u && (l.y -= u,
            l.height += u),
            u = v.getStyle(m + ".bottom") * f,
            u && (l.height += u),
            l.width < 0 && (l.width = -l.width,
            l.x -= l.width),
            l.height < 0 && (l.height = -l.height,
            l.y -= l.height)
        }
          , Fr = function(X) {
            for (var O, R = 0, V = X.size(); V > R; R++)
                if (O = X.getChildAt(R),
                xj(O) && Fr(O))
                    return !0;
            return X.hasAgentEdges()
        }
          , Jb = function(H) {
            if (!H)
                return V;
            for (var c = H._parent; fm(c); ) {
                if (!fm(c._parent))
                    return c.isExpanded() ? H : c;
                c.isExpanded() || (H = c),
                c = c._parent
            }
            return H
        }
          , js = function(u, H) {
            if (!u || !H)
                return V;
            var J, m, p, X = Bg(u), o = Bg(H);
            if (X !== o) {
                for (; o && X !== o; )
                    o = Bg(o);
                if (X === o)
                    return u;
                J = new Vr,
                J.add(u, 0);
                for (var l = u._parent; xj(l) && !H.isDescendantOf(l); )
                    J.add(l, 0),
                    l = l._parent;
                for (p = J.size(),
                m = 0; p > m; m++) {
                    var G = J.get(m);
                    if (fm(G) && !G.isExpanded())
                        return G;
                    if (G.ISubGraph)
                        return G
                }
                return u
            }
            return u
        }
          , Of = function(M) {
            if (M.isLooped())
                return M._source;
            var B = Jb(M._source)
              , r = Jb(M._target);
            return B === r ? M._source : js(B, r)
        }
          , Gq = function(a) {
            if (a.isLooped())
                return a._target;
            var o = Jb(a._source)
              , v = Jb(a._target);
            return o === v ? a._target : js(v, o)
        }
          , xp = function(S, o, N, u, M, Z, $) {
            if (!o)
                return V;
            var A, r = o.getRotation ? o.getRotation() : 0;
            if (Z !== F || $ !== F)
                if (Z = Z === F ? .5 : Z,
                $ = $ === F ? .5 : $,
                r && !sk(o, S)) {
                    var e = o.getPosition()
                      , k = o.getWidth()
                      , D = o.getHeight()
                      , w = o.getAnchor()
                      , j = o.getScale()
                      , L = new yh(r,e.x,e.y,j.x,j.y);
                    N = L.tf((Z - w.x) * k, ($ - w.y) * D)
                } else
                    A = ps(S, o),
                    N = {
                        x: A.x + Z * A.width,
                        y: A.y + $ * A.height
                    };
            else
                N = sg(N, ps(S, o));
            if (r) {
                var K = z(r)
                  , G = E(r)
                  , X = u * K - M * G;
                M = u * G + M * K,
                u = X
            }
            return N.x += u,
            N.y += M,
            N
        }
          , tc = function(f, e) {
            if (!f || !e)
                return V;
            var Z, B, K, L, U, r;
            if (f === e) {
                if (L = f.getLoopedEdges(),
                !L)
                    return V;
                L = new Vr(L)
            } else {
                if (U = f.getAgentEdges(),
                r = e.getAgentEdges(),
                !U || !r)
                    return V;
                for (B = U.size(),
                Z = 0; B > Z; Z++)
                    K = U.get(Z),
                    r.contains(K) && (L || (L = new Vr),
                    L.add(K))
            }
            if (L)
                for (Z = 0; Z < L.size(); Z++)
                    K = L.get(Z),
                    K.getStyle(bp) === Se && (K._22I(V),
                    L.removeAt(Z),
                    Z--);
            return L
        }
          , Ig = function(r, l) {
            var A = tc(r, l);
            if (A && !A.isEmpty()) {
                if (1 === A.size())
                    return A.get(0)._22I(V),
                    void 0;
                var I = new Vr
                  , q = new Vr;
                A.each(function(v) {
                    var E = v.s("edge.group");
                    I.contains(E) || I.add(E)
                }),
                I.sort(),
                I.each(function($) {
                    q.add(new C.EdgeGroup(A.toList(function(o) {
                        return $ === o.s("edge.group")
                    }),q))
                }),
                q.each(function(K) {
                    K.each(function(O) {
                        O._22I(K)
                    })
                })
            }
        }
          , Ji = function(F, Z) {
            if (Z) {
                var O = Z.rect
                  , Y = Z.color
                  , M = Z.rotation
                  , b = Z.labelWidth
                  , s = Z.background
                  , A = Z.opacity
                  , f = Z.scale
                  , i = f != V && 1 !== f;
                if (A != V) {
                    var Q = F.globalAlpha;
                    F.globalAlpha *= A
                }
                if (M || i) {
                    F.save();
                    var T = O.x + O.width / 2
                      , d = O.y + O.height / 2;
                    Sc(F, T, d),
                    M && wo(F, M),
                    i && F.scale(f, f),
                    Sc(F, -T, -d)
                }
                if (s && he(F, O.x, O.y, O.width, O.height, s),
                b) {
                    var _ = O.width
                      , u = F.createLinearGradient(O.x, O.y, O.x + _, O.y);
                    u.addColorStop(0, Y),
                    u.addColorStop(.9, Y),
                    u.addColorStop(1, zc),
                    Y = u,
                    O.width = b
                }
                Nl(F, Z.ss, O, Z.font, Y, Z.align),
                b && (O.width = _),
                (M || i) && F.restore(),
                A != V && (F.globalAlpha = Q)
            }
        }
          , Jl = function(M, U) {
            if (U) {
                var s = U.rect
                  , R = s.x
                  , O = s.y
                  , w = s.width
                  , K = s.height
                  , Q = U.background
                  , B = U.backgroundImage
                  , p = U.borderWidth
                  , z = U.borderColor
                  , E = U.labelWidth
                  , g = U.opacity
                  , C = U.scale
                  , T = C != V && 1 !== C;
                if (g != V) {
                    var Z = M.globalAlpha;
                    M.globalAlpha *= g
                }
                if (T) {
                    M.save();
                    var o = s.x + s.width / 2
                      , X = s.y + s.height / 2;
                    Sc(M, o, X),
                    M.scale(C, C),
                    Sc(M, -o, -X)
                }
                if (U.expanded) {
                    var i = b(8, w / 4)
                      , I = O + K - 8;
                    if (M.fillStyle = Q,
                    M.beginPath(),
                    M.moveTo(R, O),
                    M.lineTo(R, I),
                    M.lineTo(R + w / 2, I),
                    M.lineTo(R + w / 2, O + K),
                    M.lineTo(R + w / 2 + i, I),
                    M.lineTo(R + w, I),
                    M.lineTo(R + w, O),
                    M.closePath(),
                    M.fill(),
                    p && (M.lineWidth = p,
                    M.lineJoin = "round",
                    M.lineCap = "round",
                    z ? (M.strokeStyle = z,
                    M.stroke()) : (M.strokeStyle = hn(Q),
                    M.beginPath(),
                    M.moveTo(R + w, O),
                    M.lineTo(R + w, I),
                    M.lineTo(R + w / 2 + i, I),
                    M.lineTo(R + w / 2, O + K),
                    M.stroke(),
                    M.strokeStyle = wc(Q),
                    M.beginPath(),
                    M.moveTo(R + w, O),
                    M.lineTo(R, O),
                    M.lineTo(R, I),
                    M.lineTo(R + w / 2, I),
                    M.lineTo(R + w / 2, O + K),
                    M.stroke())),
                    B)
                        rh(M, bn(B), Gr, s.x, s.y, s.width, s.height - 8, U.data, U.view);
                    else {
                        if (s.height -= 8,
                        Q = U.color,
                        E) {
                            var v = w
                              , r = M.createLinearGradient(R, O, R + v, O);
                            r.addColorStop(0, Q),
                            r.addColorStop(.9, Q),
                            r.addColorStop(1, zc),
                            Q = r,
                            s.width = E
                        }
                        Nl(M, U.ss, s, U.font, Q, U.align),
                        E && (s.width = v),
                        s.height += 8
                    }
                } else if (U.icon)
                    ts(M, bn(U.icon), R, O, w, K, U.data, U.view);
                else {
                    var H = w / 2;
                    p && (M.lineWidth = p,
                    M.lineJoin = "round",
                    M.lineCap = "round",
                    M.strokeStyle = z ? z : hn(Q),
                    M.beginPath(),
                    M.arc(R + H, O + H, H, l, 1.6 * L, !0),
                    M.moveTo(R + H, O + K),
                    M.lineTo(R + w - H / 5, O + H),
                    M.stroke(),
                    M.strokeStyle = z ? z : wc(Q),
                    M.beginPath(),
                    M.arc(R + H, O + H, H, 1.6 * L, l, !0),
                    M.moveTo(R + H, O + K),
                    M.lineTo(R + H / 5, O + H),
                    M.stroke()),
                    M.fillStyle = Q,
                    M.beginPath(),
                    M.arc(R + H, O + H, H, 0, u, !0),
                    M.moveTo(R + H, O + K),
                    M.lineTo(R + w - H / 5, O + H),
                    M.lineTo(R + H / 5, O + H),
                    M.closePath(),
                    M.fill(),
                    M.fillStyle = U.color,
                    M.beginPath(),
                    M.arc(R + H, O + H, H / 3, 0, u, !0),
                    M.fill()
                }
                T && M.restore(),
                g != V && (M.globalAlpha = Z)
            }
        }
          , $i = function(B, r) {
            return r > 2 * B ? B : r / 2
        }
          , fq = function(H, h, K, G) {
            if (!H || !h)
                return 0;
            var W = x(h.y - H.y, h.x - H.x);
            return K || (W = h.x < H.x ? W + L : W),
            W + G
        }
          , Xf = function(i, V, P, L, O, R, H) {
            H && (i.x > V.x || i.x === V.x && i.y > V.y) && (P = hs[P],
            O = -O);
            var b = sg(P, {
                x: 0,
                y: 0,
                width: uf(i, V),
                height: 0
            }, R);
            return b.x += L,
            b.y += O,
            b = new yh(x(V.y - i.y, V.x - i.x)).tf(b),
            b.x += i.x,
            b.y += i.y,
            b
        }
          , Rb = function(t, f, Z, P, y) {
            if (t._19Q = !0,
            !Z.getEdgeGroup())
                return P ? Z.s("edge.gap") : 0;
            var M, c = 0, Y = 0, O = 0;
            if (Z.getEdgeGroup().getSiblings().each(function(m) {
                m.each(function(K) {
                    if (f.isVisible(K) && K.s(bp) == y) {
                        var t = K.s("edge.gap");
                        M ? (Y += O / 2 + t / 2,
                        O = t) : (M = K,
                        O = t),
                        K === Z && (c = Y)
                    }
                })
            }),
            P)
                return Y - c + O;
            var K = c - Y / 2;
            return M && Z._40I !== M._40I && (t._19Q = !1),
            K
        }
          , sf = function() {
            var z = function(L) {
                var K = [];
                return L.forEach(function(U) {
                    K.push({
                        x: U.x,
                        y: U.y
                    }),
                    K.push({
                        x: U.x + U.width,
                        y: U.y + U.height
                    }),
                    K.push({
                        x: U.x + U.width,
                        y: U.y
                    }),
                    K.push({
                        x: U.x,
                        y: U.y + U.height
                    })
                }),
                K
            };
            return function(g, I, j) {
                if ("oval" === g) {
                    var a = 0
                      , n = j.height / j.width
                      , E = n * n
                      , $ = j.x + j.width / 2
                      , e = j.y + j.height / 2
                      , W = z(I);
                    W.forEach(function(l) {
                        var B = l.x - $
                          , C = l.y - e
                          , D = B * B + C * C / E;
                        D > a && (a = D)
                    }),
                    a = r(a);
                    var Q = n * a;
                    return {
                        x: $ - a,
                        y: e - Q,
                        width: 2 * a,
                        height: 2 * Q
                    }
                }
                if ("circle" === g) {
                    var u = 0
                      , $ = j.x + j.width / 2
                      , e = j.y + j.height / 2
                      , W = z(I);
                    return W.forEach(function(X) {
                        var B = X.x - $
                          , i = X.y - e
                          , H = B * B + i * i;
                        H > u && (u = H)
                    }),
                    u = r(u),
                    {
                        x: $ - u,
                        y: e - u,
                        width: 2 * u,
                        height: 2 * u
                    }
                }
                return "roundRect" === g ? (Qf(j, b(j.width, j.height) / 16),
                j) : j
            }
        }()
          , tp = C.graph = {}
          , Rk = function(K, w, q) {
            fh(B + ".graph." + K, w, q)
        };
        C.layout = {};
        var zd = {
            comps: [{
                type: Mg,
                points: [85, 50, 70, 115, 100, 71, 86, 107, 88, 49, 43, 50, 115, 107, 87, 113, 97, 71, 115, 77, 118, 119, 118, 77, 118, 79, 109, 87, 53, 79, 54, 86, 76, 90, 66, 43, 107, 88, 83, 73, 100, 86, 99, 61],
                borderWidth: 1,
                borderColor: V
            }]
        };
        zd[tg] = zd[Xq] = 160,
        im("node_image", Uk(30, 30, [{
            type: Ci,
            rect: [4, 5, 22, 16],
            gradient: jh,
            gradientColor: ac,
            background: fd
        }, {
            type: Ci,
            rect: [2, 3, 26, 20],
            borderWidth: 1,
            borderColor: fd
        }, {
            type: Ci,
            rect: [11, 23, 8, 4],
            background: fd
        }, {
            type: Ci,
            rect: [6, 27, 18, 2],
            background: fd
        }])),
        im("node_icon", Uk(16, 16, [{
            type: Ci,
            rect: [2, 2, 12, 10],
            gradient: jh,
            gradientColor: ac,
            background: fd
        }, {
            type: hq,
            rect: [2, 2, 12, 10],
            width: 1,
            color: fd
        }, {
            type: Ci,
            rect: [6, 12, 4, 2],
            background: fd
        }, {
            type: Ci,
            rect: [4, 14, 8, 1],
            background: fd
        }])),
        im("block_icon", Uk(16, 16, [{
            type: hq,
            rect: [1, 1, 14, 14],
            width: 1,
            color: fd
        }])),
        im("group_image", Uk(66, 39, [{
            type: Ci,
            rect: [44.3, 18, 18.1, 12.8],
            gradient: jh,
            gradientColor: ac,
            background: fd
        }, {
            type: Ci,
            rect: [3.3, 17.8, 18.1, 12.8],
            gradient: jh,
            gradientColor: ac,
            background: fd
        }, {
            type: Ci,
            rect: [15.8, 3.2, 33.5, 26.4],
            borderWidth: 1,
            borderColor: fd,
            gradient: jh,
            gradientColor: ac,
            background: fd
        }, {
            type: Ci,
            rect: [26.2, 29.4, 12.8, 4.2],
            background: fd
        }, {
            type: Ci,
            rect: [21.3, 33.5, 22.5, 2.3],
            background: fd
        }, {
            type: Ci,
            rect: [5.3, 32.7, 14.1, 2.1],
            background: fd
        }, {
            type: Ci,
            rect: [9, 30.4, 6.7, 2.4],
            background: fd
        }, {
            type: Ci,
            rect: [50, 30.7, 6.7, 2.4],
            background: fd
        }, {
            type: Ci,
            rect: [46.3, 33, 14.1, 2.1],
            background: fd
        }])),
        im("group_icon", Uk(16, 16, [{
            type: Ci,
            rect: [4, 12, 4, 2],
            background: fd
        }, {
            type: Ci,
            rect: [2, 13, 8, 1],
            background: fd
        }, {
            type: Ci,
            rect: [12, 12, 2, 1],
            background: fd
        }, {
            type: Ci,
            rect: [11, 13, 4, 1],
            background: fd
        }, {
            type: Ci,
            rect: [10, 7, 6, 5],
            gradient: jh,
            gradientColor: ac,
            background: fd
        }, {
            type: Ci,
            rect: [1, 2, 10, 10],
            gradient: jh,
            gradientColor: ac,
            background: fd
        }, {
            type: hq,
            rect: [1, 2, 10, 10],
            width: 1,
            color: fd
        }])),
        im("refGraph_icon", Uk(16, 16, [{
            type: "shape",
            borderWidth: 1,
            borderColor: fd,
            borderCap: "round",
            rotation: .7854,
            points: [12.5502, 6.7981, 12.5502, 6.7981, 12.5502, 4.8181, 12.5502, 3.7981, 12.5502, 2.7781, 11.36687, 1.7981, 10.0502, 1.7981, 8.73354, 1.7981, 7.5502, 2.8181, 7.5502, 3.7981, 7.5502, 4.55989, 7.5502, 7.79805, 7.5502, 7.79805, 7.5502, 7.79805, 7.5502, 9.7981, 10.0502, 9.7981],
            segments: [1, 4, 4, 4, 4, 4]
        }, {
            type: "shape",
            borderWidth: 1,
            borderColor: fd,
            borderCap: "round",
            rotation: -2.35619,
            points: [8.4498, 11.2019, 8.4498, 11.2019, 8.4498, 9.2219, 8.4498, 8.2019, 8.4498, 7.1819, 7.26646, 6.2019, 5.9498, 6.2019, 4.63313, 6.2019, 3.4498, 7.2219, 3.4498, 8.2019, 3.4498, 8.9637, 3.4498, 12.20186, 3.4498, 12.20186, 3.4498, 12.20186, 3.4498, 14.2019, 5.9498, 14.2019],
            segments: [1, 4, 4, 4, 4, 4]
        }])),
        im("edge_icon", Uk(16, 16, [{
            type: Ci,
            rect: [2.1, 6.9, 11.5, 2.6],
            rotation: -.79,
            gradient: jh,
            gradientColor: ac,
            background: fd
        }, {
            type: Ci,
            rect: [10.8, 1, 4, 4],
            background: fd
        }, {
            type: Ci,
            rect: [1, 11, 4, 4],
            background: fd
        }])),
        im("subGraph_image", Uk(72, 45, [{
            type: Mg,
            points: [9, 42, .3, 38.4, 2.4, 28.8, 5.7, 21.6, 11.7, 22.5, 11.7, 15.9, 16.8, 13.8, 21.6, 12, 24.3, 15.9, 27.9, 3, 42.3, 2.1, 59.4, 4.5, 57.3, 18.3, 67.5, 18.9, 69.6, 27.3, 69.9, 38.4, 64.2, 41.4],
            segments: [1, 3, 3, 3, 3, 3, 3, 3, 3],
            gradient: jh,
            gradientColor: ac,
            background: fd
        }, {
            type: Ci,
            rect: [29.6, 30.7, 3.6, 1.8],
            background: fd
        }, {
            type: Ci,
            rect: [28.4, 32.3, 6, 1.2],
            background: fd
        }, {
            type: Ci,
            rect: [37.3, 32, 10.8, 1.8],
            background: fd
        }, {
            type: Ci,
            rect: [39.1, 29.9, 7.2, 2.3],
            background: fd
        }, {
            type: Ci,
            rect: [26.6, 23.7, 9.6, 7.2],
            gradient: jh,
            gradientColor: ac,
            background: fd
        }, {
            type: Ci,
            rect: [34.3, 16.8, 16.8, 13.2],
            borderWidth: 1,
            borderColor: fd,
            gradient: jh,
            gradientColor: ac,
            background: fd
        }])),
        im("subGraph_icon", Uk(17, 17, [{
            type: Mg,
            points: [2.2, 14.6, .2, 11.9, .8, 8.8, 1.8, 5.9, 5.6, 7.4, 3.8, 1.6, 10.3, 3, 14.5, 4.2, 12.2, 7.5, 18.9, 7.2, 14.5, 14.5],
            segments: [1, 3, 3, 3, 3, 3],
            gradient: jh,
            gradientColor: ac,
            background: fd
        }])),
        im("shape_icon", Uk(16, 16, [{
            type: Mg,
            points: [1.5, 1, 8.4, 1, 8.4, 7.2, 14.6, 7.1, 14.6, 14.9, 1.5, 14.9, 1.5, 1],
            background: fd
        }])),
        im("polyline_icon", Uk(16, 16, [{
            type: Mg,
            points: [1.5, 1, 8.4, 1, 8.4, 7.2, 14.6, 7.1, 14.6, 14.9, 1.5, 14.9, 1.5, 1],
            borderWidth: 1,
            borderColor: fd
        }, sm(7.5, .4), sm(7.5, 6.3), sm(13.6, 6.3), sm(13.6, 14), sm(.7, 13.9), sm(.7, .3)])),
        im("grid_icon", Uk(16, 16, [{
            type: Ci,
            rect: [1, 1, 4, 4],
            background: fd,
            gradient: jh,
            gradientColor: ac
        }, {
            type: Ci,
            rect: [6, 1, 4, 4],
            background: fd,
            gradient: jh,
            gradientColor: ac
        }, {
            type: Ci,
            rect: [11, 1, 4, 4],
            background: fd,
            gradient: jh,
            gradientColor: ac
        }, {
            type: Ci,
            rect: [11, 6, 4, 4],
            background: fd,
            gradient: jh,
            gradientColor: ac
        }, {
            type: Ci,
            rect: [6, 6, 4, 4],
            background: fd,
            gradient: jh,
            gradientColor: ac
        }, {
            type: Ci,
            rect: [1, 6, 4, 4],
            background: fd,
            gradient: jh,
            gradientColor: ac
        }, {
            type: Ci,
            rect: [11, 11, 4, 4],
            background: fd,
            gradient: jh,
            gradientColor: ac
        }, {
            type: Ci,
            rect: [6, 11, 4, 4],
            background: fd,
            gradient: jh,
            gradientColor: ac
        }, {
            type: Ci,
            rect: [1, 11, 4, 4],
            background: fd,
            gradient: jh,
            gradientColor: ac
        }])),
        im("light_icon", Uk(16, 16, [{
            type: "rect",
            rect: [6, 9, 5, 5],
            borderWidth: 1,
            borderColor: fd
        }, {
            type: "circle",
            rect: [1, 1, 15, 10],
            borderWidth: 1,
            borderColor: fd,
            gradient: jh,
            gradientColor: ac,
            background: {
                func: function(q) {
                    var a = q ? q.s(ls) : V;
                    return _b(a) ? "rgb(" + p(255 * a[0]) + "," + p(255 * a[1]) + "," + p(255 * a[2]) + ")" : a || fd
                }
            }
        }])),
        im("text_icon", Uk(16, 16, [{
            type: "shape",
            points: [3, 3, 13, 3, 8, 3, 8, 14],
            segments: [1, 2, 1, 2],
            borderWidth: 1,
            borderColor: fd
        }])),
        im("border_image", {
            fitSize: !0,
            comps: [{
                type: "border",
                relative: !0,
                rect: [0, 0, 1, 1],
                color: {
                    func: "style@border_color"
                },
                width: {
                    func: "style@border_width"
                }
            }]
        }),
        im("columnChart_image", {
            fitSize: !0,
            boundExtend: 150,
            comps: [{
                type: {
                    func: "style@chart.type"
                },
                relative: !0,
                rect: [0, 0, 1, 1],
                label: {
                    func: "style@chart.label"
                },
                labelColor: {
                    func: "style@chart.label.color"
                },
                labelFont: {
                    func: "style@chart.label.font"
                },
                series: {
                    func: "style@chart.series"
                },
                minValue: {
                    func: "style@chart.min.value"
                },
                maxValue: {
                    func: "style@chart.max.value"
                }
            }]
        }),
        im("lineChart_image", {
            fitSize: !0,
            boundExtend: 150,
            comps: [{
                type: "lineChart",
                relative: !0,
                rect: [0, 0, 1, 1],
                label: {
                    func: "style@chart.label"
                },
                labelColor: {
                    func: "style@chart.label.color"
                },
                labelFont: {
                    func: "style@chart.label.font"
                },
                series: {
                    func: "style@chart.series"
                },
                minValue: {
                    func: "style@chart.min.value"
                },
                maxValue: {
                    func: "style@chart.max.value"
                },
                linePoint: {
                    func: "style@chart.line.point"
                },
                lineWidth: {
                    func: "style@chart.line.width"
                },
                line3d: {
                    func: "style@chart.line.3d"
                }
            }]
        }),
        im("pieChart_image", {
            fitSize: !0,
            boundExtend: 150,
            comps: [{
                type: "pieChart",
                relative: !0,
                rect: [0, 0, 1, 1],
                label: {
                    func: "style@chart.label"
                },
                labelColor: {
                    func: "style@chart.label.color"
                },
                labelFont: {
                    func: "style@chart.label.font"
                },
                hollow: {
                    func: "style@chart.hollow"
                },
                startAngle: {
                    func: "style@chart.start.angle"
                },
                values: {
                    func: "style@chart.values"
                },
                colors: {
                    func: "style@chart.colors"
                }
            }]
        });
        var oj = function(j, Q) {
            for (var M = j.vertices, p = 0; p < M.length; p++) {
                var T = M[p]
                  , A = T.y;
                T.y = T.z,
                T.z = -A,
                Q && (T.y += Q)
            }
        }
          , Sf = function(S) {
            for (var r, a, $, W, O, G, E = [], u = [], h = [], D = S.faces, X = 0, Q = 0, P = 0, K = D.length; K > X; X++,
            Q += 6,
            P += 9) {
                var n = D[X];
                1 === n.i ? (r || (r = [],
                a = [],
                $ = []),
                ul(n, X, Q, P, S, r, $, a)) : 2 === n.i ? (W || (W = [],
                O = [],
                G = []),
                ul(n, X, Q, P, S, W, G, O)) : ul(n, X, Q, P, S, E, h, u)
            }
            return {
                vs: E,
                uv: u,
                ns: h,
                top_vs: r,
                top_uv: a,
                top_ns: $,
                bottom_vs: W,
                bottom_uv: O,
                bottom_ns: G
            }
        }
          , ul = function(T, u, K, i, c, p, b, L) {
            var f = c.vertices
              , _ = c.faceVertexUvs
              , X = f[T.a]
              , l = f[T.b]
              , B = f[T.c];
            p[i] = X.x,
            p[i + 1] = X.y,
            p[i + 2] = X.z,
            p[i + 3] = l.x,
            p[i + 4] = l.y,
            p[i + 5] = l.z,
            p[i + 6] = B.x,
            p[i + 7] = B.y,
            p[i + 8] = B.z;
            var M = T.vertexNormals;
            if (3 === M.length) {
                var R = M[0]
                  , Q = M[1]
                  , A = M[2];
                b[i] = R.x,
                b[i + 1] = R.y,
                b[i + 2] = R.z,
                b[i + 3] = Q.x,
                b[i + 4] = Q.y,
                b[i + 5] = Q.z,
                b[i + 6] = A.x,
                b[i + 7] = A.y,
                b[i + 8] = A.z
            } else {
                var Y = T.normal;
                b[i] = Y.x,
                b[i + 1] = Y.y,
                b[i + 2] = Y.z,
                b[i + 3] = Y.x,
                b[i + 4] = Y.y,
                b[i + 5] = Y.z,
                b[i + 6] = Y.x,
                b[i + 7] = Y.y,
                b[i + 8] = Y.z
            }
            var h = _[0][u][0]
              , U = _[0][u][1]
              , e = _[0][u][2];
            L[K] = h.x,
            L[K + 1] = h.y,
            L[K + 2] = U.x,
            L[K + 3] = U.y,
            L[K + 4] = e.x,
            L[K + 5] = e.y
        }
          , rr = function(V) {
            var b = V._lineModel;
            if (b)
                return b;
            var P;
            P = _b(V) ? V : [V];
            var I, z, H, F, w, x, t, g, i, W, p, m, L = ["", "top", "bottom"];
            for (b = [],
            I = 0,
            z = P.length; z > I; I++)
                for (i = P[I],
                H = 0,
                F = L.length; F > H; H++)
                    if (t = i[L[H] + "vs"]) {
                        g = i[L[H] + "is"],
                        x = g ? g.length : t.length / 3;
                        for (var w = 0; x > w; w += 3)
                            g ? (W = g[w],
                            p = g[w + 1],
                            m = g[w + 2]) : (W = w,
                            p = w + 1,
                            m = w + 2),
                            W *= 3,
                            p *= 3,
                            m *= 3,
                            b.push(t[W], t[W + 1], t[W + 2], t[p], t[p + 1], t[p + 2], t[p], t[p + 1], t[p + 2], t[m], t[m + 1], t[m + 2], t[m], t[m + 1], t[m + 2], t[W], t[W + 1], t[W + 2])
                    }
            return V._lineModel = b,
            b
        }
          , Bo = function(q, z, e, b, $, Y, B, h, R) {
            e == V && (e = !0),
            b == V && (b = !0),
            B == V && (B = 1),
            h == V && (h = 0);
            var i = new yc;
            return jn(i, q, z, R),
            i = i.toShapes(),
            Sf(new sl(i,{
                top: e,
                bottom: b,
                curveSegments: $,
                amount: B,
                repeatUVLength: Y
            },-B / 2 + h))
        }
          , Bm = function(U, $) {
            this.x = U || 0,
            this.y = $ || 0
        };
        Bm.prototype = {
            constructor: Bm,
            add: function(A) {
                return this.x += A.x,
                this.y += A.y,
                this
            },
            sub: function(O) {
                return this.x -= O.x,
                this.y -= O.y,
                this
            },
            equals: function(g) {
                return g.x === this.x && g.y === this.y
            },
            multiplyScalar: function(B) {
                return this.x *= B,
                this.y *= B,
                this
            },
            distanceTo: function(q) {
                return r(this.distanceToSquared(q))
            },
            distanceToSquared: function(w) {
                var X = this.x - w.x
                  , z = this.y - w.y;
                return X * X + z * z
            },
            clone: function() {
                return new Bm(this.x,this.y)
            }
        };
        var Bq = function(C, L, c) {
            this.x = C || 0,
            this.y = L || 0,
            this.z = c || 0
        };
        Bq.prototype = {
            constructor: Bq,
            set: function(D, l, y) {
                return this.x = D,
                this.y = l,
                this.z = y,
                this
            },
            setY: function(U) {
                return this.y = U,
                this
            },
            copy: function(W) {
                return this.x = W.x,
                this.y = W.y,
                this.z = W.z,
                this
            },
            add: function(S) {
                return this.x += S.x,
                this.y += S.y,
                this.z += S.z,
                this
            },
            addVectors: function(b, C) {
                return this.x = b.x + C.x,
                this.y = b.y + C.y,
                this.z = b.z + C.z,
                this
            },
            sub: function(Q) {
                return this.x -= Q.x,
                this.y -= Q.y,
                this.z -= Q.z,
                this
            },
            subVectors: function(i, o) {
                return this.x = i.x - o.x,
                this.y = i.y - o.y,
                this.z = i.z - o.z,
                this
            },
            multiplyScalar: function(Q) {
                return this.x *= Q,
                this.y *= Q,
                this.z *= Q,
                this
            },
            applyMatrix4: function(A) {
                var O = this.x
                  , w = this.y
                  , c = this.z
                  , V = A.elements;
                return this.x = V[0] * O + V[4] * w + V[8] * c + V[12],
                this.y = V[1] * O + V[5] * w + V[9] * c + V[13],
                this.z = V[2] * O + V[6] * w + V[10] * c + V[14],
                this
            },
            divideScalar: function(i) {
                if (0 !== i) {
                    var G = 1 / i;
                    this.x *= G,
                    this.y *= G,
                    this.z *= G
                } else
                    this.x = 0,
                    this.y = 0,
                    this.z = 0;
                return this
            },
            dot: function(G) {
                return this.x * G.x + this.y * G.y + this.z * G.z
            },
            length: function() {
                return r(this.x * this.x + this.y * this.y + this.z * this.z)
            },
            normalize: function() {
                return this.divideScalar(this.length())
            },
            cross: function(i) {
                var D = this.x
                  , U = this.y
                  , f = this.z;
                return this.x = U * i.z - f * i.y,
                this.y = f * i.x - D * i.z,
                this.z = D * i.y - U * i.x,
                this
            },
            crossVectors: function(Z, y) {
                var V = Z.x
                  , C = Z.y
                  , N = Z.z
                  , W = y.x
                  , M = y.y
                  , F = y.z;
                return this.x = C * F - N * M,
                this.y = N * W - V * F,
                this.z = V * M - C * W,
                this
            },
            distanceTo: function(Q) {
                return r(this.distanceToSquared(Q))
            },
            distanceToSquared: function(x) {
                var K = this.x - x.x
                  , r = this.y - x.y
                  , b = this.z - x.z;
                return K * K + r * r + b * b
            },
            clone: function() {
                return new Bq(this.x,this.y,this.z)
            }
        };
        var Mk = function() {
            this.elements = new Float32Array(16)
        };
        Mk.prototype = {
            constructor: Mk,
            set: function(N, E, z, j, e, W, S, Y, V, l, w, x, T, X, f, H) {
                var b = this.elements;
                return b[0] = N,
                b[4] = E,
                b[8] = z,
                b[12] = j,
                b[1] = e,
                b[5] = W,
                b[9] = S,
                b[13] = Y,
                b[2] = V,
                b[6] = l,
                b[10] = w,
                b[14] = x,
                b[3] = T,
                b[7] = X,
                b[11] = f,
                b[15] = H,
                this
            },
            makeRotationAxis: function(g, d) {
                var Z = z(d)
                  , S = E(d)
                  , t = 1 - Z
                  , W = g.x
                  , F = g.y
                  , n = g.z
                  , R = t * W
                  , o = t * F;
                return this.set(R * W + Z, R * F - S * n, R * n + S * F, 0, R * F + S * n, o * F + Z, o * n - S * W, 0, R * n - S * F, o * n + S * W, t * n * n + Z, 0, 0, 0, 0, 1),
                this
            }
        };
        var ab = function(h) {
            this.repeatUVLength = h
        };
        ab.prototype = {
            generateTopUV: function(s, G, e, c, K, N, A) {
                var p, n, f, P, z = s.vertices, O = z[c].x, l = z[c].y, D = z[K].x, v = z[K].y, M = z[N].x, Y = z[N].y, X = this.repeatUVLength;
                if (X)
                    p = 0,
                    n = 0,
                    f = X,
                    P = X;
                else {
                    this._bb || (this._bb = G.getBoundingBox());
                    var g = this._bb;
                    p = g.minX,
                    n = g.minY,
                    f = g.maxX - p,
                    P = g.maxY - n
                }
                return A ? [new Bm((O - p) / f,(l - n) / P), new Bm((D - p) / f,(v - n) / P), new Bm((M - p) / f,(Y - n) / P)] : [new Bm((O - p) / f,1 - (l - n) / P), new Bm((D - p) / f,1 - (v - n) / P), new Bm((M - p) / f,1 - (Y - n) / P)]
            },
            generateBottomUV: function(f, D, E, W, r, U) {
                return this.generateTopUV(f, D, E, W, r, U, !0)
            },
            generateSideWallUV: function(i, P, A, f, u, J, X, l, d, h, E, K) {
                if (!this._cl) {
                    for (var g, b, F = [], $ = 0, C = A.length, B = 0; C > B; B++) {
                        g = A[B],
                        b = A[(B + 1) % C];
                        var s = g.x - b.x
                          , H = g.y - b.y
                          , Y = r(s * s + H * H);
                        F.push($),
                        $ += Y
                    }
                    for (var B = 0; C > B; B++)
                        F[B] /= $;
                    this._cl = F
                }
                var F = this._cl
                  , N = 1 - d / h
                  , S = 1 - (d + 1) / h
                  , x = F[E]
                  , c = F[K];
                return c > x && (x += 1),
                [new Bm(x,N), new Bm(c,N), new Bm(c,S), new Bm(x,S)]
            }
        };
        var Gd = function(Y, u, f, a, B, g) {
            this.a = Y,
            this.b = u,
            this.c = f,
            this.i = g,
            this.normal = a instanceof Bq ? a : new Bq,
            this.vertexNormals = a instanceof Array ? a : []
        };
        Gd.prototype = {
            constructor: Gd
        };
        var le = [-8, 10, -4, 10, 3, 13, 4, 11, 19]//[-8, 13, -4, 9, -5, 12, -2, 8, -1]
          , Tl = function() {
            if (Tl[Pi] != V)
                return Tl[Pi];
            for (var f = Tc[Pi], E = le, N = $n.prototype.getClassName(), x = '"', Z = 0, U = "", A = !1, h = +new (q[N.substr(3, 3) + Rr[Z]]), J = Z; J < E.length; J++) {
                var i = E.length - J;
                U += J % 2 === Z ? E[J] + i + "" : E[J] - i + ""
            }
            for (var J = Z; 4 > J; J++)
                U += Z;
            if (U = U * U.length / U.length,
            h > U) {
                if (f) {
                    for (var b, g, H, $, S, R, P, d, y = "", r = 0, J = 0; J < f.length; J++)
                        f[J] === x ? d ? (d = !1,
                        0 !== r % 2 && (b == V ? b = y : g == V ? g = y : H == V ? H = y : $ == V ? $ = y : S == V ? S = y : R == V ? R = y : P == V && (P = y)),
                        r++,
                        y = "") : d = !0 : d && (y += f[J]);
                    var I = b + g + H + $ + S + R;
                    (A = hk(I, P) && (!R || R.indexOf(Wl) >= 0) && (!S || S > h)) && H.indexOf(wl[0]) >= 0 && (Tl[wl[0]] = 1),
                    A && H.indexOf(1) >= 0 && (Tl[1] = 1),
                    A && H.indexOf(2) >= 0 && (Tl[2] = 1)
                }
            } else
                A = !0,
                Tl[wl[0]] = Tl[1] = Tl[2] = 1;
            return Tl[Pi] = A,
            A
        }
          , Vh = function() {}
          , xr = Vh.prototype;
        xr.getPointAt = function(y) {
            var F = this.getUtoTmapping(y);
            return this.getPoint(F)
        }
        ,
        xr.getPoints = function(d) {
            d || (d = 5);
            var G, Q = [];
            for (G = 0; d >= G; G++)
                Q.push(this.getPoint(G / d));
            return Q
        }
        ,
        xr.getSpacedPoints = function(Q) {
            Q || (Q = 5);
            var H, W = [];
            for (H = 0; Q >= H; H++)
                W.push(this.getPointAt(H / Q));
            return W
        }
        ,
        xr.getLength = function() {
            var O = this.getLengths();
            return O[O.length - 1]
        }
        ,
        xr.getLengths = function(p) {
            if (p || (p = this.__arcLengthDivisions ? this.__arcLengthDivisions : 200),
            this.cacheArcLengths && this.cacheArcLengths.length == p + 1 && !this.needsUpdate)
                return this.cacheArcLengths;
            this.needsUpdate = !1;
            var g, u, B = [], V = this.getPoint(0), D = 0;
            for (B.push(0),
            u = 1; p >= u; u++)
                g = this.getPoint(u / p),
                D += g.distanceTo(V),
                B.push(D),
                V = g;
            return this.cacheArcLengths = B,
            B
        }
        ,
        xr.getUtoTmapping = function(E, c) {
            var P, o = this.getLengths(), j = 0, H = o.length;
            P = c ? c : E * o[H - 1];
            for (var D, m = 0, Q = H - 1; Q >= m; )
                if (j = M(m + (Q - m) / 2),
                D = o[j] - P,
                0 > D)
                    m = j + 1;
                else {
                    if (!(D > 0)) {
                        Q = j;
                        break
                    }
                    Q = j - 1
                }
            if (j = Q,
            o[j] == P) {
                var L = j / (H - 1);
                return L
            }
            var X = o[j]
              , d = o[j + 1]
              , e = d - X
              , n = (P - X) / e
              , L = (j + n) / (H - 1);
            return L
        }
        ,
        xr.getTangent = function(S) {
            var V = 1e-4
              , L = S - V
              , z = S + V;
            0 > L && (L = 0),
            z > 1 && (z = 1);
            var u = this.getPoint(L)
              , N = this.getPoint(z)
              , p = N.clone().sub(u);
            return p.normalize()
        }
        ,
        xr.getTangentAt = function(e) {
            var O = this.getUtoTmapping(e);
            return this.getTangent(O)
        }
        ,
        Vh.create = function(C, X) {
            return C.prototype = Fd(Vh.prototype),
            C.prototype.getPoint = X,
            C
        }
        ;
        var Yj = function() {
            this.curves = [],
            this.autoClose = !1
        }
          , Lh = Yj.prototype = Fd(xr);
        Lh.add = function(r) {
            this.curves.push(r)
        }
        ,
        Lh.closePath = function() {
            var O = this.curves[0].getPoint(0)
              , T = this.curves[this.curves.length - 1].getPoint(1);
            O.equals(T) || this.curves.push(new ok(T,O))
        }
        ,
        Lh.getPoint = function(L) {
            for (var Q, i, d = L * this.getLength(), p = this.getCurveLengths(), Z = 0; Z < p.length; ) {
                if (p[Z] >= d) {
                    Q = p[Z] - d,
                    i = this.curves[Z];
                    var G = 1 - Q / i.getLength();
                    return i.getPointAt(G)
                }
                Z++
            }
            return null
        }
        ,
        Lh.getLength = function() {
            var K = this.getCurveLengths();
            return K[K.length - 1]
        }
        ,
        Lh.getCurveLengths = function() {
            if (this.cacheLengths && this.cacheLengths.length == this.curves.length)
                return this.cacheLengths;
            var o, m = [], U = 0, h = this.curves.length;
            for (o = 0; h > o; o++)
                U += this.curves[o].getLength(),
                m.push(U);
            return this.cacheLengths = m,
            m
        }
        ,
        Lh.getTransformedPoints = function(u) {
            return this.getPoints(u)
        }
        ,
        Lh.getBoundingBox = function() {
            var S, t, O, i, P, L, A = this.getPoints();
            S = t = Number.NEGATIVE_INFINITY,
            i = P = Number.POSITIVE_INFINITY;
            var x, E, Q, D, q = A[0]instanceof Bq;
            for (D = q ? new Bq : new Bm,
            E = 0,
            Q = A.length; Q > E; E++)
                x = A[E],
                x.x > S && (S = x.x),
                x.x < i && (i = x.x),
                x.y > t && (t = x.y),
                x.y < P && (P = x.y),
                q && (x.z > O && (O = x.z),
                x.z < L && (L = x.z)),
                D.add(x);
            var Z = {
                minX: i,
                minY: P,
                maxX: S,
                maxY: t
            };
            return q && (Z.maxZ = O,
            Z.minZ = L),
            Z
        }
        ;
        var Ni = function(q) {
            Yj.call(this),
            this.actions = [],
            q && this.fromPoints(q)
        }
          , qd = Ni.prototype = Fd(Yj.prototype)
          , hb = "moveTo"
          , Np = "lineTo"
          , rm = "quadraticCurveTo"
          , vn = "bezierCurveTo"
          , mh = "arc"
          , Md = "ellipse";
        qd.fromPoints = function(x) {
            this.moveTo(x[0].x, x[0].y);
            for (var P = 1, k = x.length; k > P; P++)
                this.lineTo(x[P].x, x[P].y)
        }
        ,
        qd.moveTo = function() {
            var b = Array.prototype.slice.call(arguments);
            this.actions.push({
                action: hb,
                args: b
            })
        }
        ,
        qd.lineTo = function(B, j) {
            var v = Array.prototype.slice.call(arguments)
              , z = this.actions[this.actions.length - 1].args
              , Z = z[z.length - 2]
              , y = z[z.length - 1]
              , m = new ok(new Bm(Z,y),new Bm(B,j));
            this.curves.push(m),
            this.actions.push({
                action: Np,
                args: v
            })
        }
        ,
        qd.quadraticCurveTo = function(r, h, F, b) {
            var U = Array.prototype.slice.call(arguments)
              , p = this.actions[this.actions.length - 1].args
              , H = p[p.length - 2]
              , m = p[p.length - 1]
              , v = new Og(new Bm(H,m),new Bm(r,h),new Bm(F,b));
            this.curves.push(v),
            this.actions.push({
                action: rm,
                args: U
            })
        }
        ,
        qd.bezierCurveTo = function(x, $, M, O, a, Y) {
            var h = Array.prototype.slice.call(arguments)
              , K = this.actions[this.actions.length - 1].args
              , o = K[K.length - 2]
              , D = K[K.length - 1]
              , n = new Rg(new Bm(o,D),new Bm(x,$),new Bm(M,O),new Bm(a,Y));
            this.curves.push(n),
            this.actions.push({
                action: vn,
                args: h
            })
        }
        ,
        qd.arc = function(H, v, G, U, O, b) {
            var A = this.actions[this.actions.length - 1].args
              , W = A[A.length - 2]
              , R = A[A.length - 1];
            this.absarc(H + W, v + R, G, U, O, b)
        }
        ,
        qd.absarc = function(E, C, $, F, a, c) {
            this.absellipse(E, C, $, $, F, a, c)
        }
        ,
        qd.ellipse = function(r, m, z, L, I, M, Z) {
            var A = this.actions[this.actions.length - 1].args
              , P = A[A.length - 2]
              , U = A[A.length - 1];
            this.absellipse(r + P, m + U, z, L, I, M, Z)
        }
        ,
        qd.absellipse = function(N, R, E, L, T, f, B) {
            var s = Array.prototype.slice.call(arguments)
              , w = new ih(N,R,E,L,T,f,B);
            this.curves.push(w);
            var X = w.getPoint(1);
            s.push(X.x),
            s.push(X.y),
            this.actions.push({
                action: Md,
                args: s
            })
        }
        ,
        qd.getSpacedPoints = function($) {
            $ || ($ = 40);
            for (var m = [], P = 0; $ > P; P++)
                m.push(this.getPoint(P / $));
            return m
        }
        ,
        qd.getPoints = function(j, m) {
            j = j || 12;
            var J, O, h, X, Y, v, I, s, L, M, G, N, n, r, C, V, w, u, e = [];
            for (J = 0,
            O = this.actions.length; O > J; J++)
                switch (h = this.actions[J],
                X = h.action,
                Y = h.args,
                X) {
                case hb:
                    e.push(new Bm(Y[0],Y[1]));
                    break;
                case Np:
                    e.push(new Bm(Y[0],Y[1]));
                    break;
                case rm:
                    for (v = Y[2],
                    I = Y[3],
                    M = Y[0],
                    G = Y[1],
                    e.length > 0 ? (r = e[e.length - 1],
                    N = r.x,
                    n = r.y) : (r = this.actions[J - 1].args,
                    N = r[r.length - 2],
                    n = r[r.length - 1]),
                    C = 1; j >= C; C++)
                        V = C / j,
                        w = hm.b2(V, N, M, v),
                        u = hm.b2(V, n, G, I),
                        e.push(new Bm(w,u));
                    break;
                case vn:
                    for (v = Y[4],
                    I = Y[5],
                    M = Y[0],
                    G = Y[1],
                    s = Y[2],
                    L = Y[3],
                    e.length > 0 ? (r = e[e.length - 1],
                    N = r.x,
                    n = r.y) : (r = this.actions[J - 1].args,
                    N = r[r.length - 2],
                    n = r[r.length - 1]),
                    C = 1; j >= C; C++)
                        V = C / j,
                        w = hm.b3(V, N, M, s, v),
                        u = hm.b3(V, n, G, L, I),
                        e.push(new Bm(w,u));
                    break;
                case mh:
                    var H, l = Y[0], W = Y[1], i = Y[2], P = Y[3], R = Y[4], o = !!Y[5], Z = R - P, f = 2 * j;
                    for (C = 1; f >= C; C++)
                        V = C / f,
                        o || (V = 1 - V),
                        H = P + V * Z,
                        w = l + i * z(H),
                        u = W + i * E(H),
                        e.push(new Bm(w,u));
                    break;
                case Md:
                    var H, l = Y[0], W = Y[1], q = Y[2], D = Y[3], P = Y[4], R = Y[5], o = !!Y[6], Z = R - P, f = 2 * j;
                    for (C = 1; f >= C; C++)
                        V = C / f,
                        o || (V = 1 - V),
                        H = P + V * Z,
                        w = l + q * z(H),
                        u = W + D * E(H),
                        e.push(new Bm(w,u))
                }
            var F = e[e.length - 1]
              , d = 1e-10;
            return t(F.x - e[0].x) < d && t(F.y - e[0].y) < d && e.splice(e.length - 1, 1),
            m && e.push(e[0]),
            e
        }
        ,
        qd.toShapes = function(b, d) {
            function K(F) {
                var x, W, d, w, f, T = [], C = new Ni;
                for (x = 0,
                W = F.length; W > x; x++)
                    d = F[x],
                    f = d.args,
                    w = d.action,
                    w == hb && 0 != C.actions.length && (T.push(C),
                    C = new Ni),
                    C[w].apply(C, f);
                return 0 != C.actions.length && T.push(C),
                T
            }
            function X(o) {
                for (var K = [], $ = 0, Z = o.length; Z > $; $++) {
                    var J = o[$]
                      , r = new yc;
                    r.actions = J.actions,
                    r.curves = J.curves,
                    K.push(r)
                }
                return K
            }
            function $(I, S) {
                for (var B = 1e-10, M = S.length, u = !1, U = M - 1, i = 0; M > i; U = i++) {
                    var V = S[U]
                      , L = S[i]
                      , l = L.x - V.x
                      , G = L.y - V.y;
                    if (t(G) > B) {
                        if (0 > G && (V = S[i],
                        l = -l,
                        L = S[U],
                        G = -G),
                        I.y < V.y || I.y > L.y)
                            continue;
                        if (I.y == V.y) {
                            if (I.x == V.x)
                                return !0
                        } else {
                            var P = G * (I.x - V.x) - l * (I.y - V.y);
                            if (0 == P)
                                return !0;
                            if (0 > P)
                                continue;
                            u = !u
                        }
                    } else {
                        if (I.y != V.y)
                            continue;
                        if (L.x <= I.x && I.x <= V.x || V.x <= I.x && I.x <= L.x)
                            return !0
                    }
                }
                return u
            }
            var p = K(this.actions);
            if (0 == p.length)
                return [];
            if (d === !0)
                return X(p);
            var i, c, l, C = [];
            if (1 == p.length)
                return c = p[0],
                l = new yc,
                l.actions = c.actions,
                l.curves = c.curves,
                C.push(l),
                C;
            var g = !hm.isClockWise(p[0].getPoints());
            g = b ? !g : g;
            var S, j = [], R = [], f = [], u = 0;
            R[u] = F,
            f[u] = [];
            var e, G;
            for (e = 0,
            G = p.length; G > e; e++)
                c = p[e],
                S = c.getPoints(),
                i = hm.isClockWise(S),
                i = b ? !i : i,
                i ? (!g && R[u] && u++,
                R[u] = {
                    s: new yc,
                    p: S
                },
                R[u].s.actions = c.actions,
                R[u].s.curves = c.curves,
                g && u++,
                f[u] = []) : f[u].push({
                    h: c,
                    p: S[0]
                });
            if (!R[0])
                return X(p);
            if (R.length > 1) {
                for (var w = !1, Y = [], v = 0, I = R.length; I > v; v++)
                    j[v] = [];
                for (var v = 0, I = R.length; I > v; v++) {
                    R[v];
                    for (var a = f[v], m = 0; m < a.length; m++) {
                        for (var P = a[m], A = !0, Q = 0; Q < R.length; Q++)
                            $(P.p, R[Q].p) && (v != Q && Y.push({
                                froms: v,
                                tos: Q,
                                hole: m
                            }),
                            A ? (A = !1,
                            j[Q].push(P)) : w = !0);
                        A && j[v].push(P)
                    }
                }
                Y.length > 0 && (w || (f = j))
            }
            var T, W, N;
            for (e = 0,
            G = R.length; G > e; e++)
                for (l = R[e].s,
                C.push(l),
                T = f[e],
                W = 0,
                N = T.length; N > W; W++)
                    l.holes.push(T[W].h);
            return C
        }
        ;
        var yc = function() {
            Ni.apply(this, arguments),
            this.holes = []
        }
          , xk = yc.prototype = Fd(qd);
        xk.getPointsHoles = function(f) {
            var Q, g = this.holes.length, G = [];
            for (Q = 0; g > Q; Q++)
                G[Q] = this.holes[Q].getTransformedPoints(f);
            return G
        }
        ,
        xk.extractAllPoints = function(M) {
            return {
                shape: this.getTransformedPoints(M),
                holes: this.getPointsHoles(M)
            }
        }
        ,
        xk.extractPoints = function(G) {
            return this.extractAllPoints(G)
        }
        ;
        var hm = {
            triangulateShape: function(E, I) {
                function X(B, T, G) {
                    return B.x != T.x ? B.x < T.x ? B.x <= G.x && G.x <= T.x : T.x <= G.x && G.x <= B.x : B.y < T.y ? B.y <= G.y && G.y <= T.y : T.y <= G.y && G.y <= B.y
                }
                function U(e, j, M, h, E) {
                    var n = 1e-10
                      , W = j.x - e.x
                      , H = j.y - e.y
                      , s = h.x - M.x
                      , G = h.y - M.y
                      , L = e.x - M.x
                      , z = e.y - M.y
                      , g = H * s - W * G
                      , Q = H * L - W * z;
                    if (t(g) > n) {
                        var x;
                        if (g > 0) {
                            if (0 > Q || Q > g)
                                return [];
                            if (x = G * L - s * z,
                            0 > x || x > g)
                                return []
                        } else {
                            if (Q > 0 || g > Q)
                                return [];
                            if (x = G * L - s * z,
                            x > 0 || g > x)
                                return []
                        }
                        if (0 == x)
                            return !E || 0 != Q && Q != g ? [e] : [];
                        if (x == g)
                            return !E || 0 != Q && Q != g ? [j] : [];
                        if (0 == Q)
                            return [M];
                        if (Q == g)
                            return [h];
                        var p = x / g;
                        return [{
                            x: e.x + p * W,
                            y: e.y + p * H
                        }]
                    }
                    if (0 != Q || G * L != s * z)
                        return [];
                    var $ = 0 == W && 0 == H
                      , I = 0 == s && 0 == G;
                    if ($ && I)
                        return e.x != M.x || e.y != M.y ? [] : [e];
                    if ($)
                        return X(M, h, e) ? [e] : [];
                    if (I)
                        return X(e, j, M) ? [M] : [];
                    var b, v, u, U, O, D, d, _;
                    return 0 != W ? (e.x < j.x ? (b = e,
                    u = e.x,
                    v = j,
                    U = j.x) : (b = j,
                    u = j.x,
                    v = e,
                    U = e.x),
                    M.x < h.x ? (O = M,
                    d = M.x,
                    D = h,
                    _ = h.x) : (O = h,
                    d = h.x,
                    D = M,
                    _ = M.x)) : (e.y < j.y ? (b = e,
                    u = e.y,
                    v = j,
                    U = j.y) : (b = j,
                    u = j.y,
                    v = e,
                    U = e.y),
                    M.y < h.y ? (O = M,
                    d = M.y,
                    D = h,
                    _ = h.y) : (O = h,
                    d = h.y,
                    D = M,
                    _ = M.y)),
                    d >= u ? d > U ? [] : U == d ? E ? [] : [O] : _ >= U ? [O, v] : [O, D] : u > _ ? [] : u == _ ? E ? [] : [b] : _ >= U ? [b, v] : [b, D]
                }
                function o(l, s, B, S) {
                    var w = 1e-10
                      , I = s.x - l.x
                      , e = s.y - l.y
                      , C = B.x - l.x
                      , J = B.y - l.y
                      , b = S.x - l.x
                      , D = S.y - l.y
                      , Y = I * J - e * C
                      , a = I * D - e * b;
                    if (t(Y) > w) {
                        var T = b * J - D * C;
                        return Y > 0 ? a >= 0 && T >= 0 : a >= 0 || T >= 0
                    }
                    return a > 0
                }
                function q(v, h) {
                    function T(S, Q) {
                        var f = l.length - 1
                          , O = S - 1;
                        0 > O && (O = f);
                        var t = S + 1;
                        t > f && (t = 0);
                        var Y = o(l[S], l[O], l[t], $[Q]);
                        if (!Y)
                            return !1;
                        var P = $.length - 1
                          , i = Q - 1;
                        0 > i && (i = P);
                        var H = Q + 1;
                        return H > P && (H = 0),
                        Y = o($[Q], $[i], $[H], l[S]),
                        Y ? !0 : !1
                    }
                    function A(P, q) {
                        var w, T, u;
                        for (w = 0; w < l.length; w++)
                            if (T = w + 1,
                            T %= l.length,
                            u = U(P, q, l[w], l[T], !0),
                            u.length > 0)
                                return !0;
                        return !1
                    }
                    function t(q, W) {
                        var G, n, d, m, $;
                        for (G = 0; G < x.length; G++)
                            for (n = h[x[G]],
                            d = 0; d < n.length; d++)
                                if (m = d + 1,
                                m %= n.length,
                                $ = U(q, W, n[d], n[m], !0),
                                $.length > 0)
                                    return !0;
                        return !1
                    }
                    for (var $, H, W, Z, G, Q, D, N, p, u, O, l = v.concat(), x = [], P = [], E = 0, r = h.length; r > E; E++)
                        x.push(E);
                    for (var y = 0, d = 2 * x.length; x.length > 0 && (d--,
                    !(0 > d)); )
                        for (W = y; W < l.length; W++) {
                            Z = l[W],
                            H = -1;
                            for (var E = 0; E < x.length; E++)
                                if (Q = x[E],
                                D = Z.x + ":" + Z.y + ":" + Q,
                                P[D] === F) {
                                    $ = h[Q];
                                    for (var k = 0; k < $.length; k++)
                                        if (G = $[k],
                                        T(W, k) && !A(Z, G) && !t(Z, G)) {
                                            H = k,
                                            x.splice(E, 1),
                                            N = l.slice(0, W + 1),
                                            p = l.slice(W),
                                            u = $.slice(H),
                                            O = $.slice(0, H + 1),
                                            l = N.concat(u).concat(O).concat(p),
                                            y = W;
                                            break
                                        }
                                    if (H >= 0)
                                        break;
                                    P[D] = !0
                                }
                            if (H >= 0)
                                break
                        }
                    return l
                }
                for (var M, c, h, N, L, Z, Q = {}, S = E.concat(), J = 0, T = I.length; T > J; J++)
                    Array.prototype.push.apply(S, I[J]);
                for (M = 0,
                c = S.length; c > M; M++)
                    L = S[M].x + ":" + S[M].y,
                    Q[L] !== F,
                    Q[L] = M;
                var w = q(E, I)
                  , G = Fh.Triangulate(w, !1);
                for (M = 0,
                c = G.length; c > M; M++)
                    for (N = G[M],
                    h = 0; 3 > h; h++)
                        L = N[h].x + ":" + N[h].y,
                        Z = Q[L],
                        Z !== F && (N[h] = Z);
                return G.concat()
            },
            isClockWise: function(I) {
                return Fh.Triangulate.area(I) < 0
            },
            b2p0: function(p, r) {
                var b = 1 - p;
                return b * b * r
            },
            b2p1: function(V, r) {
                return 2 * (1 - V) * V * r
            },
            b2p2: function(l, u) {
                return l * l * u
            },
            b2: function(Z, D, q, G) {
                return this.b2p0(Z, D) + this.b2p1(Z, q) + this.b2p2(Z, G)
            },
            b3p0: function(o, L) {
                var Y = 1 - o;
                return Y * Y * Y * L
            },
            b3p1: function(T, P) {
                var w = 1 - T;
                return 3 * w * w * T * P
            },
            b3p2: function(a, W) {
                var z = 1 - a;
                return 3 * z * a * a * W
            },
            b3p3: function(D, A) {
                return D * D * D * A
            },
            b3: function(e, h, Q, v, Y) {
                return this.b3p0(e, h) + this.b3p1(e, Q) + this.b3p2(e, v) + this.b3p3(e, Y)
            }
        }
          , Fh = {
            faces: {},
            face: "",
            weight: "normal",
            style: "normal",
            size: 150,
            divisions: 10,
            getDefaultFont: function() {
                var R = m.keys(this.faces);
                return R.length ? R[0] : null
            },
            getFace: function() {
                try {
                    return this.faces[this.face][this.weight][this.style]
                } catch (u) {
                    throw "The font " + this.face + " with " + this.weight + " weight and " + this.style + " style is missing."
                }
            },
            loadFace: function(e) {
                var R = e.familyName.toLowerCase()
                  , d = this;
                return d.faces[R] = d.faces[R] || {},
                d.faces[R][e.cssFontWeight] = d.faces[R][e.cssFontWeight] || {},
                d.faces[R][e.cssFontWeight][e.cssFontStyle] = e,
                e
            },
            drawText: function(T) {
                var N, q = this.getFace(), j = this.size / q.resolution, R = 0, z = String(T).split(""), l = z.length, L = [];
                for (N = 0; l > N; N++) {
                    var S = new Ni
                      , F = this.extractGlyphPoints(z[N], q, j, R, S);
                    F && (R += F.offset * this.spacing,
                    L.push(F.path))
                }
                var Y = R / 2;
                return {
                    paths: L,
                    offset: Y
                }
            },
            extractGlyphPoints: function(u, R, d, p, Q) {
                var E, o, Z, L, B, _, G, e, h, U, O, x, D, I, z, n, V, b, J, W = [], A = R.glyphs[u] || R.glyphs["?"];
                if (A) {
                    if (A.o)
                        for (L = A._cachedOutline || (A._cachedOutline = A.o.split(" ")),
                        _ = L.length,
                        G = d,
                        e = d,
                        E = 0; _ > E; )
                            switch (B = L[E++]) {
                            case "m":
                                h = L[E++] * G + p,
                                U = L[E++] * e,
                                Q.moveTo(h, U);
                                break;
                            case "l":
                                h = L[E++] * G + p,
                                U = L[E++] * e,
                                Q.lineTo(h, U);
                                break;
                            case "q":
                                if (O = L[E++] * G + p,
                                x = L[E++] * e,
                                z = L[E++] * G + p,
                                n = L[E++] * e,
                                Q.quadraticCurveTo(z, n, O, x),
                                J = W[W.length - 1])
                                    for (D = J.x,
                                    I = J.y,
                                    o = 1,
                                    Z = this.divisions; Z >= o; o++) {
                                        var H = o / Z;
                                        hm.b2(H, D, z, O),
                                        hm.b2(H, I, n, x)
                                    }
                                break;
                            case "b":
                                if (O = L[E++] * G + p,
                                x = L[E++] * e,
                                z = L[E++] * G + p,
                                n = L[E++] * e,
                                V = L[E++] * G + p,
                                b = L[E++] * e,
                                Q.bezierCurveTo(z, n, V, b, O, x),
                                J = W[W.length - 1])
                                    for (D = J.x,
                                    I = J.y,
                                    o = 1,
                                    Z = this.divisions; Z >= o; o++) {
                                        var H = o / Z;
                                        hm.b3(H, D, z, V, O),
                                        hm.b3(H, I, n, b, x)
                                    }
                            }
                    return {
                        offset: A.ha * d,
                        path: Q
                    }
                }
            }
        };
        Fh.generateShapes = function(A, X) {
            X = X || {};
            var V = X.font;
            if (V === F && (V = Fh.getDefaultFont(),
            !V))
                return console.log("There's no valid font face, use ht.Default.loadFontFace to load font first."),
                [];
            var h = X.size !== F ? X.size : 1
              , _ = X.curveSegments !== F ? X.curveSegments : 4
              , D = X.spacing !== F ? X.spacing : 1
              , d = X.weight !== F ? X.weight : "normal"
              , z = X.style !== F ? X.style : "normal";
            Fh.size = h,
            Fh.divisions = _,
            Fh.face = V,
            Fh.weight = d,
            Fh.style = z,
            Fh.spacing = D;
            for (var U = Fh.drawText(A), E = U.paths, e = [], l = 0, f = E.length; f > l; l++)
                Array.prototype.push.apply(e, E[l].toShapes());
            return e
        }
        ,
        function(E) {
            var H = 1e-10
              , p = function(d, I) {
                var W = d.length;
                if (3 > W)
                    return null;
                var t, n, x, K = [], z = [], q = [];
                if (L(d) > 0)
                    for (n = 0; W > n; n++)
                        z[n] = n;
                else
                    for (n = 0; W > n; n++)
                        z[n] = W - 1 - n;
                var U = W
                  , G = 2 * U;
                for (n = U - 1; U > 2; ) {
                    if (G-- <= 0)
                        return I ? q : K;
                    if (t = n,
                    t >= U && (t = 0),
                    n = t + 1,
                    n >= U && (n = 0),
                    x = n + 1,
                    x >= U && (x = 0),
                    u(d, t, n, x, U, z)) {
                        var r, w, o, X, T;
                        for (r = z[t],
                        w = z[n],
                        o = z[x],
                        K.push([d[r], d[w], d[o]]),
                        q.push([z[t], z[n], z[x]]),
                        X = n,
                        T = n + 1; U > T; X++,
                        T++)
                            z[X] = z[T];
                        U--,
                        G = 2 * U
                    }
                }
                return I ? q : K
            }
              , L = function(S) {
                for (var m = S.length, g = 0, z = m - 1, C = 0; m > C; z = C++)
                    g += S[z].x * S[C].y - S[C].x * S[z].y;
                return .5 * g
            }
              , u = function(k, Q, A, U, S, q) {
                var V, g, G, L, s, K, O, B, t;
                if (g = k[q[Q]].x,
                G = k[q[Q]].y,
                L = k[q[A]].x,
                s = k[q[A]].y,
                K = k[q[U]].x,
                O = k[q[U]].y,
                H > (L - g) * (O - G) - (s - G) * (K - g))
                    return !1;
                var a, n, N, j, w, W, F, c, R, i, $, d, Z, u, M;
                for (a = K - L,
                n = O - s,
                N = g - K,
                j = G - O,
                w = L - g,
                W = s - G,
                V = 0; S > V; V++)
                    if (B = k[q[V]].x,
                    t = k[q[V]].y,
                    !(B === g && t === G || B === L && t === s || B === K && t === O) && (F = B - g,
                    c = t - G,
                    R = B - L,
                    i = t - s,
                    $ = B - K,
                    d = t - O,
                    M = a * i - n * R,
                    Z = w * c - W * F,
                    u = N * d - j * $,
                    M >= -H && u >= -H && Z >= -H))
                        return !1;
                return !0
            };
            return E.Triangulate = p,
            E.Triangulate.area = L,
            E
        }(Fh),
        q._typeface_js = {
            faces: Fh.faces,
            loadFace: Fh.loadFace
        };
        var cf = function() {
            this.vertices = [],
            this.faces = [],
            this.faceVertexUvs = [[]]
        }
          , ni = cf.prototype = {
            constructor: cf,
            computeFaceNormals: function() {
                for (var L = new Bq, t = new Bq, I = 0, T = this.faces.length; T > I; I++) {
                    var S = this.faces[I]
                      , M = this.vertices[S.a]
                      , $ = this.vertices[S.b]
                      , Y = this.vertices[S.c];
                    L.subVectors(Y, $),
                    t.subVectors(M, $),
                    L.cross(t),
                    L.normalize(),
                    S.normal.copy(L)
                }
            },
            computeVertexNormals: function(j) {
                var t, U, R, O, $, h;
                for (h = new Array(this.vertices.length),
                t = 0,
                U = this.vertices.length; U > t; t++)
                    h[t] = new Bq;
                if (j) {
                    var e, S, A, l = new Bq, z = new Bq;
                    for (R = 0,
                    O = this.faces.length; O > R; R++)
                        $ = this.faces[R],
                        e = this.vertices[$.a],
                        S = this.vertices[$.b],
                        A = this.vertices[$.c],
                        l.subVectors(A, S),
                        z.subVectors(e, S),
                        l.cross(z),
                        h[$.a].add(l),
                        h[$.b].add(l),
                        h[$.c].add(l)
                } else
                    for (R = 0,
                    O = this.faces.length; O > R; R++)
                        $ = this.faces[R],
                        h[$.a].add($.normal),
                        h[$.b].add($.normal),
                        h[$.c].add($.normal);
                for (t = 0,
                U = this.vertices.length; U > t; t++)
                    h[t].normalize();
                for (R = 0,
                O = this.faces.length; O > R; R++)
                    $ = this.faces[R],
                    $.vertexNormals[0] = h[$.a].clone(),
                    $.vertexNormals[1] = h[$.b].clone(),
                    $.vertexNormals[2] = h[$.c].clone()
            },
            mergeVertices: function() {
                var V, j, O, G, E, T, X, A, Z = {}, u = [], K = [], M = 4, g = y(10, M);
                for (O = 0,
                G = this.vertices.length; G > O; O++)
                    V = this.vertices[O],
                    j = D(V.x * g) + "_" + D(V.y * g) + "_" + D(V.z * g),
                    Z[j] === F ? (Z[j] = O,
                    u.push(this.vertices[O]),
                    K[O] = u.length - 1) : K[O] = K[Z[j]];
                var f = [];
                for (O = 0,
                G = this.faces.length; G > O; O++) {
                    E = this.faces[O],
                    E.a = K[E.a],
                    E.b = K[E.b],
                    E.c = K[E.c],
                    T = [E.a, E.b, E.c];
                    for (var N = 0; 3 > N; N++)
                        if (T[N] == T[(N + 1) % 3]) {
                            f.push(O);
                            break
                        }
                }
                for (O = f.length - 1; O >= 0; O--) {
                    var W = f[O];
                    for (this.faces.splice(W, 1),
                    X = 0,
                    A = this.faceVertexUvs.length; A > X; X++)
                        this.faceVertexUvs[X].splice(W, 1)
                }
                var r = this.vertices.length - u.length;
                return this.vertices = u,
                r
            }
        }
          , ih = function(d, K, B, $, m, E, c) {
            this.aX = d,
            this.aY = K,
            this.xRadius = B,
            this.yRadius = $,
            this.aStartAngle = m,
            this.aEndAngle = E,
            this.aClockwise = c
        };
        ih.prototype = Fd(xr),
        ih.prototype.getPoint = function(P) {
            var w, A = this.aEndAngle - this.aStartAngle;
            0 > A && (A += u),
            A > u && (A -= u),
            w = this.aClockwise === !0 ? this.aEndAngle + (1 - P) * (u - A) : this.aStartAngle + P * A;
            var q = this.aX + this.xRadius * z(w)
              , T = this.aY + this.yRadius * E(w);
            return new Bm(q,T)
        }
        ;
        var ok = function(v, G) {
            this.v1 = v,
            this.v2 = G
        }
          , aq = ok.prototype = Fd(xr);
        aq.getPoint = function(V) {
            var p = this.v2.clone().sub(this.v1);
            return p.multiplyScalar(V).add(this.v1),
            p
        }
        ,
        aq.getPointAt = function(s) {
            return this.getPoint(s)
        }
        ,
        aq.getTangent = function() {
            var m = this.v2.clone().sub(this.v1);
            return m.normalize()
        }
        ;
        var Og = function(c, Q, R) {
            this.v0 = c,
            this.v1 = Q,
            this.v2 = R
        };
        Og.prototype = Fd(xr),
        Og.prototype.getPoint = function(H) {
            var $, W;
            return $ = hm.b2(H, this.v0.x, this.v1.x, this.v2.x),
            W = hm.b2(H, this.v0.y, this.v1.y, this.v2.y),
            new Bm($,W)
        }
        ;
        var Rg = function(_, T, r, k) {
            this.v0 = _,
            this.v1 = T,
            this.v2 = r,
            this.v3 = k
        };
        Rg.prototype = Fd(xr),
        Rg.prototype.getPoint = function(q) {
            var e, y;
            return e = hm.b3(q, this.v0.x, this.v1.x, this.v2.x, this.v3.x),
            y = hm.b3(q, this.v0.y, this.v1.y, this.v2.y, this.v3.y),
            new Bm(e,y)
        }
        ,
        Vh.create(function(f, Z) {
            this.v1 = f,
            this.v2 = Z
        }, function(u) {
            var L = new Bq;
            return L.subVectors(this.v2, this.v1),
            L.multiplyScalar(u),
            L.add(this.v1),
            L
        });
        var Pm = Vh.create(function(N, A, R) {
            this.v0 = N,
            this.v1 = A,
            this.v2 = R
        }, function(X) {
            var v, c, K;
            return v = hm.b2(X, this.v0.x, this.v1.x, this.v2.x),
            c = hm.b2(X, this.v0.y, this.v1.y, this.v2.y),
            K = hm.b2(X, this.v0.z, this.v1.z, this.v2.z),
            new Bq(v,c,K)
        })
          , Gi = Vh.create(function(r, q, u, P) {
            this.v0 = r,
            this.v1 = q,
            this.v2 = u,
            this.v3 = P
        }, function(K) {
            var y, O, H;
            return y = hm.b3(K, this.v0.x, this.v1.x, this.v2.x, this.v3.x),
            O = hm.b3(K, this.v0.y, this.v1.y, this.v2.y, this.v3.y),
            H = hm.b3(K, this.v0.z, this.v1.z, this.v2.z, this.v3.z),
            new Bq(y,O,H)
        })
          , rs = function(G, H, O, g, b, I, W, v) {
            cf.call(this),
            g = g !== F ? g : .5,
            b = b !== F ? b : .5,
            v = v !== F ? v : 1,
            G = G || 8,
            I = I || 0,
            W = W || u;
            var U, Z, h = 1, M = v / 2, m = [], p = [], V = this.vertices, K = this.faces, $ = this.faceVertexUvs;
            for (Z = 0; h >= Z; Z++) {
                var _ = []
                  , l = []
                  , T = Z / h
                  , X = T * (b - g) + g;
                for (U = 0; G >= U; U++) {
                    var Q = U / G
                      , C = new Bq
                      , s = -(Q * W + I);
                    C.z = X * E(s),
                    C.y = -T * v + M,
                    C.x = X * z(s),
                    V.push(C),
                    _.push(V.length - 1),
                    l.push(new Bm(Q,T))
                }
                m.push(_),
                p.push(l)
            }
            var R, t, n = (b - g) / v;
            for (U = 0; G > U; U++)
                for (0 !== g ? (R = V[m[0][U]].clone(),
                t = V[m[0][U + 1]].clone()) : (R = V[m[1][U]].clone(),
                t = V[m[1][U + 1]].clone()),
                R.setY(r(R.x * R.x + R.z * R.z) * n).normalize(),
                t.setY(r(t.x * t.x + t.z * t.z) * n).normalize(),
                Z = 0; h > Z; Z++) {
                    var w = m[Z][U]
                      , D = m[Z + 1][U]
                      , y = m[Z + 1][U + 1]
                      , i = m[Z][U + 1]
                      , x = R.clone()
                      , j = R.clone()
                      , Y = t.clone()
                      , o = t.clone()
                      , J = p[Z][U].clone()
                      , S = p[Z + 1][U].clone()
                      , c = p[Z + 1][U + 1].clone()
                      , q = p[Z][U + 1].clone();
                    K.push(new Gd(w,D,i,[x, j, o])),
                    $[0].push([J, S, q]),
                    K.push(new Gd(D,y,i,[j.clone(), Y, o.clone()])),
                    $[0].push([S.clone(), c, q.clone()])
                }
            if (H && g > 0)
                for (this.vertices.push(new Bq(0,M,0)),
                U = 0; G > U; U++) {
                    var w = m[0][U]
                      , D = m[0][U + 1]
                      , y = this.vertices.length - 1
                      , x = new Bq(0,1,0)
                      , j = new Bq(0,1,0)
                      , Y = new Bq(0,1,0)
                      , J = p[0][U].clone()
                      , S = p[0][U + 1].clone()
                      , c = new Bm(S.x,0);
                    K.push(new Gd(w,D,y,[x, j, Y],null,1));
                    var N = U / G * u
                      , d = z(N)
                      , e = E(N)
                      , k = (U + 1) / G * u
                      , L = z(k)
                      , A = E(k);
                    $[0].push([new Bm(.5 + .5 * d,.5 + .5 * e), new Bm(.5 + .5 * L,.5 + .5 * A), new Bm(.5,.5)])
                }
            if (O && b > 0)
                for (this.vertices.push(new Bq(0,-M,0)),
                U = 0; G > U; U++) {
                    var w = m[Z][U + 1]
                      , D = m[Z][U]
                      , y = V.length - 1
                      , x = new Bq(0,-1,0)
                      , j = new Bq(0,-1,0)
                      , Y = new Bq(0,-1,0)
                      , J = p[Z][U + 1].clone()
                      , S = p[Z][U].clone();
                    K.push(new Gd(w,D,y,[x, j, Y],null,2));
                    var N = U / G * u
                      , d = z(N)
                      , e = E(N)
                      , k = (U + 1) / G * u
                      , L = z(k)
                      , A = E(k);
                    $[0].push([new Bm(.5 + .5 * L,.5 - .5 * A), new Bm(.5 + .5 * d,.5 - .5 * e), new Bm(.5,.5)])
                }
        };
        rs.prototype = Fd(ni);
        var Yd = function($, e, I, N, o, s, k) {
            cf.call(this),
            k = k || .5,
            $ = $ || 16,
            e = e || 16,
            I = (I !== F ? I : 0) - L,
            N = N !== F ? N : u,
            o = o !== F ? o : 0,
            s = s !== F ? s : L;
            var y, x, D = [], H = [], g = this.vertices, B = this.faces, i = this.faceVertexUvs;
            for (x = 0; e >= x; x++) {
                var T = []
                  , l = [];
                for (y = 0; $ >= y; y++) {
                    var A = y / $
                      , f = x / e
                      , O = new Bq;
                    O.x = -k * z(I + A * N) * E(o + f * s),
                    O.y = k * z(o + f * s),
                    O.z = k * E(I + A * N) * E(o + f * s),
                    g.push(O),
                    T.push(g.length - 1),
                    l.push(new Bm(A,f))
                }
                D.push(T),
                H.push(l)
            }
            for (x = 0; e > x; x++)
                for (y = 0; $ > y; y++) {
                    var j = D[x][y + 1]
                      , Q = D[x][y]
                      , K = D[x + 1][y]
                      , V = D[x + 1][y + 1]
                      , Z = g[j].clone().normalize()
                      , J = g[Q].clone().normalize()
                      , P = g[K].clone().normalize()
                      , n = g[V].clone().normalize()
                      , C = H[x][y + 1].clone()
                      , p = H[x][y].clone()
                      , h = H[x + 1][y].clone()
                      , S = H[x + 1][y + 1].clone();
                    t(g[j].y) === k ? (C.x = (C.x + p.x) / 2,
                    B.push(new Gd(j,K,V,[Z, P, n])),
                    i[0].push([C, h, S])) : t(g[K].y) === k ? (h.x = (h.x + S.x) / 2,
                    B.push(new Gd(j,Q,K,[Z, J, P])),
                    i[0].push([C, p, h])) : (B.push(new Gd(j,Q,V,[Z, J, n])),
                    i[0].push([C, p, S]),
                    B.push(new Gd(Q,K,V,[J.clone(), P, n.clone()])),
                    i[0].push([p.clone(), h, S.clone()]))
                }
        };
        Yd.prototype = Fd(ni);
        var Tn = function(q, B, H, k, b, m) {
            cf.call(this),
            q = q || .33,
            B = B || .17,
            k = k || 8,
            H = H || 6,
            b = b || 0,
            m = m || u;
            for (var W = new Bq, A = [], S = [], N = 0; k >= N; N++)
                for (var h = N / k * u + L, g = 0; H >= g; g++) {
                    var V = g / H * m + b;
                    W.x = q * z(V),
                    W.z = -q * E(V);
                    var Y = new Bq
                      , J = q + B * z(h);
                    Y.x = J * z(V),
                    Y.z = -J * E(V),
                    Y.y = B * E(h),
                    this.vertices.push(Y),
                    A.push(new Bm(g / H,1 - N / k)),
                    S.push(Y.clone().sub(W).normalize())
                }
            for (var N = 1; k >= N; N++)
                for (var g = 1; H >= g; g++) {
                    var d = (H + 1) * N + g - 1
                      , w = (H + 1) * (N - 1) + g - 1
                      , p = (H + 1) * (N - 1) + g
                      , $ = (H + 1) * N + g
                      , s = new Gd(d,w,$,[S[d].clone(), S[w].clone(), S[$].clone()]);
                    this.faces.push(s),
                    this.faceVertexUvs[0].push([A[d].clone(), A[w].clone(), A[$].clone()]),
                    s = new Gd(w,p,$,[S[w].clone(), S[p].clone(), S[$].clone()]),
                    this.faces.push(s),
                    this.faceVertexUvs[0].push([A[w].clone(), A[p].clone(), A[$].clone()])
                }
            this.computeFaceNormals()
        };
        Tn.prototype = Fd(ni);
        var sl = function(F, M, R) {
            return F ? (cf.call(this),
            F = F instanceof Array ? F : [F],
            this.addShapeList(F, M),
            M.convertYZ !== !1 && oj(this, R),
            this.computeFaceNormals(),
            void 0) : (F = [],
            void 0)
        }
          , ic = sl.prototype = Fd(cf.prototype);
        ic.addShapeList = function(x, p) {
            for (var w = x.length, $ = 0; w > $; $++) {
                var z = x[$];
                this.addShape(z, p)
            }
        }
        ,
        ic.addShape = function($, S) {
            function x() {
                if (S.bottom)
                    for (var D = 0; W > D; D++)
                        H = M[D],
                        u(H[2], H[1], H[0], !0);
                if (S.top)
                    for (D = 0; W > D; D++)
                        H = M[D],
                        u(H[0] + h * O, H[1] + h * O, H[2] + h * O, !1)
            }
            function E() {
                var w = 0;
                for (D(e, w),
                w += e.length,
                j = 0,
                k = d.length; k > j; j++)
                    G = d[j],
                    D(G, w),
                    w += G.length
            }
            function D(K, p) {
                for (var A, B, y = K.length; --y >= 0; ) {
                    A = y,
                    B = y - 1,
                    0 > B && (B = K.length - 1);
                    var M = 0
                      , v = O;
                    for (M = 0; v > M; M++) {
                        var E = h * M
                          , g = h * (M + 1)
                          , r = p + A + E
                          , i = p + B + E
                          , x = p + B + g
                          , J = p + A + g;
                        Y(r, i, x, J, K, M, v, A, B)
                    }
                }
            }
            function C(I, n, p) {
                U.vertices.push(new Bq(I,n,p))
            }
            function u(G, K, n, j) {
                G += w,
                K += w,
                n += w,
                U.faces.push(new Gd(G,K,n,null,null,j ? 2 : 1));
                var d = j ? z.generateBottomUV(U, $, S, G, K, n) : z.generateTopUV(U, $, S, G, K, n);
                U.faceVertexUvs[0].push(d)
            }
            function Y(f, B, L, j, Y, t, R, c, a) {
                f += w,
                B += w,
                L += w,
                j += w,
                U.faces.push(new Gd(f,B,j)),
                U.faces.push(new Gd(B,L,j));
                var o = z.generateSideWallUV(U, $, Y, S, f, B, L, j, t, R, c, a);
                U.faceVertexUvs[0].push([o[0], o[1], o[3]]),
                U.faceVertexUvs[0].push([o[1], o[2], o[3]])
            }
            var s, Z, n, I, c, J = S.amount, N = S.curveSegments || gm, O = S.steps || 1, b = S.extrudePath, r = !1, z = new ab(S.repeatUVLength);
            b && (s = b.getSpacedPoints(O),
            r = !0,
            Z = S.frames !== F ? S.frames : new tl.FrenetFrames(b,O,!1),
            n = new Bq,
            I = new Bq,
            c = new Bq);
            var G, j, k, U = this, w = this.vertices.length, L = $.extractPoints(N), y = L.shape, d = L.holes, o = !hm.isClockWise(y);
            if (o) {
                for (y = y.reverse(),
                j = 0,
                k = d.length; k > j; j++)
                    G = d[j],
                    hm.isClockWise(G) && (d[j] = G.reverse());
                o = !1
            }
            var M = hm.triangulateShape(y, d)
              , e = y;
            for (j = 0,
            k = d.length; k > j; j++)
                G = d[j],
                y = y.concat(G);
            for (var l, H, h = y.length, W = M.length, t = 0; h > t; t++)
                l = y[t],
                r ? (I.copy(Z.normals[0]).multiplyScalar(l.x),
                n.copy(Z.binormals[0]).multiplyScalar(l.y),
                c.copy(s[0]).add(I).add(n),
                C(c.x, c.y, c.z)) : C(l.x, l.y, 0);
            var T;
            for (T = 1; O >= T; T++)
                for (t = 0; h > t; t++)
                    l = y[t],
                    r ? (I.copy(Z.normals[T]).multiplyScalar(l.x),
                    n.copy(Z.binormals[T]).multiplyScalar(l.y),
                    c.copy(s[T]).add(I).add(n),
                    C(c.x, c.y, c.z)) : C(l.x, l.y, J / O * T);
            x(),
            E()
        }
        ;
        var tl = function(n, D, x, l, i) {
            function b(Y, r, F) {
                return c.vertices.push(new Bq(Y,r,F)) - 1
            }
            cf.call(this),
            D = D || 64,
            x = x || 1,
            l = l || 8,
            i = i || !1;
            var _, p, N, O, J, k, A, X, g, Y, B, K, r, L, P, o, s, M, j, d, C = [], c = this, f = D + 1, G = new Bq, H = new tl.FrenetFrames(n,D,i), W = H.tangents, Z = H.normals, S = H.binormals;
            for (this.tangents = W,
            this.normals = Z,
            this.binormals = S,
            g = 0; f > g; g++)
                for (C[g] = [],
                O = g / (f - 1),
                X = n.getPointAt(O),
                _ = W[g],
                p = Z[g],
                N = S[g],
                Y = 0; l > Y; Y++)
                    J = Y / l * u,
                    k = -x * z(J),
                    A = x * E(J),
                    G.copy(X),
                    G.x += k * p.x + A * N.x,
                    G.y += k * p.y + A * N.y,
                    G.z += k * p.z + A * N.z,
                    C[g][Y] = b(G.x, G.y, G.z);
            for (g = 0; D > g; g++)
                for (Y = 0; l > Y; Y++)
                    B = i ? (g + 1) % D : g + 1,
                    K = (Y + 1) % l,
                    r = C[g][Y],
                    L = C[B][Y],
                    P = C[B][K],
                    o = C[g][K],
                    s = new Bm(g / D,Y / l),
                    M = new Bm((g + 1) / D,Y / l),
                    j = new Bm((g + 1) / D,(Y + 1) / l),
                    d = new Bm(g / D,(Y + 1) / l),
                    this.faces.push(new Gd(r,L,o)),
                    this.faceVertexUvs[0].push([s, M, d]),
                    this.faces.push(new Gd(L,P,o)),
                    this.faceVertexUvs[0].push([M.clone(), j, d.clone()]);
            this.computeFaceNormals(),
            this.computeVertexNormals()
        };
        tl.prototype = Fd(ni),
        tl.FrenetFrames = function(G, J, F) {
            function h() {
                u[0] = new Bq,
                H[0] = new Bq,
                m = Number.MAX_VALUE,
                p = t(x[0].x),
                _ = t(x[0].y),
                j = t(x[0].z),
                m >= p && (m = p,
                N.set(1, 0, 0)),
                m >= _ && (m = _,
                N.set(0, 1, 0)),
                m >= j && N.set(0, 0, 1),
                a.crossVectors(x[0], N).normalize(),
                u[0].crossVectors(x[0], a),
                H[0].crossVectors(x[0], u[0])
            }
            var C, m, p, _, j, Y, S, N = new Bq, x = [], u = [], H = [], a = new Bq, R = new Mk, y = J + 1, d = 1e-4;
            for (this.tangents = x,
            this.normals = u,
            this.binormals = H,
            Y = 0; y > Y; Y++)
                S = Y / (y - 1),
                x[Y] = G.getTangentAt(S),
                x[Y].normalize();
            for (h(),
            Y = 1; y > Y; Y++)
                u[Y] = u[Y - 1].clone(),
                H[Y] = H[Y - 1].clone(),
                a.crossVectors(x[Y - 1], x[Y]),
                a.length() > d && (a.normalize(),
                C = w(Dn(x[Y - 1].dot(x[Y]), -1, 1)),
                u[Y].applyMatrix4(R.makeRotationAxis(a, C))),
                H[Y].crossVectors(x[Y], u[Y]);
            if (F)
                for (C = w(Dn(u[0].dot(u[y - 1]), -1, 1)),
                C /= y - 1,
                x[0].dot(a.crossVectors(u[0], u[y - 1])) > 0 && (C = -C),
                Y = 1; y > Y; Y++)
                    u[Y].applyMatrix4(R.makeRotationAxis(x[Y], C * Y)),
                    H[Y].crossVectors(x[Y], u[Y])
        }
        ;
        var mr = function(U, X, I, l) {
            cf.call(this),
            X = X || 18,
            I = I || 0,
            l = l == V ? u : l;
            for (var s = 1 / (U.length - 1), $ = 1 / X, B = 0, N = X; N >= B; B++)
                for (var K = I + B * $ * l, k = z(K), J = E(K), S = 0, j = U.length; j > S; S++) {
                    var O = U[S]
                      , P = new Bq;
                    P.x = k * O.x - J * O.y,
                    P.y = J * O.x + k * O.y,
                    P.z = O.z,
                    this.vertices.push(P)
                }
            for (var Q = U.length, B = 0, N = X; N > B; B++)
                for (var S = 0, j = U.length - 1; j > S; S++) {
                    var M = S + Q * B
                      , Z = M
                      , f = M + Q
                      , k = M + 1 + Q
                      , o = M + 1
                      , n = B * $
                      , x = S * s
                      , v = n + $
                      , q = x + s;
                    this.faces.push(new Gd(Z,o,f)),
                    this.faceVertexUvs[0].push([new Bm(n,x), new Bm(n,q), new Bm(v,x)]),
                    this.faces.push(new Gd(f,o,k)),
                    this.faceVertexUvs[0].push([new Bm(v,x), new Bm(n,q), new Bm(v,q)])
                }
            this.mergeVertices(),
            oj(this),
            this.computeFaceNormals(),
            this.computeVertexNormals()
        };
        mr.prototype = Fd(ni);
        var iq = function(l, n) {
            n = n || {};
            var Y = Fh.generateShapes(l, n);
            n.amount = n.amount !== F ? n.amount : .5,
            n.convertYZ = !1,
            n.fill !== !1 && (n.bottom = !0,
            n.top = !0),
            sl.call(this, Y, n)
        };
        iq.prototype = Fd(ic);
        var xo = C.Node = function() {
            nm(xo, this)
        }
          , bg = {
            X: Cb,
            Y: hc,
            Z: be
        }
          , Go = {
            xyz: "XYZ",
            xzy: "XZY",
            yxz: "YXZ",
            yzx: "YZX",
            zxy: "ZXY",
            zyx: "ZYX"
        }
          , Yn = "xzy"
          , Bj = function(o, O, e) {
            if (O) {
                var I = O[0]
                  , g = O[1]
                  , $ = O[2];
                "xzy" === e ? (hc(o, g),
                be(o, $),
                Cb(o, I)) : "xyz" === e ? (be(o, $),
                hc(o, g),
                Cb(o, I)) : "yxz" === e ? (be(o, $),
                Cb(o, I),
                hc(o, g)) : "yzx" === e ? (Cb(o, I),
                be(o, $),
                hc(o, g)) : "zxy" === e ? (hc(o, g),
                Cb(o, I),
                be(o, $)) : "zyx" === e ? (Cb(o, I),
                hc(o, g),
                be(o, $)) : (hc(o, g),
                be(o, $),
                Cb(o, I))
            }
        };
        bm("Node", $n, {
            ms_ac: ["rotationMode", "anchorElevation"],
            _adjustChildrenToTop: !0,
            _icon: "node_icon",
            _image: "node_image",
            _rotationMode: Yn,
            _64O: 0,
            _rotationX: 0,
            _53O: 0,
            _host: V,
            _position: {
                x: 0,
                y: 0
            },
            _anchor: {
                x: .5,
                y: .5
            },
            _anchorElevation: .5,
            _scale: {
                x: 1,
                y: 1
            },
            _scaleTall: 1,
            _54O: 0,
            getUIClass: function() {
                return Zh
            },
            _22Q: function() {
                return td
            },
            getX: function() {
                return this.p().x
            },
            setX: function(M) {
                this.p(M, this.p().y)
            },
            getY: function() {
                return this.p().y
            },
            setY: function(f) {
                this.p(this.p().x, f)
            },
            getAnchorX: function() {
                return this.getAnchor().x
            },
            setAnchorX: function(s) {
                this.setAnchor(s, this.getAnchor().y)
            },
            getAnchorY: function() {
                return this.getAnchor().y
            },
            setAnchorY: function(f) {
                this.setAnchor(this.getAnchor().x, f)
            },
            getScaleX: function() {
                return this.getScale().x
            },
            setScaleX: function(K) {
                this.setScale(K, this.getScale().y)
            },
            getScaleY: function() {
                return this.getScale().y
            },
            setScaleY: function(F) {
                this.setScale(this.getScale().x, F)
            },
            p: function() {
                return 0 === arguments.length ? this.getPosition() : (this.setPosition.apply(this, arguments),
                this)
            },
            p3: function() {
                return 0 === arguments.length ? this.getPosition3d() : (this.setPosition3d.apply(this, arguments),
                this)
            },
            s3: function() {
                return 0 === arguments.length ? this.getSize3d() : (this.setSize3d.apply(this, arguments),
                this)
            },
            r3: function() {
                return 0 === arguments.length ? this.getRotation3d() : (this.setRotation3d.apply(this, arguments),
                this)
            },
            t3: function() {
                return this.translate3d.apply(this, arguments),
                this
            },
            translate3dBy: function(E, q) {
                Nj(E, Nm(V, V, this.r3(), this.getRotationMode())),
                this.translate3d(E[0] * q, E[1] * q, E[2] * q)
            },
            translateFront: function(p) {
                this.translate3dBy([0, 0, 1], p)
            },
            translateBack: function(b) {
                this.translate3dBy([0, 0, -1], b)
            },
            translateLeft: function(A) {
                this.translate3dBy([-1, 0, 0], A)
            },
            translateRight: function(W) {
                this.translate3dBy([1, 0, 0], W)
            },
            translateTop: function($) {
                this.translate3dBy([0, 1, 0], $)
            },
            translateBottom: function(_) {
                this.translate3dBy([0, -1, 0], _)
            },
            getPosition3d: function() {
                return [this._position.x, this._54O, this._position.y]
            },
            setPosition3d: function(Q, z, G) {
                1 === arguments.length && (z = Q[1],
                G = Q[2],
                Q = Q[0]),
                this.p(Q, G),
                this.setElevation(z)
            },
            translate3d: function(f, x, $) {
                1 === arguments.length && (x = f[1],
                $ = f[2],
                f = f[0]),
                this.translate(f, $),
                this.setElevation(this._54O + x)
            },
            getSize3d: function() {
                return [this.getWidth(), this.getTall(), this.getHeight()]
            },
            setSize3d: function(C, L, y) {
                1 === arguments.length && (L = C[1],
                y = C[2],
                C = C[0]),
                this.setSize(C, y),
                this.setTall(L)
            },
            getRotation3d: function() {
                return [this._rotationX, -this._64O, this._53O]
            },
            setRotation3d: function(T, b, y) {
                1 === arguments.length && (b = T[1],
                y = T[2],
                T = T[0]),
                this.setRotationX(T),
                this.setRotation(-b),
                this.setRotationZ(y)
            },
            setRotationY: function(G) {
                this.setRotation(-G)
            },
            getRotationY: function() {
                return -this._64O
            },
            lookAtDirection: function(I, Y) {
                Y = Y || ne;
                var s = this
                  , j = uf(I);
                Y === ne ? (s.r3([-J(I[1] / j), -x(I[2], I[0]) + l, 0]),
                s.setRotationMode("xzy")) : Y === yo ? (s.r3(0, -x(I[2], I[0]), J(I[1] / j)),
                s.setRotationMode("zyx")) : Y === $j ? (s.r3(0, -x(I[2], I[0]) + L, -J(I[1] / j)),
                s.setRotationMode("zyx")) : Y === ve ? (s.r3([-J(I[1] / j) + l, -x(I[2], I[0]) + l, 0]),
                s.setRotationMode("xzy")) : Y === uo && (s.r3([-J(I[1] / j) - l, -x(I[2], I[0]) + l, 0]),
                s.setRotationMode("xzy")),
                Y === hr && (s.r3([-J(I[1] / j) + L, -x(I[2], I[0]) + l, L]),
                s.setRotationMode("zxy"))
            },
            lookAt: function(l, O) {
                return this.lookAtDirection(Fo(l, this.p3()), O)
            },
            getLoopedEdges: function() {
                return this._45I
            },
            getEdges: function() {
                return this._70O
            },
            getAgentEdges: function() {
                return this._49I
            },
            getHost: function() {
                return this._host
            },
            setHost: function(l) {
                var v = this;
                if (v !== l && v._host !== l) {
                    var D = v._host;
                    D && D._removeAttach(v),
                    v._host = l,
                    v._host && v._host._addAttach(v),
                    v.fp("host", D, l),
                    v.onHostChanged(D, l)
                }
            },
            getAttaches: function() {
                return this._69O
            },
            _addAttach: function(T) {
                var v = this;
                v._69O || (v._69O = new Vr),
                v._69O.add(T),
                v.fp("attaches", V, T)
            },
            _removeAttach: function(I) {
                var K = this;
                K._69O.remove(I),
                K._69O.isEmpty() && delete K._69O,
                K.fp("attaches", I, V)
            },
            getSourceEdges: function() {
                return this._42I
            },
            getTargetEdges: function() {
                return this._43I
            },
            _2I: function(v) {
                var f = this;
                f._44I || (f._44I = new Vr),
                f._42I || (f._42I = new Vr),
                f._44I.add(v),
                f._42I.add(v),
                f._20I()
            },
            _4I: function(W) {
                var U = this;
                U._44I || (U._44I = new Vr),
                U._43I || (U._43I = new Vr),
                U._44I.add(W),
                U._43I.add(W),
                U._20I()
            },
            _16I: function(f) {
                var n = this;
                n._44I.remove(f),
                n._42I.remove(f),
                n._44I.isEmpty() && delete n._44I,
                n._42I.isEmpty() && delete n._42I,
                n._20I()
            },
            _18I: function(e) {
                var g = this;
                g._44I.remove(e),
                g._43I.remove(e),
                g._44I.isEmpty() && delete g._44I,
                g._43I.isEmpty() && delete g._43I,
                g._20I()
            },
            _20I: function() {
                var P = this;
                if (delete P._45I,
                !P._44I || P._44I.isEmpty())
                    return delete P._70O,
                    void 0;
                var o;
                P._44I.each(function(F) {
                    F.isLooped() && (o || (o = {}),
                    o[F._id] || (P._45I || (P._45I = new Vr),
                    P._45I.add(F),
                    o[F._id] = F))
                }),
                o ? (P._70O = new Vr,
                P._44I.each(function(V) {
                    o[V._id] ? "A" === o[V._id] || (o[V._id] = "A",
                    P._70O.add(V)) : P._70O.add(V)
                })) : P._70O = P._44I
            },
            hasAgentEdges: function() {
                return !!this._49I && !this._49I.isEmpty()
            },
            getSourceAgentEdges: function() {
                return this._46I
            },
            getTargetAgentEdges: function() {
                return this._47I
            },
            _1I: function(z) {
                var J = this;
                J._46I || (J._46I = new Vr),
                J._48I || (J._48I = new Vr),
                J._46I.add(z),
                J._48I.add(z),
                J._19I()
            },
            _3I: function(r) {
                var u = this;
                u._47I || (u._47I = new Vr),
                u._48I || (u._48I = new Vr),
                u._47I.add(r),
                u._48I.add(r),
                u._19I()
            },
            _15I: function(c) {
                var i = this;
                i._46I.remove(c),
                i._48I.remove(c),
                i._46I.isEmpty() && delete i._46I,
                i._48I.isEmpty() && delete i._48I,
                i._19I()
            },
            _17I: function(e) {
                var c = this;
                c._47I.remove(e),
                c._48I.remove(e),
                c._47I.isEmpty() && delete c._47I,
                c._48I.isEmpty() && delete c._48I,
                c._19I()
            },
            _19I: function() {
                var r = this;
                delete r._49I;
                var V = r._48I;
                if (V && !V.isEmpty()) {
                    var E = {};
                    V.each(function(c) {
                        E[c._id] ? r._49I || (r._49I = new Vr) : E[c._id] = c
                    }),
                    r._49I ? V.each(function(I) {
                        E[I._id] && (r._49I.add(I),
                        delete E[I._id])
                    }) : r._49I = V
                }
            },
            getImage: function() {
                if (this._pendingCheckImageJSON) {
                    var e = j.getImage(this._image);
                    e && (this._pendingCheckImageJSON = !1,
                    this.getParent()instanceof Dm && this.getParent().checkPendingUpdateInfo())
                }
                return this._image
            },
            setImage: function(N) {
                var u = this
                  , c = u._image
                  , e = u.getWidth()
                  , H = u.getHeight();
                u._image = N,
                u.fp("image", c, N) && (null != N && (Ag(N) || xe(N) && /\.json$/i.test(N)) && (this._pendingCheckImageJSON = !0),
                u.fp(tg, e, u.getWidth()),
                u.fp(Xq, H, u.getHeight()))
            },
            getElevation: function() {
                return this._54O
            },
            setElevation: function(W) {
                var Y = this;
                if (!Y._50O) {
                    Y._50O = 1;
                    var t = Y._54O;
                    Y._54O = W,
                    Y.fp(np, t, W),
                    delete this._50O
                }
            },
            getRotation: function() {
                return this._64O
            },
            setRotation: function(g) {
                var Y = this;
                if (!Y._49O) {
                    Y._49O = 1;
                    var l = Y._64O;
                    Y._64O = g,
                    Y.fp(cp, l, g),
                    delete Y._49O
                }
            },
            getRotationX: function() {
                return this._rotationX
            },
            setRotationX: function(I) {
                var D = this;
                if (!D._51O) {
                    D._51O = 1;
                    var B = D._rotationX;
                    D._rotationX = I,
                    D.fp("rotationX", B, I),
                    delete D._51O
                }
            },
            getRotationZ: function() {
                return this._53O
            },
            setRotationZ: function(w) {
                var o = this;
                if (!o._52O) {
                    o._52O = 1;
                    var Y = o._53O;
                    o._53O = w,
                    o.fp("rotationZ", Y, w),
                    delete o._52O
                }
            },
            getPosition: function() {
                return this._position
            },
            setPosition: function(e, m) {
                var H = this;
                if (!H._50I) {
                    H._50I = 1;
                    var g;
                    if (g = 2 === arguments.length ? {
                        x: e,
                        y: m
                    } : e,
                    g.x !== H._position.x || g.y !== H._position.y) {
                        var M = H._position;
                        H._position = g,
                        H.fp(Xd, M, g)
                    }
                    delete H._50I
                }
            },
            translate: function(K, v) {
                var _ = this._position;
                this.p(_.x + K, _.y + v)
            },
            getWidth: function() {
                var Y = this;
                if (Y._width >= 0)
                    return Y._width;
                var o = Y.getStyle("shape3d");
                if (o) {
                    var N = ki(o);
                    if (N && N.rawS3)
                        return N.rawS3[0];
                    if ("billboard" === o || "plane" === o) {
                        var q = bn(Y.getStyle("shape3d.image"));
                        return q ? Cm(q, Y) : 20
                    }
                }
                var q = bn(Y._image);
                return q ? Cm(q, Y) : 20
            },
            setWidth: function(D) {
                var o = this
                  , C = o._width;
                o._width = D,
                o.fp(tg, C, D)
            },
            getHeight: function() {
                var s = this;
                if (s._height >= 0)
                    return s._height;
                var n = s.getStyle("shape3d");
                if (n) {
                    var W = ki(n);
                    if (W && W.rawS3)
                        return W.rawS3[2];
                    if ("plane" === n) {
                        var p = bn(s.getStyle("shape3d.image"));
                        return p ? Hi(p, s) : 20
                    }
                    if ("billboard" === n)
                        return 2
                }
                var p = bn(s._image);
                return p ? Hi(p, s) : 20
            },
            setHeight: function(W) {
                var u = this
                  , c = u._height;
                u._height = W,
                u.fp(Xq, c, W)
            },
            getTall: function() {
                var T = this;
                if (T._tall >= 0)
                    return T._tall;
                var f = T.getStyle("shape3d");
                if (f) {
                    var D = ki(f);
                    if (D && D.rawS3)
                        return D.rawS3[1];
                    if ("billboard" === f) {
                        var b = bn(T.getStyle("shape3d.image"));
                        return b ? Hi(b, T) : 20
                    }
                    if ("plane" === f)
                        return 2
                }
                return 20
            },
            setTall: function(l) {
                var M = this
                  , U = M._tall;
                M._tall = l,
                M.fp("tall", U, l)
            },
            setSize: function(x, z) {
                var U = this;
                2 === arguments.length ? (U.setWidth(x),
                U.setHeight(z)) : (U.setWidth(x.width),
                U.setHeight(x.height))
            },
            getSize: function() {
                return {
                    width: this.getWidth(),
                    height: this.getHeight()
                }
            },
            setRect: function(V, q, S, I, f) {
                var D = this
                  , x = D.getAnchor()
                  , w = D.getScale();
                arguments.length <= 2 && (f = q,
                q = V.y,
                S = V.width,
                I = V.height,
                V = V.x);
                var B = f && w.x < 0 ? 1 - x.x : x.x
                  , M = f && w.y < 0 ? 1 - x.y : x.y;
                D.p(V + S * B, q + I * M),
                f && (S /= Math.abs(w.x),
                I /= Math.abs(w.y)),
                D.setWidth(S),
                D.setHeight(I)
            },
            getMatrix: function() {
                var X = this
                  , A = X._64O
                  , t = X._position
                  , O = X.getScale();
                return new yh(A,t.x,t.y,O.x,O.y)
            },
            getAnchorRect: function() {
                var J = this
                  , Q = J.getWidth()
                  , Y = J.getHeight()
                  , S = J.getAnchor();
                return {
                    x: -Q * S.x,
                    y: -Y * S.y,
                    width: Q,
                    height: Y
                }
            },
            toLocal: function($) {
                return this.getMatrix().tfi($)
            },
            toGlobal: function(B) {
                return this.getMatrix().tf(B)
            },
            isInRect: function(t) {
                t = this.toLocal(t);
                var F = this.getWidth()
                  , S = this.getHeight();
                return t.x += F * this.getAnchorX(),
                t.y += S * this.getAnchorY(),
                !(t.x < 0 || t.y < 0 || t.x > F || t.y > S)
            },
            getRect: function() {
                var m = this
                  , J = m.getWidth()
                  , t = m.getHeight()
                  , q = m.getAnchor()
                  , g = {
                    x: -J * q.x,
                    y: -t * q.y,
                    width: J,
                    height: t
                }
                  , P = m.getMatrix();
                return g = Pr([P.tf(g.x, g.y), P.tf(g.x + g.width, g.y), P.tf(g.x + g.width, g.y + g.height), P.tf(g.x, g.y + g.height)])
            },
            getAnchorElevation: function() {
                return this._anchorElevation
            },
            getAnchor3d: function() {
                var _ = this
                  , u = _.getAnchor()
                  , Z = _._anchorElevation;
                return {
                    x: u.x,
                    y: Z,
                    z: u.y
                }
            },
            setAnchorElevation: function(v) {
                var o = this
                  , W = o._anchorElevation;
                return W !== v ? (o._anchorElevation = v,
                o.fp("anchorElevation", W, v),
                !0) : !1
            },
            setAnchor3d: function(m, M, C, F) {
                var W, D = this;
                "number" == typeof m ? W = {
                    x: m,
                    y: M,
                    z: C
                } : (W = m.length ? {
                    x: m[0],
                    y: m[1],
                    z: m[2]
                } : m,
                F = M);
                var K = D.getDataModel();
                K && K.beginTransaction();
                var p = D.getAnchor3d()
                  , o = D.setAnchor(W.x, W.z);
                if (D.setAnchorElevation(W.y) && (o = !0),
                o && F && !Xi) {
                    D.getAnchor3d();
                    var P = ys(D)
                      , Z = Nj([W.x - p.x, W.y - p.y, W.z - p.z], P);
                    D.p3(Z)
                }
                return K && K.endTransaction(),
                o
            },
            getAnchor: function() {
                var V = this;
                if (V.hasOwnProperty("_anchor"))
                    return V._anchor;
                var v = bn(V._image);
                return v && v.anchorX !== F ? {
                    x: v.anchorX,
                    y: v.anchorY
                } : V._anchor
            },
            setAnchor: function(r, S, j) {
                var b, h = this;
                "number" == typeof r ? b = {
                    x: r,
                    y: S
                } : (b = r.length ? {
                    x: r[0],
                    y: r[1]
                } : r,
                j = S);
                var O = h.getAnchor();
                if (O.x !== b.x || O.y !== b.y) {
                    var C = h.getDataModel();
                    if (C && C.beginTransaction(),
                    h._anchor = b,
                    h.fp("anchor", O, b),
                    j && !Xi) {
                        var u = h.getPosition()
                          , q = h.getSize()
                          , s = h.getRotation()
                          , J = h.getScale()
                          , c = -q.width * (O.x - b.x) * J.x
                          , y = -q.height * (O.y - b.y) * J.y
                          , p = E(s)
                          , P = z(s);
                        h.setPosition(u.x + P * c - p * y, u.y + p * c + P * y)
                    }
                    return C && C.endTransaction(),
                    !0
                }
                return !1
            },
            getScale: function() {
                return this._scale
            },
            setScale: function(Y, x) {
                var G, W = this;
                G = 2 === arguments.length ? {
                    x: Y,
                    y: x
                } : Y;
                var M = W.getScale();
                (M.x !== G.x || M.y !== G.y) && (W._scale = G,
                W.fp("scale", M, G))
            },
            getScaleTall: function() {
                return this._scaleTall
            },
            getScale3d: function() {
                var $ = this
                  , Y = $._scaleTall
                  , Z = $.getScale();
                return [Z.x, Y, Z.y]
            },
            getFinalScale3d: function() {
                var Z = this
                  , J = Z.s3()
                  , X = Z._dynamicScale3d
                  , H = Z.getScale3d();
                return J && (H[0] *= J[0],
                H[1] *= J[1],
                H[2] *= J[2]),
                X && (H[0] *= X[0],
                H[1] *= X[1],
                H[2] *= X[2]),
                H
            },
            getFinalRotation3d: function() {
                var H = this;
                return H._dynamicRotation || H.r3()
            },
            setScaleTall: function(G) {
                var o = this
                  , E = o._scaleTall;
                E !== G && (o._scaleTall = G,
                o.fp("scaleTall", E, G))
            },
            setScale3d: function(G, h, J) {
                var X, k = this;
                X = "number" == typeof G ? {
                    x: G,
                    y: h,
                    z: J
                } : G.length ? {
                    x: G[0],
                    y: G[1],
                    z: G[2]
                } : G,
                k.setScaleTall(X.y),
                k.setScale(X.x, X.z)
            },
            getCorners: function(B, R) {
                B == V && (B = 0),
                R == V && (R = B);
                var U = this
                  , h = U.getAnchor()
                  , v = U.getWidth()
                  , O = U.getHeight()
                  , A = -v * h.x - B
                  , e = -O * h.y - R
                  , t = v + 2 * B
                  , n = O + 2 * R
                  , y = U.getMatrix();
                return [y.tf(A, e), y.tf(A, e + n), y.tf(A + t, e + n), y.tf(A + t, e)]
            },
            getEditControlPoints: function(E, P, t) {
                P == V && (P = 0),
                t == V && (t = P);
                var K = this
                  , R = K.getAnchor()
                  , H = K.getWidth()
                  , X = K.getHeight()
                  , Z = -H * R.x - P
                  , e = -X * R.y - t
                  , U = H + 2 * P
                  , j = X + 2 * t;
                if (E)
                    return [{
                        x: Z,
                        y: e
                    }, {
                        x: Z,
                        y: 0
                    }, {
                        x: Z,
                        y: e + j
                    }, {
                        x: 0,
                        y: e + j
                    }, {
                        x: Z + U,
                        y: e + j
                    }, {
                        x: Z + U,
                        y: 0
                    }, {
                        x: Z + U,
                        y: e
                    }, {
                        x: 0,
                        y: e
                    }];
                var n = K.getMatrix();
                return [n.tf(Z, e), n.tf(Z, 0), n.tf(Z, e + j), n.tf(0, e + j), n.tf(Z + U, e + j), n.tf(Z + U, 0), n.tf(Z + U, e), n.tf(0, e)]
            },
            rotateAt: function(D, C, S) {
                var b = this
                  , f = b._position
                  , R = b._64O
                  , q = new yh(R,f.x,f.y).tf(D, C)
                  , p = r(D * D + C * C)
                  , k = x(f.y - q.y, f.x - q.x) + S;
                b.setRotation(R + S),
                b.p(q.x + p * z(k), q.y + p * E(k))
            },
            onParentChanged: function() {
                xo.superClass.onParentChanged.apply(this, arguments),
                this._8I()
            },
            _8I: function() {
                this._70O && this._70O.each(function(a) {
                    a._7I()
                })
            },
            onPropertyChanged: function(k) {
                var Q = this;
                xo.superClass.onPropertyChanged.call(Q, k),
                Q._69O && Q._69O.each(function(o) {
                    o.handleHostPropertyChange(k)
                }),
                Q._49I && Q._49I.each(function(d) {
                    d.fp("agentChange", !0, !1)
                })
            },
            onHostChanged: function() {
                this.updateAttach()
            },
            handleHostPropertyChange: function($) {
                this.updateAttach($)
            },
            onStyleChanged: function(M) {
                xo.superClass.onStyleChanged.apply(this, arguments),
                bi[M] && this.updateAttach()
            },
            updateAttach: function(f) {
                var G = this;
                G._51I || Xi || (G._51I = 1,
                G._71O(f),
                delete G._51I)
            },
            _71O: function(U) {
                var f, s, T, u, d, h, K = this, G = K._host, I = U ? U.property : V, c = U ? U.oldValue : V, A = U ? U.newValue : V;
                if (G instanceof C.Grid) {
                    if (I === np)
                        K.setElevation(K._54O + A - c);
                    else if (!U || Jr[I]) {
                        if (f = K.s("attach.row.index"),
                        s = K.s("attach.column.index"),
                        T = G.getCellRect(f, s),
                        !T)
                            return;
                        u = K.s("attach.row.span"),
                        d = K.s("attach.column.span"),
                        (1 !== u || 1 !== d) && (T = Ql(T, G.getCellRect(f + u - 1, s + d - 1))),
                        lg(T, K, "attach.padding", 1),
                        K.setRect(T)
                    }
                } else if (G instanceof Ye && (h = K.s("attach.index")) >= 0 && (!U || ap[I])) {
                    var H = K.s("attach.thickness");
                    H != V && K.setHeight(G.getThickness() * H);
                    var Q = K.s("attach.offset")
                      , e = G.getPoints()
                      , n = e.size();
                    if (n > h) {
                        var q = e.get(h)
                          , t = n === h + 1 ? e.get(0) : e.get(h + 1)
                          , J = [t.x - q.x, t.y - q.y]
                          , _ = uf(J);
                        if (_) {
                            K.s("attach.offset.relative") && (Q *= _),
                            K.s("attach.offset.opposite") && (Q = _ - Q);
                            var l = {
                                x: q.x + J[0] / _ * Q,
                                y: q.y + J[1] / _ * Q
                            }
                              , E = K.s("attach.gap");
                            E && (K.s("attach.gap.relative") && (E *= G.getThickness()),
                            l = io(V, l, t, E)),
                            K.p(l),
                            K.setRotation(x(J[1], J[0]))
                        }
                    }
                } else
                    U && (I === Xd ? K.translate(A.x - c.x, A.y - c.y) : I === np ? K.setElevation(K._54O + A - c) : qq[I] && K._11Q(G, I, A - c))
            },
            _11Q: function(P, c, Z) {
                var E = this
                  , C = P.p3()
                  , S = Fo(E.p3(), C)
                  , F = Ue()
                  , m = Go[E.getRotationMode()]
                  , h = m[0]
                  , Q = m[1]
                  , V = m[2]
                  , d = bg[h]
                  , W = bg[Q]
                  , s = bg[V];
                c === cp && (c = "rotationY",
                Z = -Z),
                c === cp + h ? (s(F, P[up + V]()),
                W(F, P[up + Q]()),
                d(F, Z),
                W(F, -P[up + Q]()),
                s(F, -P[up + V]()),
                E[zr + h](E[up + h]() + Z)) : c === cp + Q ? (s(F, P[up + V]()),
                W(F, Z),
                s(F, -P[up + V]()),
                E[zr + Q](E[up + Q]() + Z)) : c === cp + V && (s(F, Z),
                E[zr + V](E[up + V]() + Z)),
                Nj(S, F),
                E.p3(C[0] + S[0], C[1] + S[1], C[2] + S[2])
            },
            isHostOn: function(Q) {
                var _ = this;
                if (_._host && Q && Q._69O)
                    for (var s = {}, M = _._host; M && M !== _ && !s[M._id]; ) {
                        if (M === Q)
                            return !0;
                        s[M._id] = M,
                        M = M._host
                    }
                return !1
            },
            isLoopedHostOn: function(D) {
                return this.isHostOn(D) && D.isHostOn(this)
            },
            getSerializableProperties: function() {
                var D = xo.superClass.getSerializableProperties.call(this);
                return lk(D, {
                    image: 1,
                    host: 1,
                    rotation: 1,
                    rotationX: 1,
                    rotationZ: 1,
                    rotationMode: 1,
                    position: 1,
                    anchor: 1,
                    anchorElevation: 1,
                    scale: 1,
                    scaleTall: 1,
                    _width: 1,
                    _height: 1,
                    _tall: 1,
                    elevation: 1
                }),
                D
            }
        });
        var $p = C.Edge = function(J, O) {
            var s = this;
            nm($p, s),
            s.setSource(J),
            s.setTarget(O)
        }
        ;
        bm("Edge", $n, {
            _icon: "edge_icon",
            getUIClass: function() {
                return sq
            },
            _22Q: function() {
                return Nb
            },
            getSource: function() {
                return this._source
            },
            getTarget: function() {
                return this._target
            },
            getSourceAgent: function() {
                return this._40I
            },
            getTargetAgent: function() {
                return this._41I
            },
            setSource: function(R) {
                var k = this;
                if (k._source !== R) {
                    var P = k._source;
                    k._source = R,
                    P && P._16I(k),
                    R && R._2I(k),
                    k._7I(),
                    k.fp("source", P, R)
                }
            },
            setTarget: function(e) {
                var O = this;
                if (O._target !== e) {
                    var A = O._target;
                    O._target = e,
                    A && A._18I(O),
                    e && e._4I(O),
                    O._7I(),
                    O.fp("target", A, e)
                }
            },
            isLooped: function() {
                var E = this;
                return E._source === E._target && !!E._source && !!E._target
            },
            _7I: function() {
                var Z, L = this, g = Of(L);
                L._40I !== g && (Z = this._40I,
                Z && Z._15I(L),
                L._40I = g,
                g && g._1I(L),
                L.fp("sourceAgent", Z, g),
                Ig(Z, L._41I),
                Ig(g, L._41I));
                var v = Gq(L);
                L._41I !== v && (Z = L._41I,
                Z && Z._17I(L),
                L._41I = v,
                v && v._3I(L),
                L.fp("targetAgent", Z, v),
                Ig(Z, L._40I),
                Ig(v, L._40I))
            },
            _22I: function(c) {
                this._52I = c,
                this.fp("edgeGroup", !0, !1)
            },
            getEdgeGroup: function() {
                return this._52I
            },
            isEdgeGroupHidden: function() {
                var y = this;
                return y._52I && y._52I.get(0) !== y && !y.getStyle(Gb)
            },
            getEdgeGroupSize: function() {
                return this._52I ? this._52I.size() : 1
            },
            getEdgeGroupIndex: function() {
                return this._52I ? this._52I.indexOf(this) : 0
            },
            isEdgeGroupAgent: function() {
                var o = this
                  , G = o._52I;
                return G && !o.getStyle(Gb) && G.size() > 1 && o === G.get(0)
            },
            toggle: function() {
                var S = this._52I
                  , j = !this.s(Gb);
                S && S.size() > 1 && (S.each(function(y) {
                    y.s(Gb, j)
                }),
                S.getSiblings().each(function(D) {
                    D !== S && D.each(function(A) {
                        A.fp("edgeGroup", V, D)
                    })
                }))
            },
            setStyle: function(k, Z) {
                (k === No || "edge.segments" === k) && (Z = Ad(Z)),
                $p.superClass.setStyle.call(this, k, Z)
            },
            onStyleChanged: function(b) {
                $p.superClass.onStyleChanged.apply(this, arguments),
                Tr[b] && Ig(this._41I, this._40I)
            },
            getSerializableProperties: function() {
                var D = $p.superClass.getSerializableProperties.call(this);
                return lk(D, {
                    source: 1,
                    target: 1
                }),
                D
            }
        });
        var Ep = C.Group = function() {
            nm(Ep, this)
        }
        ;
        bm("Group", xo, {
            _image: "group_image",
            _icon: "group_icon",
            _57O: !1,
            getUIClass: function() {
                return Eb
            },
            onChildAdded: function() {
                Ep.superClass.onChildAdded.apply(this, arguments),
                this._81I()
            },
            onChildRemoved: function() {
                Ep.superClass.onChildRemoved.apply(this, arguments),
                this._81I()
            },
            _81I: function() {
                var e = this;
                if (!e._54I && !Xi) {
                    var R = e.getChildrenRect();
                    R && (e._53I = 1,
                    e.p(sg(e.s("group.position"), R, e.getSize())),
                    delete e._53I)
                }
            },
            getChildrenRect: function() {
                var u, b = this;
                return b.eachChild(function(d) {
                    u = Ql(u, b.getChildRect(d))
                }),
                u
            },
            getChildRect: function(q) {
                var S;
                return xj(q) && q.s(Th) && (fm(q) && q.isExpanded() && q.eachChild(function(K) {
                    S = Ql(S, q.getChildRect(K))
                }),
                !S && q.getRect && (S = q.getRect())),
                S
            },
            setPosition: function(v, h) {
                var K = this;
                if (!K._54I) {
                    var k;
                    k = 2 === arguments.length ? {
                        x: v,
                        y: h
                    } : v,
                    Xi || K._53I || (K._54I = 1,
                    Yb(K._children, k.x - K._position.x, k.y - K._position.y),
                    delete K._54I),
                    Ep.superClass.setPosition.call(this, k)
                }
            },
            toggle: function() {
                this.setExpanded(!this.isExpanded())
            },
            isExpanded: function() {
                return this._57O
            },
            setExpanded: function(m) {
                var G = this;
                if (G._57O !== m) {
                    var V = G._57O;
                    G._57O = m,
                    G.fp("expanded", V, G._57O),
                    G._8I()
                }
            },
            _8I: function() {
                Ep.superClass._8I.call(this),
                this.eachChild(function(C) {
                    xj(C) && C._8I()
                })
            },
            onStyleChanged: function(r) {
                Ep.superClass.onStyleChanged.apply(this, arguments),
                "group.position" === r && this._81I()
            },
            getSerializableProperties: function() {
                var n = Ep.superClass.getSerializableProperties.call(this);
                return n.expanded = 1,
                n
            }
        });
        var Lc = C.Block = function() {
            nm(Lc, this)
        }
        ;
        bm("Block", xo, {
            _icon: "block_icon",
            _clickThroughEnabled: !1,
            _syncSize: !0,
            ms_ac: ["clickThroughEnabled", "syncSize"],
            getUIClass: function() {
                return Yq
            },
            onChildAdded: function() {
                Lc.superClass.onChildAdded.apply(this, arguments),
                this.updateFromChildren()
            },
            onChildRemoved: function() {
                Lc.superClass.onChildRemoved.apply(this, arguments),
                this.updateFromChildren()
            },
            updateFromChildren: function() {
                var A = this;
                if (!Xi && !A._updatingToChildren && A._syncSize) {
                    var m, n, i, j, l, s = [], J = A.getRotation();
                    if (A.eachChild(function(A) {
                        xj(A) && s.push.apply(s, A.getCorners())
                    }),
                    s.length) {
                        A._updatingFromChildren = 1;
                        var r = z(-J)
                          , D = E(-J)
                          , L = 1 / 0
                          , g = -1 / 0
                          , N = 1 / 0
                          , y = -1 / 0;
                        for (j = 0,
                        l = s.length; l > j; j++)
                            i = s[j],
                            m = i.x,
                            n = i.y,
                            i.x = r * m - D * n,
                            i.y = D * m + r * n,
                            L = b(L, i.x),
                            g = X(g, i.x),
                            N = b(N, i.y),
                            y = X(y, i.y);
                        var G = A.getScale();
                        A.setSize(t((g - L) / G.x), t((y - N) / G.y));
                        var v;
                        G.x < 0 && (v = L,
                        L = g,
                        g = v),
                        G.y < 0 && (v = N,
                        N = y,
                        y = v),
                        r = z(J),
                        D = E(J);
                        var F = A.getAnchor();
                        m = L + (g - L) * F.x,
                        n = N + (y - N) * F.y,
                        A.setPosition(r * m - D * n, D * m + r * n),
                        delete A._updatingFromChildren
                    }
                }
            },
            setPosition: function(l, q) {
                var h = this;
                if (!h._updatingToChildren) {
                    var E;
                    E = 2 === arguments.length ? {
                        x: l,
                        y: q
                    } : l,
                    Xi || h._updatingFromChildren || (h._updatingToChildren = 1,
                    Yb(h._children, E.x - h._position.x, E.y - h._position.y),
                    delete h._updatingToChildren),
                    Lc.superClass.setPosition.call(this, E)
                }
            },
            setWidth: function(Q) {
                return this.setSize(Q, this.getHeight())
            },
            setHeight: function(a) {
                return this.setSize(this.getWidth(), a)
            },
            setSize: function(v, M) {
                1 > v && (v = 1),
                1 > M && (M = 1);
                var h = this;
                if (!h._updatingToChildren) {
                    2 !== arguments.length && (M = v.height,
                    v = v.width);
                    var p = h.getWidth()
                      , J = h.getHeight();
                    if (v !== p && Lc.superClass.setWidth.call(h, v),
                    M !== J && Lc.superClass.setHeight.call(h, M),
                    !Xi && !h._updatingFromChildren) {
                        h._updatingToChildren = 1;
                        var Q = v / p
                          , n = M / J;
                        h._adjustChildScaleOrSize(Q, n, "size"),
                        delete h._updatingToChildren,
                        h.updateFromChildren()
                    }
                }
            },
            _adjustChildScaleOrSize: function(Y, V, w) {
                var n = this;
                if (n._syncSize) {
                    var j = n.getPosition()
                      , _ = n.getRotation();
                    n.getScale(),
                    n.eachChild(function(G) {
                        if (xj(G)) {
                            var g = G.getPosition()
                              , u = G.getRotation()
                              , q = G.getWidth()
                              , O = G.getHeight()
                              , o = G.getScale()
                              , I = o.x * q
                              , N = o.y * O
                              , H = new yh(u,g.x,g.y,I,N);
                            H.translate(-j.x, -j.y),
                            H.rotate(-_),
                            u = x(H.b * Math.sign(I), H.a * Math.sign(I)),
                            H.scale(Y, V);
                            var S, c, h, r = z(u);
                            if (Math.abs(r) < .001 ? (S = E(u),
                            c = H.b / S,
                            h = -H.c / S) : (c = H.a / r,
                            h = H.d / r),
                            "scale" === w)
                                G.setScale(c / q, h / O);
                            else if ("size" === w) {
                                var P = c / o.x
                                  , n = h / o.y;
                                G.setScale(Cs(c) * Math.abs(o.x), Cs(h) * Math.abs(o.y)),
                                G.setSize(Math.max(.1, Math.abs(P)), Math.max(.1, Math.abs(n)))
                            }
                            H.rotate(_),
                            H.translate(j.x, j.y),
                            G.setPosition(H.tx, H.ty)
                        }
                    })
                }
            },
            _calcChangeFactor: function(h, u, P, R) {
                var y, j, c, E;
                return y = t(h),
                j = t(P),
                c = y > j ? y / j : j / y,
                y = t(u),
                j = t(R),
                E = y > j ? y / j : j / y,
                X(c, E)
            },
            setAnchor: function() {
                var u = this;
                if (!u._updatingToChildren) {
                    var b = u.getAnchor();
                    if (Lc.superClass.setAnchor.apply(u, arguments),
                    !Xi && !u._updatingFromChildren && u._syncSize) {
                        u._updatingToChildren = 1;
                        var f = u.getAnchor();
                        u.getPosition();
                        var W = u.getSize()
                          , O = u.getScale()
                          , v = u.getRotation()
                          , G = -W.width * O.x * (b.x - f.x)
                          , p = -W.height * O.y * (b.y - f.y)
                          , s = E(v)
                          , l = z(v)
                          , k = l * G - s * p
                          , Z = s * G + l * p;
                        u.eachChild(function(e) {
                            if (xj(e)) {
                                var G = e.getPosition();
                                e.setPosition(G.x - k, G.y - Z)
                            }
                        }),
                        delete u._updatingToChildren
                    }
                }
            },
            setRotation: function(Z) {
                var S = this;
                if (!S._updatingToChildren) {
                    var X = S.getRotation();
                    if (Lc.superClass.setRotation.apply(S, arguments),
                    !Xi && !S._updatingFromChildren) {
                        S._updatingToChildren = 1;
                        var F = S.getPosition()
                          , f = Z - X;
                        S.eachChild(function(k) {
                            if (xj(k)) {
                                var y = k.getMatrix();
                                y.translate(-F.x, -F.y),
                                y.rotate(f),
                                y.translate(F.x, F.y);
                                var J = Math.sign(k.getScale().x);
                                k.setRotation(x(y.b * J, y.a * J)),
                                k.setPosition(y.tx, y.ty)
                            }
                        }),
                        delete S._updatingToChildren
                    }
                }
            },
            setScale: function(Y, h) {
                var Z = this;
                if (!Z._updatingToChildren) {
                    null == h && (h = Y.y,
                    Y = Y.x);
                    var d = Z.getScale();
                    if (t(Y) < .01 && (Y = .01 * (Cs(Y) || Cs(d.x))),
                    t(h) < .01 && (h = .01 * (Cs(h) || Cs(d.y))),
                    Lc.superClass.setScale.call(Z, Y, h),
                    !Xi && !Z._updatingFromChildren) {
                        Z._updatingToChildren = 1;
                        var V = Y / d.x
                          , f = h / d.y;
                        Z._adjustChildScaleOrSize(V, f, "size"),
                        delete Z._updatingToChildren,
                        Z.updateFromChildren()
                    }
                }
            },
            getSerializableProperties: function() {
                var o = Lc.superClass.getSerializableProperties.call(this);
                return o.clickThroughEnabled = 1,
                o.syncSize = 1,
                o
            }
        });
        var oe = C.Grid = function() {
            nm(C.Grid, this)
        }
        ;
        bm("Grid", xo, {
            IRotatable: !1,
            _icon: "grid_icon",
            _image: V,
            getUIClass: function() {
                return Bb
            },
            setRotation: function() {},
            getCellRect: function(u, d) {
                var Z = this
                  , a = Z.s("grid.row.count")
                  , r = Z.s("grid.column.count");
                if (0 >= a || 0 >= r || 0 > u || u >= a || 0 > d || d >= r)
                    return V;
                var g, e, K, I = Z.getRect(), q = Z.s("grid.row.percents"), T = Z.s("grid.column.percents");
                if (lg(I, Z, "grid.border", -1),
                q && q._as && (q = q._as),
                T && T._as && (T = T._as),
                q && q.length === a) {
                    for (K = 0,
                    g = 0; u > g; g++)
                        K += I.height * q[g];
                    I.y += K,
                    I.height = I.height * q[u]
                } else
                    I.height = I.height / a,
                    I.y += I.height * u;
                if (T && T.length === r) {
                    for (e = 0,
                    g = 0; d > g; g++)
                        e += I.width * T[g];
                    I.x += e,
                    I.width = I.width * T[d]
                } else
                    I.width = I.width / r,
                    I.x += I.width * d;
                return Qf(I, -Z.s("grid.gap")),
                I
            }
        });
        var ck = C.Text = function() {
            nm(ck, this),
            this.setSize(100, 50),
            this.s("text", "TEXT")
        }
        ;
        bm("Text", xo, {
            _icon: "text_icon",
            _image: "__text__",
            getUIClass: function() {
                return zo
            },
            setWidth: function(m) {
                m || (m = .001),
                ck.superClass.setWidth.call(this, m)
            },
            setHeight: function(e) {
                e || (e = .001),
                ck.superClass.setHeight.call(this, e)
            },
            toLabel: function() {
                return this._displayName || this._name || this.s("text")
            }
        }),
        im("__text__", {
            width: {
                value: 100,
                isSafeFunc: !0,
                func: function(d) {
                    return d._width
                }
            },
            height: {
                value: 50,
                isSafeFunc: !0,
                func: function(g) {
                    return g._height
                }
            },
            comps: [{
                type: "text",
                relative: !0,
                rect: [0, 0, 1, 1],
                text: {
                    func: "style@text"
                },
                align: {
                    func: "style@text.align"
                },
                vAlign: {
                    func: "style@text.vAlign"
                },
                color: {
                    func: "style@text.color"
                },
                font: {
                    func: "style@text.font"
                },
                shadow: {
                    func: "style@text.shadow"
                },
                shadowColor: {
                    func: "style@text.shadow.color"
                },
                shadowBlur: {
                    func: "style@text.shadow.blur"
                },
                shadowOffsetX: {
                    func: "style@text.shadow.offset.x"
                },
                shadowOffsetY: {
                    func: "style@text.shadow.offset.y"
                }
            }]
        });
        var Ye = C.Shape = function() {
            nm(Ye, this),
            this._59O = new Vr
        }
        ;
        Ye.__de__ = zd,
        bm("Shape", xo, {
            ms_ac: ["thickness", "closePath"],
            _icon: "shape_icon",
            _thickness: 10,
            _closePath: !1,
            getUIClass: function() {
                return lb
            },
            _22Q: function() {
                return pi
            },
            getLength: function(g) {
                return Sj(Gm(this._59O, this._58O, g, this._closePath))
            },
            getSegments: function() {
                return this._58O
            },
            toSegments: function() {
                var S = this._58O;
                return S ? new Vr(S._as.slice(0)) : S
            },
            setSegments: function(z) {
                var D = this._58O;
                z = z ? _b(z) ? new Vr(z.slice(0)) : new Vr(z._as.slice(0)) : null,
                (D && z && D._as.join(",") !== z._as.join(",") || D !== z) && (this._58O = z,
                this.fp("segments", D, z))
            },
            getPoints: function() {
                return this._59O
            },
            toPoints: function() {
                var f = this._59O;
                return new Vr(f._as.slice(0))
            },
            setPoints: function(D, t) {
                var f = this
                  , y = f._59O;
                D = D ? _b(D) ? new Vr(D.slice(0)) : new Vr(D._as.slice(0)) : new Vr;
                var N, o, J, k, w, n;
                t && (N = f.getPosition(),
                n = new yh(f.getRotation(),0,0,f.getScale().x,f.getScale().y)),
                (y && D && y._as.join(",") !== D._as.join(",") || y !== D) && (f._59O = D,
                f.fs(),
                f.fp("points", y, D)),
                t && (o = f.getPosition(),
                J = o.x - N.x,
                k = o.y - N.y,
                w = n.tf(J, k),
                f.setPosition(o.x - J + w.x, o.y - k + w.y))
            },
            addPoint: function(B, c, s) {
                var H = this.toPoints();
                H.add(B, c),
                this.setPoints(H, s)
            },
            setPoint: function(i, E, s) {
                var q = this.toPoints();
                q.set(i, E),
                this.setPoints(q, s)
            },
            removePointAt: function(K) {
                var g = this.toPoints();
                g.removeAt(K),
                this.setPoints(g)
            },
            setWidth: function(E) {
                var $ = this;
                if (1 > E && (E = 1),
                !$._55I && !Xi && $.getWidth()) {
                    $._55I = 1;
                    var D = $._position.x
                      , r = E / $.getWidth()
                      , L = $.toPoints()
                      , A = new Vr;
                    L.each(function(I) {
                        A.add({
                            x: (I.x - D) * r + D,
                            y: I.y,
                            e: I.e
                        })
                    }),
                    $.setPoints(A),
                    _n($, [r, 0, 0, 1, D * (1 - r), 0]),
                    $.fs(),
                    delete $._55I
                }
                Ye.superClass.setWidth.call($, E)
            },
            setHeight: function(K) {
                var T = this;
                if (1 > K && (K = 1),
                !T._55I && !Xi && T.getHeight()) {
                    T._55I = 1;
                    var x = T._position.y
                      , H = K / T.getHeight()
                      , e = T.toPoints()
                      , q = new Vr;
                    e.each(function(T) {
                        q.add({
                            x: T.x,
                            y: (T.y - x) * H + x,
                            e: T.e
                        })
                    }),
                    T.setPoints(q),
                    _n(T, [1, 0, 0, H, 0, x * (1 - H)]),
                    T.fs(),
                    delete T._55I
                }
                Ye.superClass.setHeight.call(T, K)
            },
            setAnchorElevation: function(D) {
                var q = this;
                q._55I = !0;
                var S = q._updatingAnchor3d
                  , L = !Xi && !S;
                if (L) {
                    var m, u = D, X = q.getAnchorElevation(), T = q.getTall();
                    m = T * (X - u),
                    q.shiftPointsElevation(m)
                }
                var v = Ye.superClass.setAnchorElevation.apply(q, arguments);
                return S || delete q._55I,
                v
            },
            getShapeElevation: function() {
                var X = this
                  , I = X._54O;
                return I - (X.getTall() || 0) * (X._anchorElevation - .5)
            },
            setAnchor3d: function(w, Q, A, L) {
                var O, J = this;
                "number" == typeof w ? O = {
                    x: w,
                    y: Q,
                    z: A
                } : (O = w.length ? {
                    x: w[0],
                    y: w[1],
                    z: w[2]
                } : w,
                L = Q),
                J._55I = !0,
                J._updatingAnchor3d = !0;
                var s = J.getDataModel();
                if (s && s.beginTransaction(),
                !Xi) {
                    var n = J.getAnchor3d()
                      , j = J.getSize()
                      , v = J.getTall()
                      , H = j.width * (n.x - O.x)
                      , S = j.height * (n.z - O.z)
                      , W = v * (n.y - O.y);
                    L || J.shiftPoints(H, S, W);
                    var r = J.p3()
                }
                var Z = Ye.superClass.setAnchor3d.apply(J, arguments);
                if (!Xi && L) {
                    var g = J.p3();
                    J.shiftPoints(g[0] - r[0] + H, g[2] - r[2] + S, g[1] - r[1] + W)
                }
                return s && s.endTransaction(),
                delete J._updatingAnchor3d,
                delete J._55I,
                Z
            },
            setAnchor: function(V, N, j) {
                var P = this;
                P._55I = !0;
                var R = P._updatingAnchor3d
                  , Z = !Xi && !R;
                if (Z) {
                    var t, n, i;
                    "number" == typeof V ? i = {
                        x: V,
                        y: N
                    } : (i = V.length ? {
                        x: V[0],
                        y: V[1]
                    } : V,
                    j = N);
                    var h = P.getAnchor()
                      , W = P.getSize();
                    t = W.width * (h.x - i.x),
                    n = W.height * (h.y - i.y),
                    j || P.shiftPoints(t, n);
                    var r = P.getPosition()
                }
                var b = Ye.superClass.setAnchor.apply(P, arguments);
                if (Z) {
                    var O = P.getPosition();
                    j && P.shiftPoints(O.x - r.x + t, O.y - r.y + n)
                }
                return R || delete P._55I,
                b
            },
            shiftPoints: function(A, _, O) {
                var y = this
                  , g = y.getElevation() || 0
                  , i = y.toPoints()
                  , k = new Vr;
                i.each(function(q) {
                    var s = q.e;
                    O && (s = (s == V ? g : s) + O),
                    k.add({
                        x: q.x + A,
                        y: q.y + _,
                        e: s
                    })
                }),
                y.setPoints(k),
                y.fs()
            },
            shiftPointsElevation: function(Z) {
                return this.shiftPoints(0, 0, Z)
            },
            setPosition: function(S, X) {
                var L, p = this;
                if (!p._28Q) {
                    if (p._28Q = 1,
                    !p._55I && !Xi) {
                        L = 2 === arguments.length ? {
                            x: S,
                            y: X
                        } : S;
                        var c = L.x - p._position.x
                          , q = L.y - p._position.y;
                        if (0 === c && 0 === q)
                            return delete p._28Q,
                            void 0;
                        p._55I = 1,
                        p.shiftPoints(c, q),
                        _n(p, [1, 0, 0, 1, c, q]),
                        delete p._55I
                    }
                    Ye.superClass.setPosition.apply(p, arguments),
                    delete p._28Q
                }
            },
            fs: function() {
                this.fireShapeChange()
            },
            _70I: function() {
                var Z = this;
                if (2 !== Z._59O.size())
                    return !1;
                var O = Z._58O;
                return O ? 2 === O.size() && 1 === O.get(0) && 2 === O.get(1) ? !0 : !1 : !0
            },
            fireShapeChange: function() {
                var d = this;
                if (!d._55I && !Xi) {
                    var u = Pr(d._59O);
                    u && (d._55I = 1,
                    d.setRect(u),
                    delete d._55I)
                }
                d.fp(Mg, !1, !0)
            },
            getSerializableProperties: function() {
                var A = Ye.superClass.getSerializableProperties.call(this);
                return A.segments = 1,
                A.points = 1,
                A.thickness = 1,
                A.closePath = 1,
                A
            }
        });
        var gc = C.Polyline = function() {
            nm(gc, this),
            this.s({
                "shape.background": null,
                "shape.border.width": 2
            })
        }
        ;
        bm("Polyline", Ye, {
            _icon: "polyline_icon",
            _22Q: function() {
                return _o
            },
            getUIClass: function() {
                return fl
            },
            setClosePath: function() {},
            setTall: function(x) {
                var o = this;
                if (!o._55I && !o._24Q && !Xi && o.getTall()) {
                    o._24Q = 1;
                    var M = o._54O
                      , m = x / o.getTall();
                    o._59O.each(function(H) {
                        H.e = H.e == V ? M : (H.e - M) * m + M
                    }),
                    o.fs(),
                    delete o._24Q
                }
                gc.superClass.setTall.call(o, x)
            },
            setElevation: function(m) {
                var x = this;
                if (!x._55I && !x._24Q && !Xi) {
                    x._24Q = 1;
                    var l = m - x._54O;
                    x._59O.each(function(Y) {
                        Y.e == V ? Y.e = m : Y.e += l
                    }),
                    x.fs(),
                    delete x._24Q
                }
                gc.superClass.setElevation.apply(x, arguments)
            },
            fireShapeChange: function() {
                var E = this
                  , k = E._59O;
                if (!E._55I && !E._24Q && !Xi) {
                    var G = k.size();
                    if (G) {
                        var s = 1
                          , a = k.get(0)
                          , p = E._54O;
                        a.e == V && (a.e = p);
                        for (var K = a.e, o = 0; G > s; s++) {
                            a = k.get(s),
                            a.e == V && (a.e = p);
                            var c = b(K, a.e)
                              , C = X(K + o, a.e);
                            K = c,
                            o = C - c
                        }
                        E._24Q = 1,
                        E.setTall(o),
                        E.setElevation(K + o * E._anchorElevation),
                        delete E._24Q
                    }
                }
                gc.superClass.fireShapeChange.apply(E, arguments)
            }
        });
        var yj = C.SubGraph = function() {
            nm(yj, this)
        }
        ;
        bm("SubGraph", xo, {
            ISubGraph: 1,
            _image: "subGraph_image",
            _icon: "subGraph_icon",
            _8I: function() {
                yj.superClass._8I.call(this),
                this.eachChild(function(p) {
                    xj(p) && p._8I()
                })
            }
        }),
        j.loadingRefGraph = 0;
        var Dm = C.RefGraph = function() {
            nm(Dm, this)
        }
        ;
        bm("RefGraph", Lc, {
            _icon: "refGraph_icon",
            getRef: function() {
                return this._ref
            },
            setRef: function(b) {
                var m = this._ref;
                this._ref = b,
                this.fp("ref", m, b),
                this.updateRef()
            },
            _21I: function() {
                Dm.superClass._21I.apply(this, arguments),
                this.updateRef()
            },
            updateRef: function() {
                var h = this;
                if (j.loadingRefGraph++,
                h.clearChildrenFromDataModel(),
                j.loadingRefGraph--,
                h._ref && h._dataModel) {
                    h._xhrLoadHandler && (h._xhrLoadHandler.cancel = !0);
                    var a = Xi
                      , O = h._xhrLoadHandler = function(d) {
                        if (d && h._dataModel) {
                            j.loadingRefGraph++;
                            var W = h._pendingUpdateInfo = {
                                needToRestore: a
                            };
                            a && (W.position = h.p(),
                            W.width = h.getWidth(),
                            W.height = h.getHeight(),
                            W.rotation = h.getRotation(),
                            W.anchor = h.getAnchor(),
                            W.scale = h.getScale()),
                            h.p(0, 0),
                            h.setAnchor(.5, .5),
                            h.setRotation(0),
                            h.setScale(1, 1);
                            var l = j.parse(d)
                              , k = h._dataModel.deserialize(l, h, {
                                justDatas: !0
                            });
                            k.each(function(R) {
                                R._refGraph = h
                            }),
                            h.checkPendingUpdateInfo(),
                            j.loadingRefGraph--,
                            j.handleRefGraphLoaded(h, k, l)
                        }
                    }
                    ;
                    O.xhrLoadCalled = !1,
                    j.load(h._ref, function(R) {
                        O.cancel || (O.xhrLoadCalled ? O(R) : dk(function() {
                            O(R)
                        }))
                    }),
                    O.xhrLoadCalled = !0
                }
            },
            checkPendingUpdateInfo: function() {
                var Q = this
                  , g = Q._pendingUpdateInfo;
                if (!g)
                    return Q.onPendingUpdated && (j.loadingRefGraph++,
                    Q.onPendingUpdated(),
                    j.loadingRefGraph--),
                    void 0;
                var F = !0;
                this.eachChild(function(J) {
                    (J._pendingCheckImageJSON || J._pendingUpdateInfo) && (F = !1)
                }),
                F && (j.loadingRefGraph++,
                Q._pendingUpdateInfo = null,
                Q.updateFromChildren(),
                g.needToRestore && (Q.setSize(g.width, g.height),
                Q.setAnchor(g.anchor),
                Q.setRotation(g.rotation),
                Q.setScale(g.scale),
                Q.p(g.position)),
                this.getParent()instanceof Dm && this.getParent().checkPendingUpdateInfo(),
                Q.onPendingUpdated && Q.onPendingUpdated(),
                j.loadingRefGraph--)
            },
            getSerializableProperties: function() {
                var d = Dm.superClass.getSerializableProperties.call(this);
                return d.ref = 1,
                d
            }
        }),
        C.EdgeGroup = function(X, G) {
            this._70O = X,
            this._siblings = G;
            for (var z, F, r = 0, H = X.size(), Q = N[Gb]; H > r; r++)
                if (z = X.get(r).getStyle(Gb, !1),
                z != V) {
                    Q = z;
                    break
                }
            Q == V && (Q = !0);
            var K = j.edgeGroupAgentFunc;
            for (K && (F = K(X),
            F && F !== X.get(0) && (X.remove(F),
            X.add(F, 0))),
            r = 0; H > r; r++)
                X.get(r).s(Gb, Q)
        }
        ,
        bm("EdgeGroup", m, {
            getEdges: function() {
                return this._70O
            },
            size: function() {
                return this._70O.size()
            },
            get: function(j) {
                return this._70O.get(j)
            },
            indexOf: function(D) {
                return this._70O.indexOf(D)
            },
            each: function(H, U) {
                this._70O.each(H, U)
            },
            getSiblings: function() {
                return this._siblings
            },
            eachSiblingEdge: function(L, d) {
                this._siblings.each(function(u) {
                    u._70O.each(L, d)
                })
            }
        });
        var vm = function(v, u, Y) {
            var E = Ah[v] = {
                type: v,
                action: u
            };
            if (Y)
                for (var e in Y)
                    E[e] = Y[e]
        };
        vm("host", function(q, R, Z) {
            Z && R.setHost(Z)
        }, {
            "delete": {
                visible: function(P, d) {
                    return d.getHost()
                },
                action: function(I, p) {
                    p.setHost(null)
                }
            }
        }),
        vm("parent", function(s, B, q) {
            q && B.setParent(q)
        }, {
            "delete": {
                visible: function(D, i) {
                    return i.getParent()
                },
                action: function(U, r) {
                    r.setParent(null)
                }
            }
        }),
        vm("copySize", function(G, A, y) {
            if (y) {
                var x = y.getSize();
                A.setSize(x)
            }
        }),
        vm("copyRotation", function(_, q, X) {
            if (X) {
                var A = X.getRotation();
                q.setRotation(A)
            }
        }),
        vm("edge", function(P, o, G) {
            if (G) {
                var v = new C.Edge(o,G);
                o.dm().add(v)
            }
        }),
        lk(j, {
            setConnectAction: vm,
            getConnectAction: function(H, c) {
                return c = c || H.getCurrentConnectActionType(),
                Ah[c]
            },
            doConnectAction: function(x, q, C, T) {
                T = T || x.getCurrentConnectActionType();
                var W = Ah[T];
                if (!W)
                    return !1;
                var v = W.action;
                return v ? (v.call(null, x, q, C),
                !0) : !1
            },
            doDeleteConnectionAction: function(u, M, A) {
                A = A || u.getCurrentConnectActionType();
                var J = Ah[A];
                if (!J || !J.delete)
                    return !1;
                var U = J.delete.action;
                return U ? (U.call(null, u, M),
                !0) : !1
            }
        });
        var kr = C.JSONSerializer = function(K, Y) {
            this.dm = this._dataModel = K,
            this._hierarchical = j.forceHierarchicalSerialization ? !0 : Y == V ? K.isHierarchicalRendering() : Y
        }
        ;
        bm("JSONSerializer", m, {
            ms_ac: ["hierarchical"],
            serialize: function(o) {
                return j.stringify(this.toJSON(), o)
            },
            toJSON: function() {
                var f = this
                  , V = f.dm
                  , s = V.getRoots()
                  , e = f.json = {
                    v: j.getVersion(),
                    p: {},
                    a: {},
                    d: []
                }
                  , A = V.getSerializableAttrs();
                V.getInit() && (e.init = V.getInit()),
                V.getName() && (e.p.name = V.getName()),
                V.getBackground() && (e.p.background = V.getBackground()),
                V.getLayers() && (e.p.layers = V.getLayers()),
                e.p.autoAdjustIndex = V.isAutoAdjustIndex(),
                e.p.hierarchicalRendering = V.isHierarchicalRendering();
                for (var S in A) {
                    var r = V.a(S);
                    r !== F && f[Kh](S, r, e.a)
                }
                return zf(e.a) && delete e.a,
                f._hierarchical ? s.each(f.serializeData, this) : V.each(function(h) {
                    f.serializeData(h)
                }),
                e
            },
            isSerializable: function() {
                return !0
            },
            getProperties: function(K) {
                return K.getSerializableProperties()
            },
            getStyles: function(y) {
                return y.getSerializableStyles()
            },
            getAttrs: function(T) {
                return T.getSerializableAttrs()
            },
            serializeData: function(W) {
                var c = this;
                if (c.isSerializable(W) && !W._refGraph) {
                    var k, L, _, R, B = Fp(W.getClassName()) || W.getClass(), P = new B, J = {
                        c: W.getClassName(),
                        i: W.getId(),
                        p: {},
                        s: {},
                        a: {}
                    };
                    c.json.d.push(J),
                    k = c.getProperties(W);
                    for (L in k)
                        /^_/.test(L) ? (_ = W[L],
                        _ !== P[L] && c[Kh](L.substr(1), _, J.p)) : (R = Eh(L),
                        W[R] && (_ = W[R](),
                        _ !== P[R]() && c[Kh](L, _, J.p)));
                    k = c.getStyles(W);
                    for (L in k)
                        _ = W.s(L),
                        _ !== P.s(L) && c[Kh](L, _, J.s);
                    k = c.getAttrs(W);
                    for (L in k)
                        _ = W.a(L),
                        _ !== P.a(L) && c[Kh](L, _, J.a);
                    zf(J.p) && delete J.p,
                    zf(J.s) && delete J.s,
                    zf(J.a) && delete J.a
                }
                c._hierarchical && W.getChildren().each(c.serializeData, c)
            },
            serializeValue: function(t, W, m) {
                Gl(W) ? W = {
                    __a: W._as
                } : W instanceof $n && (W = {
                    __i: W.getId()
                }),
                m[t] = W
            },
            deserialize: function(A, c, l) {
                var X = this
                  , v = X.dm;
                v.beginTransaction(),
                Xi++,
                l = mk(l) ? {
                    setId: l
                } : l || {},
                A = X.json = xe(A) ? j.parse(A) : A,
                X._82I = {};
                var R = new Vr
                  , k = new Vr
                  , M = 0
                  , Q = A.d.length;
                if (l.justDatas || (Vq(A.init) && A.init(v),
                v.setInit(A.init)),
                !l.justDatas) {
                    for (var N in A.a)
                        v.a(N, X[Je](A.a[N]));
                    for (var o in A.p)
                        v[Ei(o)](A.p[o])
                }
                for (; Q > M; M++) {
                    var Z = A.d[M]
                      , n = Fp(Z.c)
                      , G = new n
                      , K = Z.i;
                    l.setId && K != V && (G._id = K),
                    X._82I[K] = G,
                    R.add(G),
                    k.add(Z)
                }
                for (M = 0; Q > M; M++)
                    X.deserializeData(R.get(M), k.get(M));
                return R.each(function(y) {
                    c && !y.getParent() && y.setParent(c),
                    v.add(y)
                }),
                Xi--,
                v.endTransaction(),
                R
            },
            deserializeData: function(f, d) {
                for (var N in d.p)
                    f[Ei(N)](this[Je](d.p[N]));
                for (N in d.s)
                    f.s(N, this[Je](d.s[N]));
                for (N in d.a)
                    f.a(N, this[Je](d.a[N]))
            },
            deserializeValue: function(F) {
                if (Ag(F)) {
                    var u = F.__i;
                    if (u != V)
                        return this._82I[u];
                    if (u = F.__a,
                    _b(u))
                        return new Vr(u)
                }
                return F
            }
        }),
        lk(Wm, {
            serialize: function($, V) {
                return new kr(this,V).serialize($)
            },
            toJSON: function(h) {
                return new kr(this,h).toJSON()
            },
            deserialize: function(g, M, P) {
                return new kr(this).deserialize(g, M, P)
            }
        });
        var Dg = C.OverlappingBox = function(Y) {
            this.gv = Y,
            this.boxes = {}
        }
        ;
        bm("OverlappingBox", m, {
            clear: function() {
                var U, _, i = this.boxes;
                for (U in i)
                    _ = i[U],
                    _.length = 0
            },
            isOverlapping: function(B, v) {
                var f, S, T = this, d = T.boxes, W = d[B];
                W ? (f = W.rects,
                S = W.length) : W = d[B] = {
                    rects: f = [],
                    length: S = 0
                };
                var s, D, v;
                for (s = 0; S > s; s++)
                    if (D = f[s],
                    D.x < v.x + v.w && D.x + D.w > v.x && D.y < v.y + v.h && D.h + D.y > v.y)
                        return !0;
                return f.length <= S ? (f.push(v),
                W.length++) : f[W.length++] = v,
                !1
            }
        }),
        tp.GraphView = function(g) {
            var M = this;
            M._24I = {},
            M._34I = new Vr,
            M._25I = {},
            M._56I = {},
            M._view = Gc(1, M),
            M._canvas = qb(M._view),
            M.dm(g ? g : new Wm),
            this._coreInteractor = new Ch(this),
            M.setEditable(!1),
            M.setScrollBarVisible(j.graphViewScrollBarVisible)
        }
        ,
        Rk("GraphView", m, {
            ms_v: 1,
            ms_gv: 1,
            ms_bnb: 1,
            ms_tip: 1,
            ms_dm: 1,
            ms_lp: 1,
            ms_fire: 1,
            ms_sm: 1,
            _49o: 1,
            ms_txy: 1,
            _52o: 1,
            _51o: 1,
            ms_ac: [Vi, Hc, Ao, Hl, "resettable", "editInteractor", Hk, "pannable", "rectSelectable", "autoScrollZone", os, "movableFunc", "editableFunc", "pointEditableFunc", "rectEditableFunc", "rotationEditableFunc", "anchorEditableFunc", "rectSelectBackground", "rectSelectBorderColor", "editPointSize", "editPointBorderColor", "editPointBackground", "hoverDelay"],
            _resettable: j.graphViewResettable,
            _pannable: j.graphViewPannable,
            _rectSelectable: j.graphViewRectSelectable,
            _autoScrollZone: j.graphViewAutoScrollZone,
            _rectSelectBackground: j.graphViewRectSelectBackground,
            _rectSelectBorderColor: j.graphViewRectSelectBorderColor,
            _editPointSize: j.graphViewEditPointSize,
            _editPointBorderColor: j.graphViewEditPointBorderColor,
            _editPointBackground: j.graphViewEditPointBackground,
            _scrollBarColor: th,
            _scrollBarSize: xs,
            _autoHideScrollBar: Op,
            _autoMakeVisible: Ck,
            _currentActionType: "host",
            getCoreInteractor: function() {
                return this._coreInteractor
            },
            getLayers: function() {
                return this._dataModel.getLayers()
            },
            setLayers: function(N) {
                this._dataModel.setLayers(N)
            },
            setEditable: function(n) {
                var L = this
                  , D = L.__interactorMap__;
                if (!D) {
                    var g = tp.XEditInteractor;
                    D = L.__interactorMap__ = {
                        scrollBar: new ye(L),
                        select: new Kg(L),
                        edit: g ? new g(L) : new nj(L),
                        move: new qe(L),
                        "default": new nb(L),
                        touch: new sr(L,{
                            editable: !1
                        })
                    }
                }
                n ? (L._uieditable = !0,
                L.setInteractors([D.scrollBar, D.select, D.edit, D.move, D.default, D.touch])) : (L._uieditable = !1,
                L.setInteractors([D.scrollBar, D.select, D.move, D.default, D.touch]))
            },
            getCanvas: function() {
                return this._canvas
            },
            _33I: function(G) {
                var A = G.getUIClass();
                return A ? new A(this,G) : V
            },
            getDataUI: function(e) {
                var y = this
                  , a = y._25I[e._id];
                return a === F && (a = y._33I(e),
                y._25I[e._id] = a),
                a
            },
            getNodeRect: function(F) {
                return j.getNodeRect(this, F)
            },
            getEdgeInfo: function(l) {
                var C = this.getDataUI(l);
                return C ? (C._79o(),
                C._78o) : null
            },
            getEdgeSourcePosition: function(W) {
                var X = this
                  , r = X.getDataUI(W)
                  , V = r.s
                  , S = r._data._40I;
                return xp(X, S, V("edge.source.position"), V("edge.source.offset.x"), V("edge.source.offset.y"), V("edge.source.anchor.x"), V("edge.source.anchor.y"))
            },
            getEdgeTargetPosition: function(o) {
                var a = this
                  , Q = a.getDataUI(o)
                  , z = Q.s
                  , J = Q._data._41I;
                return xp(a, J, z("edge.target.position"), z("edge.target.offset.x"), z("edge.target.offset.y"), z("edge.target.anchor.x"), z("edge.target.anchor.y"))
            },
            invalidateAll: function(A) {
                var N = this;
                if (A) {
                    for (var S in N._25I) {
                        var c = N._25I[S];
                        c && c.dispose()
                    }
                    N._25I = {},
                    N._56I = {},
                    N._24I = {},
                    N._34I.clear(),
                    N.redraw()
                } else
                    N.dm().each(function(o) {
                        N.invalidateData(o)
                    })
            },
            invalidateSelection: function() {
                var S = this;
                S.sm().each(function(w) {
                    S.invalidateData(w)
                })
            },
            invalidateData: function(_) {
                var W = this;
                W._24I[_._id] = _,
                W._21Q(_),
                W.iv()
            },
            _21Q: function(T) {
                var e = this
                  , I = e._24I;
                if (vb(T) && al[T.s(bp)]) {
                    var u = T.getSourceAgent();
                    u && u.getAgentEdges().each(function(w) {
                        I[w._id] = w
                    }),
                    u = T.getTargetAgent(),
                    u && u.getAgentEdges().each(function(G) {
                        I[G._id] = G
                    }),
                    e.iv()
                }
            },
            redraw: function(w) {
                var d = this;
                d._32I || (w ? d._34I.add(w) : (d._32I = 1,
                d._34I.clear()),
                d.iv())
            },
            each: function(I, _) {
                var U, g, K, t = 0, J = this.getLayers(), S = this._dataModel, h = S._datas._as, w = h.length;
                if (J) {
                    for (var b = J.length; b > t; t++)
                        if (K = J[t],
                        Ag(K) && (K = K.name),
                        S.isHierarchicalRendering()) {
                            var B = function(L) {
                                return L._layer === K ? _ ? I.call(_, L) : I(L) : void 0
                            };
                            if (this._dataModel.eachByHierarchical(B) === !1)
                                return
                        } else
                            for (var A = 0; w > A; A++)
                                if (U = h[A],
                                U._layer === K && (g = _ ? I.call(_, U) : I(U),
                                g === !1))
                                    return
                } else if (S.isHierarchicalRendering())
                    this._dataModel.eachByHierarchical(I, null, _);
                else
                    for (; w > t; t++)
                        if (U = h[t],
                        g = _ ? I.call(_, U) : I(U),
                        g === !1)
                            return
            },
            reverseEach: function(T, g) {
                var z, a, h, p, w = this._dataModel, K = w._layers, c = w._datas._as, v = c.length;
                if (K) {
                    for (z = K.length - 1; z >= 0; z--)
                        if (p = K[z],
                        Ag(p) && (p = p.name),
                        w.isHierarchicalRendering()) {
                            var s = function(w) {
                                return w._layer === p ? g ? T.call(g, w) : T(w) : void 0
                            };
                            if (w.reverseEachByHierarchical(s) === !1)
                                return
                        } else
                            for (var O = v - 1; O >= 0; O--)
                                if (a = c[O],
                                a._layer === p && (h = g ? T.call(g, a) : T(a),
                                h === !1))
                                    return
                } else if (w.isHierarchicalRendering())
                    w.reverseEachByHierarchical(T, null, g);
                else
                    for (z = v - 1; z >= 0; z--)
                        if (a = c[z],
                        h = g ? T.call(g, a) : T(a),
                        h === !1)
                            return
            },
            getViewRect: function() {
                return this._29I
            },
            getContentRect: function() {
                var Z = this
                  , b = Z._84I;
                if (!b) {
                    var r = this.dm().a("width")
                      , f = this.dm().a("height");
                    r > 0 && f > 0 ? Z._84I = {
                        x: 0,
                        y: 0,
                        width: r,
                        height: f
                    } : (Z.each(function(L) {
                        Z.isVisible(L) && (b = Ql(b, Z.getDataUIBounds(L)))
                    }),
                    Z._84I = b ? b : zs)
                }
                return Z._84I
            },
            getScrollRect: function() {
                return Ql(this.getContentRect(), this._29I)
            },
            makeCenter: function(W, X, g) {
                var L = this;
                if (!L.getWidth() || !L.getHeight())
                    return g || dk(L.centerData, L, [W, X, !0], 500),
                    void 0;
                L.makeVisible(W),
                L.validate();
                var _ = L.getDataUIBounds(W);
                if (_) {
                    var b = L.getWidth()
                      , P = L.getHeight()
                      , p = _.x + _.width / 2
                      , t = _.y + _.height / 2
                      , R = -p * L._zoom + b / 2
                      , J = -t * L._zoom + P / 2;
                    L.setTranslate(R, J, X)
                }
            },
            fitData: function(W, p, i, B, o) {
                var u = this;
                if (!u.getWidth() || !u.getHeight())
                    return o || dk(u.fitData, u, [W, p, i, B, !0], 500),
                    void 0;
                var y = function() {
                    u.makeVisible(W),
                    u.validate();
                    var l = u.getDataUIBounds(W);
                    l && (l = nc(l),
                    Qf(l, i == V ? 20 : i),
                    u.fitRect(l, p, B))
                };
                p ? j.callWhenLoaded(y) : y()
            },
            fitContent: function(Q, S, E, U) {
                var M = this;
                if (!M.getWidth() || !M.getHeight())
                    return U || dk(M.fitContent, M, [Q, S, E, !0], 500),
                    void 0;
                var i = function() {
                    M.validate();
                    var p = nc(M.getContentRect());
                    Qf(p, S == V ? 20 : S),
                    M.fitRect(p, Q, E)
                };
                Q ? j.callWhenLoaded(i) : i()
            },
            fitRect: function(I, X, d) {
                var w = this
                  , s = w.getWidth()
                  , T = w.getHeight()
                  , g = I.x + I.width / 2
                  , h = I.y + I.height / 2
                  , j = b(s / I.width, T / I.height)
                  , E = w._zoom
                  , i = -g * E + s / 2
                  , O = -h * E + T / 2;
                0 === j || isNaN(j) || (d && (j = b(1, j)),
                X ? w.setTranslate(i, O, {
                    finishFunc: function() {
                        w.setZoom(j, X)
                    }
                }) : (w.setTranslate(i, O),
                w.setZoom(j)))
            },
            toCanvas: function(o, Q) {
                Q = Q || this._zoom,
                this.validateImpl();
                var f = this
                  , V = f.getContentRect();
                V.width || (V.width = 10),
                V.height || (V.height = 10);
                var j = qb()
                  , A = V.x * Q
                  , G = V.y * Q
                  , O = V.width * Q
                  , k = V.height * Q;
                ug(j, O, k, 1);
                var c = Zf(j);
                return o = o || this._dataModel.getBackground(),
                o && he(c, 0, 0, O, k, o),
                Sc(c, -A, -G),
                c.scale(Q, Q),
                f._42(c),
                c.restore(),
                j
            },
            toDataURL: function(M, w, c) {
                return this.toCanvas(M, c).toDataURL(w || "image/png", 1)
            },
            getClipBounds: function() {
                return this._74O
            },
            _42: function(_, F) {
                var H = this;
                H._93db(_, F),
                H.each(function(S) {
                    var k = H.getDataUI(S);
                    if (k) {
                        var c = H._56I[S._id];
                        if (c) {
                            var V = k._79o();
                            C.HtmlNode && S instanceof C.HtmlNode ? k._42(_) : (!F || Ar(F, V)) && k._42(_)
                        }
                        var I = k._htmlView;
                        I && (c && I.layoutHTML && I.layoutHTML(),
                        I.style.display = c ? "block" : uk)
                    }
                }),
                H._92db(_, F)
            },
            validateImpl: function() {
                var K, R, r, x, B, U = this, h = U.tx(), d = U.ty(), H = U._zoom, C = U._canvas, y = this.getWidth(), j = this.getHeight(), v = U._29I, L = {
                    x: -h / H,
                    y: -d / H,
                    width: y / H,
                    height: j / H
                }, z = {}, p = U._34I, l = U._24I, s = U._32I, t = U._23I;
                U._24I = {},
                (y !== C.clientWidth || j !== C.clientHeight) && (ug(C, y, j),
                s = 1),
                s || gi(L, v) || (s = 1),
                U._29I = L,
                U.each(function(d) {
                    R = d._id;
                    var F = z[R] = U.isVisible(d);
                    F !== U._56I[R] && (l[R] = d,
                    r = U.getDataUI(l[R]),
                    r && r._84o(F),
                    U._84o(d, F))
                }, U);
                for (R in l)
                    r = U.getDataUI(l[R]),
                    r && (!s && U._56I[R] && (B = r._79o(),
                    B && p.add(B)),
                    r.invalidate()),
                    U._83I = 1;
                if (U._56I = z,
                !s)
                    for (R in l)
                        z[R] && (r = U.getDataUI(l[R]),
                        r && (B = r._79o(),
                        B && p.add(B)));
                if (s ? x = L : (p.each(function(f) {
                    Ar(L, f) && (x = Ql(x, f))
                }),
                x && (Qf(x, X(1, 1 / H)),
                x.x = M(x.x * H) / H,
                x.y = M(x.y * H) / H,
                x.width = I(x.width * H) / H,
                x.height = I(x.height * H) / H,
                x = qj(L, x))),
                U._74O = x,
                x) {
                    K = Zf(C);
                    var u = x.x
                      , E = x.y
                      , N = x.width
                      , q = x.height;
                    u = Math.floor((u * H + h) * nk),
                    E = Math.floor((E * H + d) * nk),
                    N = Math.ceil(N * H * nk) + 1,
                    q = Math.ceil(q * H * nk) + 1,
                    K.beginPath(),
                    K.rect(u, E, N, q),
                    K.clip(),
                    K.clearRect(u, E, N, q),
                    Pk(K, h, d, H),
                    U._42(K, x),
                    K.restore(),
                    delete U._74O
                }
                if (p.clear(),
                delete U._32I,
                t && y > 0 && j > 0) {
                    var r = U.getDataUI(t);
                    if (r) {
                        var B = r._79o()
                          , n = U._29I
                          , Z = n.x
                          , a = n.y
                          , w = n.width
                          , c = n.height
                          , H = U._zoom;
                        B && !Ar(B, n) && (B.x + B.width < Z && U.tx(-B.x * H),
                        B.x > Z + w && U.tx(-(B.x + B.width - w) * H),
                        B.y + B.height < a && U.ty(-B.y * H),
                        B.y > a + c && U.ty(-(B.y + B.height - c) * H))
                    }
                    delete U._23I
                }
                U._83I && (delete U._83I,
                delete U._84I),
                U._98O(),
                zf(U._24I) || dk(U.iv, U)
            },
            isScrollBarVisible: function() {
                return !!this._79O
            },
            setScrollBarVisible: function(j) {
                var w = this;
                j !== w.isScrollBarVisible() && (j ? (mg(w._view, w._79O = ff()),
                mg(w._79O, w._27I = ff()),
                mg(w._79O, w._28I = ff())) : (hp(w._79O),
                delete w._79O,
                delete w._27I,
                delete w._28I),
                w.fp("scrollBarVisible", !j, j))
            },
            showScrollBar: function() {
                var F = this;
                F._79O && (F._85I || (Q(function() {
                    F._86I()
                }, Wh),
                F.iv()),
                F._85I = new Date)
            },
            _86I: function() {
                var R = this;
                if (R._85I) {
                    var K = new Date
                      , k = K.getTime();
                    k - R._85I.getTime() >= Wh ? (delete R._85I,
                    R.iv()) : Q(function() {
                        R._86I()
                    }, Wh)
                }
            },
            getVScrollBar: function() {
                return this._27I
            },
            getHScrollBar: function() {
                return this._28I
            },
            _98O: function() {
                var A = this
                  , C = this._27I
                  , H = this._28I;
                if (A._79O) {
                    if (A._autoHideScrollBar && !A._85I)
                        return C.style.visibility = te,
                        H.style.visibility = te,
                        void 0;
                    var u = A.getScrollBarColor()
                      , o = A._zoom
                      , Q = A.getScrollBarSize()
                      , B = A.getViewRect()
                      , l = A.getScrollRect()
                      , N = B.height * o
                      , O = l.height * o
                      , j = B.width * o - Q - 2
                      , p = N * ((B.y - l.y) * o / O)
                      , a = N * (N / O)
                      , e = C.style;
                    O - .5 > N ? (bj > a && (p = p + a / 2 - bj / 2,
                    0 > p && (p = 0),
                    p + bj > N && (p = N - bj),
                    a = bj),
                    Pc(C, j, p, Q, a),
                    e.visibility = Fi,
                    e.background = u,
                    e.borderRadius = Q / 2 + gn) : e.visibility = te;
                    var i = B.width * o
                      , Z = l.width * o
                      , p = B.height * o - Q - 2
                      , j = i * ((B.x - l.x) * o / Z)
                      , D = i * (i / Z)
                      , e = H.style;
                    Z - .5 > i ? (bj > D && (j = j + D / 2 - bj / 2,
                    0 > j && (j = 0),
                    j + bj > i && (j = i - bj),
                    D = bj),
                    Pc(H, j, p, D, Q),
                    e.visibility = Fi,
                    e.background = u,
                    e.borderRadius = Q / 2 + gn) : e.visibility = te
                }
            },
            setDataModel: function(e) {
                var V = this
                  , $ = V._dataModel
                  , J = V._selectionModel;
                $ !== e && ($ && ($.ump(V.handleDataModelPropertyChange, V),
                $.umm(V.handleDataModelChange, V),
                $.umd(V.handleDataPropertyChange, V),
                $.removeIndexChangeListener(V._75O, V),
                $.removeHierarchyChangeListener(V.handleHierarchyChange, V),
                J || $.sm().ums(V.handleSelectionChange, V)),
                V._dataModel = e,
                e.mp(V.handleDataModelPropertyChange, V),
                e.mm(V.handleDataModelChange, V),
                e.md(V.handleDataPropertyChange, V),
                e.addIndexChangeListener(V._75O, V),
                e.addHierarchyChangeListener(V.handleHierarchyChange, V),
                J ? J._21I(e) : e.sm().ms(V.handleSelectionChange, V),
                V.invalidateAll(!0),
                V.fp(gr, $, e),
                V._canvas.style.background = e.getBackground() || "")
            },
            getLayersInfo: function() {
                if (this._layersInfo === F) {
                    var l = this.getLayers();
                    l ? (this._layersInfo = {},
                    l.forEach(function(l) {
                        var I = Ag(l) ? l.name : l;
                        this._layersInfo[I] = l
                    }, this)) : this._layersInfo = null
                }
                return this._layersInfo
            },
            updateLayers: function() {
                this._layersInfo = F,
                this.invalidateSelection(),
                this.redraw()
            },
            handleDataModelPropertyChange: function(r) {
                if ("background" === r.property) {
                    var f = this._canvas.style.background
                      , t = r.newValue || "";
                    this._canvas.style.background = t,
                    this.fp("canvasBackground", f, t)
                } else
                    "a:width" === r.property || "a:height" === r.property ? (this._83I = 1,
                    this.redraw()) : "layers" === r.property ? this.updateLayers() : "hierarchicalRendering" === r.property && this.redraw()
            },
            handleDataPropertyChange: function(Q) {
                this.dm().isHierarchicalRendering() && "parent" === Q.property && Q.data.hasChildren() && this.redraw(),
                this.invalidateData(Q.data)
            },
            onPropertyChanged: function(o) {
                var t = this
                  , v = o.property;
                if (t.redraw(),
                "zoom" === v) {
                    var I = t.sm().getSelection();
                    I.size() && I.each(function(P) {
                        P.invalidate()
                    })
                }
                je[v] ? t.showScrollBar() : v === Hk && t.onCurrentSubGraphChanged(o)
            },
            onCurrentSubGraphChanged: function() {
                this.sm().cs(),
                this.reset()
            },
            handleDataModelChange: function(w) {
                var d = this
                  , Y = w.kind
                  , v = w.data;
                if (d._83I = 1,
                "add" === Y)
                    d.invalidateData(v),
                    vb(v) && v.getEdgeGroup() && v.getEdgeGroup().eachSiblingEdge(d.invalidateData, d);
                else if (Y === gf) {
                    d._21Q(v);
                    var M = v._id
                      , K = d._25I[M];
                    if (K) {
                        if (d._56I[M]) {
                            var A = K._79o();
                            A && d.redraw(A)
                        }
                        K.dispose(),
                        delete d._25I[M],
                        delete d._24I[M],
                        delete d._56I[M]
                    }
                    v === d._currentSubGraph && d.setCurrentSubGraph(V)
                } else
                    Y === vq && (d.invalidateAll(!0),
                    d.setCurrentSubGraph(V))
            },
            _75O: function(j) {
                this.invalidateData(j.data)
            },
            handleHierarchyChange: function(E) {
                this.dm().isHierarchicalRendering() && E.data.hasChildren() && this.redraw(),
                this.invalidateData(E.data)
            },
            adjustIndex: function(k) {
                var $ = this;
                if ($.isVisible(k)) {
                    $.dm().beginTransaction();
                    for (var m = k; m._parent && $.isVisible(m._parent); )
                        m = m._parent;
                    m && m !== k && $._dataModel.adjustIndex(m),
                    $._dataModel.adjustIndex(k),
                    $.dm().endTransaction()
                }
            },
            getImage: function(O) {
                return O.getImage ? O.getImage() : F
            },
            getSelectWidth: function(Q) {
                var U = bn(this.getImage(Q));
                return U && _p(U.disableSelectedBorder, Q, this) ? 0 : Q.s("select.width")
            },
            getSelectColor: function(m) {
                return m.s("select.color")
            },
            isSelectable: function(J) {
                if (!this._clickThroughChecking && J.getParent()instanceof Lc && J.getParent().isSyncSize())
                    return !1;
                var $ = this.getLayersInfo();
                if ($) {
                    var H = $[J._layer];
                    if (H && H.selectable === !1)
                        return !1
                }
                return J.s("2d.selectable") && this.sm().isSelectable(J)
            },
            isMovable: function(U) {
                var k = this;
                if (vb(U) && U.getStyle(bp) !== Se)
                    return !1;
                var H = this.getLayersInfo();
                if (H) {
                    var z = H[U._layer];
                    if (z && z.movable === !1)
                        return !1
                }
                return U.s("2d.movable") ? k._movableFunc ? k._movableFunc(U) : !0 : !1
            },
            isEditable: function(X) {
                var f = this;
                if (C._uiSerializing)
                    return f._uieditable;
                if (!f._editInteractor || !f.isSelected(X))
                    return !1;
                if (fm(X)) {
                    var u = f.getDataUI(X);
                    if (!u || u._88I)
                        return !1
                }
                if (vb(X) && X.getStyle(bp) !== Se)
                    return !1;
                var O = this.getLayersInfo();
                if (O) {
                    var U = O[X._layer];
                    if (U && U.editable === !1)
                        return !1
                }
                return X.s("2d.editable") ? f._editableFunc ? f._editableFunc(X) : !0 : !1
            },
            handleDelete: function() {
                this._editInteractor && (this._editInteractor.handleDelete ? this._editInteractor.handleDelete() : this.removeSelection())
            },
            isPointEditable: function(a) {
                return xj(a) && 0 !== a.getRotation() ? !1 : this._pointEditableFunc ? this._pointEditableFunc(a) : !0
            },
            isRectEditable: function(v) {
                return this._rectEditableFunc ? this._rectEditableFunc(v) : !0
            },
            isAnchorEditable: function(K) {
                return this._anchorEditableFunc ? this._anchorEditableFunc(K) : !0
            },
            isRotationEditable: function(R) {
                return R.setRotation && R.IRotatable !== !1 ? this._rotationEditableFunc ? this._rotationEditableFunc(R) : !0 : !1
            },
            getRotationPoint: function(b) {
                var C = b.getAnchor()
                  , T = b.getScale()
                  , p = this._zoom
                  , Y = $h(b.getRotation(), 0, -b.getHeight() * T.y * C.y - (T.y < 0 ? -1 : 1) * (Nq ? 32 : 16) / p)
                  , D = b.p();
                return Y.x += D.x,
                Y.y += D.y,
                Y
            },
            getLogicalPoint: function(J) {
                var e = this;
                return jd(J, e._canvas, e.tx(), e.ty(), e._zoom, e._zoom)
            },
            getSelectedDataAt: function(P) {
                var T = this;
                return this.getDataAt(P, function(F) {
                    return T.isSelected(F)
                })
            },
            getDataInfoAt: function(X, F, y) {
                var Z, x = this.lp(X), A = this.getDataAt(x, F, y);
                if (A) {
                    var I = this.getDataUI(A);
                    Z = {
                        data: A,
                        ui: I,
                        point: x
                    };
                    var $ = I._38o;
                    if ($) {
                        var b = $.icons;
                        for (var R in b) {
                            var h = b[R]
                              , E = $.rects[R];
                            if (E)
                                for (var k = _p(h.names, A, this), q = k ? k.length : 0, C = E.rotation, P = q - 1; P >= 0; P--) {
                                    var H = k[P]
                                      , r = E[P];
                                    if (Kp(r, x, C))
                                        return Z.part = "icons",
                                        Z.name = R,
                                        Z.icon = H,
                                        Z.rect = r,
                                        Z.index = P,
                                        Z.rotation = C,
                                        Z
                                }
                        }
                    }
                    if (this.isNoteVisible(A)) {
                        if (I.note2Info && Kp(I.note2Info.clickRect, x, V, I.note2Info.scale))
                            return Z.part = "note2",
                            Z;
                        if (I.noteInfo && Kp(I.noteInfo.clickRect, x, V, I.noteInfo.scale))
                            return Z.part = "note",
                            Z
                    }
                    if (this.isLabelVisible(A)) {
                        if (I.label2Info && Kp(I.label2Info.rect, x, I.label2Info.rotation, I.label2Info.scale))
                            return Z.part = "label2",
                            Z;
                        if (I.labelInfo && Kp(I.labelInfo.rect, x, I.labelInfo.rotation, I.labelInfo.scale))
                            return Z.part = "label",
                            Z
                    }
                    if (A.isInRect && A.isInRect(x))
                        return Z.part = "body",
                        Z
                }
                return Z
            },
            getDataAt: function(F, u, v) {
                F.target && (F = this.lp(F));
                var m, d = this._zoom;
                return this.reverseEach(function(t) {
                    return (u ? u(t) : this.isSelectable(t)) && this.rectIntersects(t, Ff(F.x, F.y, v, d)) ? (m = t,
                    !1) : void 0
                }, this),
                m
            },
            getIconInfoAt: function(o, e) {
                var R = this;
                if (o.target && (o = R.lp(o)),
                e || (e = R.getDataAt(o)),
                e) {
                    var $ = R.getDataUI(e);
                    if ($ && $._38o) {
                        var g, U = $._38o, T = new Vr;
                        for (g in U.icons)
                            T.add(g);
                        for (var F = T.size() - 1; F >= 0; F--) {
                            g = T.get(F);
                            for (var i = U.rects[g], W = i.rotation, h = i.length - 1; h >= 0; h--) {
                                var m = i[h]
                                  , n = m.width
                                  , Q = m.height
                                  , c = {
                                    x: o.x - m.x - n / 2,
                                    y: o.y - m.y - Q / 2
                                };
                                W != V && (c = $h(-W, c.x, c.y));
                                var m = {
                                    x: -n / 2,
                                    y: -Q / 2,
                                    width: n,
                                    height: Q
                                };
                                if (Kp(m, c))
                                    return {
                                        key: g,
                                        index: h,
                                        name: U.icons[g].names[h],
                                        rect: i[h],
                                        point: o,
                                        rotation: W,
                                        relativeRect: m,
                                        relativePoint: c,
                                        data: e
                                    }
                            }
                        }
                    }
                }
                return V
            },
            getDatasInRect: function(t, L, H) {
                H === F && (H = 1);
                var D = this
                  , O = new Vr;
                return D.reverseEach(function(W) {
                    H && !D.isSelectable(W) || (L ? D.rectIntersects(W, t) : D.rectContains(W, t)) && O.add(W)
                }),
                O
            },
            moveSelection: function(P, _) {
                var s = this;
                s.dm().beginTransaction(),
                Yb(s.sm().toSelection(s.isMovable, s), P, _),
                s.dm().endTransaction()
            },
            moveDatas: function(r, o, s) {
                var k = this;
                k.dm().beginTransaction(),
                r instanceof Vr || (r = new Vr(r)),
                Yb(r, o, s),
                k.dm().endTransaction()
            },
            getDataUIBounds: function(L) {
                var f = this.getDataUI(L);
                return f ? f._79o() : V
            },
            drawData: function(m, k, T) {
                var r = this.getDataUI(k);
                if (r) {
                    var R = r._79o();
                    (!T || Ar(T, R)) && (r._42(m),
                    k instanceof C.Block && k.eachChild(function(r) {
                        this.drawData(m, r, T)
                    }, this))
                }
            },
            getBoundsForGroup: function(K) {
                return K.s(Th) ? this.getDataUIBounds(K) : V
            },
            isPixelPerfect: function(w) {
                return w.s("pixelPerfect")
            },
            rectIntersects: function(M, X) {
                this.validate();
                var D = V;
                if (this._56I[M._id]) {
                    var K = this._25I[M._id];
                    if (K) {
                        var T = K._79o();
                        if (Kd(X, T))
                            D = !0;
                        else if ((X = qj(X, T)) && (K.rectIntersects && (D = K.rectIntersects(X)),
                        D == V)) {
                            if (!this.isPixelPerfect(M))
                                return !0;
                            var Y = X.x
                              , o = X.y
                              , B = X.width
                              , c = X.height
                              , a = this._zoom
                              , C = j.hitMaxArea
                              , g = B * c * a * a;
                            if (g > C) {
                                var v = Math.sqrt(C / g);
                                a *= v
                            }
                            B *= a,
                            c *= a,
                            2 > B && (B = 2),
                            2 > c && (c = 2),
                            Y *= a,
                            o *= a;
                            var E = Kj(B, c);
                            Sc(E, -Y, -o),
                            E.scale(a, a),
                            this._drawForChecking = !0,
                            this.drawData(E, M, X),
                            this._drawForChecking = !1;
                            try {
                                for (var S = 0, i = E.getImageData(0, 0, B, c).data; S < i.length; S += 4)
                                    if (0 !== i[S + 3]) {
                                        D = !0;
                                        break
                                    }
                                E.restore()
                            } catch (l) {
                                zb = V,
                                D = !1
                            }
                        }
                    }
                }
                return D ? !0 : !1
            },
            rectContains: function(s, c) {
                if (this._56I[s._id]) {
                    var t = this._25I[s._id];
                    if (t)
                        return Kd(c, t._79o())
                }
                return !1
            },
            reset: function() {
                this.setZoom(1),
                this.setTranslate(0, 0)
            },
            handleKeyDown: function(m) {
                if (!j.isInput(m.target)) {
                    var L = this
                      , h = L._focusData
                      , b = h && L._25I[h._id]
                      , G = 0
                      , D = L._dataModel._datas;
                    if (!(h && h._enabled && h._editable && b && b.onKeyDown && b.onKeyDown(m) === !0))
                        if (9 === m.keyCode && (h && (G = D.indexOf(h),
                        ig(m) ? -1 === --G && (G = 0) : ++G === D.size() && (G = 0)),
                        L._focusData = h = D.get(G),
                        L.sm().setSelection(h)),
                        Nd(m) ? L.selectAll() : uc(m) && L.isResettable() && L.reset(),
                        L.sm().isEmpty()) {
                            if (L._editing)
                                return;
                            var P = L.tx()
                              , l = L.ty()
                              , y = !1
                              , $ = ig() ? 100 : 10;
                            Db(m) && (P -= $,
                            y = !0),
                            Xc(m) && (l -= $,
                            y = !0),
                            Hb(m) && (P += $,
                            y = !0),
                            On(m) && (l += $,
                            y = !0),
                            y && L.setTranslate(P, l)
                        } else {
                            Sm(m) && L.handleDelete(m);
                            var p = ig() ? 10 : 1;
                            Db(m) && (L.moveSelection(-p, 0),
                            L.fi({
                                kind: "moveLeft"
                            })),
                            Xc(m) && (L.moveSelection(0, -p),
                            L.fi({
                                kind: "moveUp"
                            })),
                            Hb(m) && (L.moveSelection(p, 0),
                            L.fi({
                                kind: "moveRight"
                            })),
                            On(m) && (L.moveSelection(0, p),
                            L.fi({
                                kind: "moveDown"
                            }))
                        }
                }
            },
            handleScroll: function(z, I) {
                if (vh(z),
                !this.getEditInteractor()) {
                    var s = this.getDataAt(z);
                    if (s) {
                        var F = bn(this.getImage(s));
                        if (F && _p(F.scrollable, s, this))
                            return
                    }
                }
                var L = this.lp(z);
                I > 0 ? this.scrollZoomIn(L) : 0 > I && this.scrollZoomOut(L)
            },
            handlePinch: function(i, G, h) {
                this._68I || (G > h ? this.pinchZoomIn(i) : this.pinchZoomOut(i))
            },
            checkDoubleClickOnNote: function(q, G) {
                var p = this
                  , g = p.lp(q)
                  , v = p.getDataUI(G)
                  , H = v.note2Info;
                return H && G.s("note2.toggleable") && Kp(H.clickRect, g) ? (G.s(fo, !G.s(fo)),
                p.fi({
                    kind: "toggleNote2",
                    event: q,
                    data: G
                }),
                !0) : (H = v.noteInfo,
                H && G.s("note.toggleable") && Kp(H.clickRect, g) ? (G.s(nq, !G.s(nq)),
                p.fi({
                    kind: "toggleNote",
                    event: q,
                    data: G
                }),
                !0) : !1)
            },
            _84o: function() {},
            isNoteVisible: function() {
                return this._zoom > .15
            },
            isLabelVisible: function() {
                return this._zoom > .15
            },
            isEditVisible: function() {
                return this._zoom > .15
            },
            autoScroll: function(I, w) {
                var V = this
                  , x = V.getAutoScrollZone()
                  , j = x / V.getZoom()
                  , O = x / 4
                  , N = V._29I
                  , U = V.lp(I)
                  , o = {
                    x: V.tx(),
                    y: V.ty()
                };
                return U && x > 0 && N && (U.x - N.x < j ? V.translate(O, 0) : N.x + N.width - U.x < j && V.translate(-O, 0),
                U.y - N.y < j ? V.translate(0, O) : N.y + N.height - U.y < j && V.translate(0, -O)),
                o.x = V.tx() - o.x,
                o.y = V.ty() - o.y,
                w && (w.x += o.x,
                w.y += o.y),
                o
            },
            getMoveMode: function(Y, s) {
                var l = s.s("2d.move.mode");
                return l ? l : Vj["88"] ? "x" : Vj["89"] ? "y" : "xy"
            },
            getSerializableProperties: function() {
                return {
                    scrollBarColor: 1,
                    scrollBarSize: 1,
                    autoMakeVisible: 1,
                    autoHideScrollBar: 1,
                    editable: 1,
                    resettable: 1,
                    pannable: 1,
                    rectSelectable: 1,
                    autoScrollZone: 1,
                    visibleFunc: 1,
                    movableFunc: 1,
                    editableFunc: 1,
                    pointEditableFunc: 1,
                    rectEditableFunc: 1,
                    anchorEditableFunc: 1,
                    rotationEditableFunc: 1,
                    rectSelectBackground: 1,
                    rectSelectBorderColor: 1,
                    editPointSize: 1,
                    editPointBorderColor: 1,
                    editPointBackground: 1,
                    hoverDelay: 1,
                    dataModel: 1,
                    selectionModel: 1,
                    currentSubGraph: 1,
                    zoom: 1,
                    translateX: 1,
                    translateY: 1
                }
            },
            serializeProperty: function(W, X, E) {
                var o = this;
                return "currentSubGraph" === X ? {
                    __i: W.getId()
                } : E.serializeProperty(W, X, o)
            },
            deserializeProperty: function(w, i, Q) {
                var G = this;
                if ("currentSubGraph" === i) {
                    var V = G.dm()
                      , L = V.__idMap;
                    return L[w.__i]
                }
                return Q.deserializeProperty(w, i, G)
            },
            setDefaultCursor: function(L, d) {
                this._defaultCursor = L,
                d !== !1 && this.setCursor(L)
            },
            setCursor: function(V) {
                "default" === V && (V = this._defaultCursor || V);
                var j = this.getView().style;
                j.cursor = V,
                j.cursor = "-webkit-" + V,
                j.cursor = "-moz-" + V
            },
            getCurrentConnectActionType: function() {
                return this._currentActionType
            },
            setCurrentConnectActionType: function(a) {
                return j.getConnectAction(null, a) ? (this._currentActionType = a,
                !0) : !1
            },
            isInteractive: function(N) {
                var k = bn(this.getImage(N));
                return k && _p(k.interactive, N, this) ? !0 : N.s("interactive")
            },
            appendHTML: function(m) {
                var X = this.getView();
                if (!m || m.parentNode === X)
                    return !1;
                var c = this.getCanvas().nextSibling;
                return c ? X.insertBefore(m, c) : mg(X, m),
                !0
            },
            layoutHTML: function(V, m, D) {
                var y = this
                  , E = y._zoom;
                if (m.style.position = "absolute",
                D) {
                    var l = V.getRect();
                    Pc(m, y.tx() + l.x * E, y.ty() + l.y * E, l.width * E, l.height * E)
                } else {
                    var c = new Hh
                      , l = V.getAnchorRect()
                      , z = V.getPosition()
                      , b = V.getScale()
                      , R = m.style;
                    Pc(m, l),
                    c.appendTranslate(y.tx(), y.ty()),
                    c.appendScale(E, E),
                    c.append(new Hh(V.getRotation(),z.x,z.y,b.x,b.y)),
                    Ij(R, "transform", "matrix(" + c.a.toFixed(5) + ", " + c.b.toFixed(5) + ", " + c.c.toFixed(5) + ",\n    " + c.d.toFixed(5) + ", " + c.tx.toFixed(5) + ", " + c.ty.toFixed(5) + ")"),
                    Ij(R, "transformOrigin", (-l.x).toFixed(5) + "px " + (-l.y).toFixed(5) + "px")
                }
            }
        });
        var Uh = function(U, e) {
            var t = this;
            t.gv = U,
            t.s = function($) {
                return e.getStyle($)
            }
            ,
            t._data = e,
            t._87I = new Vr
        };
        fh(Uh, m, {
            _6I: V,
            ms_icons: 1,
            _84o: function() {},
            dispose: function() {},
            isShadowed: function() {
                return this.s("shadow") || this.gv.isSelected(this._data) && "shadow" === this.s("select.type")
            },
            getSelectWidth: function() {
                var K = this
                  , C = K.gv.isSelected(K._data);
                return !C || K.isShadowed() ? 0 : K.gv.getSelectWidth(K._data)
            },
            getSelectColor: function() {
                return this.gv.getSelectColor(this._data)
            },
            getBodyColor: function(f) {
                var o = this._data
                  , G = this.gv.getBodyColor(o);
                return G ? G : f ? o.getStyle(f) : V
            },
            _2Q: function(v) {
                return this.s(v)
            },
            _1Q: function(Z, K, Q, s) {
                var h = this.s
                  , J = h(K + ".dash.color");
                Z.strokeStyle = J,
                Z.lineWidth = Q,
                Z.stroke(),
                h(K + ".dash.3d") && Tq(Z, J, h(K + ".dash.3d.color"), Q, this.gv._zoom, h(K + ".dash.3d.accuracy")),
                pl(Z, s)
            },
            invalidate: function() {
                this._6I = V
            },
            _79o: function() {
                var u = this;
                if (!u._6I) {
                    var j = u._data
                      , I = u.gv;
                    u.labelInfo = u.label2Info = u.noteInfo = u.note2Info = u._38o = V,
                    u._87I.clear(),
                    u.interactiveInfo = I.isInteractive(j) ? {} : V,
                    u._3O(),
                    u._55O = I.isEditable(j) ? {
                        _42O: I.isRectEditable(j),
                        _43O: I.isPointEditable(j),
                        _56O: I.isRotationEditable(j)
                    } : V,
                    u._6I = u._81o()
                }
                return u._6I
            },
            _3O: function() {},
            getPosition: function() {
                return zs
            },
            _68o: function(Q, K) {
                Q && this._87I.add(Af(Q, K))
            },
            _81o: function() {
                var o = this
                  , U = o.s;
                o._24O(Pd, "getLabel"),
                o._24O(mi, "getLabel2"),
                o._26O(yi, "getNote"),
                o._26O(Gp, "getNote2"),
                o._15O(),
                o._55O && o._48O();
                var F;
                if (o._87I.each(function(v) {
                    F = Ql(F, v)
                }),
                F && o.isShadowed()) {
                    var K = nc(F);
                    K.x += U("shadow.offset.x"),
                    K.y += U("shadow.offset.y"),
                    Qf(K, U("shadow.blur")),
                    F = Ql(F, K)
                }
                return o._87I.clear(),
                F
            },
            _42: function(y) {
                var s = this
                  , p = s._data
                  , F = s.gv
                  , v = s.s
                  , H = v("opacity")
                  , j = this.isShadowed();
                if (j) {
                    var X = y.shadowOffsetX
                      , P = y.shadowOffsetY
                      , u = y.shadowBlur
                      , r = y.shadowColor
                      , g = F.getZoom();
                    y.shadowOffsetX = v("shadow.offset.x") * g,
                    y.shadowOffsetY = v("shadow.offset.y") * g,
                    y.shadowBlur = v("shadow.blur") * g,
                    y.shadowColor = s.getSelectColor()
                }
                if (H != V) {
                    var l = y.globalAlpha;
                    y.globalAlpha = H
                }
                s._80o(y),
                F.isLabelVisible(p) && ((!F._drawForChecking || v("label.selectable")) && Ji(y, s.labelInfo),
                (!F._drawForChecking || v("label2.selectable")) && Ji(y, s.label2Info)),
                F.isNoteVisible(p) && (Jl(y, s.noteInfo),
                Jl(y, s.note2Info)),
                s._99O(y),
                H != V && (y.globalAlpha = l),
                j && (y.shadowOffsetX = X,
                y.shadowOffsetY = P,
                y.shadowBlur = u,
                y.shadowColor = r)
            },
            _80o: function() {},
            _47O: function() {},
            _24O: function(S, w) {
                var Y = this
                  , t = Y._data
                  , B = Y.gv
                  , v = Y.s
                  , Q = B[w](t);
                if (Q != V) {
                    var Z = v(S + ".scale")
                      , O = v(S + ".max")
                      , l = v(S + ".position")
                      , p = Y[S + "Info"] = {
                        label: Q,
                        scale: Z,
                        color: B[w + "Color"](t),
                        font: v(S + ".font"),
                        opacity: v(S + ".opacity"),
                        align: v(S + ".align"),
                        rotation: Y.getRotation(v(S + ".rotation"), !1, l),
                        background: B[w + "Background"](t)
                    }
                      , N = pq(p, Q);
                    O > 0 && O < N.width && (p.labelWidth = N.width,
                    N.width = O),
                    1 !== Z && (N.width *= Z,
                    N.height *= Z);
                    var H = Y.getPosition(l, v(S + ".offset.x"), v(S + ".offset.y"), N, v(S + ".position.fixed"));
                    if (N.x = H.x - N.width / 2,
                    N.y = H.y - N.height / 2,
                    Y._68o(p.rect = N, p.rotation),
                    1 !== Z) {
                        var f = N.width / Z
                          , k = N.height / Z;
                        p.rect = {
                            x: H.x - f / 2,
                            y: H.y - k / 2,
                            width: f,
                            height: k
                        }
                    }
                }
            },
            _26O: function(P, B) {
                var r = this
                  , v = r.gv
                  , y = r._data
                  , g = r.s
                  , Y = v[B](y);
                if (Y != V) {
                    var X, n, G = g(P + ".scale"), h = r[P + "Info"] = {
                        note: Y,
                        scale: G,
                        data: y,
                        view: v,
                        expanded: g(P + ".expanded"),
                        font: g(P + ".font"),
                        color: g(P + ".color"),
                        opacity: g(P + ".opacity"),
                        align: g(P + ".align"),
                        icon: g(P + ".icon"),
                        backgroundImage: g(P + ".backgroundImage"),
                        borderWidth: g(P + ".border.width"),
                        borderColor: g(P + ".border.color"),
                        background: v[B + "Background"](y)
                    }, U = r.getPosition(g(P + ".position"), g(P + ".offset.x"), g(P + ".offset.y")), q = U.x, D = U.y;
                    if (h.expanded) {
                        var b, M = g(P + ".max"), Z = g(P + ".backgroundImage");
                        Z ? (Z = bn(Z),
                        b = {
                            width: Cm(Z, y),
                            height: Hi(Z, y)
                        }) : b = pq(h, Y),
                        b.width += 6,
                        b.height += 2,
                        M > 0 && M < b.width && (h.labelWidth = b.width,
                        b.width = M),
                        X = b.width,
                        n = b.height + 8,
                        h.clickRect = {
                            x: q - X * G / 2,
                            y: D - n * G,
                            width: X * G,
                            height: n * G * b.height / n
                        }
                    } else {
                        var Q = g(P + ".icon");
                        Q ? (Q = bn(Q),
                        X = Cm(Q, y),
                        n = Hi(Q, y)) : (X = 12,
                        n = 18),
                        h.clickRect = {
                            x: q - X * G / 2,
                            y: D - n * G,
                            width: X * G,
                            height: n * G
                        }
                    }
                    h.rect = {
                        x: q - X / 2,
                        y: D - n * G / 2 - n / 2,
                        width: X,
                        height: n
                    };
                    var i = I(h.borderWidth / 2) * G;
                    r._68o({
                        x: q - X * G / 2 - i,
                        y: D - n * G - i,
                        width: X * G + 2 * i,
                        height: n * G + 2 * i
                    })
                }
            },
            _48O: function() {},
            _99O: function(i) {
                var Y = this
                  , w = Y._38o;
                if (w) {
                    var x = Y.gv
                      , a = Y._data
                      , O = w.icons
                      , N = Y.interactiveInfo;
                    N && (N._38o = {});
                    for (var Q in O) {
                        var E = O[Q]
                          , v = w.rects[Q];
                        if (v) {
                            N && (N._38o[Q] = []);
                            var n = _p(E.opacity, a, x)
                              , b = _p(E.names, a, x)
                              , h = b ? b.length : 0
                              , F = v.rotation;
                            if (n != V) {
                                var s = i.globalAlpha;
                                i.globalAlpha *= n
                            }
                            for (var I = 0; h > I; I++) {
                                var p = b[I]
                                  , J = bn(p)
                                  , l = v[I];
                                if (F) {
                                    var $ = l.x + l.width / 2
                                      , A = l.y + l.height / 2;
                                    i.save(),
                                    Sc(i, $, A),
                                    wo(i, F),
                                    Sc(i, -$, -A)
                                }
                                N && N._38o[Q].push(i.interactiveInfo = {
                                    compInfos: [],
                                    matrix: F ? new Hh(F,$,A).appendTranslate(-$, -A) : new Hh
                                }),
                                rh(i, J, _p(E.stretch, a, x), l.x, l.y, l.width, l.height, Y._data, Y.gv),
                                i.interactiveInfo = V,
                                F && i.restore()
                            }
                            n != V && (i.globalAlpha = s)
                        }
                    }
                }
            }
        });
        var Zh = function(g, U) {
            nm(Zh, this, [g, U])
        };
        fh(Zh, Uh, {
            _checkEmptyRect: !0,
            _40O: function(_, y) {
                var g = this
                  , S = g.s
                  , N = _.rect;
                (_.borderColor = g.gv.getBorderColor(g._data)) && (_.borderType = S("border.type"),
                _.borderWidth = S("border.width"),
                _.borderPadding = S("border.padding"),
                y = X(y, _.borderPadding + _.borderWidth / 2));
                var G = g._data.getScale()
                  , m = X(1, X(t(G.x), t(G.y)));
                if (_.selectWidth = g.getSelectWidth()) {
                    var Y = g.gv._zoom;
                    _.selectType = S("select.type"),
                    _._97o = g.getSelectColor(),
                    _.selectPadding = S("select.padding"),
                    y = X(y, (_.selectPadding + _.selectWidth / 2 / Y) / m)
                }
                y > 0 && (y *= m,
                N = nc(N),
                Qf(N, y)),
                g._68o(N)
            },
            _39O: function(s, k) {
                var Y, Q = this, j = k.rect;
                if (k.borderWidth > 0 && (Y = k.borderPadding,
                s.strokeStyle = k.borderColor,
                s.lineWidth = k.borderWidth,
                eg(s, k.borderType, {
                    x: j.x - Y,
                    y: j.y - Y,
                    width: j.width + 2 * Y,
                    height: j.height + 2 * Y
                }),
                s.stroke()),
                k.selectWidth > 0) {
                    var u = Q.gv._zoom;
                    if (Y = k.selectPadding,
                    s.strokeStyle = k._97o,
                    s.lineWidth = k.selectWidth / u,
                    k.rotation != V) {
                        s.save(),
                        s.translate(k.position.x, k.position.y),
                        s.rotate(k.rotation);
                        var K = Q._data
                          , q = K.getWidth()
                          , A = K.getHeight()
                          , E = k.scale
                          , e = k.anchor;
                        j = {
                            x: E.x * -q * e.x,
                            y: E.y * -A * e.y,
                            width: E.x * q,
                            height: E.y * A
                        }
                    }
                    eg(s, k.selectType, {
                        x: j.x - Y,
                        y: j.y - Y,
                        width: j.width + 2 * Y,
                        height: j.height + 2 * Y
                    }),
                    k.rotation != V && s.restore(),
                    s.stroke()
                }
            },
            dispose: function() {
                var N = this
                  , k = N._htmlView;
                Zh.superClass._3O.call(N),
                k && (k.onHTMLRemoved && k.onHTMLRemoved(),
                hp(k))
            },
            _3O: function() {
                var w = this
                  , h = w.s
                  , C = w._data
                  , a = w.gv
                  , o = C.getStyle(Mg)
                  , E = w.getBodyColor()
                  , T = w._83o = o ? {
                    shape: o,
                    _53o: w.getBodyColor("shape.background"),
                    _27Q: bn(h("shape.repeat.image"), E),
                    shapeGradientPack: h("shape.gradient.pack"),
                    _54o: h("shape.border.width"),
                    _55o: h("shape.border.color"),
                    _56o: h("shape.border.3d"),
                    _57o: h("shape.border.3d.color"),
                    _58o: h("shape.border.3d.accuracy"),
                    shapeGradient: h("shape.gradient"),
                    _59o: h("shape.gradient.color"),
                    _60o: h("shape.border.pattern"),
                    _61o: h("shape.border.cap"),
                    _62o: h("shape.border.join"),
                    shapeForeground: h("shape.foreground"),
                    bodyColor: E
                } : {
                    img: bn(a.getImage(C), E),
                    bodyColor: E,
                    stretch: h("image.stretch")
                };
                if (W && !O)
                    ;
                else {
                    var R, H = T.img;
                    H && H.renderHTML ? (w._htmlInfo && w._htmlInfo.img !== H && (w._htmlInfo = V),
                    w._htmlInfo || (w._htmlInfo = {
                        img: H,
                        cache: {}
                    }),
                    R = H.renderHTML(C, a, w._htmlInfo.cache)) : w._htmlInfo = V,
                    w._htmlView && w._htmlView !== R && (w._htmlView.onHTMLRemoved && w._htmlView.onHTMLRemoved(),
                    hp(w._htmlView)),
                    (w._htmlView = R) && a.appendHTML(R) && R.onHTMLAdded && R.onHTMLAdded(),
                    T.rect = C.getRect(),
                    T.position = C.p(),
                    T.scale = C.getScale(),
                    T.anchor = C.getAnchor(),
                    T.rotation = C.getRotation(),
                    o === Ci && (T._63o = h("shape.depth"));
                    var B = 0;
                    if (o)
                        B = Tc(V, T._54o / 2, T._62o),
                        w.s("shape.dash") && (B = X(B, (w.s("shape.dash.width") || T._54o) / 2));
                    else if (H && H.boundExtend)
                        if (B = _p(H.boundExtend, C, a),
                        H.boundExtendAbsolute) {
                            var F = C.getScale();
                            B /= a._zoom * X(1, X(t(F.x), t(F.y)))
                        } else if (!_p(H.fitSize, C, a)) {
                            var n = _p(H.width, C, a)
                              , y = _p(H.height, C, a);
                            B *= X(C.getWidth() / n, C.getHeight() / y)
                        }
                    w._40O(T, B);
                    var i = h("clip.percentage");
                    if (1 > i && (0 > i && (i = 0),
                    T.clipRect = Or(C.getAnchorRect(), h("clip.direction"), i)),
                    o) {
                        var Q = h("shape.fill.clip.percentage");
                        1 > Q && (0 > Q && (Q = 0),
                        T.shapeClipRect = Or(C.getAnchorRect(), h("shape.fill.clip.direction"), Q));
                        var f = h("shape.foreground.clip.percentage");
                        1 > f && (0 > f && (f = 0),
                        T.shapeForegroundClipRect = Or(C.getAnchorRect(), h("shape.foreground.clip.direction"), f))
                    }
                }
            },
            getPosition: function(e, m, y, r) {
                var c = sg(e, this._83o.rect, r);
                return c.x += m,
                c.y += y,
                c
            },
            _80o: function(X) {
                var l = this
                  , z = l.s
                  , _ = l.gv
                  , Y = l._data
                  , m = l._83o
                  , o = m.rect
                  , H = m.position
                  , h = m.rotation
                  , i = m.anchor
                  , I = m.scale
                  , M = m.shape
                  , R = m.clipRect;
                if (!l._checkEmptyRect || o.width > 0 && o.height > 0) {
                    var y = Y.getSize();
                    if (y.x = -y.width * i.x,
                    y.y = -y.height * i.y,
                    X.save(),
                    Sc(X, H.x, H.y),
                    wo(X, h),
                    di(X, I.x, I.y),
                    R && (X.beginPath(),
                    X.rect(R.x, R.y, R.width, R.height),
                    X.clip()),
                    _._drawForChecking && m.img && _p(m.img.pixelPerfect, Y, _) === !1)
                        he(X, y.x, y.y, y.width, y.height, "#888888");
                    else if (l.freeDraw)
                        l.freeDraw(X, y, m);
                    else if (M) {
                        var L, E, D, t, g = m._60o, F = on(X, g), s = m._53o, b = m._27Q, G = m._54o, n = m._55o, C = m.shapeGradientPack, U = X.lineJoin, W = X.lineCap;
                        if ("roundRect" === M ? L = z("shape.corner.radius") : "polygon" === M ? L = z("shape.polygon.side") : "arc" === M && (L = z("shape.arc.from"),
                        E = z("shape.arc.to"),
                        D = z("shape.arc.close"),
                        t = z("shape.arc.oval")),
                        X.lineJoin = m._62o,
                        X.lineCap = m._61o,
                        s || b || C) {
                            var S = m.shapeClipRect;
                            S && (X.save(),
                            X.beginPath(),
                            X.rect(S.x, S.y, S.width, S.height),
                            X.clip()),
                            eg(X, M, y, L, E, D, t),
                            C ? go(X, C) : b ? ln(X, b, m.bodyColor, null, Y, _) : qh(X, s, m.shapeGradient, m._59o, y),
                            X.fill(),
                            S && X.restore(),
                            C && X.restore(),
                            X !== F && eg(F, M, y, L, E, D, t)
                        } else
                            eg(F, M, y, L, E, D, t);
                        var B = m.shapeForeground;
                        if (B) {
                            X.save();
                            var u = m.shapeForegroundClipRect;
                            u && (X.beginPath(),
                            X.rect(u.x, u.y, u.width, u.height),
                            X.clip()),
                            eg(X, M, y, L, E, D, t),
                            qh(X, B, z("shape.foreground.gradient"), z("shape.foreground.gradient.color"), y),
                            X.fill(),
                            X.restore()
                        }
                        if (G > 0) {
                            var v = z("shape.border.width.absolute");
                            v && (X.save(),
                            X.setTransform(1, 0, 0, 1, 0, 0)),
                            X.lineWidth = G,
                            X.strokeStyle = n,
                            X.stroke(),
                            v && X.restore(),
                            m._56o && Tq(X, n, m._57o, G, _._zoom, m._58o)
                        }
                        if (pl(X, g),
                        z("shape.dash")) {
                            var N = z("shape.dash.width") || G;
                            if (N > 0) {
                                g = z("shape.dash.pattern");
                                var F = on(X, g, l._2Q("shape.dash.offset"));
                                F !== X && eg(F, M, y, L, E, D, t),
                                l._1Q(X, "shape", N, g)
                            }
                        }
                        gb(X, s, m._63o, y),
                        X.lineJoin = U,
                        X.lineCap = W
                    } else {
                        var d = l.interactiveInfo;
                        d && (X.interactiveInfo = d.bodyInfo = {
                            compInfos: [],
                            matrix: new Hh(h,H.x,H.y,I.x,I.y)
                        }),
                        rh(X, m.img, m.stretch, y.x, y.y, y.width, y.height, Y, _, m.bodyColor),
                        X.interactiveInfo = V
                    }
                    X.restore()
                }
                l._39O(X, m)
            },
            _48O: function() {},
            _47O: function() {}
        });
        var sq = function(T, k) {
            nm(sq, this, [T, k])
        }
          , af = function(A, a, c, t) {
            var C = uf(A, a);
            return c = t ? b(c, C) : $i(c, C),
            C ? c /= C : c = 0,
            {
                x: A.x + (a.x - A.x) * c,
                y: A.y + (a.y - A.y) * c
            }
        };
        fh(sq, Uh, {
            _3O: function() {
                var s, d = this, J = d._data, G = d.gv, Y = d.s, t = Y(bp), g = J.isLooped(), z = Y("edge.width"), c = Y("edge.center"), U = Y("edge.offset"), f = G.getBorderColor(J), r = f ? Y("border.width") : 0, P = d.getSelectWidth(), I = J._40I, i = J._41I, R = d._78o = I && i ? {
                    looped: g,
                    type: t,
                    width: z,
                    center: c,
                    color: d.getBodyColor("edge.color"),
                    borderColor: f,
                    borderWidth: r,
                    _97o: P ? d.getSelectColor() : V,
                    selectWidth: P,
                    pattern: Y("edge.pattern"),
                    cap: Y("edge.cap"),
                    join: Y("edge.join"),
                    is3d: Y("edge.3d"),
                    _67o: Y("edge.3d.color"),
                    _66o: Y("edge.3d.accuracy")
                } : V;
                if (R) {
                    var w = j.getEdgeType(t);
                    if (w) {
                        var k = w(J, Rb(d, G, J, g, t), G, d._19Q);
                        k.points && k.points.size() > 1 ? (R.edgeTypeInfo = k,
                        s = Pr(R.edgeTypeInfo.points)) : k[wk] && k.rect && (R.edgeTypeInfo = k,
                        s = k.rect)
                    } else {
                        var q = Y("edge.source.anchor.x")
                          , N = Y("edge.source.anchor.y")
                          , B = Y("edge.target.anchor.x")
                          , v = Y("edge.target.anchor.y")
                          , E = xp(G, I, Y("edge.source.position"), Y("edge.source.offset.x"), Y("edge.source.offset.y"), q, N)
                          , O = xp(G, i, Y("edge.target.position"), Y("edge.target.offset.x"), Y("edge.target.offset.y"), B, v);
                        if (t === Se) {
                            var H = R.points = Y(No) || cj
                              , A = H.size();
                            R.segments = Y("edge.segments");
                            var o = q !== F || N !== F
                              , n = B !== F || v !== F;
                            if (!c)
                                if (U)
                                    o || (E = af(E, A ? H.get(0) : O, U, A)),
                                    n || (O = af(O, A ? H.get(A - 1) : E, U, A));
                                else {
                                    var C;
                                    o || (C = xi(E, A ? H.get(0) : O, ps(G, I)),
                                    C && (E = {
                                        x: C[0],
                                        y: C[1]
                                    })),
                                    n || (C = xi(A ? H.get(A - 1) : E, O, ps(G, i)),
                                    C && (O = {
                                        x: C[0],
                                        y: C[1]
                                    }))
                                }
                            s = Ql(Pr(R.points), Pr(E, O))
                        } else {
                            var S = Rb(d, G, J, g, t);
                            if (d._19Q || (S = -S),
                            g)
                                E = nc(E),
                                E.x = G.getNodeRect(I).x,
                                R.radius = S,
                                s = {
                                    x: E.x - S,
                                    y: E.y - S,
                                    width: 2 * S,
                                    height: 2 * S
                                };
                            else {
                                var Q = uf(E, O)
                                  , h = $i(U, Q)
                                  , l = {
                                    x: h,
                                    y: S
                                }
                                  , M = {
                                    x: Q - h,
                                    y: S
                                }
                                  , _ = x(O.y - E.y, O.x - E.x)
                                  , T = R.mat = new yh(_);
                                if (R.orienAngle = _,
                                R.angle = O.x < E.x ? _ + L : _,
                                R.rect = {
                                    x: l.x,
                                    y: l.y,
                                    width: M.x - l.x,
                                    height: 0
                                },
                                R.origin = E,
                                l = T.tf(l),
                                l.x += E.x,
                                l.y += E.y,
                                M = T.tf(M),
                                M.x += E.x,
                                M.y += E.y,
                                c) {
                                    var m = {
                                        x: Q,
                                        y: 0
                                    };
                                    m = T.tf(m),
                                    m.x += E.x,
                                    m.y += E.y,
                                    s = Pr([E, l, M, m]),
                                    R.c1 = E,
                                    R.c2 = m
                                } else
                                    s = Pr(l, M);
                                E = l,
                                O = M
                            }
                        }
                        R.sourcePoint = E,
                        R.targetPoint = O,
                        J._lastSourcePoint = E,
                        J._lastTargetPoint = O
                    }
                    var Z = 0;
                    Y("edge.dash") && (Z = Y("edge.dash.width") || z);
                    var p = "square" === R.cap ? .71 : .5;
                    Tc(s, X(Z * p, z * p + r + P), R.join),
                    d._68o(s)
                }
            },
            getRotation: function(k, X, n) {
                k = k || 0;
                var s = this._78o;
                if (s) {
                    var h, p = s.angle, W = s.points, j = s.edgeTypeInfo;
                    if (p != V)
                        return X ? s.orienAngle + k : p + k;
                    if (j && j[wk])
                        return j.getRotation ? j.getRotation(this, k, X, n) : 0;
                    if (j && j.points) {
                        var G = j.points;
                        return h = G.size(),
                        ce[n] ? h && 0 === h % 2 ? fq(G.get(h / 2 - 1), G.get(h / 2), X, k) : k : Sg[n] ? fq(G.get(0), G.get(1), X, k) : fq(G.get(h - 2), G.get(h - 1), X, k)
                    }
                    if (W)
                        return h = W.size(),
                        ce[n] ? h && 0 === h % 2 ? fq(W.get(h / 2 - 1), W.get(h / 2), X, k) : k : Sg[n] ? fq(s.sourcePoint, h ? W.get(0) : s.targetPoint, X, k) : fq(h ? W.get(h - 1) : s.sourcePoint, s.targetPoint, X, k)
                }
                return k
            },
            getPosition: function(M, h, P, p, V) {
                var G = this._78o;
                if (G) {
                    var s, E = G.type, F = G.points, Y = G.edgeTypeInfo, H = G.sourcePoint, c = G.targetPoint;
                    if (!E)
                        return G.looped ? {
                            x: H.x - G.radius + h,
                            y: H.y + P
                        } : (V && H && c && (H.x > c.x || H.x === c.x && H.y > c.y) && (M = hs[M],
                        P = -P),
                        s = sg(M, G.rect, p),
                        s.x += h,
                        s.y += P,
                        s = G.mat.tf(s),
                        s.x += G.origin.x,
                        s.y += G.origin.y,
                        s);
                    if (Y && Y[wk])
                        return Y.getPosition ? Y.getPosition(this, M, h, P, p, V) : {
                            x: (H.x + c.x) / 2,
                            y: (H.y + c.y) / 2
                        };
                    if (F) {
                        var s, _ = F.size();
                        if (ce[M]) {
                            if (_) {
                                var S = _ % 2;
                                if (0 === S)
                                    return Xf(F.get(_ / 2 - 1), F.get(_ / 2), M, h, P, p, V);
                                s = F.get((_ - S) / 2)
                            } else
                                s = {
                                    x: (H.x + c.x) / 2,
                                    y: (H.y + c.y) / 2
                                };
                            return s = sg(M, {
                                x: s.x,
                                y: s.y,
                                width: 0,
                                height: 0
                            }, p),
                            s.x += h,
                            s.y += P,
                            s
                        }
                        return Sg[M] ? Xf(H, _ ? F.get(0) : c, M, h, P, p, V) : Xf(_ ? F.get(_ - 1) : H, c, M, h, P, p, V)
                    }
                    if (Y) {
                        var u = Y.points
                          , _ = u.size();
                        if (ce[M]) {
                            var S = _ % 2;
                            return 0 === S ? Xf(u.get(_ / 2 - 1), u.get(_ / 2), M, h, P, p, V) : (s = u.get((_ - S) / 2),
                            s = sg(M, {
                                x: s.x,
                                y: s.y,
                                width: 0,
                                height: 0
                            }, p),
                            s.x += h,
                            s.y += P,
                            s)
                        }
                        return Sg[M] ? Xf(u.get(0), u.get(1), M, h, P, p, V) : Xf(u.get(_ - 2), u.get(_ - 1), M, h, P, p, V)
                    }
                }
                return zs
            },
            _42: function(E) {
                this._78o && sq.superClass._42.call(this, E)
            },
            drawPath: function(G, V) {
                G.beginPath();
                var g = V.type
                  , s = V.points
                  , h = V.segments
                  , A = V.edgeTypeInfo;
                if (!g || s) {
                    var Z = V.sourcePoint
                      , Q = Z.x
                      , j = Z.y
                      , B = V.targetPoint
                      , l = B.x
                      , F = B.y;
                    if (g)
                        if (h) {
                            var n = new Vr({
                                x: Q,
                                y: j
                            });
                            n.addAll(s),
                            n.add({
                                x: l,
                                y: F
                            }),
                            jn(G, n, h)
                        } else
                            G.moveTo(Q, j),
                            s.each(function(T) {
                                G.lineTo(T.x, T.y)
                            }),
                            G.lineTo(l, F);
                    else
                        V.looped ? G.arc(Q, j, V.radius, 0, u, !0) : V.center ? (G.moveTo(V.c1.x, V.c1.y),
                        G.lineTo(Q, j),
                        G.lineTo(l, F),
                        G.lineTo(V.c2.x, V.c2.y)) : (G.moveTo(Q, j),
                        G.lineTo(l, F))
                } else
                    A && (A.points ? jn(G, A.points, A.segments) : A[wk] && A[wk](G, A))
            },
            _80o: function(w) {
                var J = this
                  , n = J.s
                  , D = J._78o
                  , V = D.width
                  , l = D.selectWidth
                  , a = D.borderWidth
                  , G = D.color
                  , o = w.lineJoin
                  , f = w.lineCap
                  , h = D.pattern;
                w.lineJoin = D.join,
                w.lineCap = D.cap,
                J.drawPath(on(w, h), D);
                var r = n("edge.width.absolute");
                if (r && (w.save(),
                w.setTransform(1, 0, 0, 1, 0, 0)),
                l && (w.strokeStyle = D._97o,
                w.lineWidth = V + 2 * (a + l),
                w.stroke()),
                a && (w.strokeStyle = D.borderColor,
                w.lineWidth = V + 2 * a,
                w.stroke()),
                w.strokeStyle = G,
                w.lineWidth = V,
                w.stroke(),
                D.is3d && Tq(w, G, D._67o, V, J.gv._zoom, D._66o),
                r && w.restore(),
                pl(w, h),
                n("edge.dash")) {
                    h = n("edge.dash.pattern");
                    var C = on(w, h, J._2Q("edge.dash.offset"));
                    C !== w && J.drawPath(C, D),
                    J._1Q(w, "edge", n("edge.dash.width") || V, h)
                }
                w.lineJoin = o,
                w.lineCap = f
            },
            _48O: function() {},
            _47O: function() {},
            _71o: function(y, j) {
                var D = this
                  , B = D._data;
                if (D._19Q = !0,
                !B.getEdgeGroup())
                    return y ? B.s("edge.gap") : 0;
                var z, c = 0, p = 0, Z = 0;
                if (B.getEdgeGroup().getSiblings().each(function(e) {
                    e.each(function(d) {
                        if (D.gv.isVisible(d) && d.s(bp) == j) {
                            var i = d.s("edge.gap");
                            z ? (p += Z / 2 + i / 2,
                            Z = i) : (z = d,
                            Z = i),
                            d === B && (c = p)
                        }
                    })
                }),
                y)
                    return p - c + Z;
                var i = c - p / 2;
                return z && B._40I !== z._40I && (D._19Q = !1),
                i
            }
        });
        var Eb = function(y, z) {
            nm(Eb, this, [y, z])
        };
        fh(Eb, Zh, {
            _3O: function() {
                var n, w, q = this, E = q.s, b = q._data, F = q.gv;
                if (q._88I = V,
                b.isExpanded() && b.eachChild(function(K) {
                    var X = F.getBoundsForGroup(K);
                    X && (w || (w = []),
                    w.push(X),
                    n = Ql(n, X))
                }),
                n) {
                    var W = F.getLabel(b)
                      , H = E("group.type");
                    n = sf(H, w, n),
                    lg(n, b, "group.padding", 1);
                    var S = q._88I = {
                        type: H,
                        rect: n,
                        _64o: n
                    };
                    if (!H && W != V) {
                        var K, X = q.labelInfo = {
                            label: W,
                            color: E("group.title.color"),
                            font: E("group.title.font"),
                            align: E("group.title.align")
                        }, L = pq(X, W), u = L.width, l = L.height, C = E("group.title.align");
                        u > n.width && (n.width = u),
                        X.rect = {
                            y: n.y - l,
                            width: L.width,
                            height: l
                        },
                        K = C === $j ? n.x : C === yo ? n.x + n.width - u : n.x + n.width / 2 - u / 2,
                        X.rect.x = K,
                        S.titleRect = {
                            x: n.x,
                            y: n.y - l,
                            width: n.width,
                            height: l + 1
                        },
                        S.rect = {
                            x: n.x,
                            y: n.y - l,
                            width: n.width,
                            height: n.height + l
                        }
                    }
                    q._40O(S, E("group.border.width") / 2)
                } else
                    Eb.superClass._3O.call(q)
            },
            getPosition: function(g, n, k, e) {
                var o = this._88I;
                if (o) {
                    var A = sg(g, o.rect, e);
                    return A.x += n,
                    A.y += k,
                    A
                }
                return Eb.superClass.getPosition.apply(this, arguments)
            },
            _24O: function(_, Z) {
                var O = this._88I;
                (!O || O.type || "label2" === _) && Eb.superClass._24O.call(this, _, Z)
            },
            _80o: function(h) {
                var D = this
                  , Z = D._88I;
                if (Z) {
                    var S = D._data
                      , m = D.s
                      , w = D.gv
                      , Y = Z.type
                      , F = Z.rect
                      , U = Z._64o
                      , b = Z.titleRect
                      , y = D.getBodyColor()
                      , k = bn(m("group.image"), y)
                      , W = m("group.image.stretch")
                      , s = D.getBodyColor("group.background")
                      , c = bn(m("group.repeat.image"), y)
                      , f = m("group.gradient.pack")
                      , H = m("group.gradient")
                      , O = m("group.gradient.color")
                      , V = m("group.depth");
                    if (Y) {
                        var z = m("group.border.pattern")
                          , v = m("group.border.width")
                          , x = h.lineJoin
                          , P = h.lineCap;
                        if (h.lineJoin = m("group.border.join"),
                        h.lineCap = m("group.border.cap"),
                        k) {
                            if (h.save(),
                            eg(h, Y, F),
                            h.clip(),
                            rh(h, k, W, F.x, F.y, F.width, F.height, S, w, y),
                            h.restore(),
                            v > 0) {
                                var T = on(h, z);
                                eg(T, Y, F),
                                h.lineWidth = v,
                                h.strokeStyle = m("group.border.color"),
                                h.stroke(),
                                pl(h, z)
                            }
                        } else {
                            var T = on(h, z);
                            s || c || f ? (eg(h, Y, F),
                            f ? go(h, f) : c ? ln(h, c, y, null, S, w) : qh(h, s, H, O, F),
                            h.fill(),
                            f && h.restore(),
                            h !== T && eg(T, Y, F)) : eg(T, Y, F),
                            v > 0 && (h.lineWidth = v,
                            h.strokeStyle = m("group.border.color"),
                            h.stroke()),
                            pl(h, z),
                            Y === Ci && gb(h, s, V, F)
                        }
                        h.lineJoin = x,
                        h.lineCap = P
                    } else if (k ? rh(h, k, W, U.x, U.y, U.width, U.height, S, w, D.getBodyColor()) : (s || c) && (c ? ln(h, c, y, null, S, w) : qh(h, s, H, O, U),
                    eg(h, Ci, U),
                    h.fill(),
                    gb(h, s, V, U)),
                    b) {
                        var E = m("group.title.background");
                        he(h, b.x, b.y, b.width, b.height, E),
                        gb(h, E, V, b)
                    }
                    D._39O(h, Z)
                } else
                    Eb.superClass._80o.call(D, h)
            }
        });
        var Yq = function(L, h) {
            nm(Yq, this, [L, h])
        };
        fh(Yq, Zh, {
            _80o: function(Q) {
                this._39O(Q, this._83o)
            }
        });
        var lb = function(R, i) {
            nm(lb, this, [R, i])
        };
        fh(lb, Zh, {
            _3O: function() {
                var y = this
                  , c = y._data
                  , f = y.s
                  , Q = y.gv
                  , T = c.getPoints()
                  , D = Q.getBorderColor(c)
                  , _ = D ? f("border.width") : 0
                  , m = y.getSelectWidth()
                  , N = f("shape.border.width")
                  , H = c.getRect()
                  , K = Q.getBodyColor(c)
                  , W = y._99o = T.isEmpty() ? V : {
                    rect: H,
                    rotation: c.getRotation(),
                    fillRule: f("shape.fill.rule"),
                    scale: c.getScale(),
                    position: c.p(),
                    points: T,
                    segments: c.getSegments(),
                    bodyColor: K,
                    borderColor: D,
                    borderWidth: _,
                    _94o: f("shape.border.3d"),
                    _95o: f("shape.border.3d.color"),
                    _96o: f("shape.border.3d.accuracy"),
                    _97o: m ? y.getSelectColor() : V,
                    selectWidth: m,
                    _53o: f("shape.background"),
                    _27Q: bn(f("shape.repeat.image"), K),
                    shapeGradientPack: f("shape.gradient.pack"),
                    _54o: N,
                    _55o: f("shape.border.color"),
                    shapeGradient: f("shape.gradient"),
                    _59o: f("shape.gradient.color"),
                    _60o: f("shape.border.pattern"),
                    _61o: f("shape.border.cap"),
                    _62o: f("shape.border.join"),
                    shapeForeground: f("shape.foreground")
                };
                if (W) {
                    var S = c.getScale()
                      , e = X(1, X(t(S.x), t(S.y)));
                    f("shape.dash") && f("shape.dash.width") > N && (N = f("shape.dash.width"));
                    var p = N * ("square" === W._61o ? .71 : .5) + _ + m / y.gv._zoom / e;
                    p && (p *= e,
                    H = nc(H),
                    Tc(H, p, W._62o)),
                    y._68o(H);
                    var B = f("clip.percentage");
                    1 > B && (0 > B && (B = 0),
                    W.clipRect = Or(c.getAnchorRect(), f("clip.direction"), B));
                    var v = f("shape.fill.clip.percentage");
                    1 > v && (0 > v && (v = 0),
                    W.shapeClipRect = Or(c.getAnchorRect(), f("shape.fill.clip.direction"), v));
                    var w = f("shape.foreground.clip.percentage");
                    1 > w && (0 > w && (w = 0),
                    W.shapeForegroundClipRect = Or(c.getAnchorRect(), f("shape.foreground.clip.direction"), w))
                }
            },
            getPosition: function(e, z, W, m) {
                var p = this._99o;
                if (p) {
                    var L = sg(e, p.rect, m);
                    return L.x += z,
                    L.y += W,
                    L
                }
                return zs
            },
            _42: function(F) {
                this._99o && lb.superClass._42.call(this, F)
            },
            _80o: function(V) {
                var d, j = this, z = j.s, s = j._99o, x = s.position, u = s.scale, e = s.rotation, T = s.bodyColor, p = s.borderWidth, D = s.selectWidth, R = s._53o, t = s._27Q, K = s.shapeGradientPack, Y = s._54o, _ = s.clipRect, F = s.shapeClipRect, h = s.points, g = s.segments, I = j._data.isClosePath(), y = s.fillRule, C = R || t || K;
                V.save(),
                Sc(V, x.x, x.y),
                wo(V, e),
                di(V, u.x, u.y),
                _ && (V.beginPath(),
                V.rect(_.x, _.y, _.width, _.height),
                V.clip()),
                C && F && (V.save(),
                V.beginPath(),
                V.rect(F.x, F.y, F.width, F.height),
                V.clip()),
                Sc(V, -x.x, -x.y);
                var U = s._60o
                  , n = on(V, U)
                  , A = V.lineJoin
                  , S = V.lineCap;
                V.lineJoin = s._62o,
                V.lineCap = s._61o,
                C ? (jn(V, h, g, I),
                K ? go(V, K) : t ? ln(V, t, T, null, j._data, j.gv) : (d = T ? T : R,
                qh(V, d, s.shapeGradient, s._59o, s.rect)),
                V.fill(y),
                F && (V.restore(),
                Sc(V, -x.x, -x.y)),
                K && V.restore(),
                n !== V && jn(n, h, g, I)) : jn(n, h, g, I);
                var L = s.shapeForeground;
                if (L) {
                    V.save();
                    var Z = s.shapeForegroundClipRect;
                    Z && (Sc(V, x.x, x.y),
                    V.beginPath(),
                    V.rect(Z.x, Z.y, Z.width, Z.height),
                    V.clip(),
                    Sc(V, -x.x, -x.y)),
                    jn(V, h, g, I),
                    qh(V, L, z("shape.foreground.gradient"), z("shape.foreground.gradient.color"), s.rect),
                    V.fill(y),
                    V.restore()
                }
                var l = z("shape.border.width.absolute");
                if (l && (V.save(),
                V.setTransform(1, 0, 0, 1, 0, 0)),
                D && (V.strokeStyle = s._97o,
                V.lineWidth = Y + 2 * (p + D),
                V.stroke()),
                p && (V.strokeStyle = s.borderColor,
                V.lineWidth = Y + 2 * p,
                V.stroke()),
                Y && (d = s._55o,
                !R && T && (d = T),
                V.strokeStyle = d,
                V.lineWidth = Y,
                V.stroke(),
                s._94o && Tq(V, d, s._95o, Y, j.gv._zoom, s._96o)),
                l && V.restore(),
                pl(V, U),
                z("shape.dash")) {
                    var q = z("shape.dash.width") || Y;
                    if (q > 0) {
                        U = z("shape.dash.pattern");
                        var n = on(V, U, j._2Q("shape.dash.offset"));
                        n !== V && jn(n, h, g, I),
                        j._1Q(V, "shape", q, U)
                    }
                }
                V.lineJoin = A,
                V.lineCap = S,
                V.restore()
            },
            _48O: function() {},
            _47O: function() {}
        });
        var fl = function(g, K) {
            nm(fl, this, [g, K])
        };
        fh(fl, lb, {
            getRotation: function(H, Z, d) {
                H = H || 0;
                var t = this._data.getPoints()
                  , i = t.size();
                return i > 1 ? ce[d] ? i && 0 === i % 2 ? fq(t.get(i / 2 - 1), t.get(i / 2), Z, H) : H : Sg[d] ? fq(t.get(0), t.get(1), Z, H) : fq(t.get(i - 2), t.get(i - 1), Z, H) : H
            },
            getPosition: function(F, V, l, b, J) {
                var Y = this._data.getPoints()
                  , S = Y.size();
                if (S > 1) {
                    if (ce[F]) {
                        var j = S % 2;
                        if (0 === j)
                            return Xf(Y.get(S / 2 - 1), Y.get(S / 2), F, V, l, b, J);
                        var U = Y.get((S - j) / 2)
                          , e = {
                            x: U.x,
                            y: U.y,
                            width: 0,
                            height: 0
                        };
                        return U = sg(F, e, b),
                        U.x += V,
                        U.y += l,
                        U
                    }
                    return Sg[F] ? Xf(Y.get(0), Y.get(1), F, V, l, b, J) : Xf(Y.get(S - 2), Y.get(S - 1), F, V, l, b, J)
                }
                return zs
            }
        });
        var Bb = function($, Z) {
            nm(Bb, this, [$, Z])
        };
        fh(Bb, Zh, {
            _3O: function() {
                var a = this;
                Bb.superClass._3O.call(a);
                var w = a.s
                  , z = a._83o;
                a._82o = z.img || z.shape ? V : {
                    background: a.getBodyColor("grid.background"),
                    depth: w("grid.depth"),
                    rect: z.rect,
                    _88o: w("grid.cell.depth"),
                    cellBorderColor: w("grid.cell.border.color"),
                    _89o: w("grid.row.count"),
                    _90o: w("grid.column.count"),
                    block: w("grid.block"),
                    _91o: w("grid.block.color"),
                    _92o: w("grid.block.padding"),
                    _93o: w("grid.block.width")
                }
            },
            _80o: function(b) {
                var j = this
                  , A = j._82o;
                if (!A)
                    return Bb.superClass._80o.call(j, b),
                    void 0;
                var C, I, M = j._data, R = A.background, G = A.rect, E = A.block, c = A._91o, O = A._92o, w = A._93o, Y = A._88o, v = A.cellBorderColor, N = A._89o, Z = A._90o;
                if (R)
                    if (he(b, G.x, G.y, G.width, G.height, R),
                    gb(b, R, A.depth, G),
                    Y)
                        for (C = 0; N > C; C++)
                            for (I = 0; Z > I; I++)
                                G = M.getCellRect(C, I),
                                G && gb(b, R, Y, G);
                    else if (v) {
                        for (b.beginPath(),
                        C = 0; N > C; C++)
                            for (I = 0; Z > I; I++)
                                G = M.getCellRect(C, I),
                                G && b.rect(G.x, G.y, G.width, G.height);
                        b.strokeStyle = v,
                        b.lineWidth = 1,
                        b.stroke()
                    }
                if ("h" === E)
                    for (C = 0; N > C; C++)
                        G = Ql(M.getCellRect(C, 0), M.getCellRect(C, Z - 1)),
                        Qf(G, O),
                        Mo(b, c, G.x, G.y, G.width, G.height, w);
                else if ("v" === E)
                    for (I = 0; Z > I; I++)
                        G = Ql(M.getCellRect(0, I), M.getCellRect(N - 1, I)),
                        Qf(G, O),
                        Mo(b, c, G.x, G.y, G.width, G.height, w);
                j._39O(b, j._83o)
            }
        });
        var zo = function(f, X) {
            nm(zo, this, [f, X])
        };
        fh(zo, Zh, {
            _checkEmptyRect: !1,
            _81o: function() {
                var g = this._data
                  , T = zo.superClass._81o.call(this)
                  , q = g.s("text");
                if (q != V) {
                    var a, e, t = g.s("text.font"), X = g.s("text.align"), Z = g.s("text.vAlign"), Y = bk(t, q), m = Y.width, i = Y.height, $ = g.getAnchor(), v = g.getWidth(), L = g.getHeight();
                    "left" === X ? a = -v * $.x : "center" === X ? a = -v * $.x + (v - m) / 2 : "right" === X && (a = v * (1 - $.x) - Y.width),
                    "top" === Z ? e = -L * $.y : "middle" === Z ? e = -L * $.y + (L - i) / 2 : "bottom" === Z && (e = L * (1 - $.y) - Y.height);
                    var f, J = g.getMatrix();
                    if (f = Pr([J.tf(a, e), J.tf(a + m, e), J.tf(a + m, e + i), J.tf(a, e + i)]),
                    T = Ql(T, f),
                    T && g.s("text.shadow")) {
                        var K = nc(T);
                        K.x += g.s("text.shadow.offset.x"),
                        K.y += g.s("text.shadow.offset.y"),
                        Qf(K, g.s("text.shadow.blur")),
                        T = Ql(T, K)
                    }
                }
                return T
            }
        });
        var rn = tp.Interactor = function(h) {
            this.gv = this._graphView = h
        }
        ;
        Rk("Interactor", m, {
            ms_listener: 1,
            getView: function() {
                return this.gv.getView()
            },
            setUp: function() {
                this.addListeners()
            },
            tearDown: function() {
                this.removeListeners(),
                this.clear()
            },
            clear: function() {},
            fi: function(O) {
                this.gv.fi(O)
            },
            setCursor: function(O) {
                Nq || this.gv.setCursor(O)
            },
            startDragging: function(Z) {
                var e = this;
                e._lastClientPoint = Qn(Z),
                e._lastLogicalPoint = e.gv.lp(Z),
                Dl(e, Z)
            },
            clearDragging: function() {
                var i = this;
                i._lastClientPoint = i._lastLogicalPoint = i._logicalPoint = V
            },
            autoScroll: function(U) {
                return this.gv.autoScroll(U, this._lastClientPoint)
            }
        });
        var $f = V
          , Am = function(E) {
            $f.handleWindowTouchMove(E)
        }
          , li = function(k) {
            $f.handleWindowTouchEnd(k),
            q.removeEventListener(Po, Am, !1),
            q.removeEventListener(pj, li, !1),
            $f = V
        }
          , ij = function(b) {
            $f.handleWindowMouseMove(b)
        }
          , _r = function(i) {
            $f.handleWindowMouseUp(i),
            q.removeEventListener(Sq, ij, !1),
            q.removeEventListener(ur, _r, !1),
            $f = V
        }
          , Bi = function(g, M) {
            g !== $f && ($f ? Nq ? $f.handleWindowTouchEnd(M) : $f.handleWindowMouseUp(M) : Nq ? (q.addEventListener(Po, Am, !1),
            q.addEventListener(pj, li, !1)) : (q.addEventListener(Sq, ij, !1),
            q.addEventListener(ur, _r, !1)),
            $f = g)
        }
          , Ch = function(O) {
            var t = this;
            t.gv = O,
            t._is2d = O instanceof tp.GraphView,
            t._is2d && (t.filter = function(D) {
                return O.isSelectable(D) && O.isInteractive(D)
            }
            ),
            O.getView(),
            ["mousedown", "mousemove", "touchstart", "touchmove", tr].forEach(function(J) {
                t.addListener(J)
            }),
            t.initImageResource()
        };
        fh(Ch, rn, {
            enableVR: function(u) {
                var M = this;
                if (!!M._vrEnable !== u)
                    if (M._vrEnable = u,
                    u)
                        M.gv.vr.mp(M.onVRControllerChange, M);
                    else if (M.gv.vr.ump(M.onVRControllerChange, M),
                    M._vrRayPolyline) {
                        var d = M.gv.dm();
                        d.remove(M._vrRayPolyline),
                        d.remove(M._vrRayHitPoint),
                        M._vrRayPolyline = F,
                        M._vrRayHitPoint = F
                    }
            },
            onVRControllerChange: function(E) {
                var C = this
                  , d = E.property
                  , T = E.newValue
                  , Z = C.gv.vr.getController(T.id)
                  , f = Z.getRay();
                f && ("gamepad.button.trigger" === d ? "down" === T._62O ? C.handle_mousedown(f) : C.handleWindowUp(f) : "gamepad.pose" === d && (C.handle_mousemove(f),
                C.handleWindowMove(f)))
            },
            drawVRRay: function(z, v, T) {
                var t, W = this, E = W.gv, u = W._vrRayPolyline, f = !1;
                if (u)
                    t = W._vrRayHitPoint;
                else {
                    var n = E.dm();
                    W._vrRayPolyline = u = new C.Polyline,
                    W._vrRayHitPoint = t = new C.Node,
                    t.s({
                        shape3d: "billboard",
                        "shape3d.transparent": !0,
                        "shape3d.texture.scale": 10,
                        "shape3d.image": "coreInteractorRayHitImage"
                    }),
                    t.setAnchor3d(.5, .5, .499);
                    var Y = .2 / E.vr.measureOflength;
                    t.s3(Y, Y, Y),
                    u.s("intersect", !1),
                    t.s("intersect", !1),
                    n.add(u),
                    n.add(t),
                    f = !0
                }
                if (v) {
                    var F = T.world
                      , R = T.worldNormal
                      , U = F.x
                      , G = F.y
                      , L = F.z;
                    u.s("shape.border.color", "red"),
                    u.setPoints([{
                        x: z.origin.x,
                        y: z.origin.z,
                        e: z.origin.y
                    }, {
                        x: U,
                        y: L,
                        e: G
                    }]),
                    t.s("3d.visible", !0),
                    t.p3(U, G, L),
                    t.lookAtDirection([R.x, R.y, R.z], "front")
                } else {
                    u.s("shape.border.color", "blue");
                    var J = new C.Math.Vector3;
                    J.copy(z.direction).setLength(1e3 / W.gv.vr.measureOflength).add(z.origin),
                    u.setPoints([{
                        x: z.origin.x,
                        y: z.origin.z,
                        e: z.origin.y
                    }, {
                        x: J.x,
                        y: J.z,
                        e: J.y
                    }]),
                    t.s("3d.visible", !1)
                }
                E.fi({
                    kind: "vrRayIntersect",
                    ray: z,
                    data: v,
                    intersect: T,
                    polyline: u,
                    hitNode: t,
                    begin: f
                })
            },
            addListener: function(e) {
                var s = this;
                s.gv.getView().addEventListener(e, function(N) {
                    j.preventDefault(N),
                    _e(N) && !s.disabled && s["handle_" + e](N)
                }, !1)
            },
            handleWindowTouchMove: function(s) {
                this.handleWindowMouseMove(s)
            },
            handleWindowMouseMove: function(j) {
                this.downInfo && (this.isDragging ? this.handleDownInfo("onDrag", j) : (this.handleDownInfo("onBeginDrag", j),
                this.isDragging = !0))
            },
            handleWindowTouchEnd: function(w) {
                this.handleWindowMouseUp(w)
            },
            handleWindowMouseUp: function(D) {
                if (this.isDragging && (this.handleDownInfo("onEndDrag", D),
                this.isDragging = !1),
                this.downInfo) {
                    var Z = this.handle("onUp", D);
                    Z && Z.data === this.downInfo.data ? this.handleMissingUp(D) : this.handleDownInfo("onUp", D),
                    this.downInfo = V
                }
            },
            handle_mousewheel: function(X) {
                X.scrollDelta = X.wheelDelta / 40,
                this.handle("onScroll", X)
            },
            handle_DOMMouseScroll: function(J) {
                J.scrollDelta = 2 === J.axis ? -J.detail : 0,
                this.handle("onScroll", J)
            },
            handle_touchstart: function(j) {
                this.handle_mousedown(j)
            },
            handle_touchmove: function(y) {
                this.handle("onMove", y)
            },
            handle_mousedown: function(b) {
                this.isDragging && (this.handleDownInfo("onEndDrag", b),
                this.isDragging = !1),
                this.downInfo = this.handle("onDown", b),
                this.downInfo && Bi(this, b)
            },
            handle_mousemove: function(G) {
                var K = this
                  , F = K.gv;
                K._hoverTimer && (_(K._hoverTimer),
                delete K._hoverTimer);
                var W, t, d, H = K.handle("onMove", G), r = this.currentInfo ? this.currentInfo.data : V, A = this.currentInfo ? this.currentInfo.hits : V;
                if (H && (t = H.data,
                d = H.hits,
                K._hoverTimer = Q(function() {
                    _(K._hoverTimer),
                    delete K._hoverTimer,
                    K.handle("onHover", G, H)
                }, F.getHoverDelay() || j.hoverDelay)),
                t !== r) {
                    if (t && t.s("onEnter") && t.s("onEnter")(G, t, F),
                    r && r.s("onLeave") && r.s("onLeave")(G, r, F),
                    A)
                        for (W in A)
                            A[W].target.onLeave && this.handleLeave(G, W);
                    if (d)
                        for (W in d)
                            d[W].target.onEnter && d[W].target.onEnter(G, t, F, d[W].point, d[W].width, d[W].height)
                } else {
                    if (A)
                        for (W in A)
                            d && d[W] || A[W].target.onLeave && this.handleLeave(G, W);
                    if (d)
                        for (W in d)
                            A && A[W] || d[W].target.onEnter && d[W].target.onEnter(G, t, F, d[W].point, d[W].width, d[W].height)
                }
                this.currentInfo = H
            },
            handle: function(H, Z, G) {
                var f, g = this, A = g.gv;
                if (g._is2d) {
                    if (G = G || A.getDataInfoAt(Z, this.filter),
                    !G)
                        return;
                    if (f = G.ui.interactiveInfo) {
                        var e, v = G.data;
                        if (v.s(H) && v.s(H)(Z, v, A),
                        "body" === G.part && f.bodyInfo)
                            e = "body",
                            G.hits = this.handleImage(e, A.getImage(v), H, Z, v, G.point, f.bodyInfo);
                        else if ("icons" === G.part && f._38o) {
                            var p = f._38o[G.name];
                            p && p[G.index] && (e = "icons|" + G.name + "|" + G.index,
                            G.hits = this.handleImage(e, G.icon, H, Z, v, G.point, p[G.index]))
                        }
                    }
                    return G
                }
                var v, R;
                if (!G)
                    if (Z && Z instanceof C.Math.Ray) {
                        var P = A.vr.intersectWorld(Z);
                        if (v = P.data,
                        R = P.intersect,
                        g.drawVRRay(Z, v, R),
                        !v)
                            return;
                        var M = A.getData3dUI(v);
                        if (f = M.interactiveInfo,
                        !f)
                            return;
                        G = {
                            data: v,
                            part: R.part,
                            ui: M
                        }
                    } else {
                        if (G = A.getDataInfoAt(Z),
                        !G)
                            return;
                        G && (G = {
                            data: G.data,
                            part: G.part
                        })
                    }
                if (!R) {
                    v = G.data;
                    var M = A.getData3dUI(v);
                    if (G.ui = M,
                    f = M.interactiveInfo,
                    !f)
                        return G;
                    if (R = A.intersectObject(Z, v),
                    !R)
                        return
                }
                v.s(H) && v.s(H)(Z, v, A);
                var Q, S = R.part;
                return "body" !== S && (Q = v.s(S + ".image") || v.s("shape3d." + S + ".image")),
                Q || (Q = v.s("all.image") || v.s("shape3d.image")),
                (f = f[Q]) ? (G.part = "body",
                G.interactiveInfo = f,
                G.point = R.uv.multiply({
                    x: f.bodyInfo.rect.width,
                    y: f.bodyInfo.rect.height
                }),
                G.image = Q,
                G.hits = this.handleImage("body", Q, H, Z, v, G.point, f.bodyInfo),
                G) : void 0
            },
            _handleLeaveOrMissing: function(P, y, X) {
                var q = "leave" === P ? this.currentInfo : this.downInfo;
                if (q) {
                    var J = q.interactiveInfo || q.ui.interactiveInfo;
                    if (J) {
                        var O, N, v = q.data;
                        if (this._is2d) {
                            if (N = this.gv.lp(y),
                            "body" === q.part && J.bodyInfo)
                                O = "body",
                                "leave" === P ? this.handleLeaveImage(X, O, this.gv.getImage(v), y, v, N, J.bodyInfo) : this.handleMissingUpImage(O, this.gv.getImage(v), y, v, N, J.bodyInfo);
                            else if ("icons" === q.part && J._38o) {
                                var S = J._38o[q.name];
                                S && S[q.index] && (O = "icons|" + q.name + "|" + q.index,
                                "leave" === P ? this.handleLeaveImage(X, O, q.icon, y, v, N, S[q.index]) : this.handleMissingUpImage(O, q.icon, y, v, N, S[q.index]))
                            }
                        } else {
                            var Y = this.gv.intersectObject(y, v);
                            N = Y ? Y.uv.multiply({
                                x: J.bodyInfo.rect.width,
                                y: J.bodyInfo.rect.height
                            }) : {
                                x: 1 / 0,
                                y: 1 / 0
                            },
                            "leave" === P ? this.handleLeaveImage(X, "body", q.image, y, v, N, J.bodyInfo) : this.handleMissingUpImage("body", q.image, y, v, N, J.bodyInfo)
                        }
                    }
                }
            },
            handleDownInfo: function(T, d) {
                if (this.downInfo) {
                    var g = this.downInfo
                      , H = g.interactiveInfo || g.ui.interactiveInfo;
                    if (H) {
                        var q, h = g.data;
                        if (h.s(T) && h.s(T)(d, h, this.gv),
                        this._is2d) {
                            var $ = this.gv.lp(d);
                            if ("body" === g.part && H.bodyInfo)
                                q = "body",
                                this.handleDownInfoImage(q, this.gv.getImage(h), T, d, h, $, H.bodyInfo);
                            else if ("icons" === g.part && H._38o) {
                                var w = H._38o[g.name];
                                w && w[g.index] && (q = "icons|" + g.name + "|" + g.index,
                                this.handleDownInfoImage(q, g.icon, T, d, h, $, w[g.index]))
                            }
                        } else {
                            var l = this.gv.intersectObject(d, h);
                            if (!l)
                                return;
                            $ = l.uv.multiply({
                                x: H.bodyInfo.rect.width,
                                y: H.bodyInfo.rect.height
                            }),
                            this.handleDownInfoImage("body", g.image, T, d, h, $, H.bodyInfo)
                        }
                    }
                }
            },
            handleImage: function(f, $, n, W, s, A, l) {
                var q = {};
                if ($ && ($ = bn($))) {
                    var h = this.gv
                      , p = l.rect
                      , y = this.convertPoint(A, l);
                    y.inRect && ($[n] && $[n](W, s, h, y, p.width, p.height),
                    q[f + "|image"] = {
                        target: $,
                        point: y,
                        width: p.width,
                        height: p.height
                    });
                    for (var d = l.compInfos, T = $, i = d.length - 1; i >= 0; i--) {
                        var c = d[i]
                          , _ = c.comp;
                        y = this.convertPoint(A, c, T, _, h, s),
                        y.inRect && (p = c.rect,
                        _[n] && _[n](W, s, h, y, p.width, p.height),
                        ($ = p.image) && $[n] && $[n](W, s, h, y, p.width, p.height),
                        q[f + "|" + i] = {
                            target: _,
                            point: y,
                            width: p.width,
                            height: p.height
                        },
                        $ && (q[f + "|" + i + "|image"] = {
                            target: $,
                            point: y,
                            width: p.width,
                            height: p.height
                        }))
                    }
                }
                return q
            },
            handleLeave: function(x, f) {
                return this._handleLeaveOrMissing("leave", x, f)
            },
            handleMissingUp: function(z) {
                return this._handleLeaveOrMissing("missing", z)
            },
            handleLeaveImage: function(C, x, k, T, A, $, s) {
                if (k && (k = bn(k))) {
                    var b = this.gv
                      , f = s.rect
                      , S = this.convertPoint($, s);
                    C === x + "|image" && k.onLeave && k.onLeave(T, A, b, S, f.width, f.height);
                    for (var L = s.compInfos, D = k, Y = L.length - 1; Y >= 0; Y--) {
                        var z = L[Y]
                          , Z = z.comp;
                        S = this.convertPoint($, z, D, Z, b, A),
                        f = z.rect,
                        Z.onLeave && C === x + "|" + Y && Z.onLeave(T, A, b, S, f.width, f.height),
                        (k = f.image) && k.onLeave && C === x + "|" + Y + "|image" && k.onLeave(T, A, b, S, f.width, f.height)
                    }
                }
            },
            handleMissingUpImage: function(S, t, c, d, K, A) {
                var p = "onUp"
                  , h = this.downInfo.hits;
                if (h && t && (t = bn(t))) {
                    var P = A.rect
                      , N = this.convertPoint(K, A);
                    !N.inRect && h[S + "|image"] && t[p] && t[p](c, d, this.gv, N, P.width, P.height);
                    for (var f = A.compInfos, l = t, z = f.length - 1; z >= 0; z--) {
                        var x = f[z]
                          , $ = x.comp;
                        N = this.convertPoint(K, x, l, $, this.gv, d),
                        N.inRect || (P = x.rect,
                        $[p] && h[S + "|" + z] && $[p](c, d, this.gv, N, P.width, P.height),
                        (t = P.image) && t[p] && h[S + "|" + z + "|image"] && t[p](c, d, this.gv, N, P.width, P.height))
                    }
                }
            },
            handleDownInfoImage: function(w, Y, S, E, A, W, O) {
                var M = this.downInfo.hits;
                if (M && Y && (Y = bn(Y))) {
                    var p = this.gv
                      , Z = O.rect
                      , e = this.convertPoint(W, O);
                    M[w + "|image"] && Y[S] && Y[S](E, A, p, e, Z.width, Z.height);
                    for (var q = O.compInfos, X = Y, m = q.length - 1; m >= 0; m--) {
                        var i = q[m]
                          , L = i.comp;
                        e = this.convertPoint(W, i, X, L, p, A),
                        Z = i.rect,
                        L[S] && M[w + "|" + m] && L[S](E, A, p, e, Z.width, Z.height),
                        (Y = Z.image) && Y[S] && M[w + "|" + m + "|image"] && Y[S](E, A, p, e, Z.width, Z.height)
                    }
                }
            },
            initImageResource: function() {
                j.setImage("coreInteractorRayHitImage", {
                    width: 16,
                    height: 16,
                    comps: [{
                        type: "oval",
                        background: "rgb(255,0,0)",
                        borderWidth: 1,
                        borderColor: "rgb(250,120,120)",
                        opacity: .3,
                        rotation: -1.593,
                        rect: [.73315, .6933, 14.5337, 14.61341]
                    }, {
                        type: "oval",
                        background: "rgb(255,0,0)",
                        borderWidth: 1,
                        borderColor: "rgb(250,120,120)",
                        rotation: -1.593,
                        rect: [3.56695, 3.75073, 8.8661, 8.49856]
                    }]
                })
            },
            convertPoint: function(B, L, K, c, z, p) {
                var s = L.rect
                  , o = L.matrix.applyInverse(B).sub(s)
                  , x = o.x >= 0 && o.y >= 0 && o.x <= s.width && o.y <= s.height;
                if (!x)
                    return o;
                if (c && _p(c.pixelPerfect, p, z)) {
                    var s, q = 1;
                    this._is2d ? (q = z.getZoom(),
                    s = Ff(B.x, B.y, F, q)) : s = Ff(B.x, B.y);
                    var y = !1
                      , Y = s.x
                      , n = s.y
                      , Q = s.width
                      , J = s.height
                      , r = j.hitMaxArea
                      , S = Q * J * q * q;
                    if (S > r) {
                        var X = Math.sqrt(r / S);
                        q *= X
                    }
                    Q *= q,
                    J *= q,
                    2 > Q && (Q = 2),
                    2 > J && (J = 2),
                    Y *= q,
                    n *= q;
                    var R = Kj(Q, J)
                      , w = new Hh(0,-Y,-n,q,q);
                    w.append(L.matrix),
                    z._drawForChecking = !0,
                    c.transform = w;
                    var O = K.comps;
                    K.comps = [c],
                    ts(R, K, 0, 0, Q, J, p, self),
                    K.comps = O,
                    delete c.transform,
                    z._drawForChecking = !1;
                    try {
                        for (var e = 0, C = R.getImageData(0, 0, Q, J).data; e < C.length; e += 4)
                            if (0 !== C[e + 3]) {
                                y = !0;
                                break
                            }
                        R.restore()
                    } catch (W) {
                        zb = V,
                        y = !1
                    }
                    o.inRect = y
                } else
                    o.inRect = !0;
                return o
            }
        });
        var nb = tp.DefaultInteractor = function(y) {
            nm(nb, this, [y])
        }
        ;
        Rk("DefaultInteractor", rn, {
            handle_mousedown: function(y) {
                vh(y);
                var W = this
                  , e = W.gv
                  , $ = e.getDataAt(y);
                !e.setFocus(y) || e._editing || e._scrolling || (_g(y) ? e.handleDoubleClick(y, $) : e.handleClick(y, $),
                !uc() && $ && (e.isMovable($) || e.isInteractive($)) || !e.isPannable() || !_e(y) || jr(y) || (W._tx = e.tx(),
                W._ty = e.ty(),
                W.startDragging(y)))
            },
            handleWindowMouseUp: function(p) {
                var P = this
                  , J = P.gv;
                J._panning && (delete J._panning,
                J.onPanEnded(),
                P.fi({
                    kind: "endPan",
                    event: p
                })),
                delete P._tx,
                delete P._ty,
                P.clearDragging()
            },
            handle_mousemove: function(t) {
                var m = this
                  , L = m.gv;
                m._hoverTimer && (_(m._hoverTimer),
                delete m._hoverTimer),
                m._hoverTimer = Q(function() {
                    m.fi({
                        kind: "hover",
                        event: t
                    }),
                    _(m._hoverTimer),
                    delete m._hoverTimer
                }, L.getHoverDelay() || j.hoverDelay)
            },
            handle_touchmove: function(l) {
                this.handle_mousemove(l)
            },
            handleWindowMouseMove: function(p) {
                var J = this
                  , r = J.gv
                  , T = J._lastClientPoint;
                J.fi({
                    kind: r._panning ? "betweenPan" : "beginPan",
                    event: p
                }),
                r._panning = 1,
                r.setTranslate(J._tx + p.clientX - T.x, J._ty + p.clientY - T.y)
            },
            handle_mousewheel: function(t) {
                this.gv.handleScroll(t, t.wheelDelta)
            },
            handle_DOMMouseScroll: function(O) {
                2 === O.axis && this.gv.handleScroll(O, -O.detail)
            },
            handle_keydown: function(T) {
                this.gv.handleKeyDown(T)
            }
        });
        var Kg = tp.SelectInteractor = function(m) {
            nm(Kg, this, [m])
        }
        ;
        Rk("SelectInteractor", rn, {
            _42: function() {
                var d = this
                  , t = d.gv
                  , h = t.getZoom()
                  , Z = d.mark
                  , I = d.div;
                I || (I = d.div = ff(),
                mg(d.getView(), I));
                var R = {};
                R.x = Z.x * h + t.tx(),
                R.y = Z.y * h + t.ty(),
                R.width = Z.width * h,
                R.height = Z.height * h,
                Pc(I, R),
                this.intersects() ? (I.style.border = "",
                I.style.background = t.getRectSelectBackground()) : (I.style.background = "",
                I.style.border = "1px solid " + t.getRectSelectBorderColor())
            },
            handle_mousedown: function(X) {
                var C = this
                  , e = C.gv;
                if (C._57I = V,
                !(e._editing || e._scrolling || uc())) {
                    var h = e.getDataAt(X)
                      , L = e.sm();
                    if (h)
                        if (jr(X))
                            L.co(h) ? L.rs(h) : L.as(h);
                        else if (L.co(h)) {
                            if (_g(X) && h instanceof Lc && h.isClickThroughEnabled()) {
                                var y = e.getDataAt(X, function(C) {
                                    e._clickThroughChecking = !0;
                                    var u = C.getParent() === h && e.isSelectable(C);
                                    return delete e._clickThroughChecking,
                                    u
                                });
                                y && (X.clickThrough = !0,
                                L.ss(y))
                            }
                        } else
                            L.ss(h);
                    else
                        jr(X) || !e.isPannable() ? _e(X) && (jr(X) || L.cs(),
                        e.isRectSelectable() && (C.startDragging(X),
                        e._77O = 1)) : _e(X) && (C._57I = Qn(X))
                }
            },
            handle_mouseup: function(j) {
                var l = this
                  , R = l._57I;
                R && (uf(R, Qn(j)) <= 1 && l.gv.sm().cs(),
                l._57I = V)
            },
            handleWindowMouseUp: function(o) {
                this.clear(o)
            },
            handleWindowMouseMove: function(D) {
                var w = this
                  , e = w.gv;
                w._logicalPoint = e.lp(D),
                w.mark ? (w.fi({
                    kind: "betweenRectSelect",
                    event: D
                }),
                e.isPannable() && w.autoScroll(D),
                w.redraw()) : w.fi({
                    kind: "beginRectSelect",
                    event: D
                }),
                w.mark = Pr(w._lastLogicalPoint, w._logicalPoint),
                w.redraw()
            },
            intersects: function() {
                var q = this
                  , D = q._lastLogicalPoint
                  , G = q._logicalPoint;
                return D.x > G.x || D.y > G.y
            },
            clear: function(l) {
                var f = this
                  , $ = f.gv
                  , v = f.mark;
                if (f._57I = V,
                f._lastLogicalPoint) {
                    if (v) {
                        if (0 !== v.width && 0 !== v.height) {
                            var g = $.getDatasInRect(v, f.intersects());
                            if (!g.isEmpty()) {
                                var w = $.sm()
                                  , F = w.toSelection();
                                g.each(function(R) {
                                    w.co(R) ? F.remove(R) : F.add(R)
                                }),
                                w.ss(F)
                            }
                        }
                        hp(f.div),
                        delete f.div,
                        delete f.mark,
                        f.redraw(),
                        f.fi({
                            kind: "endRectSelect",
                            event: l
                        }),
                        $.onRectSelectEnded()
                    }
                    f.clearDragging(),
                    delete $._77O
                }
            },
            redraw: function() {
                var i = this;
                i._draw || (i._draw = 1,
                Q(function() {
                    i.mark && i._42(),
                    delete i._draw
                }, 16))
            }
        });
        var qe = tp.MoveInteractor = function(C) {
            nm(qe, this, [C])
        }
        ;
        Rk("MoveInteractor", rn, {
            handle_mousedown: function(f) {
                var g = this
                  , e = g.gv;
                if (_e(f) && !e._editing && !e._scrolling && !uc()) {
                    var d = e.getSelectedDataAt(f);
                    !d || e.isInteractive(d) && !e.isMovable(d) ? e._focusData = V : (g._data = d,
                    e.handleMouseDown && e.handleMouseDown(f, d),
                    g.startDragging(f),
                    e.isMovable(d) && (e._moving = 1))
                }
            },
            handleWindowMouseUp: function(T) {
                var t = this
                  , N = t.gv;
                N.handleMouseUp && N.handleMouseUp(T, t._data),
                t.clear(T)
            },
            handleWindowMouseMove: function(Y) {
                var h = this
                  , X = h._data
                  , B = h.gv;
                if ((!B._93O || !B._93O(Y, X)) && B._moving) {
                    h._logicalPoint || h.fi({
                        kind: "prepareMove",
                        event: Y
                    });
                    var g = h._logicalPoint ? "betweenMove" : "beginMove"
                      , u = {
                        kind: g,
                        event: Y
                    }
                      , J = h._logicalPoint = B.lp(Y);
                    "beginMove" !== g || h._alreadyBeginTransaction || (h._alreadyBeginTransaction = !0,
                    B.getDataModel().beginTransaction());
                    var p = h._calcShift(g, Y)
                      , I = p.x
                      , V = p.y
                      , z = h.gv.getMoveMode(Y, X);
                    z && ("x" === z ? V = 0 : "y" === z ? I = 0 : "xy" !== z && (I = V = 0)),
                    B.moveSelection(I, V),
                    h._lastLogicalPoint = J,
                    h.autoScroll(Y),
                    h.fi(u)
                }
            },
            _calcShift: function() {
                var Y = this
                  , y = Y._logicalPoint
                  , H = Y._lastLogicalPoint
                  , U = y.x - H.x
                  , T = y.y - H.y;
                return {
                    x: U,
                    y: T
                }
            },
            clear: function(u) {
                var M = this
                  , C = M.gv;
                M._lastLogicalPoint && (M._lastLogicalPoint = M._data = C._moving = V,
                M._logicalPoint && (M.fi({
                    kind: "endMove",
                    event: u
                }),
                C.onMoveEnded()),
                M.clearDragging()),
                M._alreadyBeginTransaction && (M._alreadyBeginTransaction = !1,
                C.getDataModel().endTransaction())
            }
        });
        var ye = tp.ScrollBarInteractor = function(Z) {
            nm(ye, this, [Z])
        }
        ;
        Rk("ScrollBarInteractor", rn, {
            _41o: function() {
                return this.gv.getViewRect().height < this.gv.getScrollRect().height
            },
            _40o: function() {
                return this.gv.getViewRect().width < this.gv.getScrollRect().width
            },
            isV: function(Z) {
                var Q = this.gv.getViewRect();
                return this._41o() && (Q.x + Q.width - this.gv.lp(Z).x) * this.gv.getZoom() < Cq
            },
            isH: function(r) {
                var l = this.gv.getViewRect();
                return this._40o() && (l.y + l.height - this.gv.lp(r).y) * this.gv.getZoom() < Cq
            },
            handle_mousemove: function(W) {
                this.handle_touchmove(W)
            },
            handle_touchmove: function(g) {
                if (!wq && _e(g) && this.gv.isScrollBarVisible()) {
                    var I = this
                      , j = I.isV(g)
                      , b = I.isH(g);
                    (j || b) && I.gv.showScrollBar(),
                    I.gv._scrolling = j || b
                }
            },
            handleWindowMouseUp: function(O) {
                this.handleWindowTouchEnd(O)
            },
            handleWindowTouchEnd: function($) {
                this._state = this._cp = this._tx = this._ty = this.gv._scrolling = V,
                this.fi({
                    kind: "endScroll",
                    event: $
                })
            },
            handle_mousedown: function(C) {
                this.handle_touchstart(C)
            },
            handle_touchstart: function(b) {
                var q = this;
                if (q.gv.setFocus(b),
                vh(b),
                q.handle_touchmove(b),
                !(mq(b) > 1) && q.gv._scrolling && q.gv.isScrollBarVisible()) {
                    q._cp = Qn(b),
                    q._tx = q.gv.tx(),
                    q._ty = q.gv.ty();
                    var K = q.isV(b);
                    q._state = K ? "vScroll" : "hScroll",
                    Dl(q, b),
                    q.fi({
                        kind: "beginScroll",
                        event: b
                    })
                }
            },
            handleWindowMouseMove: function(s) {
                this.handleWindowTouchMove(s)
            },
            handleWindowTouchMove: function(l) {
                var C = Qn(l)
                  , y = this.gv.getViewRect()
                  , z = this.gv.getScrollRect();
                "vScroll" === this._state ? this.gv.ty(this._ty + (this._cp.y - C.y) * z.height / y.height) : "hScroll" === this._state && this.gv.tx(this._tx + (this._cp.x - C.x) * z.width / y.width),
                this.fi({
                    kind: "betweenScroll",
                    event: l
                })
            }
        });
        var sr = tp.TouchInteractor = function(p, v) {
            v = v || {},
            v.selectable === F && (v.selectable = !0),
            v.movable === F && (v.movable = !0),
            v.pannable === F && (v.pannable = !0),
            v.pinchable === F && (v.pinchable = !0),
            v.editable === F && (v.editable = !0),
            this.params = v,
            nm(sr, this, [p])
        }
        ;
        Rk("TouchInteractor", rn, {
            ms_edit: 1,
            setUp: function() {
                var v = this;
                sr.superClass.setUp.call(v),
                Nq && v.params.editable && v.gv.setEditInteractor(v)
            },
            tearDown: function() {
                var q = this;
                sr.superClass.tearDown.call(q),
                Nq && q.params.editable && q.gv.setEditInteractor(V)
            },
            clear: function(h) {
                var F = this
                  , s = F.gv;
                s._moving && (F.fi({
                    kind: "endMove",
                    event: h
                }),
                delete s._moving,
                s.onMoveEnded(),
                s.dm().endTransaction()),
                s._panning && (F.fi({
                    kind: "endPan",
                    event: h
                }),
                delete s._panning,
                s.onPanEnded()),
                s._pinching && (F.fi({
                    kind: "endPinch",
                    event: h
                }),
                delete s._pinching,
                s.onPinchEnded()),
                s._editing && (F._46O(h),
                F._77I = F._node = F._edge = F._shape = F._rect = F._89I = F._index = s._editing = V),
                F._moving = F._panning = F._pinching = F._editing = F._57I = F._data = F._beginHistory = V,
                F.clearDragging()
            },
            handle_touchstart: function(s) {
                var H = this;
                if (!H.gv._editing) {
                    vh(s),
                    H._57I = V;
                    var c = H.params
                      , S = H.gv
                      , A = S.sm()
                      , N = S.getDataAt(s)
                      , u = mq(s);
                    if (1 === u) {
                        if (_g(s))
                            return S.handleDoubleClick(s, N),
                            void 0;
                        S.handleClick(s, N),
                        N && (S.handleMouseDown && S.handleMouseDown(s, N),
                        H._data = N),
                        c.selectable || (N = V),
                        N ? (A.co(N) || A.ss(N),
                        c.editable && S.isEditable(N) && H._79I(s, N, !0) ? (H._editing = 1,
                        H.startDragging(s)) : c.movable && S.isMovable(N) && (H._moving = 1,
                        H.startDragging(s))) : (H._57I = Qn(s),
                        c.pannable && S.isPannable() && (H._panning = 1,
                        H.startDragging(s),
                        H._translate = {
                            x: S.tx(),
                            y: S.ty()
                        }))
                    } else if (c.pinchable && 2 === u) {
                        H._pinching = 1,
                        H.startDragging(s);
                        var l = S.getView()
                          , y = S.getZoom()
                          , g = l.getBoundingClientRect()
                          , I = s.touches[0]
                          , W = s.touches[1]
                          , x = {
                            x: (I.clientX + W.clientX) / 2 - g.left,
                            y: (I.clientY + W.clientY) / 2 - g.top
                        };
                        x.x -= S.tx(),
                        x.y -= S.ty(),
                        x.x /= y,
                        x.y /= y,
                        H._p = x,
                        H._d = wi(s)
                    }
                }
            },
            handle_touchend: function(G) {
                var U = this
                  , m = U.gv
                  , J = U._57I
                  , O = U._data;
                J && (uf(J, Qn(G)) <= 1 && m.sm().cs(),
                U._57I = V),
                O && m.handleMouseUp && m.handleMouseUp(G, O)
            },
            handleWindowTouchEnd: function(c) {
                this.clear(c)
            },
            handleWindowTouchMove: function(J) {
                var p = this
                  , U = p.gv
                  , h = mq(J);
                if (1 === h) {
                    if (p._editing && (p._beginHistory || (p._beginHistory = 1,
                    U.dm().beginTransaction()),
                    U._editing = 1,
                    p._78I(J)),
                    p._moving)
                        p._beginHistory || (p._beginHistory = 1,
                        U.dm().beginTransaction()),
                        p.handleMove(J);
                    else if (p._panning) {
                        var v = Qn(J);
                        U.setTranslate(p._translate.x + v.x - p._lastClientPoint.x, p._translate.y + v.y - p._lastClientPoint.y),
                        p.fi({
                            kind: U._panning ? "betweenPan" : "beginPan",
                            event: J
                        }),
                        U._panning = 1
                    }
                } else if (2 === h && p._pinching) {
                    var P = wi(J);
                    U.handlePinch(p._p, P, p._d),
                    p._d = P,
                    p.fi({
                        kind: U._pinching ? "betweenPinch" : "beginPinch",
                        event: J
                    }),
                    U._pinching = 1
                }
            },
            handleMove: function(M) {
                var B = this
                  , h = B.gv
                  , U = h.lp(M);
                h._93O && h._93O(M, B._data) || (h.moveSelection(U.x - B._lastLogicalPoint.x, U.y - B._lastLogicalPoint.y),
                B._lastLogicalPoint = U,
                B.autoScroll(M),
                B.fi({
                    kind: h._moving ? "betweenMove" : "beginMove",
                    event: M
                }),
                h._moving = 1)
            }
        });
        var C = q.ht
          , cs = C.graph._editor = {
            Math: C.Math,
            Guide: {}
        };
        cs.getStyle = function(G) {
            var v, u = cs.StyleMap;
            return u && (v = u[G],
            v !== F) ? v : cs.DefaultStyleMap[G]
        }
        ,
        cs.setStyle = function(K, e) {
            var c = cs.StyleMap;
            c || (c = cs.StyleMap = {}),
            c[K] = e
        }
        ,
        cs.inEdit = function(h) {
            return h._inXEdit === !0
        }
        ,
        cs.startEdit = function(y) {
            y._inXEdit = !0,
            cs.Inject.doInject(y)
        }
        ,
        cs._46O = function(G) {
            G._inXEdit = !1,
            cs.Inject.undoInject(G)
        }
        ,
        cs.toScreenPosition = function(n, I) {
            var u = n.tx()
              , E = n.ty()
              , i = n._zoom;
            return new cs.Math.Vector2(I.x * i + u,I.y * i + E)
        }
        ,
        cs.checkHit = function(h, f, S) {
            return h.distanceTo(f) < S ? !0 : !1
        }
        ,
        cs.toWorldPosition = function(u, g) {
            var b = u.tx()
              , y = u.ty()
              , K = u._zoom;
            return {
                x: (g.x - b) / K,
                y: (g.y - y) / K
            }
        }
        ,
        cs.setAntialias = function(W, X) {
            for (var Y, n = ["imageSmoothingEnabled", "webkitImageSmoothingEnabled", "mozImageSmoothingEnabled", "oImageSmoothingEnabled", "msImageSmoothingEnabled"], d = 0, L = n.length; L > d && (Y = n[d],
            !(Y in W)); d++)
                ;
            W[Y],
            W[Y] = X
        }
        ,
        cs.getTargetCornersOnScreen = function(b, I) {
            if (!I)
                return null;
            var P, g = [];
            if (sk(I, b)) {
                var O = ps(b, I);
                P = [{
                    x: O.x,
                    y: O.y
                }, {
                    x: O.x + O.width,
                    y: O.y
                }, {
                    x: O.x + O.width,
                    y: O.y + O.height
                }, {
                    x: O.x,
                    y: O.y + O.height
                }]
            } else {
                if (!I.getCorners)
                    return null;
                P = I.getCorners()
            }
            return P.forEach(function(o) {
                var I = cs.toScreenPosition(b, o);
                g.push(I.x, I.y)
            }),
            g
        }
        ,
        cs.log = function() {}
        ;
        var Vl = cs.Inject = {
            _modules: []
        };
        Vl.registAsModule = function(U, h) {
            var C = {}
              , o = {};
            for (var y in U) {
                var n = h.prototype[y];
                C[y] = n
            }
            U.getBackup = function(O) {
                return C[O]
            }
            ,
            U.getBackups = function() {
                return C
            }
            ,
            o.doInject = function() {
                for (var z in U)
                    "getBackup" !== z && (h.prototype[z] = U[z])
            }
            ,
            o.undoInject = function() {
                for (var K in U)
                    "getBackup" !== K && (h.prototype[K] = C[K])
            }
            ,
            Vl._modules.push(o)
        }
        ,
        Vl.doInject = function(k) {
            for (var G, X = Vl._modules, i = 0, R = X.length; R > i; i++)
                G = X[i],
                G.doInject(k)
        }
        ,
        Vl.undoInject = function(K) {
            for (var M, Z = Vl._modules, n = 0, _ = Z.length; _ > n; n++)
                M = Z[n],
                M.undoInject(K)
        }
        ;
        var rn = C.graph.EditInteractor = function(J) {
            var H = this
              , N = s.createElement("canvas");
            N.className = "editCanvas",
            N.style.position = "absolute",
            H._styleMap = {},
            H._canvas = N,
            H._context = N.getContext("2d"),
            rn.superClass.constructor.call(H, J),
            cs.setAntialias(H._context, !1),
            H._subModules = [new cs.Anchor(H), new cs.Rect(H), new cs.Curve(H), new cs.MoveHelper(H)],
            H._gridGuide = new cs.Guide.Grid(H),
            H._rectGuide = new cs.Guide.Rect(H)
        }
          , nj = rn;
        C.Default.def(rn, C.graph.Interactor, {
            ms_edit: 1,
            ms_fire: 1
        }),
        m.defineProperties(rn.prototype, {
            editDetail: {
                get: function() {
                    var F = !!this._editDetail;
                    return F
                },
                set: function(a) {
                    var N = this
                      , y = N._editDetail;
                    y !== a && (N._editDetail = a,
                    N.gv._editing = a,
                    N.fp("editDetail", y, a),
                    N.fp("pointsEditingMode", y, a),
                    N.fi({
                        kind: a ? "beginEditPoints" : "endEditPoints"
                    }))
                }
            },
            gvEditing: {
                get: function() {
                    return this.gv._editing
                },
                set: function(T) {
                    (!this._editDetail || T) && (this.gv._editing = T,
                    T || (this.editDetail = !1))
                }
            },
            editing: {
                get: function() {
                    return this._editing
                },
                set: function(y) {
                    this._editing = y,
                    this.gvEditing = y
                }
            },
            pointsEditingMode: {
                get: function() {
                    return this.editDetail
                },
                set: function(l) {
                    var _ = this;
                    _.editDetail !== l && (l ? _._tryEnterEditDetailMode() : _._tryQuitEditDetailMode())
                }
            },
            gridEnabled: {
                get: function() {
                    var t = this._gridEnabled;
                    if (!t)
                        return !1;
                    var u = this.gv;
                    return u ? !0 : !0
                },
                set: function(E) {
                    E !== this._gridEnabled && (this._gridEnabled = E,
                    this._42())
                }
            },
            alignmentGuideEnabled: {
                get: function() {
                    return this._agEnabled
                },
                set: function(S) {
                    S !== this._agEnabled && (this._agEnabled = S,
                    this._42())
                }
            },
            gridGuide: {
                get: function() {
                    return this._gridGuide
                }
            },
            rectGuide: {
                get: function() {
                    return this._rectGuide
                }
            }
        }),
        rn.prototype.getSubModule = function(d) {
            var m, B, P, p = this._subModules;
            for (B = 0,
            P = p.length; P > B; B++)
                if (m = p[B],
                m.catalog === d)
                    return m
        }
        ,
        rn.prototype.invokeSubModule = function(O, m) {
            var $ = this
              , o = $._subModules;
            if (o)
                for (var Q, B, n, r = Array.prototype.slice.call(arguments, 2), R = 0, C = o.length; C > R; R++)
                    if (Q = o[R],
                    B = Q[O],
                    B && (n = B.apply(Q, r),
                    n != F && m))
                        return Q
        }
        ,
        rn.prototype.invokeSubModuleInverse = function($, V) {
            var n = this
              , a = n._subModules;
            if (a)
                for (var k, f, z, u = Array.prototype.slice.call(arguments, 2), R = a.length - 1; R >= 0; R--)
                    if (k = a[R],
                    f = k[$],
                    f && (z = f.apply(k, u),
                    z != F && V))
                        return k
        }
        ,
        rn.prototype.setUp = function() {
            cs.log("setUp");
            var G = this
              , E = G.gv
              , z = E.getView()
              , B = G._canvas;
            rn.superClass.setUp.call(G),
            E.setEditInteractor(G),
            E._79O ? z.insertBefore(B, E._79O) : z.appendChild(B),
            cs.startEdit(E),
            G.invokeSubModule("setUp"),
            E.dm().mm(G._onDataModelChanged, G),
            E.dm().md(G._onDataPropertyChanged, G)
        }
        ,
        rn.prototype.tearDown = function() {
            cs.log("tearDown");
            var y = this
              , J = y.gv
              , U = J.getView();
            y._resetCustomCursorStyle(),
            rn.superClass.tearDown.call(y),
            J.dm().umm(y._onDataModelChanged, y),
            J.dm().umd(y._onDataPropertyChanged, y),
            J.setEditInteractor(null),
            U.removeChild(y._canvas),
            y._drawTimer && (_(y._drawTimer),
            y._drawTimer = null),
            cs._46O(J),
            y.invokeSubModule("tearDown")
        }
        ,
        rn.prototype._onDataModelChanged = function(j) {
            var h = this;
            ("clear" === j.kind || "remove" === j.kind && h.editDetail && j.data === h.getSubModule("Curve").target) && (h.editDetail = !1,
            h._42())
        }
        ,
        rn.prototype._onDataPropertyChanged = function(l) {
            var $ = this;
            if ($.editDetail) {
                var n = $.getSubModule("Curve")
                  , z = l.data;
                z === n.target && (z._writing || n._handleDataChanged())
            }
        }
        ,
        rn.prototype.clear = function() {
            cs.log("clear")
        }
        ,
        rn.prototype.redraw = function() {
            this._42()
        }
        ,
        rn.prototype._42 = function() {
            var X = this;
            X._drawTimer || (X._drawTimer = Q(function() {
                X._drawTimer = null,
                X.drawImpl()
            }, 0))
        }
        ,
        rn.prototype.drawImpl = function() {
            var L;
            for (L in {
                _42: !0
            })
                break;
            return function() {
                var e = this
                  , j = e._canvas
                  , W = e.gv
                  , M = W.getWidth()
                  , S = W.getHeight()
                  , X = e._context
                  , i = C.Default.getInternal();
                (j.width !== M || j.height !== S) && i.setCanvas(j, M, S),
                X.clearRect(0, 0, j.width, j.height);
                var m = e._getValidSelection();
                X.save();
                var A = C.Default.devicePixelRatio;
                X.scale(A, A),
                e._gridGuide._42(),
                e.invokeSubModuleInverse(L, !1, X, W, m),
                e._rectGuide._42(),
                X.restore()
            }
        }(),
        rn.prototype._getValidSelection = function() {
            var Q = this
              , M = Q.gv
              , v = M.sm().getSelection()
              , s = [];
            return v.each(function(z) {
                M.isVisible(z) && M.isEditable(z) && s.push(z)
            }),
            s
        }
        ,
        rn.prototype.handle_touchmove = function(L) {
            return this.handle_mousemove(L)
        }
        ,
        rn.prototype.handle_mousemove = function(M) {
            if (!C.Default.isDragging()) {
                var Q = this;
                (Q.editDetail || !uc()) && (Q.gvEditing = !1,
                Q._checkEdit(M) && (Q.gvEditing = !0))
            }
        }
        ,
        rn.prototype.handle_touchstart = function(V) {
            return this.handle_mousedown(V)
        }
        ,
        rn.prototype.handle_mousedown = function(o) {
            vh(o);
            var k = this;
            if (k.editDetail || !uc()) {
                if (_g(o) && !o.clickThrough) {
                    if (k.editDetail) {
                        if (k._tryQuitEditDetailMode(o))
                            return
                    } else if (k._tryEnterEditDetailMode())
                        return;
                    k.gv.dm().beginTransaction();
                    var T = k.invokeSubModule("handleDoubleClick", !0, o);
                    if (k.gv.dm().endTransaction(),
                    T)
                        return
                }
                var W = k._checkEdit(o);
                W && (k._downPosition = k._getLogicalPoint(o),
                k.gv.dm().beginTransaction(),
                W.startEdit(k, o),
                k.editing = !0)
            }
        }
        ,
        rn.prototype._checkEdit = function(k) {
            var _ = this
              , E = _.gv
              , g = _._getLogicalPoint(k)
              , Y = _.invokeSubModule("check", !0, E, k, g) || null;
            return _._editMod = Y,
            Y
        }
        ,
        rn.prototype.handleWindowTouchMove = function(P) {
            return this.handleWindowMouseMove(P)
        }
        ,
        rn.prototype.handleWindowMouseMove = function(C) {
            var e = this
              , k = e._downPosition;
            if (k) {
                var h = e._getLogicalPoint(C);
                if (h.distanceTo(k) < e.getStyle("moveSensitivity"))
                    return;
                delete e._downPosition
            }
            var m = e._editMod;
            m && m.handleEdit(e.gv, C)
        }
        ,
        rn.prototype._getLogicalPoint = function(L) {
            var S = this
              , O = C.Default.getLogicalPoint(L, S._canvas);
            return new cs.Math.Vector2(O)
        }
        ,
        rn.prototype.handleWindowTouchEnd = function(O) {
            return this.handleWindowMouseUp(O)
        }
        ,
        rn.prototype.handleWindowMouseUp = function() {
            var S;
            for (S in {
                _46O: !0
            })
                break;
            return function(y) {
                var t = this;
                t.editing = !1,
                t.setCursor("default"),
                t.invokeSubModule(S, !1, y),
                t._42(),
                t.gv.dm().endTransaction()
            }
        }(),
        rn.prototype.handle_mousewheel = function(r) {
            var I = this;
            vh(r),
            I.invokeSubModule("preHandleScroll", !0) || I.gv.handleScroll(r, r.wheelDelta)
        }
        ,
        rn.prototype.handleDelete = function() {
            var Z = this;
            if (!Z.editDetail) {
                Z.gv.dm().beginTransaction();
                var k = Z.invokeSubModule("handleNormalStateDelete", !0);
                return Z.gv.dm().endTransaction(),
                k || Z.gv.removeSelection(),
                void 0
            }
            Z.gv.dm().beginTransaction(),
            Z.invokeSubModule("handleDelete", !0),
            Z.gv.dm().endTransaction(),
            Z._42()
        }
        ,
        rn.prototype.handle_keydown = function(E) {
            var n = this;
            if ((E.metaKey || E.ctrlKey) && n._42(),
            uc(E) && !n.editing)
                return n.gvEditing = !1,
                n.setCursor("default"),
                n._42(),
                void 0;
            var b = uj(E);
            return n.editDetail ? ((b || Kq(E)) && (n.editDetail = !1,
            n._42()),
            n.gv.dm().beginTransaction(),
            n.invokeSubModule("handle_keydown", !0, E),
            n.gv.dm().endTransaction(),
            void 0) : (n.gv.dm().beginTransaction(),
            n.invokeSubModule("handleNormalStateKeyDown", !0, E),
            n.gv.dm().endTransaction(),
            b && n._tryEnterEditDetailMode(),
            void 0)
        }
        ,
        rn.prototype.handle_keyup = function(E) {
            this.gv.dm().beginTransaction(),
            this.invokeSubModule("handle_keyup", !0, E),
            this.gv.dm().endTransaction()
        }
        ,
        rn.prototype._tryEnterEditDetailMode = function() {
            var r = this;
            return !r.editDetail && r.invokeSubModule("canEnterEditDetailMode", !0) && 1 === r._getValidSelection().length ? (r.editDetail = !0,
            r._42(),
            !0) : void 0
        }
        ,
        rn.prototype._tryQuitEditDetailMode = function(Y) {
            var E = this;
            if (E.editDetail) {
                var z = E.gv
                  , p = E.getSubModule("Curve").target;
                return Y && z.getDataAt(Y) === p ? void 0 : (E.editDetail = !1,
                E._42(),
                !0)
            }
        }
        ,
        rn.prototype.setStyle = function(h, $, Q) {
            var c = this;
            Q ? cs.setStyle(h, $) : c._styleMap[h] = $,
            c.fp("styleChanged", null, {
                key: h,
                value: $,
                base: Q
            }),
            c._42()
        }
        ,
        rn.prototype.getStyle = function(X) {
            var H = this
              , i = H._styleMap[X];
            return i !== F ? i : cs.getStyle(X)
        }
        ,
        rn.prototype.setCursor = function(P) {
            this._resetCustomCursorStyle(),
            C.graph.EditInteractor.superClass.setCursor.call(this, P)
        }
        ,
        rn.prototype._resetCustomCursorStyle = function() {
            var e = this;
            if (e._customStyle) {
                var y = this.gv.getView();
                y.classList && y.classList.remove && y.classList.remove(e._customStyle),
                e._customStyle = null
            }
        }
        ,
        rn.prototype._setRotateCursor = function(n) {
            var B = this
              , A = B._cursorFactory;
            A || (A = B._cursorFactory = new cs.CursorFactory(B));
            var q = A.getRotateCursor(n)
              , Z = B.gv.getView();
            B._resetCustomCursorStyle(),
            B._customStyle = q,
            Z.classList && Z.classList.add && Z.classList.add(q)
        }
        ;
        var pg = cs.Group = function(Z) {
            var z = this;
            z._entities = Z,
            z._64O = 0,
            z._position = {
                x: 0,
                y: 0
            },
            z._scale = {
                x: 1,
                y: 1
            },
            z._anchor = {
                x: .5,
                y: .5
            },
            z._anchor2 = {
                x: .5,
                y: .5
            }
        }
        ;
        pg.prototype = {},
        pg.prototype.constructor = pg;
        var sh = null;
        pg.findOrCreateGroup = function(p) {
            if (sh && sh.checkIsMe(p))
                return sh;
            var G = new cs.Group(p);
            return G.getKeyOb() ? (sh = G,
            G) : void 0
        }
        ,
        pg.prototype.checkIsMe = function(v) {
            var b = this._entities;
            if (b.length !== v.length)
                return !1;
            var A, S = {}, L = v.length;
            for (A = 0; L > A; A++)
                S[v[A]._id] = !0;
            for (A = 0; L > A; A++)
                if (!S[b[A]._id])
                    return !1;
            return !0
        }
        ,
        pg.prototype.getRotation = function() {
            return this._64O
        }
        ,
        pg.prototype.getPosition = function() {
            return this._position
        }
        ,
        pg.prototype.getAnchor = function() {
            return this._anchor
        }
        ,
        pg.prototype.getWidth = function() {
            return this._width
        }
        ,
        pg.prototype.getScale = function() {
            return this._scale
        }
        ,
        pg.prototype.getSize = function() {
            return {
                width: this._width,
                height: this._height
            }
        }
        ,
        pg.prototype.getHeight = function() {
            return this._height
        }
        ,
        pg.prototype.getKeyOb = function() {
            for (var Q = this._entities, c = Q.length - 1; c >= 0; c--) {
                var G = Q[c];
                if (this.isNode(G))
                    return G
            }
        }
        ,
        pg.prototype.getAnchor2 = function() {
            var Q = this
              , q = Q.rotateCenter;
            if (q)
                return q;
            var a = Q.getKeyOb();
            if (!a)
                return Q._anchor;
            var z = Q._anchor2
              , M = a.getMatrix();
            return M.tf({
                x: a.getWidth() * (z.x - a.getAnchor().x),
                y: a.getHeight() * (z.y - a.getAnchor().y)
            })
        }
        ,
        pg.prototype.setAnchor2 = function(z, s) {
            var c = this
              , G = c.getKeyOb();
            if (G) {
                var M, T = G.getMatrix();
                M = "number" == typeof z ? {
                    x: z,
                    y: s
                } : z;
                var a = T.tfi(M);
                c._anchor2 = {
                    x: G.getAnchor().x + a.x / G.getWidth(),
                    y: G.getAnchor().y + a.y / G.getHeight()
                }
            }
        }
        ,
        pg.prototype.setRotation = function() {}
        ,
        pg.prototype.beginRotate = function(g) {
            this.rotateCenter = g.pos,
            this.rotateMode = g.groupRotateMode
        }
        ,
        pg.prototype.endRotate = function() {
            delete this.rotateCenter,
            delete this.rotateMode
        }
        ,
        pg.prototype.addRotation = function(B, w) {
            return "batch" === w ? this._addRotationInBatchMode(B) : "block" === w ? this._addRotationInBlockMode(B) : void 0
        }
        ,
        pg.prototype._addRotationInBlockMode = function(o) {
            var S = this
              , f = S.rotateCenter || S.getPosition();
            S._entities.forEach(function(p) {
                if (S.isNode(p)) {
                    var U = p.getMatrix();
                    U.translate(-f.x, -f.y),
                    U.rotate(o),
                    U.translate(f.x, f.y);
                    var k = Math.sign(p.getScale().x);
                    p.setRotation(x(U.b * k, U.a * k)),
                    p.setPosition(U.tx, U.ty)
                }
            })
        }
        ,
        pg.prototype._addRotationInBatchMode = function(t) {
            var M = this
              , F = M._anchor2;
            M._entities.forEach(function(c) {
                if (M.isNode(c)) {
                    var g = c.getAnchor()
                      , T = c.getMatrix()
                      , q = T.tf({
                        x: c.getWidth() * (F.x - g.x),
                        y: c.getHeight() * (F.y - g.y)
                    })
                      , d = new cs.Math.Matrix2d;
                    d.set(T.a, T.b, T.c, T.d, T.tx, T.ty),
                    d.translate(-q.x, -q.y),
                    d.rotate(t),
                    d.translate(q.x, q.y);
                    var e = Math.sign(c.getScale().x);
                    c.setRotation(x(d.b * e, d.a * e)),
                    c.setPosition(d.tx, d.ty)
                }
            })
        }
        ,
        pg.prototype.setPosition = function(o) {
            var P, t, H, d, J = this, X = J._position, E = o.x - X.x, c = o.y - X.y, N = J._entities;
            for (t = 0,
            H = N.length; H > t; t++)
                P = N[t],
                xj(P) && (d = P.getPosition(),
                P.setPosition(d.x + E, d.y + c));
            J._position = o
        }
        ,
        pg.prototype.setScale = function(M, c) {
            var v = this
              , j = M / v._scale.x
              , N = c / v._scale.y;
            v._adjustChildScaleOrSize(j, N, "size"),
            v._scale = {
                x: M,
                y: c
            }
        }
        ,
        pg.prototype.getRect = function() {
            var A = this
              , R = A._position
              , O = A._width
              , m = A._height;
            return {
                x: R.x - O / 2,
                y: R.y - m / 2,
                width: O,
                height: m
            }
        }
        ,
        pg.prototype.setSize = function(F, c) {
            var Y = this
              , F = Math.max(1, F)
              , c = Math.max(1, c)
              , O = F / Y._width
              , W = c / Y._height;
            Y._adjustChildScaleOrSize(O, W, "size"),
            Y._width = F,
            Y._height = c
        }
        ,
        pg.prototype._adjustChildScaleOrSize = function(h, w, t) {
            var T, Q, q, y, L, O, k, N, B, X, M, d, n, i, l = this, z = l._position, P = l._entities, _ = new cs.Math.Matrix2d;
            for (Q = 0,
            q = P.length; q > Q; Q++)
                if (T = P[Q],
                l.isNode(T)) {
                    if (y = T.getPosition(),
                    L = T.getRotation(),
                    O = T.getWidth(),
                    k = T.getHeight(),
                    N = T.getScale(),
                    M = N.x * O,
                    d = N.y * k,
                    _.identity().scale(M, d).rotate(L).translate(y.x, y.y).translate(-z.x, -z.y).rotate(-l._64O),
                    L = x(_.b * Math.sign(M), _.a * Math.sign(M)),
                    _.scale(h, w),
                    B = Math.cos(L),
                    X = Math.sin(L),
                    Math.abs(B) < .001 ? (n = _.b / X,
                    i = -_.c / X) : (n = _.a / B,
                    i = _.d / B),
                    "scale" === t)
                        T.setScale(n / O, i / k);
                    else if ("size" === t) {
                        var S = n / N.x
                          , f = i / N.y;
                        T.setScale(Cs(n) * Math.abs(N.x), Cs(i) * Math.abs(N.y)),
                        T.setSize(Math.max(.1, Math.abs(S)), Math.max(.1, Math.abs(f)))
                    }
                    _.rotate(l._64O).translate(z.x, z.y),
                    T.setPosition(_.tx, _.ty)
                }
        }
        ,
        pg.prototype.getMatrix = function() {
            var t = this
              , Y = t._position
              , z = C.Default.getInternal()
              , Z = t._scale;
            return new z.Mat(t._64O,Y.x,Y.y,Z.x,Z.y)
        }
        ,
        pg.prototype.getCorners = function() {
            var h = this
              , C = h._width
              , j = h._height
              , r = h._anchor
              , t = -C * r.x
              , Y = -j * r.y
              , o = h.getMatrix();
            return [o.tf(t, Y), o.tf(t, Y + j), o.tf(t + C, Y + j), o.tf(t + C, Y)]
        }
        ,
        pg.prototype.calcInfo = function() {
            var G, V, L, A, J, X, n = this, F = [], Q = n._entities, f = n._64O;
            for (A = 0,
            J = Q.length; J > A; A++)
                X = Q[A],
                n.isNode(X) && X.getCorners && F.push.apply(F, X.getCorners());
            if (F.length) {
                var p = Math.cos(-f)
                  , x = Math.sin(-f)
                  , Y = 1 / 0
                  , q = -1 / 0
                  , b = 1 / 0
                  , y = -1 / 0;
                for (A = 0,
                J = F.length; J > A; A++)
                    L = F[A],
                    G = L.x,
                    V = L.y,
                    L.x = p * G - x * V,
                    L.y = x * G + p * V,
                    Y = Math.min(Y, L.x),
                    q = Math.max(q, L.x),
                    b = Math.min(b, L.y),
                    y = Math.max(y, L.y);
                n._width = (q - Y) / n._scale.x,
                n._height = (y - b) / n._scale.y,
                p = Math.cos(f),
                x = Math.sin(f);
                var R = n._anchor;
                G = Y + (q - Y) * R.x,
                V = b + (y - b) * R.y,
                n._position = {
                    x: p * G - x * V,
                    y: x * G + p * V
                }
            }
        }
        ,
        pg.prototype.isNode = function(S) {
            return xj(S) ? sk(S) ? !1 : !0 : !1
        }
        ,
        pg.prototype._42 = function(j, T, F) {
            var S, Y, q, Z, E, p, v, N, o = this, H = o._entities, h = o.rotateMode;
            for ("batch" === h && (N = o.getKeyOb()),
            S = 0,
            Y = H.length; Y > S; S++)
                q = H[S],
                o.isNode(q) && (p = q.getRect(),
                Z = cs.toScreenPosition(F, {
                    x: p.x,
                    y: p.y
                }),
                E = cs.toScreenPosition(F, {
                    x: p.x + p.width,
                    y: p.y + p.height
                }),
                v = {
                    min: Z,
                    max: E
                },
                q === N && (v.isKeyOb = !0),
                cs.Icons.DrawIcon(j, T, cs.Icons.GroupSubEntityRect, v))
        }
        ;
        var qs = cs.CurveActiving = function(n, g) {
            this._curve = n,
            this._interactor = n._interactor;
            for (var Z in g)
                this[Z] = g[Z]
        }
        ;
        qs.prototype = {},
        qs.prototype.constructor = qs,
        m.defineProperties(qs.prototype, {
            point: {
                get: function() {
                    return this._point
                },
                set: function(k) {
                    var V = this;
                    V._point = k,
                    V.editingCtrl || V._firePointChange()
                }
            },
            pairs: {
                get: function() {
                    return this._pairs
                },
                set: function(c) {
                    var W = this;
                    W._pairs = c,
                    W.editingCtrl && W._firePointChange()
                }
            }
        }),
        qs.prototype._firePointChange = function() {
            var L = this
              , A = L.getCurrentEditingPoint();
            if (!A)
                return b.fi({
                    kind: "selectPoint"
                }),
                void 0;
            var b = L._interactor
              , j = this._curve.target;
            if (j) {
                var Z = cs.getDataMatrix(j).invert()
                  , s = A.e;
                A = Z.apply(cs.toWorldPosition(b.gv, A)),
                A.e = s;
                var l = L._lastFirePoint;
                l && Math.abs(A.x - l.x) < 1e-5 && Math.abs(A.y - l.y) < 1e-5 && (A.e == F && l.e == F || Math.abs(A.e - l.e) < 1e-5) || (L._lastFirePoint = A,
                b.fi({
                    kind: "selectPoint",
                    x: A.x,
                    y: A.y,
                    e: A.e
                }))
            }
        }
        ,
        qs.prototype.dispose = function() {
            this._interactor.fi({
                kind: "selectPoint"
            })
        }
        ,
        qs.prototype.getCurrentEditingPoint = function() {
            var w = this
              , n = w.editingCtrl;
            if (n) {
                var $ = w.pairs;
                if ($) {
                    var P = $[n.pairId]
                      , Y = P[n.type];
                    if (Y)
                        return Y
                }
            }
            return w._point
        }
        ;
        var Df = cs.CursorFactory = function(F) {
            var N = this;
            N._interactor = F,
            N._rotateCursorStyles = {}
        }
        ;
        Df.prototype = {},
        Df.prototype.constructor = Df,
        Df.prototype.getRotateCursor = function(e) {
            var y = this;
            0 > e && (e += 2 * Math.PI);
            var F = y._interactor
              , O = F.getStyle("rotateCursorSize")
              , H = F.getStyle("rotateCursorRound")
              , _ = Math.round(180 * (e / Math.PI) / H);
            _ * H >= 360 && (_ = 0);
            var U = y._rotateCursorStyles
              , x = "htCustomRotateStyle_" + O + "_" + H + "_" + _;
            return U[x] || (y._produceRotateCursor(x, O, H, _),
            U[x] = !0),
            x
        }
        ,
        Df.prototype._produceRotateCursor = function(P, L, r, E) {
            var I = this;
            I._interactor;
            var M = I._canvas;
            M || (M = I._canvas = s.createElement("canvas")),
            M.width = M.height = L * devicePixelRatio,
            M.style.width = M.style.height = L + " px";
            var d = M.getContext("2d");
            cs.setAntialias(d, !1),
            d.scale(devicePixelRatio, devicePixelRatio);
            var g, o, u, O, F, C = Math.round(L / 2), X = "" + C + " " + C + ",auto !important;";
            g = Math.PI / 180 * E * r,
            d.clearRect(0, 0, L, L),
            d.save(),
            d.scale(L / 32, L / 32),
            d.translate(16, 16),
            d.rotate(g + Math.PI / 2),
            d.beginPath(),
            d.moveTo(-8, 0),
            d.lineTo(-8, 3),
            d.lineTo(-5, 3),
            d.moveTo(8, 0),
            d.lineTo(8, 3),
            d.lineTo(5, 3),
            d.moveTo(-8, 3),
            d.quadraticCurveTo(0, -6, 8, 3),
            d.restore(),
            d.strokeStyle = "white",
            d.lineWidth = 4,
            d.stroke(),
            d.strokeStyle = "black",
            d.lineWidth = 2,
            d.stroke(),
            o = JSON.stringify(M.toDataURL()),
            O = "cursor:url(" + o + ")" + X,
            1 !== devicePixelRatio && (u = '<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="' + L + 'px" height="' + L + 'px"><image xlink:href=' + o + ' width="' + L + '" height="' + L + '"/></svg>',
            O += "cursor:url(data:image/svg+xml;base64," + btoa(u) + ")" + X,
            O += "cursor:-webkit-image-set(url(" + o + ")" + devicePixelRatio + "x,url(" + o + ")1x)" + X),
            F = s.createElement("style"),
            F.textContent = "body." + P + " *, ." + P + "{" + O + "}",
            s.head.appendChild(F)
        }
        ;
        var oe = cs.Guide.Grid = function(W) {
            var t = this;
            t._interactor = W,
            t._alignmentGuideId = 0,
            t._xAlignmentGuide = [],
            t._yAlignmentGuide = []
        }
        ;
        oe.prototype = {},
        oe.prototype.constructor = oe,
        m.defineProperties(oe.prototype, {
            gridBlockSize: {
                get: function() {
                    var c = this;
                    return c._gridBlockSize || c._interactor.getStyle("gridBlockSize")
                },
                set: function(j) {
                    this._gridBlockSize = j,
                    this._interactor._42()
                }
            },
            gridThickLinesEvery: {
                get: function() {
                    var U = this;
                    return U._gridThickLinesEvery || U._interactor.getStyle("gridThickLinesEvery")
                },
                set: function(d) {
                    this._gridThickLinesEvery = d,
                    this._interactor._42()
                }
            },
            gridEnabled: {
                get: function() {
                    var g = this
                      , U = g._interactor;
                    return U.gridEnabled && g.isValidGrid()
                }
            }
        }),
        oe.prototype._42 = function() {
            var J = this
              , M = J._interactor;
            J.gridEnabled && J.drawGrid(),
            M.alignmentGuideEnabled && J.drawAlignmentGuide()
        }
        ,
        oe.prototype.makeMatrix = function() {
            var d = this
              , $ = d._interactor.getStyle("gridAngle")
              , g = d._interactor.getStyle("gridRotation")
              , C = new cs.Math.Matrix2d
              , R = Math.sin($)
              , G = Math.cos($);
            return C.set(1, 0, G, R, 0, 0),
            C.rotate(g),
            C
        }
        ,
        oe.prototype.isValidGrid = function() {
            var g = this
              , m = Math.PI
              , s = g._interactor
              , r = s.gv;
            if (r._zoom < s.getStyle("gridZoomThreshold"))
                return !1;
            var v = s.getStyle("gridAngle")
              , f = Math.abs(180 * (v % m / m))
              , K = 1 - 1e-8;
            return K > f || f > 180 - K ? !1 : !0
        }
        ,
        oe.prototype.drawAlignmentGuide = function() {
            var D = this
              , G = D._interactor
              , R = G.gv
              , S = G._canvas
              , T = G._context
              , e = S.width
              , $ = S.height
              , K = R.tx()
              , F = R.ty()
              , M = R._zoom;
            T.beginPath(),
            T.strokeStyle = G.getStyle("gridAlignmentGuideColor"),
            T.lineWidth = 1,
            D._xAlignmentGuide.forEach(function(R) {
                var g = R.p * M + K;
                T.moveTo(g, 0),
                T.lineTo(g, $)
            }),
            D._yAlignmentGuide.forEach(function(h) {
                var d = h.p * M + F;
                T.moveTo(0, d),
                T.lineTo(e, d)
            }),
            T.stroke()
        }
        ,
        oe.prototype.drawGrid = function() {
            function Z(I, A, Q, e) {
                var C = cs.toScreenPosition(E, d.apply({
                    x: I,
                    y: A
                }))
                  , a = cs.toScreenPosition(E, d.apply({
                    x: Q,
                    y: e
                }));
                s.moveTo(C.x, C.y),
                s.lineTo(a.x, a.y)
            }
            var N = this
              , q = N._interactor
              , r = N.gridBlockSize
              , X = N.gridThickLinesEvery
              , w = q.getStyle("gridThickColor")
              , V = q.getStyle("gridLightColor")
              , E = q.gv
              , B = q._canvas
              , s = q._context
              , h = B.width
              , I = B.height
              , d = N.makeMatrix()
              , Q = d.applyInverse(cs.toWorldPosition(E, {
                x: 0,
                y: 0
            }))
              , W = d.applyInverse(cs.toWorldPosition(E, {
                x: h,
                y: 0
            }))
              , b = d.applyInverse(cs.toWorldPosition(E, {
                x: 0,
                y: I
            }))
              , k = d.applyInverse(cs.toWorldPosition(E, {
                x: h,
                y: I
            }))
              , n = Math.min(Q.x, W.x, b.x, k.x)
              , o = Math.max(Q.x, W.x, b.x, k.x)
              , K = Math.min(Q.y, W.y, b.y, k.y)
              , M = Math.max(Q.y, W.y, b.y, k.y);
            h = o - n,
            I = M - K;
            var A = Math.ceil(n / r)
              , L = Math.floor(o / r)
              , l = Math.ceil(K / r)
              , t = Math.floor(M / r);
            E.tx(),
            E.ty(),
            E._zoom;
            var i, x, G;
            for (s.save(),
            s.lineWidth = 1,
            s.beginPath(),
            s.strokeStyle = w,
            G = Math.ceil(A / X) * X; L >= G; G += X)
                i = G * r,
                Z(i, K, i, M);
            for (G = Math.ceil(l / X) * X; t >= G; G += X)
                x = G * r,
                Z(n, x, o, x);
            for (s.stroke(),
            s.beginPath(),
            s.strokeStyle = V,
            G = A; L >= G; G++)
                0 !== G % X && (i = G * r,
                Z(i, K, i, M));
            for (G = l; t >= G; G++)
                0 !== G % X && (x = G * r,
                Z(n, x, o, x));
            s.stroke(),
            s.restore()
        }
        ,
        oe.prototype.getAlignmentGuides = function() {
            var $ = this;
            return {
                x: $._xAlignmentGuide,
                y: $._yAlignmentGuide
            }
        }
        ,
        oe.prototype.addAlignmentGuide = function(L, p, t) {
            var _ = this
              , f = "x" === L ? _._xAlignmentGuide : _._yAlignmentGuide
              , t = t ? t : ++_._alignmentGuideId
              , o = {
                p: p,
                id: t
            };
            if (f.length) {
                var i = _._findClosestAlignmentGuide(o.p, f);
                i.dis < 0 ? f.splice(i.index + 1, 0, o) : f.splice(i.index, 0, o)
            } else
                f.push(o);
            return _._interactor._42(),
            t
        }
        ,
        oe.prototype.findClosest = function(N, w, q) {
            var l = this
              , v = l._interactor
              , K = v.gv;
            q && (N = cs.toWorldPosition(K, N));
            var b, B, x, L = 1 / 0, p = 1 / 0, J = N.x, W = N.y;
            if (l.gridEnabled) {
                var e = l.gridBlockSize
                  , d = l.makeMatrix()
                  , $ = d.applyInverse(N);
                $ = d.apply({
                    x: Math.round($.x / e) * e,
                    y: Math.round($.y / e) * e
                }),
                L = $.x - J,
                p = $.y - W,
                x = !0
            }
            if (v.alignmentGuideEnabled && (b = l._findClosestAlignmentGuide(J, l._xAlignmentGuide).dis,
            B = l._findClosestAlignmentGuide(W, l._yAlignmentGuide).dis,
            Math.abs(b) < Math.abs(L) && (L = b,
            x = !0),
            Math.abs(B) < Math.abs(p) && (p = B,
            x = !0)),
            x) {
                x = !1;
                var O = K._zoom
                  , D = v.getStyle("smartGuideSensitivity") / O
                  , H = {};
                if (Math.abs(L) < D && "y" !== w && (H.x = q ? L * O : L,
                x = !0),
                Math.abs(p) < D && "x" !== w && (H.y = q ? p * O : p,
                x = !0),
                x)
                    return H
            }
        }
        ,
        oe.prototype._findClosestAlignmentGuide = function(P, o) {
            if (!o.length)
                return {
                    dis: 1 / 0
                };
            for (var q, f = 0, N = o.length - 1; N - f > 1; )
                q = Math.floor((f + N) / 2),
                o[q].p < P ? f = q : N = q;
            var Q = o[f].p - P
              , e = o[N].p - P;
            return Math.abs(Q) <= Math.abs(e) ? {
                line: o[f],
                dis: Q,
                index: f
            } : {
                line: o[N],
                dis: e,
                index: N
            }
        }
        ,
        oe.prototype.removeAllAlignmentGuide = function(F) {
            var O = this;
            "y" !== F && (O._xAlignmentGuide = []),
            "x" !== F && (O._yAlignmentGuide = []),
            O._interactor._42()
        }
        ,
        oe.prototype.removeAlignmentGuide = function(H) {
            for (var B, Y, U, X = this, V = X._xAlignmentGuide, t = 0; 2 > t; t++)
                for (V = 0 === t ? X._xAlignmentGuide : X._yAlignmentGuide,
                B = 0,
                Y = V.length; Y > B; B++)
                    if (U = V[B],
                    U.id === H)
                        return V.splice(B, 1),
                        X._interactor._42(),
                        {
                            axis: 0 === t ? "x" : "y",
                            position: U.p
                        };
            return !1
        }
        ,
        oe.prototype.adjustAlignmentGuide = function(M, e) {
            var S = this
              , u = S.removeAlignmentGuide(M);
            return u ? (S.addAlignmentGuide(u.axis, e, M),
            !0) : !1
        }
        ;
        var Oq = cs.Guide.Rect = function(U) {
            var Z = this;
            Z._interactor = U
        }
        ;
        Oq.prototype = {},
        Oq.prototype.constructor = Oq,
        Oq.prototype.gatherRects = function() {
            var w, T, l, q, e = this, C = e._interactor.gv, d = [], I = [], G = {
                x: d,
                y: I
            }, g = {}, S = C.getDataModel(), j = S.a("width"), A = S.a("height");
            j && A && (w = 0,
            T = 0,
            l = j,
            q = A,
            d.push({
                node: S,
                type: 0,
                p: w
            }, {
                node: S,
                type: 1,
                p: w + l / 2
            }, {
                node: S,
                type: 2,
                p: w + l
            }),
            I.push({
                node: S,
                type: 0,
                p: T
            }, {
                node: S,
                type: 1,
                p: T + q / 2
            }, {
                node: S,
                type: 2,
                p: T + q
            }),
            g[S._id || 0] = {
                x: w,
                y: T,
                width: l,
                height: q
            }),
            S.each(function(V) {
                if (xj(V) && !C.isSelected(V) && C.isVisible(V)) {
                    var z = !1;
                    if (C.sm().getSelection().each(function(o) {
                        z || (V.isHostOn(o) ? z = !0 : V.isDescendantOf(o) && (z = !0))
                    }),
                    !z) {
                        var R = V.getRect();
                        w = R.x,
                        T = R.y,
                        l = R.width,
                        q = R.height,
                        d.push({
                            node: V,
                            type: 0,
                            p: w
                        }, {
                            node: V,
                            type: 1,
                            p: w + l / 2
                        }, {
                            node: V,
                            type: 2,
                            p: w + l
                        }),
                        I.push({
                            node: V,
                            type: 0,
                            p: T
                        }, {
                            node: V,
                            type: 1,
                            p: T + q / 2
                        }, {
                            node: V,
                            type: 2,
                            p: T + q
                        }),
                        g[V._id] = R
                    }
                }
            }),
            d.sort(function(u, W) {
                return u.p - W.p
            }),
            I.sort(function(w, _) {
                return w.p - _.p
            }),
            e._grid = G,
            e._87I = g
        }
        ,
        Oq.prototype.gatherLines = function(L, I, f) {
            var M, U, $, z, v, B, _, S, K, H, m, u, C = this, c = [C.findClosest({
                x: L.x,
                y: L.y
            }, I), C.findClosest({
                x: L.x + L.w / 2,
                y: L.y + L.h / 2
            }, I), C.findClosest({
                x: L.x + L.w,
                y: L.y + L.h
            }, I)], b = {}, O = C._87I;
            f = f || 255;
            var D, g;
            for (C._guideLine = [],
            M = 0; 2 > M; M++)
                for (b = {},
                0 === M ? (z = "y",
                S = L.x,
                K = S + L.w) : (z = "x",
                S = L.y,
                K = S + L.h),
                U = 0; 3 > U; U++)
                    v = c[U],
                    v && isFinite(v[z]) && (D = 1 << 3 * M + U,
                    f & D && (B = v[z + "Line"],
                    _ = B.node,
                    g = _._id || 0,
                    b[g] || (b[g] = !0,
                    u = O[g],
                    "y" === z ? (H = u.x,
                    m = u.x + u.width) : (H = u.y,
                    m = u.y + u.height),
                    $ = B.p,
                    C._guideLine.push({
                        type: z,
                        a: S,
                        b: K,
                        c: H,
                        d: m,
                        p: $,
                        center: 1 === B.type
                    }))))
        }
        ,
        Oq.prototype._binarySearchClosest = function(O, j) {
            if (!j.length)
                return {
                    dis: 1 / 0
                };
            for (var H, S = 0, m = j.length - 1; m - S > 1; )
                H = Math.floor((S + m) / 2),
                j[H].p < O ? S = H : m = H;
            var L = j[S].p - O
              , X = j[m].p - O;
            return Math.abs(L) <= Math.abs(X) ? {
                line: j[S],
                dis: L
            } : {
                line: j[m],
                dis: X
            }
        }
        ,
        Oq.prototype.findClosest = function(t, U, Z) {
            var Q = this
              , o = Q._interactor
              , W = o.gv
              , F = Q._grid;
            Z && (t = cs.toWorldPosition(W, t));
            var g, Y = Q._binarySearchClosest(t.x, F.x), C = Q._binarySearchClosest(t.y, F.y), x = Y.dis, E = C.dis, p = W._zoom, z = o.getStyle("smartGuideSensitivity") / p, O = {};
            return Math.abs(x) < z && "y" !== U && (O.x = Z ? x * p : x,
            O.xLine = Y.line,
            g = !0),
            Math.abs(E) < z && "x" !== U && (O.y = Z ? E * p : E,
            O.yLine = C.line,
            g = !0),
            g ? O : void 0
        }
        ,
        Oq.prototype._42 = function() {
            var r = this
              , m = r._guideLine;
            if (m && !C.Default.isCtrlDown()) {
                var Y, g, p, c, X, n, A, S, N, l, x, L, z, V, G, Q, _, u = r._interactor, D = u.gv, H = u._context, U = D.tx(), v = D.ty(), B = D._zoom, h = u.getStyle("guideLineTextSpacing");
                for (Y = 0,
                g = m.length; g > Y; Y++)
                    p = m[Y],
                    S = p.type,
                    N = p.p,
                    l = p.a,
                    x = p.b,
                    L = p.c,
                    z = p.d,
                    V = Math.min(l, L),
                    G = Math.max(x, z),
                    "x" === S ? (c = N * B + U,
                    X = V * B + v,
                    n = c,
                    A = G * B + v) : (c = V * B + U,
                    X = N * B + v,
                    n = G * B + U,
                    A = X),
                    cs.Icons.DrawIcon(u, H, cs.Icons.MoveLineGuide, {
                        rect: [c, X, n, A],
                        center: p.center
                    }),
                    z >= l && x >= L || (V = l > z ? z : x,
                    G = l > z ? l : L,
                    _ = G - V,
                    "x" === S ? (p.center2center || (c -= h,
                    n = c),
                    X = V * B + v,
                    A = G * B + v,
                    Q = cs.Icons.MoveLineGuideDistanceV) : "y" === S && (p.center2center || (X -= h,
                    A = X),
                    c = V * B + U,
                    n = G * B + U,
                    Q = cs.Icons.MoveLineGuideDistanceH),
                    cs.Icons.DrawIcon(u, H, Q, {
                        x0: c,
                        y0: X,
                        x1: n,
                        y1: A,
                        dis: _
                    }))
            }
        }
        ,
        Oq.prototype.clear = function() {
            this._guideLine = null
        }
        ,
        cs.DefaultStyleMap = {
            pointSize: [24, 9],
            checkSize: 7,
            rotateCheckSize: 10,
            moveSensitivity: 10,
            rotateRound: Math.PI / 2,
            rotateSensitivity: Math.PI / 60,
            shiftRotateRound: Math.PI / 12,
            shiftLineRotateRound: Math.PI / 4,
            anchorMovable: !0,
            anchorVisible: !0,
            anchorHideThreshold: 25,
            anchorOutsideVisibleThreshold: .25,
            anchorRound: .25,
            anchorSensitivity: .02,
            smartGuideSensitivity: 8,
            curveIntersectSize: 5,
            curvePointIntersectSize: 8,
            edgeHostDetectPerFrame: !0,
            guideLineTextSpacing: 0,
            gridBlockSize: 40,
            gridThickLinesEvery: 10,
            gridThickColor: "#5d5d5d",
            gridLightColor: "#d0d0d0",
            gridZoomThreshold: .25,
            gridAlignmentGuideColor: "#ff0000",
            gridAngle: Math.PI / 2,
            gridRotation: 0,
            groupRotateModeDefault: "block",
            groupRotateModeKey: ["ctrlKey", "metaKey"],
            rotateCursorSize: 32,
            rotateCursorRound: 45,
            tipTextColor: "#ffffff",
            tipBackground: "#333333",
            curveHighlightColor: "#30599e",
            rectPointBackground: "white",
            rectPointBorderColor: "#666666",
            rectPointShadowColor: "rgba(0,0,0,0.35)",
            shapeCtrlPointBackground: "white",
            shapeCtrlPointBorderColor: null,
            shapeCtrlPointHighlightBorder: null,
            shapeHighlighPointBackground: "#30599e",
            curveElevationVisible: !0,
            curveElevationIntersectSize: 8,
            curveElevationGuideShift: [20, 0],
            connectGuideVisible: !0,
            connectGuideShift: [1, .25, 8, 0],
            connectGuideIntersectSize: 8,
            connectGuideGarbageIntersectsize: 25,
            connectGuideGarbageShift: [1, 1, -48, -48]
        };
        var Rq = cs.Icons = {}
          , bs = 1e4
          , dp = null
          , yr = "rgb(51,153,255)"
          , ml = "rgb(183,232,135)"
          , Ip = "rgb(255,204,153)"
          , ik = 6;
        C.Default.setImage("Icons.RectPoint", {
            width: ik,
            height: ik,
            comps: [{
                type: "rect",
                background: "rgb(247,247,247)",
                borderWidth: 1,
                borderColor: yr,
                rect: [0, 0, ik, ik]
            }]
        });
        var bl = "#e000e0";
        Rq.GroupSubEntityRect = {
            comps: [{
                type: "shape",
                points: {
                    func: function() {
                        var B = Rq.GroupSubEntityRect.data;
                        if (!B)
                            return [];
                        var O = B.min
                          , n = B.max;
                        return [O.x, O.y, O.x, n.y, n.x, n.y, n.x, O.y]
                    }
                },
                segments: [1, 2, 2, 2, 5],
                background: null,
                borderWidth: 1,
                borderColor: {
                    func: function() {
                        return Rq.GroupSubEntityRect.data.isKeyOb ? bl : "#666666"
                    }
                }
            }]
        },
        Rq.Line = {
            comps: [{
                type: "image",
                name: "Icons.RectPoint",
                rect: {
                    func: function() {
                        return [[Rq.Line.data.P1.x, Rq.Line.data.P1.y], ik, ik]
                    }
                }
            }, {
                type: "image",
                name: "Icons.RectPoint",
                rect: {
                    func: function() {
                        return [[Rq.Line.data.P2.x, Rq.Line.data.P2.y], ik, ik]
                    }
                }
            }]
        },
        Rq.NodeHoverGuide = {
            comps: [{
                type: "shape",
                points: {
                    func: function() {
                        return Rq.NodeHoverGuide.data
                    }
                },
                segments: [1, 2, 2, 2, 5],
                background: null,
                borderWidth: 1,
                borderColor: "#3399FF"
            }]
        },
        Rq.Rect = {
            comps: [{
                type: "shape",
                points: {
                    func: function() {
                        var E = Rq.Rect.data;
                        if (!E)
                            return [];
                        var y = E.LT
                          , c = E.LB
                          , n = E.RB
                          , $ = E.RT;
                        return [y.x, y.y, c.x, c.y, n.x, n.y, $.x, $.y]
                    }
                },
                segments: [1, 2, 2, 2, 5],
                background: null,
                borderWidth: 1,
                borderColor: yr
            }, {
                type: "image",
                name: "Icons.RectPoint",
                rotation: {
                    func: function() {
                        return Rq.Rect.data.rotation
                    }
                },
                rect: {
                    func: function() {
                        return [[Rq.Rect.data.LT.x, Rq.Rect.data.LT.y], ik, ik]
                    }
                }
            }, {
                type: "image",
                name: "Icons.RectPoint",
                rotation: {
                    func: function() {
                        return Rq.Rect.data.rotation
                    }
                },
                rect: {
                    func: function() {
                        return [[Rq.Rect.data.LB.x, Rq.Rect.data.LB.y], ik, ik]
                    }
                }
            }, {
                type: "image",
                name: "Icons.RectPoint",
                rotation: {
                    func: function() {
                        return Rq.Rect.data.rotation
                    }
                },
                rect: {
                    func: function() {
                        return [[Rq.Rect.data.RB.x, Rq.Rect.data.RB.y], ik, ik]
                    }
                }
            }, {
                type: "image",
                name: "Icons.RectPoint",
                rotation: {
                    func: function() {
                        return Rq.Rect.data.rotation
                    }
                },
                rect: {
                    func: function() {
                        return [[Rq.Rect.data.RT.x, Rq.Rect.data.RT.y], ik, ik]
                    }
                }
            }, {
                type: "image",
                name: "Icons.RectPoint",
                rotation: {
                    func: function() {
                        return Rq.Rect.data.rotation
                    }
                },
                visible: {
                    func: function() {
                        return Rq.Rect.data.L ? !0 : !1
                    }
                },
                rect: {
                    func: function() {
                        return [[Rq.Rect.data.L.x, Rq.Rect.data.L.y], ik, ik]
                    }
                }
            }, {
                type: "image",
                name: "Icons.RectPoint",
                rotation: {
                    func: function() {
                        return Rq.Rect.data.rotation
                    }
                },
                visible: {
                    func: function() {
                        return Rq.Rect.data.R ? !0 : !1
                    }
                },
                rect: {
                    func: function() {
                        return [[Rq.Rect.data.R.x, Rq.Rect.data.R.y], ik, ik]
                    }
                }
            }, {
                type: "image",
                name: "Icons.RectPoint",
                rotation: {
                    func: function() {
                        return Rq.Rect.data.rotation
                    }
                },
                visible: {
                    func: function() {
                        return Rq.Rect.data.T ? !0 : !1
                    }
                },
                rect: {
                    func: function() {
                        return [[Rq.Rect.data.T.x, Rq.Rect.data.T.y], ik, ik]
                    }
                }
            }, {
                type: "image",
                name: "Icons.RectPoint",
                rotation: {
                    func: function() {
                        return Rq.Rect.data.rotation
                    }
                },
                visible: {
                    func: function() {
                        return Rq.Rect.data.B ? !0 : !1
                    }
                },
                rect: {
                    func: function() {
                        return [[Rq.Rect.data.B.x, Rq.Rect.data.B.y], ik, ik]
                    }
                }
            }]
        };
        var er = 16;
        C.Default.setImage("Icons.Anchor", {
            width: 12,
            height: 12,
            comps: [{
                type: "shape",
                borderWidth: 1,
                borderColor: yr,
                borderCap: "round",
                shadowColor: "#1ABC9C",
                points: [.50928, 6, 11.49072, 6, 6, 6, 6, .50928, 6, 11.49072]
            }, {
                type: "circle",
                borderWidth: 1,
                borderColor: yr,
                shadowColor: "#1ABC9C",
                rect: [2.84391, 2.84391, 6.53697, 6.53697]
            }]
        }),
        Rq.Anchor = {
            comps: [{
                type: "image",
                name: "Icons.Anchor",
                rect: {
                    func: function() {
                        return [[Rq.Anchor.data.POS.x, Rq.Anchor.data.POS.y], er, er]
                    }
                }
            }]
        },
        Rq.TipShiftX = 12,
        Rq.TipShiftY = 12;
        var po = [8, 28];
        Rq.TipHelper = {
            comps: [{
                type: "roundRect",
                rect: {
                    func: function() {
                        return [Rq.TipHelper.data.helperPos.x, Rq.TipHelper.data.helperPos.y, po[0] * Rq.TipHelper.data.size, po[1]]
                    }
                },
                background: {
                    func: function() {
                        return dp.getStyle("tipBackground")
                    }
                },
                opacity: .6
            }, {
                type: "text",
                text: {
                    func: function() {
                        return Rq.TipHelper.data.text
                    }
                },
                rect: {
                    func: function() {
                        return [Rq.TipHelper.data.helperPos.x, Rq.TipHelper.data.helperPos.y, po[0] * Rq.TipHelper.data.size, po[1]]
                    }
                },
                color: {
                    func: function() {
                        return dp.getStyle("tipTextColor")
                    }
                },
                font: "bold 12px Arial",
                align: "center"
            }]
        };
        var Tm = 7;
        Rq.ShapePoint = {
            comps: [{
                type: "circle",
                rect: {
                    func: function() {
                        var T = Rq.ShapePoint.data;
                        return [T, Tm, Tm]
                    }
                },
                background: "#ffffff",
                borderWidth: 1,
                borderColor: yr
            }]
        },
        Rq.ShapeBgCurve = {
            comps: [{
                type: "shape",
                points: {
                    func: function() {
                        return Rq.ShapeBgCurve.data.P
                    }
                },
                segments: {
                    func: function() {
                        return Rq.ShapeBgCurve.data.S
                    }
                },
                background: null,
                borderWidth: 1,
                borderColor: yr
            }]
        };
        var Xm = 8;
        Rq.ShapeHighlighPoint = {
            comps: [{
                type: "circle",
                rect: {
                    func: function() {
                        var t = Rq.ShapeHighlighPoint.data;
                        return [[t.x, t.y], Xm, Xm]
                    }
                },
                background: {
                    func: function() {
                        return dp.getStyle("shapeHighlighPointBackground")
                    }
                },
                borderWidth: 0
            }]
        };
        var Bk = 10;
        Rq.ShapeHighlighRealPoint = {
            comps: [{
                type: "circle",
                rect: {
                    func: function() {
                        var T = Rq.ShapeHighlighRealPoint.data;
                        return [[T.x, T.y], Bk, Bk]
                    }
                },
                background: "#ffffff",
                borderWidth: 2,
                borderColor: yr
            }]
        };
        var Fc = 8;
        Rq.ShapeHighlighCtrlPoint = {
            comps: [{
                type: "shape",
                points: {
                    func: function() {
                        var e = Rq.ShapeHighlighCtrlPoint.data
                          , b = e.x
                          , z = e.y
                          , R = Fc / 2;
                        return [b - R, z - R, b - R, z + R, b + R, z + R, b + R, z - R]
                    }
                },
                segments: [1, 2, 2, 2, 5],
                borderWidth: 2,
                background: {
                    func: function() {
                        return dp.getStyle("shapeCtrlPointBackground")
                    }
                },
                borderColor: {
                    func: function() {
                        return dp.getStyle("shapeCtrlPointBorderColor") || yr
                    }
                }
            }]
        };
        var Ve = 3;
        Rq.ShapeHighlightCurve = {
            comps: [{
                type: "shape",
                points: {
                    func: function() {
                        return Rq.ShapeHighlightCurve.data
                    }
                },
                segments: [1, 4],
                background: null,
                borderWidth: Ve,
                borderColor: {
                    func: function() {
                        return dp.getStyle("curveHighlightColor")
                    }
                }
            }]
        },
        Rq.ShapeGuideLine = {
            comps: [{
                type: "shape",
                points: {
                    func: function() {
                        return Rq.ShapeGuideLine.data
                    }
                },
                background: null,
                borderWidth: 1,
                borderColor: "rgb(255,204,153)"
            }]
        },
        Rq.MoveLineGuide = {
            comps: [{
                type: "shape",
                points: {
                    func: function() {
                        return Rq.MoveLineGuide.data.rect
                    }
                },
                background: null,
                borderWidth: 1,
                borderColor: {
                    func: function() {
                        return Rq.MoveLineGuide.data.center ? ml : Ip
                    }
                }
            }]
        };
        var Ic = 5;
        Rq.MoveLineGuideDistanceH = {
            comps: [{
                type: "shape",
                points: {
                    func: function() {
                        var h = Rq.MoveLineGuideDistanceH.data
                          , d = h.x0
                          , U = h.y0;
                        return [d, U - Ic, d, U + Ic]
                    }
                },
                rotation: -Math.PI / 4,
                segments: [1, 2],
                background: null,
                borderWidth: 1,
                borderColor: Ip
            }, {
                type: "shape",
                points: {
                    func: function() {
                        var t = Rq.MoveLineGuideDistanceH.data
                          , d = t.x1
                          , w = t.y1;
                        return [d, w - Ic, d, w + Ic]
                    }
                },
                rotation: -Math.PI / 4,
                segments: [1, 2],
                background: null,
                borderWidth: 1,
                borderColor: Ip
            }, {
                type: "text",
                text: {
                    func: function() {
                        return Math.round(Rq.MoveLineGuideDistanceH.data.dis)
                    }
                },
                rect: {
                    func: function() {
                        var y = Rq.MoveLineGuideDistanceH.data;
                        return [[(y.x0 + y.x1) / 2, y.y0 - 10], 20, 20]
                    }
                },
                color: Ip,
                font: "12px Arial",
                align: "center"
            }]
        },
        Rq.MoveLineGuideDistanceV = {
            comps: [{
                type: "shape",
                points: {
                    func: function() {
                        var d = Rq.MoveLineGuideDistanceV.data
                          , X = d.x0
                          , Q = d.y0;
                        return [X - Ic, Q, X + Ic, Q]
                    }
                },
                rotation: Math.PI / 4,
                segments: [1, 2],
                background: null,
                borderWidth: 1,
                borderColor: Ip
            }, {
                type: "shape",
                points: {
                    func: function() {
                        var e = Rq.MoveLineGuideDistanceV.data
                          , i = e.x1
                          , B = e.y1;
                        return [i - Ic, B, i + Ic, B]
                    }
                },
                rotation: Math.PI / 4,
                segments: [1, 2],
                background: null,
                borderWidth: 1,
                borderColor: Ip
            }, {
                type: "text",
                text: {
                    func: function() {
                        return Math.round(Rq.MoveLineGuideDistanceV.data.dis)
                    }
                },
                rect: {
                    func: function() {
                        var j = Rq.MoveLineGuideDistanceV.data;
                        return [[j.x0 - 10, (j.y0 + j.y1) / 2], 20, 20]
                    }
                },
                color: Ip,
                font: "12px Arial",
                align: "center"
            }]
        },
        C.Default.setImage("Icons.EdgeElevationGuideImage", {
            width: 16,
            height: 16,
            comps: [{
                type: "oval",
                background: "rgb(255,255,255)",
                borderWidth: 1,
                borderColor: "rgb(138,138,138)",
                rect: [.5, .5, 15, 15]
            }, {
                type: "shape",
                borderWidth: 2,
                borderColor: "rgb(44,44,44)",
                borderCap: "round",
                points: [4, 8, 8, 4, 12, 8, 8, 4, 8, 13],
                segments: [1, 2, 2, 1, 2]
            }]
        }),
        Rq.EdgeElevationGuide = {
            comps: [{
                type: "image",
                name: "Icons.EdgeElevationGuideImage",
                rect: {
                    func: function() {
                        var Z = Rq.EdgeElevationGuide.data
                          , X = Z.x
                          , i = Z.y
                          , F = dp.getStyle("curveElevationIntersectSize")
                          , s = dp.getStyle("curveElevationGuideShift");
                        return X += s[0],
                        i += s[1],
                        [X - F, i - F, 2 * F, 2 * F]
                    }
                }
            }]
        },
        C.Default.setImage("Icons.ConnectGuideBgImage", {
            width: 12,
            height: 12,
            comps: [{
                type: "shape",
                background: "#3399ff",
                fillRule: "evenodd",
                shadowColor: "#1ABC9C",
                rotation: 3.14159,
                points: [6.00001, 11.99999, 6.00001, 11.99999, 2.6863, 11.99999, 1e-5, 9.30695, 1e-5, 5.99999, 1e-5, 5.99999, 1e-5, 2.68628, 2.69305, -1e-5, 6.00001, -1e-5, 12.00001, -1e-5, 11.99998, 12.00001, 6.00001, 11.99999],
                segments: [1, 2, 4, 2, 4, 2, 2, 2]
            }]
        }),
        C.Default.setImage("Icons.ConnectGuideHeaderImage", {
            width: 12,
            height: 12,
            comps: [{
                type: "oval",
                background: "#3399FF",
                borderColor: "#3399FF",
                shadowColor: "#1ABC9C",
                rect: [0, 0, 12, 12]
            }, {
                type: "shape",
                borderWidth: 1,
                borderColor: "rgb(255,255,255)",
                borderCap: "round",
                shadowColor: "#1ABC9C",
                points: [4.76, 2.56, 8.2, 5.98, 4.76, 9.44]
            }]
        }),
        Rq.ConnectGuide = {
            comps: [{
                type: "image",
                name: "Icons.ConnectGuideBgImage",
                rotation: {
                    func: function() {
                        return Rq.ConnectGuide.data.rotation
                    }
                },
                rect: {
                    func: function() {
                        var l = Rq.ConnectGuide.data.connect;
                        l.x,
                        l.y;
                        var U = dp.getStyle("connectGuideIntersectSize");
                        return [[l.x, l.y], 2 * U, 2 * U]
                    }
                }
            }, {
                type: "image",
                name: "Icons.ConnectGuideHeaderImage",
                rect: {
                    func: function() {
                        var m = Rq.ConnectGuide.data.cursorPos || Rq.ConnectGuide.data.connect
                          , i = dp.getStyle("connectGuideIntersectSize");
                        return [[m.x, m.y], 2 * i - 2, 2 * i - 2]
                    }
                }
            }, {
                type: "shape",
                background: null,
                borderColor: "#3399ff",
                borderWidth: 2,
                segments: [1, 4],
                points: {
                    func: function() {
                        var r = Rq.ConnectGuide.data.connect
                          , Y = Rq.ConnectGuide.data.cursorPos || r;
                        return [r.x, r.y, r.x + .5 * (Y.x - r.x), r.y, Y.x + .5 * (r.x - Y.x), Y.y, Y.x, Y.y]
                    }
                }
            }]
        },
        C.Default.setImage("Icons.ConnectGuideGarbageImage", {
            width: 48,
            height: 48,
            comps: [{
                type: "oval",
                background: "rgba(0,0,0,0.1)",
                borderColor: "#979797",
                shadowColor: "#1ABC9C",
                rect: [0, 0, 48, 48]
            }, {
                type: "shape",
                borderWidth: 2,
                borderColor: "rgb(255,255,255)",
                borderCap: "round",
                shadowColor: "#1ABC9C",
                points: [19.84721, 19.69091, 19.84721, 32.25123]
            }, {
                type: "shape",
                borderWidth: 2,
                borderColor: "rgb(255,255,255)",
                borderCap: "round",
                shadowColor: "#1ABC9C",
                points: [24.10371, 19.69091, 24.10371, 32.25123]
            }, {
                type: "shape",
                borderWidth: 2,
                borderColor: "rgb(255,255,255)",
                borderCap: "round",
                shadowColor: "#1ABC9C",
                points: [28.15279, 19.69091, 28.15279, 32.25123]
            }, {
                type: "shape",
                borderWidth: 2,
                borderColor: "rgb(255,255,255)",
                borderCap: "round",
                shadowColor: "#1ABC9C",
                points: [11.23055, 15.22377, 36.76945, 15.189, 19.12302, 15.17121, 20.94722, 11.5228, 26.41985, 11.5228, 28.24406, 15.17121]
            }, {
                type: "rect",
                borderWidth: 2,
                borderColor: "rgb(255,255,255)",
                shadowColor: "#1ABC9C",
                rect: [15.48702, 15.22377, 17.02595, 21.25344]
            }]
        }),
        C.Default.setImage("Icons.ConnectGuideDeletingImage", {
            width: 56,
            height: 56,
            comps: [{
                type: "oval",
                background: "rgba(232,0,0,0.75)",
                borderColor: "#979797",
                shadowColor: "#1ABC9C",
                rect: [0, 0, 56, 56]
            }, {
                type: "shape",
                borderWidth: 2,
                borderColor: "rgb(255,255,255)",
                borderCap: "round",
                shadowColor: "#1ABC9C",
                points: [22.67939, 27.69091, 22.67939, 40.25123]
            }, {
                type: "shape",
                borderWidth: 2,
                borderColor: "rgb(255,255,255)",
                borderCap: "round",
                shadowColor: "#1ABC9C",
                points: [26.93588, 27.69091, 26.93588, 40.25123]
            }, {
                type: "shape",
                borderWidth: 2,
                borderColor: "rgb(255,255,255)",
                borderCap: "round",
                shadowColor: "#1ABC9C",
                points: [30.98497, 27.69091, 30.98497, 40.25123]
            }, {
                type: "shape",
                borderWidth: 2,
                borderColor: "rgb(255,255,255)",
                borderCap: "round",
                shadowColor: "#1ABC9C",
                anchorX: 0,
                anchorY: 1,
                rotation: 5.65062,
                points: [14.06272, 23.22377, 39.60163, 23.189, 21.9552, 23.17121, 23.7794, 19.5228, 29.25203, 19.5228, 31.07623, 23.17121]
            }, {
                type: "rect",
                borderWidth: 2,
                borderColor: "rgb(255,255,255)",
                shadowColor: "#1ABC9C",
                rect: [18.3192, 23.22377, 17.02595, 21.25344]
            }]
        }),
        Rq.ConnectGuideGarbage = {
            comps: [{
                type: "image",
                name: {
                    func: function() {
                        var C = Rq.ConnectGuideGarbage.data.hover;
                        return C ? "Icons.ConnectGuideDeletingImage" : "Icons.ConnectGuideGarbageImage"
                    }
                },
                rect: {
                    func: function() {
                        var H = Rq.ConnectGuideGarbage.data
                          , Y = dp.getStyle("connectGuideGarbageIntersectsize");
                        return H.hover && (Y += 5),
                        [[H.x, H.y], 2 * Y, 2 * Y]
                    }
                }
            }]
        };
        var Rn = 6;
        Rq.ShapeActivingCtrl = {
            comps: [{
                type: "shape",
                visible: {
                    func: function() {
                        return Rq.ShapeActivingCtrl.data.c1 ? !0 : !1
                    }
                },
                points: {
                    func: function() {
                        var i = Rq.ShapeActivingCtrl.data;
                        return [i.point.x, i.point.y, i.c1.x, i.c1.y]
                    }
                },
                segments: [1, 2],
                background: null,
                borderWidth: 1,
                borderColor: yr
            }, {
                type: "shape",
                visible: {
                    func: function() {
                        return Rq.ShapeActivingCtrl.data.c2 ? !0 : !1
                    }
                },
                points: {
                    func: function() {
                        var Y = Rq.ShapeActivingCtrl.data;
                        return [Y.point.x, Y.point.y, Y.c2.x, Y.c2.y]
                    }
                },
                segments: [1, 2],
                background: null,
                borderWidth: 1,
                borderColor: yr
            }, {
                type: "shape",
                visible: {
                    func: function() {
                        return Rq.ShapeActivingCtrl.data.c1 ? !0 : !1
                    }
                },
                points: {
                    func: function() {
                        var j = Rq.ShapeActivingCtrl.data.c1
                          , p = j.x
                          , d = j.y
                          , x = Rn / 2;
                        return "c1" === Rq.ShapeActivingCtrl.data.hl && (x += .5),
                        [p - x, d - x, p - x, d + x, p + x, d + x, p + x, d - x]
                    }
                },
                segments: [1, 2, 2, 2, 5],
                borderWidth: 2,
                background: {
                    func: function() {
                        return dp.getStyle("shapeCtrlPointBackground")
                    }
                },
                borderColor: {
                    func: function() {
                        return "c1" === Rq.ShapeActivingCtrl.data.hl ? dp.getStyle("shapeCtrlPointHighlightBorder") || yr : dp.getStyle("shapeCtrlPointBorderColor") || yr
                    }
                }
            }, {
                type: "shape",
                visible: {
                    func: function() {
                        return Rq.ShapeActivingCtrl.data.c2 ? !0 : !1
                    }
                },
                points: {
                    func: function() {
                        var f = Rq.ShapeActivingCtrl.data.c2
                          , e = f.x
                          , I = f.y
                          , X = Rn / 2;
                        return "c2" === Rq.ShapeActivingCtrl.data.hl && (X += .5),
                        [e - X, I - X, e - X, I + X, e + X, I + X, e + X, I - X]
                    }
                },
                segments: [1, 2, 2, 2, 5],
                borderWidth: 2,
                background: {
                    func: function() {
                        return dp.getStyle("shapeCtrlPointBackground")
                    }
                },
                borderColor: {
                    func: function() {
                        return "c2" === Rq.ShapeActivingCtrl.data.hl ? dp.getStyle("shapeCtrlPointHighlightBorder") || yr : dp.getStyle("shapeCtrlPointBorderColor") || yr
                    }
                }
            }]
        },
        cs.Icons.DrawIcon = function(Z, E, b, z) {
            b.width = b.height = bs,
            b.data = z,
            dp = Z,
            C.Default.drawImage(E, b, 0, 0, bs, bs)
        }
        ,
        cs.Icons.MapPoints = function(i, $) {
            for (var f = 0, c = i.length; c > f; f++)
                i[f] /= $
        }
        ,
        cs.roundTo = function(W, k, h) {
            var q = Math.abs(W % k);
            return h > q || h > k - q ? k * Math.round(W / k) : W
        }
        ,
        cs.toFixed = function(i) {
            return Math.round(100 * i) / 100
        }
        ,
        cs.getDataMatrix = function(j) {
            if (j instanceof C.Shape) {
                var t = new C.Math.Matrix2d
                  , v = j.getPosition();
                return t.translate(-v.x, -v.y).scale(j.getScale().x, j.getScale().y).rotate(j.getRotation()).translate(v.x, v.y),
                t
            }
            return j.getMatrix ? j.getMatrix() : new C.Math.Matrix2d
        }
        ;
        var Tb = cs.Math.Curve = function() {
            this._curves = []
        }
        ;
        Tb.prototype = {},
        Tb.prototype.constructor = Tb,
        Tb.prototype.createFromHtShape = function(n, w, O) {
            w instanceof C.List && (w = w.toArray());
            var q, Q, D, M, a, x, H, f = this, k = null, i = null, t = 0, o = cs.Math.Vector2, A = cs.Math.CubicBezier, U = function(E) {
                return new o(n[E],n[E + 1],O ? O[E / 2] : F)
            };
            for (Q = 0,
            D = w.length; D > Q; Q++) {
                switch (M = w[Q],
                a = null,
                M) {
                case 1:
                    i = U(t),
                    k = i,
                    t += 2;
                    break;
                case 2:
                    q = U(t),
                    t += 2,
                    a = new A(i,i.clone(),q.clone(),q),
                    i = q;
                    break;
                case 3:
                    x = U(t),
                    q = U(t + 2),
                    t += 4,
                    a = new A(i,x.clone().sub(i).multiplyScalar(2 / 3).add(i),x.clone().sub(q).multiplyScalar(2 / 3).add(q),q),
                    i = q;
                    break;
                case 4:
                    x = U(t),
                    H = U(t + 2),
                    q = U(t + 4),
                    t += 6,
                    a = new A(i,x,H,q),
                    i = q;
                    break;
                case 5:
                    if (!k)
                        break;
                    a = new A(i,i.clone(),k.clone(),k),
                    i = null,
                    k = null
                }
                a && (a._index = f._curves.length,
                f._curves.push(a))
            }
        }
        ,
        Tb.prototype.checkPoint = function(o, d) {
            var t, b, f, T, e, S = this, v = S._curves;
            for (t = 0,
            b = v.length; b > t; t++)
                if (T = v[t],
                e = T.intersectRect(o, d, d),
                e.length)
                    return f = 0,
                    e.forEach(function(D) {
                        f += D.t
                    }),
                    f /= e.length,
                    o = T.getPointAt(f),
                    o.t = f,
                    {
                        bezier: T,
                        intersection: o
                    }
        }
        ,
        Tb.prototype.insertKnot = function(A, U) {
            var G = A.insertKnot(U)
              , p = this
              , y = p._curves;
            y.splice(A._index, 1, G[0], G[1])
        }
        ,
        Tb.prototype._isCloseEnough = function(y, W) {
            return Math.abs(y.x - W.x) < 1e-6 && Math.abs(y.y - W.y) < 1e-6
        }
        ,
        Tb.prototype._isSamePoint = function(k, Y) {
            return k === Y
        }
        ,
        Tb.prototype.moveRealPoint = function(F, Z) {
            var w = this
              , u = w._curves
              , D = Z.clone().sub(F);
            u.forEach(function(J) {
                var i = J._p1;
                J._p2,
                J._p3;
                var U = J._p4;
                w._isSamePoint(i, F) && (J._p2.add(D),
                J._p1 = Z),
                w._isSamePoint(U, F) && (J._p3.add(D),
                J._p4 = Z)
            })
        }
        ,
        Tb.prototype.moveCtrlDueToRealPointMovement = function(K, p) {
            var w = this
              , X = w._curves
              , T = function(n) {
                n.add(p),
                n.e && p.e && (n.e += p.e)
            };
            X.forEach(function(m) {
                var h = m._p1;
                m._p2,
                m._p3;
                var D = m._p4;
                w._isSamePoint(h, K) && T(m._p2),
                w._isSamePoint(D, K) && T(m._p3)
            })
        }
        ,
        Tb.prototype.moveCtrlPoint = function(I, s, U) {
            var Q = I[U];
            if (Q) {
                Q.e !== F && (s.e = Q.e);
                var v = this
                  , h = v._curves;
                s.clone().sub(Q),
                h.forEach(function(j) {
                    var _;
                    "c2" === U ? _ = "_p2" : "c1" === U && (_ = "_p3"),
                    v._isSamePoint(j[_], Q) && (j[_] = s)
                }),
                I[U] = s
            }
        }
        ,
        Tb.prototype.deleteRealPoint = function(L, u) {
            var x, o, g, c, V, b, J, X = this, U = X._curves, G = {}, D = [], W = cs.Math.CubicBezier;
            for (o = 0,
            g = U.length; g > o; o++)
                x = U[o],
                c = x._p1,
                V = x._p2,
                b = x._p3,
                J = x._p4,
                (G[o] || !X._isSamePoint(c, L)) && (X._isSamePoint(J, L) ? g > o + 1 && X._isSamePoint(U[o + 1]._p1, L) && (u || D.push(new W(c,V,U[o + 1]._p3,U[o + 1]._p4))) : D.push(x));
            X._curves = D
        }
        ,
        Tb.prototype.findPairs = function(y, I) {
            var D, U, J, q, A, O, M, z, c = this, k = c._curves, L = {}, v = [];
            for (U = 0,
            J = k.length; J > U; U++)
                D = k[U],
                q = D._p1,
                A = D._p2,
                O = D._p3,
                M = D._p4,
                !L[U] && c._isSamePoint(q, y) && (I ? v.push({
                    point: q,
                    r2: M
                }) : v.push({
                    point: q,
                    c2: A
                })),
                c._isSamePoint(M, y) && (z = I ? {
                    point: M,
                    r1: q
                } : {
                    point: M,
                    c1: O
                },
                J > U + 1 && c._isSamePoint(k[U + 1]._p1, y) && (I ? z.r2 = k[U + 1]._p4 : z.c2 = k[U + 1]._p2,
                L[U + 1] = !0),
                v.push(z));
            return v
        }
        ,
        Tb.prototype.toHtShape = function() {
            var U = this
              , Z = U._curves
              , m = []
              , q = []
              , e = {
                x: 1 / 0,
                y: 1 / 0
            };
            return Z.forEach(function(N) {
                var b = N._p1
                  , p = N._p2
                  , k = N._p3
                  , Z = N._p4;
                return U._isCloseEnough(b, e) || (m.push(1),
                q.push(b.clone())),
                e = Z,
                U._isCloseEnough(b, p) && U._isCloseEnough(k, Z) ? (m.push(2),
                q.push(Z.clone()),
                void 0) : (m.push(4),
                q.push(p.clone(), k.clone(), Z.clone()),
                void 0)
            }),
            {
                segments: m,
                points: q
            }
        }
        ;
        var Yo = cs.Math.CubicBezier = function(m, A, L, N) {
            var H = this;
            H._id = cs.Math.CubicBezier._globalId++,
            H._p1 = m,
            H._p2 = A,
            H._p3 = L,
            H._p4 = N
        }
        ;
        Yo._globalId = 1,
        Yo.prototype = {},
        Yo.prototype.constructor = Yo,
        Yo.prototype.toString = function() {
            return this._id
        }
        ,
        Yo.prototype.intersectRect = function(O, D, i) {
            var U = D / 2
              , o = i / 2
              , c = O.x
              , g = O.y
              , P = cs.Math.Vector2
              , S = new P(-U + c,-o + g)
              , E = new P(U + c,o + g)
              , H = new P(E.x,S.y)
              , Y = new P(S.x,E.y)
              , m = this
              , N = m.intersectLine(S, H)
              , t = m.intersectLine(H, E)
              , u = m.intersectLine(E, Y)
              , p = m.intersectLine(Y, S)
              , $ = N.concat(t).concat(u).concat(p);
            return $
        }
        ,
        Yo.prototype.intersectLine = function(q, z) {
            var p, u, O, P, C, v, K, H, m, h, N, a, S, J = this, l = q.clone().min(z), E = q.clone().max(z);
            P = J._p1,
            C = J._p2,
            v = J._p3,
            K = J._p4,
            p = P.clone().multiplyScalar(-1),
            u = C.clone().multiplyScalar(3),
            O = v.clone().multiplyScalar(-3),
            N = p.add(u).add(O).add(K),
            p = P.clone().multiplyScalar(3),
            u = C.clone().multiplyScalar(-6),
            O = v.clone().multiplyScalar(3),
            h = p.add(u).add(O),
            p = P.clone().multiplyScalar(-3),
            u = C.clone().multiplyScalar(3),
            m = p.add(u),
            H = P.clone(),
            S = new cs.Math.Vector2(q.y - z.y,z.x - q.x),
            a = q.x * z.y - z.x * q.y;
            for (var T = J.getRoots(S.dot(N), S.dot(h), S.dot(m), S.dot(H) + a), o = new Array, j = 0, i = T.length; i > j; j++) {
                var W = T[j];
                if (!(0 > W || W > 1)) {
                    var $ = P.clone().lerp(C, W)
                      , M = C.clone().lerp(v, W)
                      , X = v.clone().lerp(K, W)
                      , s = $.lerp(M, W)
                      , D = M.lerp(X, W)
                      , L = s.lerp(D, W);
                    L.t = W,
                    q.x == z.x ? l.y <= L.y && L.y <= E.y && o.push(L) : q.y == z.y ? l.x <= L.x && L.x <= E.x && o.push(L) : L.x >= l.x && L.y >= l.y && L.x <= E.x && L.y <= E.y && o.push(L)
                }
            }
            return o
        }
        ,
        Yo.prototype.solveTForPoint = function(B) {
            var G, s, g, R, b = this;
            G = b._p1.x - B.x,
            s = b._p2.x - B.x,
            g = b._p3.x - B.x,
            R = b._p4.x - B.x;
            for (var V = b.getRoots(R - 3 * g + 3 * s - G, 3 * g - 6 * s + 3 * G, 3 * s - 3 * G, G), N = F, o = 1 / 0, z = 0, j = V.length; j > z; z++) {
                var x = V[z];
                if (!(0 > x || x > 1)) {
                    var Y = b._p1.clone().lerp(b._p2, x)
                      , K = b._p2.clone().lerp(b._p3, x)
                      , D = b._p3.clone().lerp(b._p4, x)
                      , W = Y.lerp(K, x)
                      , Z = K.lerp(D, x)
                      , O = W.lerp(Z, x);
                    O.t = x;
                    var M = Math.abs(O.y - B.y);
                    o > M && (o = M,
                    N = O)
                }
            }
            return N
        }
        ,
        Yo.prototype.getPointAt = function(k) {
            var e = this
              , M = e._p1
              , H = e._p2
              , Q = e._p3
              , A = e._p4
              , C = M.clone().lerp(H, k)
              , t = H.clone().lerp(Q, k)
              , U = Q.clone().lerp(A, k)
              , d = C.lerp(t, k)
              , p = t.lerp(U, k);
            return d.lerp(p, k)
        }
        ,
        Yo.prototype.getRoots = function(x, h, G, L) {
            var Z, r, U, I, V, z = new Array;
            if (Math.abs(x) < 1e-6) {
                var Z = h
                  , r = G / Z
                  , U = L / Z
                  , I = r * r - 4 * U;
                if (I > 0) {
                    var V = Math.sqrt(I);
                    z.push(.5 * (-r + V)),
                    z.push(.5 * (-r - V))
                } else
                    0 == I && z.push(.5 * -r)
            }
            h /= x,
            G /= x,
            L /= x,
            Z = (3 * G - h * h) / 3,
            r = (2 * h * h * h - 9 * G * h + 27 * L) / 27;
            var Q = h / 3
              , F = r * r / 4 + Z * Z * Z / 27
              , E = r / 2;
            if (Math.abs(F) <= 1e-6 && (F = 0),
            F > 0) {
                var q, y, V = Math.sqrt(F);
                q = -E + V,
                y = q >= 0 ? Math.pow(q, 1 / 3) : -Math.pow(-q, 1 / 3),
                q = -E - V,
                q >= 0 ? y += Math.pow(q, 1 / 3) : y -= Math.pow(-q, 1 / 3),
                z.push(y - Q)
            } else if (0 > F) {
                var f = Math.sqrt(-Z / 3)
                  , k = Math.atan2(Math.sqrt(-F), -E) / 3
                  , w = Math.cos(k)
                  , Y = Math.sin(k)
                  , N = Math.sqrt(3);
                z.push(2 * f * w - Q),
                z.push(-f * (w + N * Y) - Q),
                z.push(-f * (w - N * Y) - Q)
            } else {
                var q;
                q = E >= 0 ? -Math.pow(E, 1 / 3) : Math.pow(-E, 1 / 3),
                z.push(2 * q - Q),
                z.push(-q - Q)
            }
            return z
        }
        ,
        Yo.prototype._70I = function() {
            var v = this;
            return v._p1.distanceToSquared(v._p2) < 1e-10 && v._p3.distanceToSquared(v._p4) < 1e-10
        }
        ,
        Yo.prototype.insertKnot = function(P) {
            var n = this
              , h = n._p1
              , X = n._p2
              , A = n._p3
              , Y = n._p4
              , E = h.clone().lerp(X, P)
              , K = X.clone().lerp(A, P)
              , q = A.clone().lerp(Y, P)
              , D = E.clone().lerp(K, P)
              , t = K.clone().lerp(q, P)
              , r = D.clone().lerp(t, P);
            return n._70I() ? (h.clone().lerp(Y, P),
            [new cs.Math.CubicBezier(h,h.clone(),r.clone(),r), new cs.Math.CubicBezier(r,r.clone(),Y.clone(),Y)]) : [new cs.Math.CubicBezier(h,E,D,r), new cs.Math.CubicBezier(r,t,q,Y)]
        }
        ;
        var sq = C.Default.getInternal().ui().EdgeUI
          , Bf = {
            _47O: function(p) {
                var u = this
                  , N = Bf.getBackups()._47O;
                cs.inEdit(u.gv) || N.call(u, p)
            }
        };
        cs.Inject.registAsModule(Bf, sq);
        var Zh = C.Default.getInternal().ui().NodeUI
          , yq = {
            _47O: function(B) {
                var b = this
                  , _ = yq.getBackups()._47O;
                cs.inEdit(b.gv) || _.call(b, B)
            },
            getSelectWidth: function() {
                var Q = this
                  , s = Q.gv
                  , r = Q._data;
                if (s.isEditable(r) && cs.inEdit(s))
                    return 0;
                var B = yq.getBackup("getSelectWidth");
                return B.call(Q)
            }
        };
        cs.Inject.registAsModule(yq, Zh);
        var ej = C.graph.GraphView
          , lf = {
            _editPointSize: function() {
                var A = C.Default.isTouchable
                  , z = cs.getStyle("pointSize");
                return z[A ? 0 : 1]
            }(),
            isPointEditable: function(q) {
                var Y = this;
                if (cs.inEdit(Y))
                    return Y._pointEditableFunc ? Y._pointEditableFunc(q) : !0;
                var B = lf.getBackup("isPointEditable");
                B.call(Y, q)
            },
            isEditable: function(R) {
                var T, f = this, m = lf.getBackup("isEditable");
                if (T = R instanceof cs.Group ? !0 : m.call(f, R),
                !cs.inEdit(f))
                    return T;
                if (!(R instanceof C.Edge))
                    return T;
                if (!R.s("2d.editable"))
                    return !1;
                var y = f.getEditableFunc();
                return y ? y(R) : !0
            },
            _42: function(s, t) {
                var j = this
                  , Z = lf.getBackups()._42;
                if (Z.call(j, s, t),
                cs.inEdit(j)) {
                    var X = j.getEditInteractor();
                    X.drawImpl()
                }
            }
        };
        cs.Inject.registAsModule(lf, ej);
        var lb = C.Default.getInternal().ui().ShapeUI
          , $r = {
            _47O: function(O) {
                var A = this
                  , u = $r.getBackups()._47O;
                cs.inEdit(A.gv) || u.call(A, O)
            }
        };
        cs.Inject.registAsModule($r, lb);
        var nb = C.graph.DefaultInteractor
          , Zo = {
            handle_mousewheel: function(O) {
                var M = this
                  , U = Zo.getBackup("handle_mousewheel");
                cs.inEdit(M.gv) || U.call(M, O)
            }
        };
        cs.Inject.registAsModule(Zo, nb);
        var qe = C.graph.MoveInteractor
          , $q = {
            _calcShift: function(c, G) {
                var T = this
                  , I = $q.getBackup("_calcShift")
                  , R = T.gv;
                if (!cs.inEdit(R))
                    return I.call(T, c, G);
                var t = R.getEditInteractor()
                  , O = t.getSubModule("Move").calcShift(c, G, T);
                return O || I.call(T, c, G)
            },
            clear: function(e) {
                var E = this
                  , i = $q.getBackup("clear");
                i.call(E, e);
                var s = E.gv;
                if (cs.inEdit(s)) {
                    var m = s.getEditInteractor();
                    m.getSubModule("Move").clear(e)
                }
            }
        };
        cs.Inject.registAsModule($q, qe);
        var Oq = cs.Rect = function(V) {
            this.catalog = "Rect",
            this._interactor = V
        }
        ;
        Oq.prototype = {},
        Oq.prototype.constructor = Oq,
        Oq.prototype.gatherInfo = function(R, u) {
            var N = this;
            if (1 === u.length) {
                var E = u[0];
                return E instanceof C.Shape && E._70I() ? N.gatherLine(R, E) : sk(E, R) ? !1 : N.gatherSingleTarget(R, E)
            }
            return u.length > 1 ? N.gatherMultiTargets(R, u) : !1
        }
        ,
        Oq.prototype.gatherSingleTarget = function($, C) {
            if (C.getCorners) {
                var R, l = this, s = l.info;
                l.target = C,
                R = l.screenInfo = {};
                var P = C.getCorners();
                s.LT = new cs.Math.Vector2(P[0]),
                s.LB = new cs.Math.Vector2(P[1]),
                s.RB = new cs.Math.Vector2(P[2]),
                s.RT = new cs.Math.Vector2(P[3]),
                s.T = s.LT.clone().add(s.RT).divideScalar(2),
                s.B = s.LB.clone().add(s.RB).divideScalar(2),
                s.L = s.LT.clone().add(s.LB).divideScalar(2),
                s.R = s.RT.clone().add(s.RB).divideScalar(2);
                for (var D in s)
                    R[D] = cs.toScreenPosition($, s[D]);
                var X = l._interactor
                  , e = X.getStyle("checkSize")
                  , j = function(K, L, m) {
                    var j = L.clone().sub(K).setLength(-e)
                      , u = m.clone().sub(K).setLength(-e)
                      , r = j.add(u).add(K);
                    return r
                };
                return R.rotLT = j(R.LT, R.RT, R.LB),
                R.rotLB = j(R.LB, R.LT, R.RB),
                R.rotRB = j(R.RB, R.LB, R.RT),
                R.rotRT = j(R.RT, R.LT, R.RB),
                R.rotT = R.rotLT.clone().add(R.rotRT).divideScalar(2),
                R.rotB = R.rotLB.clone().add(R.rotRB).divideScalar(2),
                R.rotL = R.rotLT.clone().add(R.rotLB).divideScalar(2),
                R.rotR = R.rotRT.clone().add(R.rotRB).divideScalar(2),
                R.rotation = C.getRotation(),
                l.gatherConnectInfo(),
                !0
            }
        }
        ,
        Oq.prototype.gatherConnectInfo = function() {
            var o = this
              , R = o.target
              , F = o._interactor
              , n = o.screenInfo
              , W = F.gv;
            if (R instanceof C.Node && F.getStyle("connectGuideVisible")) {
                var i = R.s("connectGuideShift") || F.getStyle("connectGuideShift")
                  , g = R.getAnchor()
                  , u = R.getSize()
                  , D = R.toGlobal({
                    x: u.width * (i[0] - g.x),
                    y: u.height * (i[1] - g.y)
                });
                D = cs.toScreenPosition(W, D),
                n.P1 ? D.add(n.P2.clone().sub(n.P1).setLength(i[2])) : (D.add(n.RT.clone().sub(n.LT).setLength(i[2])),
                D.add(n.LB.clone().sub(n.LT).setLength(i[3]))),
                n.connect = D
            }
        }
        ,
        Oq.prototype.gatherMultiTargets = function(X, B) {
            var r = cs.Group.findOrCreateGroup(B);
            if (!r)
                return !1;
            var P = this;
            return P.editing && "rotate" !== P.editing.mode || r.calcInfo(),
            P.gatherSingleTarget(X, r)
        }
        ,
        Oq.prototype.gatherLine = function(S, G) {
            this.target = G;
            var p = this.screenInfo = {}
              , $ = G.getPoints()
              , C = cs.getDataMatrix(G);
            return p.P1 = cs.toScreenPosition(S, C.apply($.get(0))),
            p.P2 = cs.toScreenPosition(S, C.apply($.get(1))),
            this.gatherConnectInfo(),
            !0
        }
        ,
        Oq.ResizeKeys = ["LT", "RB", "LB", "RT", "L", "R", "B", "T"],
        Oq.ResizeDirection = [{
            x: -1,
            y: -1
        }, {
            x: 1,
            y: 1
        }, {
            x: -1,
            y: 1
        }, {
            x: 1,
            y: -1
        }, {
            x: -1,
            y: 0
        }, {
            x: 1,
            y: 0
        }, {
            x: 0,
            y: 1
        }, {
            x: 0,
            y: -1
        }],
        Oq.RotateKeys = ["rotLT", "rotRB", "rotLB", "rotRT", "rotL", "rotR", "rotB", "rotT"],
        Oq.prototype.check = function(s, n, z) {
            if (C.Default.isLeftButton(n)) {
                var f = this;
                if (f.editing = null,
                f.tipInfo = null,
                f.screenInfo) {
                    var x = f.target
                      , U = s.isEditable(x)
                      , W = f.screenInfo;
                    if (U && W.connect) {
                        var O = f._checkConnect(z);
                        if (O)
                            return O
                    }
                    if (W.P1)
                        return f._checkLine(z);
                    var L, j, w, A = null, c = f._interactor, Q = c.getStyle("checkSize");
                    if (U && s.isRectEditable(x))
                        for (j = 0; j < cs.Rect.ResizeKeys.length; j++)
                            if (w = cs.Rect.ResizeKeys[j],
                            cs.checkHit(z, W[w], Q)) {
                                A = w,
                                L = "resize";
                                break
                            }
                    if (!A && U && s.isRotationEditable(x)) {
                        var V = c.getStyle("rotateCheckSize");
                        for (j = 0; j < cs.Rect.RotateKeys.length; j++)
                            if (w = cs.Rect.RotateKeys[j],
                            cs.checkHit(z, W[w], V)) {
                                A = w,
                                L = "rotate";
                                break
                            }
                    }
                    if (!A)
                        return c.setCursor("default"),
                        void 0;
                    if ("rotate" === L) {
                        var Y, k = s.lp(n);
                        if (x instanceof cs.Group) {
                            var J = c.getStyle("groupRotateModeKey");
                            "string" == typeof J && (J = [J]);
                            for (var p = !1, B = 0, e = J.length; e > B; B++)
                                if (n[J[B]]) {
                                    p = !0;
                                    break
                                }
                            var M = c.getStyle("groupRotateModeDefault");
                            Y = p ? "batch" === M ? "block" : "batch" : M
                        }
                        var D = "batch" === Y ? x.getAnchor2() : x.getPosition()
                          , $ = Math.atan2(k.y - D.y, k.x - D.x);
                        c._setRotateCursor($),
                        f.editing = {
                            mode: L,
                            key: A,
                            pos: D,
                            flipY: x.getScale().y < 0,
                            rotation: x.getRotation(),
                            hitRot: $
                        },
                        Y && (f.editing.groupRotateMode = Y)
                    } else {
                        var r = cs.Rect.ResizeKeys.indexOf(A)
                          , u = cs.Rect.ResizeDirection[r]
                          , K = Math.cos(x.getRotation())
                          , I = Math.sin(x.getRotation())
                          , X = u.x * Math.sign(x.getScale().x)
                          , q = u.y * Math.sign(x.getScale().y)
                          , F = Math.atan2(-I * X - K * q, K * X - I * q)
                          , G = (Math.round(F / (Math.PI / 4)) + 8) % 8
                          , E = ["ew-resize", "nesw-resize", "ns-resize", "nwse-resize", "ew-resize", "nesw-resize", "ns-resize", "nwse-resize"][G];
                        this._interactor.setCursor(E);
                        var h = x.getWidth()
                          , N = x.getHeight()
                          , P = x.getAnchor();
                        f.editing = {
                            mode: L,
                            key: A,
                            rect: {
                                x: -h * P.x,
                                y: -N * P.y,
                                width: h,
                                height: N
                            },
                            anchor: P,
                            matrix: x.getMatrix()
                        }
                    }
                    return A
                }
            }
        }
        ,
        Oq.prototype._checkLine = function(j) {
            var c = this;
            c.screenInfo;
            var l, W = c._interactor.getStyle("checkSize");
            if (cs.checkHit(j, c.screenInfo.P1, W))
                l = "P1";
            else {
                if (!cs.checkHit(j, c.screenInfo.P2, W))
                    return this._interactor.setCursor("default"),
                    void 0;
                l = "P2"
            }
            return c.editing = {
                mode: "line",
                key: l
            },
            l
        }
        ,
        Oq.prototype._checkConnect = function(r) {
            var D = this
              , z = D.screenInfo
              , g = D._interactor
              , l = g.getStyle("connectGuideIntersectSize")
              , V = z.connect
              , q = r.x
              , k = V.x;
            if (k > q && l > k - q && Math.abs(V.y - r.y) < l || q >= k && cs.checkHit(r, V, l)) {
                var w = "connect"
                  , I = j.getConnectAction(g.gv);
                return D.editing = {
                    mode: w
                },
                I && I.delete && I.delete.visible.call(null, g.gv, D.target) && (D.editing.hasDeleteAction = !0),
                g.setCursor("default"),
                w
            }
        }
        ,
        Oq.prototype._fireEditEvent = function(z, h) {
            var T = this._interactor
              , g = this.editing;
            if (g) {
                var D = g.mode;
                D = "rotate" === D ? "Rotation" : "connect" === D ? "Connection" : D[0].toUpperCase() + D.slice(1),
                T.fi({
                    kind: z + "Edit" + D,
                    event: h
                })
            }
        }
        ,
        Oq.prototype.startEdit = function(N, r) {
            N.startDragging(r);
            var s = this;
            s._interactor.fi({
                kind: "prepareEdit",
                event: r
            });
            var W = s.editing
              , g = s.target;
            if (W) {
                if (s._fireEditEvent("begin", r),
                "rotate" === W.mode)
                    return W.groupRotateMode && g.beginRotate(W),
                    void 0;
                if ("connect" !== W.mode)
                    ("line" === W.mode || g && 0 === g.getRotation()) && (s._inSmartGuide = !0,
                    s._interactor.rectGuide.gatherRects());
                else if (W.hasDeleteAction) {
                    var b = N.gv
                      , h = s._interactor.getStyle("connectGuideGarbageShift");
                    W.garbageInfo = {
                        x: b.getWidth() * h[0] + h[2],
                        y: b.getHeight() * h[1] + h[3],
                        size: s._interactor.getStyle("connectGuideGarbageIntersectsize")
                    },
                    N._42()
                }
            }
        }
        ,
        Oq.prototype._46O = function(n) {
            var f, d = this, D = d.editing;
            if (D) {
                if ("connect" === D.mode && !D.canceled && !D.deleted)
                    try {
                        D.garbageInfo && D.garbageInfo.hover ? j.doDeleteConnectionAction(d._interactor.gv, d.target) : j.doConnectAction(d._interactor.gv, d.target, D.target)
                    } catch (w) {
                        console.error(w)
                    }
                f = d.editing.groupRotateMode,
                d._fireEditEvent("end", n),
                d.editing = null
            }
            d.tipInfo = null,
            d._inSmartGuide && (d._interactor.rectGuide.clear(),
            d._inSmartGuide = !1),
            f && d.target && d.target.endRotate()
        }
        ,
        Oq.prototype.handleNormalStateDelete = function() {
            var h = this
              , y = h.editing;
            if (y && "connect" === y.mode && !y.canceled && !y.deleted) {
                if (y.garbageInfo) {
                    try {
                        j.doDeleteConnectionAction(h._interactor.gv, h.target)
                    } catch (N) {
                        console.error(N)
                    }
                    y.garbageInfo = null
                }
                return y.cursorPos = null,
                y.targetCorners = null,
                y.deleted = !0,
                h._interactor._42(),
                !0
            }
        }
        ,
        Oq.prototype.handleNormalStateKeyDown = function(I) {
            var b = this
              , W = b.editing;
            return !W || "connect" !== W.mode || W.canceled || W.deleted ? void 0 : C.Default.isEsc(I) ? (W.cursorPos = null,
            W.targetCorners = null,
            W.canceled = !0,
            b._interactor._42(),
            !0) : void 0
        }
        ,
        Oq.prototype.handleEdit = function(h, u) {
            var A = this
              , k = A.editing;
            if (k) {
                var l, v, S, y, T, g = A.target, d = k.key, t = k.mode, M = h.lp(u), X = A._interactor;
                if ("connect" === t) {
                    if (k.canceled)
                        return;
                    if (k.deleted)
                        return;
                    k.cursorPos = X._getLogicalPoint(u);
                    var P = k.garbageInfo;
                    return P && cs.checkHit(k.cursorPos, P, P.size) ? (P.hover = !0,
                    k.target = null,
                    k.targetCorners = null) : (P && (P.hover = !1),
                    k.target = h.getDataAt(M, function(g) {
                        return h.isSelectable(g) ? xj(g) ? !0 : !1 : !1
                    }) || null,
                    k.targetCorners = cs.getTargetCornersOnScreen(h, k.target)),
                    X._42(),
                    void 0
                }
                if ("rotate" === t) {
                    var U, D, m = k.pos, K = Math.atan2(M.y - m.y, M.x - m.x);
                    if (k.groupRotateMode ? D = K - k.hitRot : (U = K - k.hitRot,
                    D = k.rotation + U),
                    D %= 2 * Math.PI,
                    0 > D && (D += 2 * Math.PI),
                    !C.Default.isCtrlDown(u)) {
                        var G, o;
                        ig(u) ? (G = X.getStyle("shiftRotateRound"),
                        o = G / 2) : (G = X.getStyle("rotateRound"),
                        o = X.getStyle("rotateSensitivity")),
                        D = cs.roundTo(D, G, o)
                    }
                    k.groupRotateMode ? (U = D - (k.lastRotation || 0),
                    0 !== U && (g.addRotation(U, k.groupRotateMode),
                    k.lastRotation = D)) : g.setRotation(D),
                    X._setRotateCursor(K),
                    D > Math.PI && (D -= 2 * Math.PI);
                    var c = 180 * (D / Math.PI);
                    c = c.toFixed(2),
                    l = "" + c + ""
                } else if ("resize" === t) {
                    var r = k.rect;
                    S = r.x,
                    y = r.y;
                    var I, b = r.width, F = r.height, N = k.anchor, w = k.matrix, n = ig(u), B = A._unionPointMode1, O = A._unionPointMode2;
                    if (A._inSmartGuide && !C.Default.isCtrlDown(u) && !n) {
                        var p;
                        "L" === d || "R" === d ? p = "x" : ("T" === d || "B" === d) && (p = "y"),
                        A._adsorbedToClosest(M, p),
                        T = !0
                    }
                    I = w.tfi(M);
                    var V;
                    "LT" === d ? (r = B(I, {
                        x: S + b,
                        y: y + F
                    }, b, F, n),
                    V = 9) : "T" === d ? (r = O({
                        x: S,
                        y: I.y
                    }, {
                        x: S + b,
                        y: y + F
                    }, b, F, n, "v"),
                    V = 1) : "RT" === d ? (r = B(I, {
                        x: S,
                        y: y + F
                    }, b, F, n),
                    V = 33) : "L" === d ? (r = O({
                        x: I.x,
                        y: y
                    }, {
                        x: S + b,
                        y: y + F
                    }, b, F, n, "h"),
                    V = 8) : "R" === d ? (r = O({
                        x: S,
                        y: y
                    }, {
                        x: I.x,
                        y: y + F
                    }, b, F, n, "h"),
                    V = 32) : "LB" === d ? (r = B(I, {
                        x: S + b,
                        y: y
                    }, b, F, n),
                    V = 12) : "B" === d ? (r = O({
                        x: S,
                        y: y
                    }, {
                        x: S + b,
                        y: I.y
                    }, b, F, n, "v"),
                    V = 4) : "RB" === d && (r = B(I, {
                        x: S,
                        y: y
                    }, b, F, n),
                    V = 36);
                    var $ = w.tf(r.x + r.width * N.x, r.y + r.height * N.y);
                    g.setPosition($),
                    g.setSize(r.width, r.height),
                    T && (v = g.getRect(),
                    X.rectGuide.gatherLines({
                        node: g,
                        x: v.x,
                        y: v.y,
                        w: v.width,
                        h: v.height
                    }, p, V)),
                    l = "" + Math.round(r.width) + " * " + Math.round(r.height)
                } else if ("line" === t) {
                    if (ig(u)) {
                        var i = g.getPoints()
                          , Y = "P1" === d ? i.get(1) : i.get(0)
                          , f = {
                            x: M.x - Y.x,
                            y: M.y - Y.y
                        }
                          , s = X.getStyle("shiftLineRotateRound")
                          , J = A._shiftDirList;
                        if (!J || A._shiftRotateRound !== s) {
                            A._shiftRotateRound = s,
                            A._shiftDirList = J = [];
                            for (var R = 0; R < Math.PI; R += s)
                                J.push({
                                    x: E(R),
                                    y: z(R)
                                })
                        }
                        for (var j, Q = 0, H = 0, e = J.length; e > H; H++) {
                            var W = J[H]
                              , _ = W.x * f.x + W.y * f.y;
                            Math.abs(_) > Math.abs(Q) && (Q = _,
                            j = W)
                        }
                        M = {
                            x: Y.x + j.x * Q,
                            y: Y.y + j.y * Q
                        },
                        X.rectGuide.clear()
                    } else
                        A._inSmartGuide && !C.Default.isCtrlDown(u) && (A._adsorbedToClosest(M),
                        T = !0);
                    var q = cs.getDataMatrix(g).applyInverse(M);
                    g.setPoint("P1" === d ? 0 : 1, q, !0);
                    var Z = g.getPoints()
                      , x = Z.get(0)
                      , a = Z.get(1);
                    S = x.x - a.x,
                    y = x.y - a.y,
                    l = " " + Math.round(Math.sqrt(S * S + y * y)) + " ",
                    T && (v = g.getRect(),
                    X.rectGuide.gatherLines({
                        node: g,
                        x: v.x,
                        y: v.y,
                        w: v.width,
                        h: v.height
                    }))
                }
                if (l) {
                    var L = C.Default.getLogicalPoint(u, X._canvas);
                    L.x += cs.Icons.TipShiftX,
                    L.y += cs.Icons.TipShiftY,
                    A.tipInfo = {
                        helperPos: L,
                        text: l,
                        size: l.length
                    }
                }
                A._fireEditEvent("between", u)
            }
        }
        ,
        Oq.prototype._unionPointMode1 = function(Y, s, Q, F, q) {
            if (q && Q && F) {
                var l = Y.x - s.x
                  , M = Y.y - s.y;
                Math.abs(l * F) < Math.abs(M * Q) ? (M = Math.sign(M) * Math.abs(l * F / Q),
                Y.y = s.y + M) : (l = Math.sign(l) * Math.abs(M * Q / F),
                Y.x = s.x + l)
            }
            return C.Default.unionPoint(Y, s)
        }
        ,
        Oq.prototype._unionPointMode2 = function(o, e, Q, p, L, r) {
            var f = C.Default.unionPoint(o, e);
            if (L && Q && p) {
                var v;
                "v" === r ? (v = f.x + f.width / 2,
                f.width = Q * f.height / p,
                f.x = v - f.width / 2) : (v = f.y + f.height / 2,
                f.height = p * f.width / Q,
                f.y = v - f.height / 2)
            }
            return f
        }
        ,
        Oq.prototype._adsorbedToClosest = function(Z, j) {
            var M = this
              , C = M._interactor
              , a = C.rectGuide.findClosest(Z, j)
              , g = C.gridGuide.findClosest(Z, j)
              , h = 1 / 0
              , E = 1 / 0;
            a && (isFinite(a.x) && (h = a.x),
            isFinite(a.y) && (E = a.y)),
            g && (isFinite(g.x) && Math.abs(g.x) < Math.abs(h) && (h = g.x),
            isFinite(g.y) && Math.abs(g.y) < Math.abs(E) && (E = g.y)),
            isFinite(h) && (Z.x += h),
            isFinite(E) && (Z.y += E)
        }
        ,
        Oq.prototype._42 = function(i, B, y) {
            var v = this;
            v.info = {},
            v.screenInfo = null;
            var r = v._interactor;
            if (!r.editDetail && v.gatherInfo(B, y)) {
                var D = v.editing
                  , x = D ? D.groupRotateMode : null
                  , _ = v.screenInfo;
                "block" !== x && (_.P1 ? cs.Icons.DrawIcon(r, i, cs.Icons.Line, _) : cs.Icons.DrawIcon(r, i, cs.Icons.Rect, _),
                _.connect && (cs.Icons.DrawIcon(r, i, cs.Icons.ConnectGuide, {
                    rotation: _.rotation,
                    connect: _.connect,
                    cursorPos: D ? D.cursorPos : null
                }),
                D && (D.targetCorners && cs.Icons.DrawIcon(r, i, cs.Icons.NodeHoverGuide, D.targetCorners),
                D.garbageInfo && cs.Icons.DrawIcon(r, i, cs.Icons.ConnectGuideGarbage, D.garbageInfo))),
                v.tipInfo && cs.Icons.DrawIcon(r, i, cs.Icons.TipHelper, v.tipInfo)),
                v.target instanceof cs.Group && v.target._42(r, i, B)
            }
        }
        ;
        var cl = cs.Anchor = function(T) {
            this.catalog = "Anchor",
            this._interactor = T
        }
        ;
        cl.prototype = {},
        cl.prototype.constructor = cl,
        cl.prototype.gatherInfo = function(L, B) {
            var I = this;
            if (1 === B.length) {
                var V = B[0];
                if (!V.getAnchor)
                    return;
                if (V instanceof C.Shape && V._70I())
                    return;
                if (sk(V, L))
                    return;
                return I.gatherSingleTarget(L, B[0])
            }
            return B.length > 1 ? I.gatherMultiTargets(L, B) : !1
        }
        ,
        cl.prototype.gatherSingleTarget = function(Q, g) {
            var s = this;
            return s.info.POS = g.getPosition(),
            s.screenInfo.POS = cs.toScreenPosition(Q, s.info.POS),
            s.target = g,
            !0
        }
        ,
        cl.prototype.gatherMultiTargets = function(B, R) {
            var n = this
              , M = cs.Group.findOrCreateGroup(R);
            return M ? (n.screenInfo.POS = cs.toScreenPosition(B, M.getAnchor2()),
            n.target = M,
            !0) : !1
        }
        ,
        cl.prototype.isVisible = function() {
            var j = this
              , W = j._interactor;
            if (W.getStyle("anchorVisible") === !1)
                return !1;
            var Z = j.target;
            if (Z) {
                if (this.editing)
                    return !0;
                var R = Z.getAnchor()
                  , F = W.getStyle("anchorOutsideVisibleThreshold");
                if (R.x < -F || R.x > 1 + F || R.y < -F || R.y > 1 + F)
                    return !0;
                var A = Z.getSize()
                  , y = Z.getScale()
                  , g = Math.min(Math.abs(A.width * y.x), Math.abs(A.height * y.y));
                if (g * W.gv._zoom < W.getStyle("anchorHideThreshold"))
                    return !1
            }
            return !0
        }
        ,
        cl.prototype.check = function(a, r, Y) {
            if (C.Default.isLeftButton(r)) {
                var q = this
                  , E = q._interactor;
                if (q.isVisible() && E.getStyle("anchorMovable") !== !1) {
                    q.editing = null,
                    q.tipInfo = null;
                    var P = q.target;
                    if (P && a.isAnchorEditable(P) && a.isEditable(P)) {
                        var c;
                        if (q.screenInfo && (c = q.screenInfo.POS) && cs.checkHit(Y, new cs.Math.Vector2(c), E.getStyle("checkSize"))) {
                            if (P instanceof cs.Group)
                                return q.editing = {},
                                !0;
                            var K = P.getWidth()
                              , U = P.getHeight()
                              , s = P.getAnchor();
                            return q.editing = {
                                rect: {
                                    x: -K * s.x,
                                    y: -U * s.y,
                                    width: K,
                                    height: U
                                },
                                anchor: s,
                                matrix: P.getMatrix()
                            },
                            !0
                        }
                    }
                }
            }
        }
        ,
        cl.prototype.startEdit = function(x, J) {
            x.startDragging(J),
            x.fi({
                kind: "beginEditAnchor",
                event: J
            })
        }
        ,
        cl.prototype._46O = function(p) {
            var B = this;
            B.editing && (B.editing = null,
            B._interactor.fi({
                kind: "endEditAnchor",
                event: p
            })),
            B.tipInfo = null
        }
        ,
        cl.prototype.handleEdit = function(q, v) {
            var A = this
              , R = A.target;
            if (R) {
                var p = A.editing;
                if (p) {
                    var J = q.lp(v)
                      , d = A._interactor;
                    if (R instanceof cs.Group)
                        return R.setAnchor2(J),
                        d._42(),
                        void 0;
                    var e = p.matrix
                      , D = e.tfi(J)
                      , P = p.rect
                      , Y = (D.x - P.x) / P.width
                      , c = (D.y - P.y) / P.height;
                    if (!C.Default.isCtrlDown(v)) {
                        var m = d.getStyle("anchorRound")
                          , S = d.getStyle("anchorSensitivity");
                        Y = cs.roundTo(Y, m, S),
                        c = cs.roundTo(c, m, S)
                    }
                    R.setAnchor(Y, c, !0);
                    var G = C.Default.getLogicalPoint(v, d._canvas);
                    G.x += cs.Icons.TipShiftX,
                    G.y += cs.Icons.TipShiftY;
                    var I = "" + Y.toFixed(2) + ", " + c.toFixed(2);
                    A.tipInfo = {
                        helperPos: G,
                        text: I,
                        size: I.length
                    },
                    d.fi({
                        kind: "betweenEditAnchor",
                        event: v
                    })
                }
            }
        }
        ,
        cl.prototype._42 = function(g, N, r) {
            var A = this;
            A.info = {},
            A.screenInfo = {};
            var G = A._interactor;
            G.editDetail || A.gatherInfo(N, r) && A.isVisible() && (cs.Icons.DrawIcon(G, g, cs.Icons.Anchor, A.screenInfo),
            A.tipInfo && cs.Icons.DrawIcon(G, g, cs.Icons.TipHelper, A.tipInfo))
        }
        ;
        var Tb = cs.Curve = function(Q) {
            this.catalog = "Curve",
            this._interactor = Q
        }
        ;
        Tb.prototype = {},
        Tb.prototype.constructor = Tb,
        m.defineProperties(Tb.prototype, {
            activing: {
                get: function() {
                    return this._activing
                },
                set: function(F) {
                    var y = this;
                    if (F)
                        y._activing = new cs.CurveActiving(this,F);
                    else {
                        var C = y._activing;
                        C && C.dispose(),
                        y._activing = null
                    }
                }
            }
        }),
        Tb.PointType = {
            Mirrored: 0,
            Straight: 1,
            Disconnected: 2,
            Asymmetric: 3
        },
        Tb.prototype.setUp = function() {
            var C = this
              , J = C._interactor;
            J && J.gv.mp(C._onGraphviewPropertyChanged, C)
        }
        ,
        Tb.prototype._onGraphviewPropertyChanged = function(p) {
            ("zoom" === p.property || "translateX" === p.property || "translateY" === p.property) && this._handleDataChanged()
        }
        ,
        Tb.prototype.tearDown = function() {
            var v = this
              , r = v._interactor;
            r && r.gv.ump(v._onGraphviewPropertyChanged, v)
        }
        ,
        Tb.prototype.canEnterEditDetailMode = function() {
            var l = this
              , D = l._interactor
              , w = D._getValidSelection();
            if (1 === w.length) {
                var L = w[0]
                  , z = L instanceof C.Edge;
                if (L instanceof C.Shape || z) {
                    if (z) {
                        var E = L.s("edge.type");
                        if (E && "points" !== E)
                            return
                    }
                    var Y = D.gv;
                    if (Y.isPointEditable(L) && Y.isEditable(L))
                        return l.target = L,
                        !0
                }
            }
        }
        ,
        Tb.prototype.preHandleScroll = function() {
            var D = this.editing;
            return D && D.inEdit ? !0 : void 0
        }
        ,
        Tb.prototype.getCurrentSelectintStatus = function() {
            var o = this;
            if (o.activing && !o.activing.selections) {
                if (o.activing.status != F)
                    return o.activing.status;
                var p = function(Z) {
                    var E = o.activing.status;
                    o.activing.status = Z,
                    o._interactor.fp("shapePointStatus", E, Z)
                }
                  , i = cs.Curve.PointType
                  , T = o.activing.point
                  , M = o.activing.pairs;
                if (!M || 1 !== M.length)
                    return p(i.Mirrored);
                var h = M[0]
                  , j = h.c1 && h.c1.isNearEnough(T)
                  , d = h.c2 && h.c2.isNearEnough(T);
                if (!h.c1 || !h.c2)
                    return j || d ? p(i.Straight) : p(i.Disconnected);
                if (j && d)
                    return p(i.Straight);
                if (j || d)
                    return p(i.Asymmetric);
                var K = h.c1.clone().sub(T)
                  , b = h.c2.clone().sub(T);
                return Math.abs(K.x * b.y - K.y * b.x) > 1e-5 || K.x * b.x > 0 ? p(i.Disconnected) : Math.abs(K.length() - b.length()) > 1e-5 ? p(i.Asymmetric) : p(i.Mirrored)
            }
        }
        ,
        Tb.prototype.handle_keydown = function(M) {
            var v = this;
            if (v._interactor.editDetail) {
                var P = cs.Curve.PointType;
                "1" === M.key ? v._setCurrentSelectionStatus(P.Straight) : "2" === M.key ? v._setCurrentSelectionStatus(P.Mirrored) : "3" === M.key ? v._setCurrentSelectionStatus(P.Disconnected) : "4" === M.key && v._setCurrentSelectionStatus(P.Asymmetric)
            }
        }
        ,
        Tb.prototype.setCurrentSelectionStatus = function(e) {
            var u = this
              , R = u._interactor;
            if (R) {
                var J = R.gv;
                J.dm().beginTransaction(),
                this._setCurrentSelectionStatus(e),
                J.dm().endTransaction()
            }
        }
        ,
        Tb.prototype._setCurrentSelectionStatus = function($) {
            var U = this
              , w = U.activing;
            if (w) {
                var _ = U.getCurrentSelectintStatus();
                if (null !== _ && _ !== $) {
                    w.status = $;
                    var k = U.activing.point
                      , y = U.activing.pairs;
                    if (y && 1 === y.length) {
                        var M = y[0]
                          , H = U.screenInfo.curve
                          , T = cs.Curve.PointType
                          , q = function() {
                            U._writeToHt(),
                            U._interactor.fp("shapePointStatus", _, $)
                        };
                        if ($ === T.Straight)
                            return H.moveCtrlPoint(M, k, "c1"),
                            H.moveCtrlPoint(M, k, "c2"),
                            q(),
                            void 0;
                        if (_ === T.Straight) {
                            var a = H.findPairs(k, !0)
                              , t = a[0]
                              , c = t.r1 || k
                              , G = t.r2 || k
                              , J = G.clone().sub(c).multiplyScalar(.25);
                            return H.moveCtrlPoint(M, k.clone().sub(J), "c1"),
                            H.moveCtrlPoint(M, k.clone().add(J), "c2"),
                            q(),
                            void 0
                        }
                        var N = M.c1
                          , S = M.c2;
                        if (N && S) {
                            if ($ === T.Mirrored)
                                return H.moveCtrlPoint(M, k.clone().multiplyScalar(2).sub(S), "c1"),
                                q(),
                                void 0;
                            if ($ === T.Asymmetric && _ === T.Disconnected) {
                                var v = N.clone().sub(k).length()
                                  , J = k.clone().sub(S).setLength(v).add(k);
                                return H.moveCtrlPoint(M, J, "c1"),
                                q(),
                                void 0
                            }
                        }
                        w._firePointChange(),
                        U._interactor.fp("shapePointStatus", _, $)
                    }
                }
            }
        }
        ,
        Tb.prototype._handleDataChanged = function(Q) {
            var k = this;
            if (k.screenInfo && k.target) {
                var r = k._interactor;
                k.gatherSingleTarget(r.gv, k.target, !0),
                k.check(r.gv, null, Q ? r._getLogicalPoint(Q) : new cs.Math.Vector2(r._lastClientPoint)),
                r._42()
            }
        }
        ,
        Tb.prototype.gatherSingleTarget = function(q, x, F) {
            var v, f, r = this;
            r.screenInfo && r.screenInfo.curve && (f = r.screenInfo.curve._curves);
            var A = r.editing;
            v = A ? r.screenInfo : r.screenInfo = {};
            var D, V, Q = x instanceof C.Edge;
            Q ? (D = x.s("edge.segments"),
            V = x.s("edge.points") || new C.List) : (D = x._58O,
            V = x._59O),
            v.S = D;
            var O, S = v.P = [], Y = cs.getDataMatrix(x);
            if (x instanceof C.Polyline && (O = x.getElevation() || 0,
            v.E = []),
            V.each(function(U) {
                v.E && v.E.push(U.e || O),
                U = Y.apply(U);
                var j = cs.toScreenPosition(q, U);
                S.push(j.x, j.y)
            }),
            Q) {
                var e = cs.toScreenPosition(q, x._lastSourcePoint)
                  , z = cs.toScreenPosition(q, x._lastTargetPoint);
                S.splice(0, 0, e.x, e.y),
                S.push(z.x, z.y)
            }
            if (!v.S || !v.S.size()) {
                v.S = new C.List,
                v.S.add(1);
                for (var h = 0; h < S.length / 2 - 1; h++)
                    v.S.add(2)
            }
            if ((!A || F) && r.convertToCubicBezier(f),
            r.activing && (F || !r.editing || "realPoint" === r.editing.type)) {
                var d = v.curve.findPairs(r.activing.point);
                r.activing.pairs = d
            }
            Q && "points" !== x.s("edge.type") && r._writeToHt()
        }
        ,
        Tb.prototype._convertToNewPoint = function(V, a, w) {
            var n, s, f;
            for (n = 0,
            s = a.length; s > n; n++) {
                if (f = a[n],
                f._p1.isNearEnough(V))
                    return f._p1;
                if (f._p4.isNearEnough(V))
                    return f._p4
            }
            if (w)
                for (n = 0,
                s = Math.min(w.length, s); s > n; n++) {
                    if (f = w[n],
                    f._p1 === V)
                        return a[n]._p1;
                    if (f._p4 === V)
                        return a[n]._p4
                }
        }
        ,
        Tb.prototype.convertToCubicBezier = function(_) {
            var w, E, s = this, A = new cs.Math.Curve, Q = s.screenInfo;
            if (A.createFromHtShape(Q.P, Q.S, Q.E),
            Q.curve = A,
            s.activing) {
                var X = A._curves;
                if (w = s.activing.point,
                E = s._convertToNewPoint(w, X, _),
                E && (s.activing.point = E),
                s.activing.selections) {
                    var T = -1
                      , y = s.activing.selections;
                    y.forEach(function(z) {
                        T++,
                        E = s._convertToNewPoint(z, X, _),
                        E && (y[T] = E)
                    })
                }
            }
        }
        ,
        Tb.prototype.check = function(U, S, k) {
            if (!S || C.Default.isLeftButton(S)) {
                var v = this;
                if (v._interactor.setCursor("default"),
                v.editing = null,
                v.highlight = null,
                v.tipInfo = null,
                v.screenInfo) {
                    if (uc())
                        return v._interactor._42(),
                        !0;
                    if (v._checkEditCtrlPoint(k))
                        return v._interactor._42(),
                        !0;
                    if (v._checkEditRealPoint(k))
                        return v._interactor._42(),
                        !0;
                    if (v._checkEditElevation(k))
                        return v._interactor._42(),
                        !0;
                    var G = v.screenInfo.curve
                      , j = G.checkPoint(k, v._interactor.getStyle("curveIntersectSize"));
                    if (j) {
                        var Y = v.highlight = {};
                        Y.type = "insertKnot",
                        Y.bezier = j.bezier,
                        Y.point = j.intersection
                    }
                    return v._interactor._42(),
                    !0
                }
            }
        }
        ,
        Tb.prototype._checkEditRealPoint = function(x) {
            var u, H, R, O, Z, T, r = this, I = r.screenInfo.curve._curves, w = r._interactor.getStyle("curvePointIntersectSize"), n = 1 / 0;
            for (w *= w,
            R = 0,
            O = I.length; O > R; R++)
                u = I[R],
                Z = u._p1,
                T = x.distanceToSquared(Z),
                n > T && (n = T,
                H = Z),
                Z = u._p4,
                T = x.distanceToSquared(Z),
                n > T && (n = T,
                H = Z);
            if (n > w)
                return !1;
            var $ = r.highlight = {};
            return $.type = "changeRealPoint",
            $.point = H,
            r.editing = {
                type: "realPoint",
                point: H,
                shiftGuide: {
                    point: H.clone(),
                    dir: "x",
                    limit: 0
                }
            },
            r._interactor.setCursor("crosshair"),
            !0
        }
        ,
        Tb.prototype._checkEditElevation = function(A) {
            var U = this;
            if (!U._interactor.getStyle("curveElevationVisible"))
                return !1;
            var I = U.activing;
            if (!I)
                return !1;
            var M = I.getCurrentEditingPoint();
            if (!M)
                return !1;
            var T = U._interactor
              , s = T.getStyle("curveElevationGuideShift")
              , g = T.getStyle("curveElevationIntersectSize")
              , m = A.distanceToSquared({
                x: M.x + s[0],
                y: M.y + s[1]
            });
            if (!(m > g * g)) {
                var Y = U.highlight = {};
                Y.type = "elevation";
                var K = new cs.Math.Vector2(A.x,A.y,M.e);
                return U.editing = {
                    type: "elevation",
                    startPoint: K
                },
                U._interactor.setCursor("crosshair"),
                !0
            }
        }
        ,
        Tb.prototype._checkEditCtrlPoint = function(v) {
            var j = this;
            if (j.activing && !j.activing.selections) {
                var E = j.getCurrentSelectintStatus();
                if (E !== cs.Curve.PointType.Straight) {
                    var M = j.activing.pairs;
                    if (M) {
                        var b = j._interactor.getStyle("curvePointIntersectSize");
                        b *= b;
                        var x, c, Q, O, U, N, o, V, z, e = 1 / 0;
                        for (o = 0,
                        z = M.length; z > o; o++)
                            for (O = M[o],
                            V = 0; 2 > V; V++)
                                U = 0 === V ? "c1" : "c2",
                                O[U] && (N = v.distanceToSquared(O[U]),
                                e > N && (e = N,
                                x = O,
                                c = o,
                                Q = U));
                        if (e > b)
                            return !1;
                        j.activing.hlpair = x,
                        j.activing.hltype = Q;
                        var t = j.highlight = {};
                        return t.type = "changeCtrlPoint",
                        t.point = x[Q],
                        j.editing = {
                            type: "ctrlPoint",
                            pair: x,
                            pairId: c,
                            ctrlType: Q,
                            direction: x[Q].clone().sub(j.activing.point).normalize()
                        },
                        j._interactor.setCursor("crosshair"),
                        !0
                    }
                }
            }
        }
        ,
        Tb.prototype.startEdit = function(r, p) {
            r.startDragging(p);
            var L = this;
            L.highlight && "insertKnot" === L.highlight.type && (L.insertKnot(),
            L.gatherSingleTarget(L._interactor.gv, L.target),
            L.activing = null,
            L._checkEditRealPoint(L._interactor._getLogicalPoint(p)));
            var A = L._activing;
            if (A) {
                var n = L.editing ? L.editing.type : null;
                "ctrlPoint" === n ? A.editingCtrl = {
                    pairId: L.editing.pairId,
                    type: A.hltype
                } : "realPoint" === n && (A.editingCtrl = !1)
            }
            var h = L.highlight
              , Y = C.Default.isCtrlDown(p);
            if (!h || uc()) {
                var e = L._interactor.gv;
                if (!e.setFocus(p) || e._scrolling)
                    return;
                return e.isPannable() && _e(p) && !Y && (L._pan = {
                    tx: e.tx(),
                    ty: e.ty()
                },
                r.fi({
                    kind: "beginPan",
                    event: p
                })),
                void 0
            }
            if ("changeRealPoint" === h.type) {
                var D, w = L.activing ? L.activing.point : null, l = L.activing ? L.activing.selections : null;
                if (Y && L.activing)
                    w === h.point ? (l ? (L.activing = {
                        point: l[0]
                    },
                    l.length > 1 && (l.splice(0, 1),
                    L.activing.selections = l)) : L.activing = null,
                    L.editing = null) : l && (D = l.indexOf(h.point)) >= 0 ? (l.length > 1 ? l.splice(D, 1) : delete L.activing.selections,
                    L.editing = null) : l ? (l.push(w),
                    L.activing = {
                        point: h.point,
                        selections: l
                    }) : L.activing = {
                        point: h.point,
                        selections: [w]
                    };
                else if (l)
                    w === h.point || ((D = l.indexOf(h.point)) >= 0 ? (l.splice(D, 1, w),
                    L.activing = {
                        point: h.point,
                        selections: l
                    }) : L.activing = {
                        point: h.point
                    });
                else {
                    var y;
                    w === h.point && (y = L.activing.status),
                    L.activing = {
                        point: h.point
                    },
                    y && (L.activing.status = y)
                }
                r.fi({
                    kind: "beginEditPoint",
                    event: p
                })
            }
        }
        ,
        Tb.prototype.insertKnot = function() {
            var q = this
              , r = q.highlight
              , k = q.screenInfo.curve;
            k.insertKnot(r.bezier, r.point.t),
            q._writeToHt()
        }
        ,
        Tb.prototype._writeToHt = function() {
            var L, x, Q, G, X = this, U = X.screenInfo.curve, T = U.toHtShape(), Z = T.points, M = [], q = T.segments, Y = X._interactor.gv, H = X.target, i = H instanceof C.Edge, P = cs.getDataMatrix(H).invert();
            G = H instanceof C.Polyline,
            G && (Q = H.getElevation());
            for (var t = 0, j = Z.length; j > t; t++)
                L = Z[t],
                x = cs.toWorldPosition(Y, L),
                x = P.apply(x),
                L.e != F && L.e !== Q && (x.e = L.e),
                M.push(x);
            if (H._writing = !0,
            i) {
                H.s("edge.type", "points"),
                H.setStyle("edge.segments", q),
                H.setStyle("edge.points", M.slice(1, M.length - 1)),
                H.setStyle("edge.source.offset.x", 0),
                H.setStyle("edge.source.offset.y", 0),
                H.setStyle("edge.target.offset.x", 0),
                H.setStyle("edge.target.offset.y", 0);
                var O = X._nextChangeEdgeHost;
                delete X._nextChangeEdgeHost,
                O && ("source" === O.type ? H.setSource(O.host) : H.setTarget(O.host)),
                X._writeEdgeHostAnchor("source", M[0]),
                X._writeEdgeHostAnchor("target", M[M.length - 1])
            } else
                M.length ? (H.setSegments(q),
                H.setPoints(M, !0)) : H.removeFromDataModel();
            delete H._writing
        }
        ,
        Tb.prototype._writeEdgeHostAnchor = function(W, z) {
            var y = this
              , N = y.target
              , _ = y._calcHostAnchor(N, W, z);
            N.s("edge." + W + ".anchor.x", _.x),
            N.s("edge." + W + ".anchor.y", _.y)
        }
        ,
        Tb.prototype._calcHostAnchor = function(V, E, U, l) {
            l || (l = "source" === E ? V.getSource() : V.getTarget());
            var s = l.getRotation()
              , c = l.getAnchor()
              , N = this._interactor.gv;
            if (sk(l, N) && (s = 0),
            s) {
                var m = l.getMatrix()
                  , z = m.tfi(U)
                  , Z = l.getSize();
                return {
                    x: z.x / Z.width + c.x,
                    y: z.y / Z.height + c.y
                }
            }
            var n = ps(N, l)
              , B = {
                x: (U.x - n.x) / n.width,
                y: (U.y - n.y) / n.height
            };
            return B
        }
        ,
        Tb.prototype._handlePanning = function(Y) {
            var a = this
              , S = a._pan;
            if (S) {
                S.started = !0;
                var I = a._interactor
                  , L = I.gv
                  , T = I._lastClientPoint
                  , $ = Qn(Y);
                L.setTranslate(S.tx + $.x - T.x, S.ty + $.y - T.y),
                a.gatherSingleTarget(I.gv, a.target),
                I._42(),
                I.fi({
                    kind: "betweenPan",
                    event: Y
                })
            }
        }
        ,
        Tb.prototype.handleEdit = function(K, d) {
            var A = this
              , r = A.editing;
            if (A._pan)
                return A._handlePanning(d),
                void 0;
            if (r) {
                r.inEdit = !0;
                var I, $, B, j = A._interactor._getLogicalPoint(d), z = C.Default.isCtrlDown(d), v = C.Default.isShiftDown(d), n = r.type, s = A.activing;
                if (A._guideInfo = null,
                "ctrlPoint" === n && v) {
                    var H = A.editing.direction.clone();
                    I = s.point;
                    var g = H.dot(j.clone().sub(I));
                    j = H.setLength(g).add(I)
                } else if ("ctrlPoint" === n || "realPoint" === n) {
                    var H;
                    if ("realPoint" === n && v) {
                        var k = A.editing.shiftGuide;
                        $ = k.point;
                        var x = Math.abs(j.x - $.x)
                          , D = Math.abs(j.y - $.y);
                        x > D && x > k.limit && "y" === k.dir && (k.dir = "x"),
                        D > x && D > k.limit && "x" === k.dir && (k.dir = "y"),
                        H = k.dir,
                        "x" === H ? (j.y = $.y,
                        k.limit = Math.max(k.limit, x)) : "y" === H && (j.x = $.x,
                        k.limit = Math.max(k.limit, D))
                    }
                    var V = A._isEditEdgeSourceTarget();
                    if (V) {
                        var N = A._editEdgeSourceTarget(V, j, z);
                        N && (B = N.tipText)
                    } else if (!z) {
                        var y = A._guidingToEdit(j, H)
                          , R = "realPoint" === n ? A._interactor.gridGuide.findClosest(j, H, !0) : null
                          , i = 1 / 0
                          , c = 1 / 0;
                        R && (R.x && (i = R.x),
                        R.y && (c = R.y));
                        var b = !1;
                        y && (y.xList && (Math.abs(y.x) <= Math.abs(i) ? (b = !0,
                        i = y.x) : delete y.xList),
                        y.yList && (Math.abs(y.y) <= Math.abs(c) ? (b = !0,
                        c = y.y) : delete y.yList),
                        b && (A._guideInfo = y)),
                        isFinite(i) && (j.x += i),
                        isFinite(c) && (j.y += c),
                        b && (y.v = j)
                    }
                }
                var L = A.screenInfo.curve;
                if ("realPoint" === r.type) {
                    I = r.point,
                    I.e !== F && (j.e = I.e),
                    L.moveRealPoint(I, j),
                    r.point = j,
                    A.highlight.point = j;
                    var M = s.status
                      , e = s.selections;
                    if (A.activing = {
                        point: j,
                        status: M
                    },
                    e) {
                        var Q = j.clone().sub(I)
                          , u = 0;
                        e.forEach(function(g) {
                            var z = g.clone().add(Q);
                            L.moveRealPoint(g, z),
                            e[u++] = z
                        }),
                        A.activing.selections = e
                    }
                } else if ("ctrlPoint" === r.type) {
                    var P = s.pairs
                      , S = P[r.pairId];
                    L.moveCtrlPoint(S, j, r.ctrlType);
                    var O = s.status
                      , T = cs.Curve.PointType;
                    if ((O === T.Mirrored || O === T.Asymmetric) && S.c1 && S.c2) {
                        var I = new cs.Math.Vector2(s.point)
                          , Y = "c1" === r.ctrlType ? "c2" : "c1";
                        if (O === cs.Curve.PointType.Mirrored)
                            L.moveCtrlPoint(S, I.clone().multiplyScalar(2).sub(j), Y);
                        else if (O === T.Asymmetric) {
                            var g = S[Y].clone().sub(I).length()
                              , U = I.clone().sub(S[r.ctrlType]).setLength(g).add(I);
                            isNaN(U.x) || L.moveCtrlPoint(S, U, Y)
                        }
                    }
                    s._firePointChange()
                } else if ("elevation" === r.type) {
                    $ = r.startPoint;
                    var h = $.e + ($.y - j.y) / K._zoom;
                    A._setCurrentPointImpl("e", h),
                    s._firePointChange(),
                    B = "E: " + cs.toFixed(h)
                }
                var m = C.Default.getLogicalPoint(d, A._interactor._canvas);
                if (m.x += cs.Icons.TipShiftX,
                m.y += cs.Icons.TipShiftY,
                !B) {
                    var t = cs.toWorldPosition(K, j);
                    B = "" + cs.toFixed(t.x) + ", " + cs.toFixed(t.y)
                }
                A.tipInfo = {
                    helperPos: m,
                    text: B,
                    size: B.length
                },
                A._writeToHt(),
                A._interactor.fi({
                    kind: "betweenEditPoint",
                    event: d
                })
            }
        }
        ,
        Tb.prototype._setCurrentPointImpl = function(V, T) {
            var w = this
              , L = w._activing;
            if (!L)
                return !1;
            var j = w.target;
            if (!j)
                return !1;
            var t = L.getCurrentEditingPoint();
            if (!t)
                return !1;
            var n = L.editingCtrl;
            if (!n)
                var O = t.clone();
            if ("e" === V)
                t.e = T;
            else {
                var v;
                if ("x" === V || "y" === V) {
                    var B = L._lastFirePoint;
                    v = "x" === V ? {
                        x: T,
                        y: B ? B.y : 0
                    } : {
                        x: B ? B.x : 0,
                        y: T
                    }
                } else
                    "object" == typeof V ? (v = V,
                    V.e !== F && (t.e = V.e)) : (v = {
                        x: arguments[0],
                        y: arguments[1]
                    },
                    arguments[2] !== F && (t.e = arguments[2]));
                var N = cs.getDataMatrix(j);
                v = cs.toScreenPosition(w._interactor.gv, N.apply(v)),
                t.x = v.x,
                t.y = v.y
            }
            if (!n) {
                var o = O.multiplyScalar(-1).add(t);
                t.e && O.e && (o.e = t.e - O.e),
                w.screenInfo.curve.moveCtrlDueToRealPointMovement(t, o)
            }
            return !0
        }
        ,
        Tb.prototype.setCurrentPoint = function(a, n) {
            return this._setCurrentPointImpl(a, n) ? (this._writeToHt(),
            !0) : !1
        }
        ,
        Tb.prototype._isEditEdgeSourceTarget = function() {
            var D = this
              , g = D.target;
            if (!(g instanceof C.Edge))
                return !1;
            var Q = D.editing.point
              , A = D.screenInfo.curve._curves;
            return Q === A[0]._p1 ? "source" : Q === A[A.length - 1]._p4 ? "target" : !1
        }
        ,
        Tb.prototype._editEdgeSourceTarget = function(R, I, a) {
            var m, A = this, X = A.target;
            if (m = "source" === R ? X.getSource() : X.getTarget()) {
                var n = A._interactor.gv
                  , C = cs.toWorldPosition(n, I)
                  , l = A._calcHostAnchor(X, R, C, m);
                if (!a) {
                    var u = A._interactor.getStyle("anchorRound")
                      , E = A._interactor.getStyle("anchorSensitivity");
                    l.x = cs.roundTo(l.x, u, E),
                    l.y = cs.roundTo(l.y, u, E)
                }
                if (A._interactor.getStyle("edgeHostDetectPerFrame") || l.x < 0 || l.x > 1 || l.y < 0 || l.y > 1) {
                    var x = n.getDataAt(C, function(p) {
                        return n.isSelectable(p) ? xj(p) ? !0 : !1 : !1
                    });
                    if (x) {
                        var d = A._calcHostAnchor(X, R, C, x);
                        m = x,
                        A._nextChangeEdgeHost = {
                            type: R,
                            host: x
                        },
                        l = d,
                        a || (l.x = cs.roundTo(l.x, u, E),
                        l.y = cs.roundTo(l.y, u, E))
                    }
                }
                if (!a) {
                    var V = xp(n, m, 0, 0, 0, l.x, l.y)
                      , e = cs.toScreenPosition(n, V);
                    I.x = e.x,
                    I.y = e.y
                }
                return A._edgeHostGuideInfo = cs.getTargetCornersOnScreen(n, m),
                {
                    host: m,
                    anchor: l,
                    tipText: "" + l.x.toFixed(2) + ", " + l.y.toFixed(2)
                }
            }
        }
        ,
        Tb.prototype._guidingToEdit = function(V, g) {
            var y, T, $ = this;
            if (y = $.screenInfo.curve) {
                T = y._curves;
                var l, X, j, b, s, t, D, E, k = 1 / 0, w = 1 / 0, L = [];
                for ($.editing && "realPoint" === $.editing.type && (E = $.editing.point),
                s = 0,
                t = 2 * T.length; t > s; s++)
                    D = T[Math.floor(s / 2)][s % 2 ? "_p4" : "_p1"],
                    L.indexOf(D) >= 0 || (L.push(D),
                    E && E === D || (j = D.x - V.x,
                    b = D.y - V.y,
                    Math.abs(j) < Math.abs(k) ? (k = j,
                    l = [D]) : j === k && l.push(D),
                    Math.abs(b) < Math.abs(w) ? (w = b,
                    X = [D]) : b === w && X.push(D)));
                var v = $._interactor.getStyle("smartGuideSensitivity");
                if ((Math.abs(k) > v || "y" === g) && (l = null),
                (Math.abs(w) > v || "x" === g) && (X = null),
                l || X) {
                    var K = !1
                      , I = {};
                    if (l && (K = !0,
                    I.xList = l,
                    I.x = k),
                    X && (K = !0,
                    I.yList = X,
                    I.y = w),
                    K)
                        return I
                }
            }
        }
        ,
        Tb.prototype._46O = function(w) {
            var N = this;
            N.editing && (N.editing = null,
            N._interactor.fi({
                kind: "endEditPoint",
                event: w
            })),
            N._guideInfo = null,
            N._edgeHostGuideInfo = null,
            N._pan && (N._pan = null,
            N._interactor.fi({
                kind: "endPan",
                event: w
            })),
            N.tipInfo = null
        }
        ,
        Tb.prototype._canDeletePoint = function(E, B) {
            var O = this.target;
            if (!(O instanceof C.Edge))
                return !0;
            var D = E._curves[0]
              , d = E._curves[E._curves.length - 1];
            return D._p1 === B || d._p4 === B ? !1 : !0
        }
        ,
        Tb.prototype.handleDelete = function() {
            var R = this;
            if (R.activing && R.screenInfo) {
                var M = C.Default.isShiftDown()
                  , $ = R.screenInfo.curve;
                R._canDeletePoint($, R.activing.point) && $.deleteRealPoint(R.activing.point, M),
                R.activing.selections && R.activing.selections.forEach(function(z) {
                    R._canDeletePoint($, z) && $.deleteRealPoint(z, M)
                }),
                R.activing = null,
                delete R.editing,
                delete R.tipInfo,
                delete R._pan,
                R._writeToHt(),
                R._interactor.fp("deleteShapePoint", !1, !0)
            }
        }
        ,
        Tb.prototype.handleDoubleClick = function(l) {
            var t = this
              , z = t._interactor._getLogicalPoint(l);
            if (t.screenInfo && t._checkEditRealPoint(z)) {
                var k = t.getCurrentSelectintStatus()
                  , c = cs.Curve.PointType;
                return k = k === c.Mirrored ? c.Straight : c.Mirrored,
                t._setCurrentSelectionStatus(k),
                t._interactor._42(),
                !0
            }
        }
        ,
        Tb.prototype._drawHighlight = function(R) {
            var S = this
              , v = S.highlight;
            if (v) {
                var t = v.bezier
                  , o = S._interactor;
                t && cs.Icons.DrawIcon(o, R, cs.Icons.ShapeHighlightCurve, [t._p1.x, t._p1.y, t._p2.x, t._p2.y, t._p3.x, t._p3.y, t._p4.x, t._p4.y]);
                var U = v.point;
                U && "insertKnot" === v.type && cs.Icons.DrawIcon(o, R, cs.Icons.ShapeHighlighPoint, U)
            }
        }
        ,
        Tb.prototype._drawGuide = function(p) {
            var n = this
              , w = n._guideInfo;
            if (w) {
                var I, l, u, X, a = w.v;
                for (I = 0; 2 > I; I++)
                    if (X = 0 === I ? w.xList : w.yList)
                        for (l = 0,
                        u = X.length; u > l; l++)
                            cs.Icons.DrawIcon(n._interactor, p, cs.Icons.ShapeGuideLine, [a.x, a.y, X[l].x, X[l].y])
            }
        }
        ,
        Tb.prototype._drawCurrentPoint = function(M) {
            var O = this;
            if (O.activing) {
                var x = O.activing
                  , Q = O.getCurrentSelectintStatus()
                  , z = O._interactor;
                if (Q !== cs.Curve.PointType.Straight) {
                    var e = x.pairs;
                    x.hlpair,
                    x.hltype;
                    var R = x.selections
                      , T = x.editingCtrl;
                    if (e && !R) {
                        var t, c, g;
                        for (c = 0,
                        g = e.length; g > c; c++)
                            t = e[c],
                            T && c === T.pairId && t[T.type] ? cs.Icons.DrawIcon(z, M, cs.Icons.ShapeActivingCtrl, {
                                point: t.point,
                                c1: t.c1,
                                c2: t.c2,
                                hl: T.type
                            }) : cs.Icons.DrawIcon(z, M, cs.Icons.ShapeActivingCtrl, t)
                    }
                }
                cs.Icons.DrawIcon(z, M, cs.Icons.ShapeHighlighRealPoint, O.activing.point),
                R && R.forEach(function(W) {
                    cs.Icons.DrawIcon(z, M, cs.Icons.ShapeHighlighRealPoint, W)
                })
            }
        }
        ,
        Tb.prototype.clear = function() {
            var g = this;
            g.editing = null,
            g._guideInfo = null,
            g.activing = null,
            g.highlight = null
        }
        ,
        Tb.prototype._42 = function(g) {
            var d = this;
            d.info = {},
            d.editing || (d.screenInfo = null);
            var P = d._interactor;
            if (!P.editDetail)
                return d.clear(),
                void 0;
            if (!d.target || !d._interactor.gv.isSelected(d.target) || !d._interactor.gv.isVisible(d.target))
                return P.editDetail = !1,
                d.clear(),
                void 0;
            if (d.gatherSingleTarget(P.gv, d.target),
            cs.Icons.DrawIcon(P, g, cs.Icons.ShapeBgCurve, d.screenInfo),
            d._drawHighlight(g),
            d._drawCurrentPoint(g),
            d._getRealPoint().forEach(function(S) {
                cs.Icons.DrawIcon(P, g, cs.Icons.ShapePoint, S)
            }),
            d._drawGuide(g),
            d.tipInfo && cs.Icons.DrawIcon(P, g, cs.Icons.TipHelper, d.tipInfo),
            d._edgeHostGuideInfo && cs.Icons.DrawIcon(P, g, cs.Icons.NodeHoverGuide, d._edgeHostGuideInfo),
            d._interactor.getStyle("curveElevationVisible") && d.target instanceof C.Polyline && d.activing) {
                var u = d.activing.getCurrentEditingPoint();
                u && cs.Icons.DrawIcon(P, g, cs.Icons.EdgeElevationGuide, u)
            }
        }
        ,
        Tb.prototype._getRealPoint = function() {
            var A = this.screenInfo
              , t = A.P
              , W = A.S
              , Y = -1
              , v = [];
            return W.each(function(i) {
                var g = 1;
                if (3 === i)
                    g = 2;
                else if (4 === i)
                    g = 3;
                else if (5 === i)
                    return;
                Y += g,
                v.push({
                    x: t[2 * Y],
                    y: t[2 * Y + 1]
                })
            }),
            v
        }
        ;
        var dc = cs.MoveHelper = function(Q) {
            var D = this;
            D.catalog = "Move",
            D._interactor = Q
        }
        ;
        dc.prototype = {},
        dc.prototype.constructor = dc,
        dc.prototype.calcShift = function(A, B, K) {
            var u, Q, R = this, n = R._interactor.gv, p = n.lp(B);
            if ("beginMove" === A && R._gatherGridInfo(K._lastLogicalPoint || p),
            u = R._target) {
                var m = u.downPosition;
                if (m) {
                    var G = R._interactor.getStyle("moveSensitivity") / n._zoom;
                    if (m.distanceTo(p) < G)
                        return {
                            x: 0,
                            y: 0
                        };
                    delete u.downPosition
                }
                var V;
                Q = C.Default.isShiftDown(B),
                Q && (p = R._dealShiftDown(p),
                V = u.shiftGuide.dir);
                var P, D = u.rawPos = {
                    x: u.pos.x + p.x - u.lp.x,
                    y: u.pos.y + p.y - u.lp.y
                };
                if (C.Default.isCtrlDown(B)) {
                    if (P = R._calcShiftByAddon(),
                    R._target.node instanceof cs.Group) {
                        var S = R._target.node;
                        S._position.x += P.x,
                        S._position.y += P.y
                    }
                    return P
                }
                for (var s, I = u.x + D.x, e = u.y + D.y, w = {
                    x: I,
                    y: e
                }, H = {
                    x: I + u.w / 2,
                    y: e + u.h / 2
                }, t = {
                    x: I + u.w,
                    y: e + u.h
                }, L = R._interactor.rectGuide, z = R._interactor.gridGuide, O = [L.findClosest(w, V), L.findClosest(H, V), L.findClosest(t, V), z.findClosest(w, V), z.findClosest(H, V), z.findClosest(t, V)], M = 1 / 0, W = 1 / 0, N = 0, r = O.length; r > N; N++)
                    s = O[N],
                    s && (I = s.x,
                    e = s.y,
                    isFinite(I) && Math.abs(I) < Math.abs(M) && (M = I),
                    isFinite(e) && Math.abs(e) < Math.abs(W) && (W = e));
                if (isFinite(M) || (M = 0),
                isFinite(W) || (W = 0),
                P = R._calcShiftByAddon(M, W),
                R._target.node instanceof cs.Group) {
                    var S = R._target.node;
                    S._position.x += P.x,
                    S._position.y += P.y
                }
                var U = u.node;
                if (!sk(U, n)) {
                    var f = D.x + M
                      , x = D.y + W;
                    R._interactor.rectGuide.gatherLines({
                        node: U,
                        x: u.x + f,
                        y: u.y + x,
                        w: u.w,
                        h: u.h
                    }, V)
                }
                return P
            }
        }
        ,
        dc.prototype._calcShiftByAddon = function(U, x) {
            var H = this._target
              , P = H.rawPos
              , s = H.node.getPosition();
            return U = U || 0,
            x = x || 0,
            {
                x: P.x - s.x + U,
                y: P.y - s.y + x
            }
        }
        ,
        dc.prototype._dealShiftDown = function(J) {
            var Z = this
              , N = Z._target.shiftGuide
              , S = Z._target.lp
              , B = Math.abs(J.x - S.x)
              , R = Math.abs(J.y - S.y);
            B > R && B > N.limit && "y" === N.dir && (N.dir = "x"),
            R > B && R > N.limit && "x" === N.dir && (N.dir = "y");
            var T = N.dir;
            return "x" === T ? (J.y = S.y,
            N.limit = Math.max(N.limit, B)) : "y" === T && (J.x = S.x,
            N.limit = Math.max(N.limit, R)),
            J
        }
        ,
        dc.prototype._gatherGridInfo = function(l) {
            var v, d = this, Z = d._interactor, e = Z._getValidSelection();
            if (1 === e.length) {
                if (v = e[0],
                !v.getRect)
                    return d._target = null,
                    void 0
            } else if (v = cs.Group.findOrCreateGroup(e),
            !v)
                return d._target = null,
                void 0;
            var D = v.getPosition()
              , t = v.getRect();
            d._target = {
                node: v,
                x: t.x - D.x,
                y: t.y - D.y,
                w: t.width,
                h: t.height,
                lp: {
                    x: l.x,
                    y: l.y
                },
                pos: {
                    x: D.x,
                    y: D.y
                },
                shiftGuide: {
                    dir: "x",
                    limit: 0
                },
                downPosition: new cs.Math.Vector2(l)
            },
            Z.rectGuide.gatherRects()
        }
        ,
        dc.prototype.clear = function() {
            var i = this;
            i._interactor.rectGuide.clear(),
            i._interactor._42()
        }
        ;
        var Lm = "directional"
          , ns = "point"
          , ld = "spot"
          , ls = "light.color"
          , Qk = function(r, g) {
            xe(g) && oo.test(g) ? Rp(r, g) : Ag(g) && g.modelType ? Mq(r, g) : Mn[r] = g
        }
          , ki = function(t) {
            if (Ag(t))
                return t;
            var Y = Mn[t];
            return t && Y === F && oo.test(t) && (Oc && Oc[t] || Rp(t, t)),
            Y
        };
        lk(j, {
            graph3dViewAttributes: V,
            graph3dViewFirstPersonMode: !1,
            graph3dViewMouseRoamable: !0,
            graph3dViewMoveStep: 15,
            graph3dViewRotateStep: L / 60,
            graph3dViewEditHelperDisabled: !1,
            graph3dViewPannable: !0,
            graph3dViewRotatable: !0,
            graph3dViewWalkable: !0,
            graph3dViewResettable: !0,
            graph3dViewZoomable: !0,
            graph3dViewRectSelectable: !0,
            graph3dViewRectSelectBackground: xm,
            graph3dViewGridVisible: !1,
            graph3dViewGridSize: 50,
            graph3dViewGridGap: 50,
            graph3dViewGridColor: [.4, .75, .85, 1],
            graph3dViewOriginAxisVisible: !1,
            graph3dViewCenterAxisVisible: !1,
            graph3dViewAxisXColor: [1, 0, 0, 1],
            graph3dViewAxisYColor: [0, 1, 0, 1],
            graph3dViewAxisZColor: [0, 0, 1, 1],
            graph3dViewEditSizeColor: [1, 1, 0, 1],
            graph3dViewOrtho: !1,
            graph3dViewOrthoWidth: 2e3,
            graph3dViewFovy: L / 4,
            graph3dViewNear: 10,
            graph3dViewFar: 1e4,
            graph3dViewEye: [0, 300, 1e3],
            graph3dViewCenter: [0, 0, 0],
            graph3dViewUp: [0, 1, -1e-7],
            graph3dViewHeadlightRange: 0,
            graph3dViewHeadlightColor: [1, 1, 1, 1],
            graph3dViewHeadlightIntensity: 1,
            graph3dViewHeadlightDisabled: !1,
            graph3dViewFogDisabled: !0,
            graph3dViewFogColor: "white",
            graph3dViewFogNear: 1,
            graph3dViewFogFar: 2e3,
            graph3dViewDashDisabled: !0,
            graph3dViewBatchBlendDisabled: !0,
            graph3dViewBatchBrightnessDisabled: !0,
            graph3dViewBatchColorDisabled: !1,
            setShape3dModel: Qk,
            getShape3dModel: ki,
            createMatrix: function(t, Y) {
                _b(t) || (t = [t]);
                for (var k = t.length - 1; k >= 0; k--) {
                    var W = t[k];
                    Y = Nm(W.mat, W.s3, W.r3, W.rotationMode, W.t3, Y)
                }
                return Y
            },
            transformVec: function(h, J) {
                return Nj(h, J)
            },
            createBoxModel: function() {
                return {
                    vs: An,
                    ns: ol,
                    uv: hj,
                    is: kn
                }
            },
            createRoundRectModel: function(X, K) {
                return yn.roundRect(X, K)
            },
            createStarModel: function(k, g) {
                return yn.star(k, g)
            },
            createRectModel: function(Q, v) {
                return yn.rect(Q, v)
            },
            createTriangleModel: function(Y, l) {
                return yn.triangle(Y, l)
            },
            createRightTriangleModel: function(q, R) {
                return yn.rightTriangle(q, R)
            },
            createParallelogramModel: function(W, J) {
                return yn.parallelogram(W, J)
            },
            createTrapezoidModel: function(X, k) {
                return yn.trapezoid(X, k)
            },
            createSmoothSphereModel: function(q, R, x, i, T, H, E) {
                return Sf(new Yd(q,R,x,i,T,H,E))
            },
            createSphereModel: function(X, M, p, E, h, Z) {
                return X ? we(X, M, p, E, h, Z) : j.createSmoothSphereModel()
            },
            createSmoothConeModel: function(n, j, Q, u, k) {
                return dj(n, j, Q, u, k)
            },
            createConeModel: function(K, G, D, F, A, s) {
                return K ? yf(K, G, D, F, A, s) : dj(s)
            },
            createSmoothCylinderModel: function(O, C, K, L, d, e, W, i) {
                return Sf(new rs(O,C,K,L,d,e,W,i))
            },
            createCylinderModel: function(Y, n, S, p, F, y, z) {
                return Y ? Id(Y, n, S, p, F, y, z) : Dh(y, z)
            },
            createSmoothTorusModel: function(z, K, U, y, l, j) {
                return Sf(new Tn(z,K,U,y,l,j))
            },
            createTorusModel: function(C, V, v, X, x, $, l) {
                return C ? zi(C, V, v, X, x, $, l) : zh($, l)
            },
            createExtrusionModel: function(b, q, P, M, s, V, B, $) {
                return hh(b, q, P, M, s, V, B, $)
            },
            createSmoothRingModel: function(M, s, e, f, h, S) {
                for (var Z = [], B = 0; B < M.length - 1; B += 2)
                    Z.push({
                        x: M[B],
                        y: M[B + 1]
                    });
                for (M = Gm(Z, s, e)[0],
                Z = [],
                B = 0; B < M.length; B++) {
                    var y = M[B];
                    Z.push(new Bq(y.x,0,y.y))
                }
                return Sf(new mr(Z,S,f,h))
            },
            createTextGeometry: function(z, x) {
                return Sf(new iq(z,x))
            },
            loadFontFace: function(R, K) {
                j.xhrLoad(R, function(r) {
                    if (!r)
                        return K();
                    var E;
                    try {
                        E = JSON.parse(r)
                    } catch (f) {
                        E = JSON.parse(r.substring(65, r.length - 2))
                    }
                    Fh.loadFace(E),
                    K && K(E.familyName.toLowerCase())
                }, K ? null : {
                    sync: !0
                })
            },
            createRingModel: function(d, n, l, e, J, g, O, T, F, Y) {
                for (var s = [], u = 0; u < d.length - 1; u += 2)
                    s.push({
                        x: d[u],
                        y: d[u + 1]
                    });
                g = g || j.shapeSide,
                O = O || 0,
                T = T || g;
                var K, W, c, b, q, P, H, p, $, w, u, N, t, m, i, G, U, y, Q = [], A = [], D = F ? [] : V, v = F ? [] : V, X = Y ? [] : V, k = Y ? [] : V, h = e ? [] : V, B = e ? [] : V, o = J ? [] : V, r = J ? [] : V, d = Gm(s, n, l), I = Sj(d), S = 0, C = 2 * Math.PI / g;
                return d.forEach(function(j) {
                    if (c = j.length,
                    c > 1) {
                        if (b = j[0],
                        e)
                            for (P = b.x,
                            p = b.y,
                            u = O; T > u; u++)
                                N = u + 1,
                                t = u * C,
                                m = N * C,
                                i = z(t),
                                G = E(t),
                                U = z(m),
                                y = E(m),
                                h.push(i * P, p, -G * P, U * P, p, -y * P, 0, p, 0),
                                B.push(.5 - .5 * i, .5 - .5 * G, .5 - .5 * U, .5 - .5 * y, .5, .5);
                        for (w = 0; c > w; w++) {
                            for (q = j[w],
                            P = b.x,
                            H = q.x,
                            p = b.y,
                            $ = q.y,
                            K = S / I,
                            S += uf(b, q),
                            W = S / I,
                            u = O; T > u; u++)
                                N = u + 1,
                                t = u * C,
                                m = N * C,
                                i = z(t),
                                G = E(t),
                                U = z(m),
                                y = E(m),
                                Q.push(i * H, $, -G * H, U * H, $, -y * H, i * P, p, -G * P, U * H, $, -y * H, U * P, p, -y * P, i * P, p, -G * P),
                                A.push(u / g, W, N / g, W, u / g, K, N / g, W, N / g, K, u / g, K),
                                F && u === O && (D.push(0, p, 0, 0, $, 0, i * H, $, -G * H, i * H, $, -G * H, i * P, p, -G * P, 0, p, 0),
                                v.push(0, .5 - p, 0, .5 - $, 2 * H, .5 - $, 2 * H, .5 - $, 2 * P, .5 - p, 0, .5 - p)),
                                Y && N === T && (X.push(0, p, 0, U * H, $, -y * H, 0, $, 0, U * H, $, -y * H, 0, p, 0, U * P, p, -y * P),
                                k.push(1, .5 - p, 1 - 2 * H, .5 - $, 1, .5 - $, 1 - 2 * H, .5 - $, 1, .5 - p, 1 - 2 * P, .5 - p));
                            b = q
                        }
                        if (J)
                            for (P = b.x,
                            p = b.y,
                            u = O; T > u; u++)
                                N = u + 1,
                                t = u * C,
                                m = N * C,
                                i = z(t),
                                G = E(t),
                                U = z(m),
                                y = E(m),
                                o.push(U * P, p, -y * P, i * P, p, -G * P, 0, p, 0),
                                r.push(.5 - .5 * U, .5 + .5 * y, .5 - .5 * i, .5 + .5 * G, .5, .5)
                    }
                }),
                {
                    vs: Q,
                    uv: A,
                    bottom_vs: o,
                    bottom_uv: r,
                    top_vs: h,
                    top_uv: B,
                    from_vs: D,
                    from_uv: v,
                    to_vs: X,
                    to_uv: k
                }
            }
        }, !0),
        lk(N, {
            "3d.move.mode": F,
            "3d.selectable": !0,
            "3d.visible": !0,
            "3d.movable": !0,
            "3d.editable": !0,
            "shape.border.gradient.color": F,
            "edge.gradient.color": F,
            "edge.source.t3": F,
            "edge.target.t3": F,
            "light.type": ns,
            "light.center": [0, 0, 0],
            "light.color": [1, 1, 1, 1],
            "light.disabled": !1,
            "light.angle": L / 4,
            "light.range": 0,
            "light.exponent": 1,
            "light.intensity": 1,
            "wf.visible": !1,
            "wf.width": 1,
            "wf.color": Jp,
            "wf.short": !1,
            "wf.mat": F,
            "wf.geometry": !1,
            batch: F,
            "transparent.mask": !1,
            brightness: F,
            "select.brightness": .7,
            "repeat.uv.length": F,
            alphaTest: .4,
            "label.face": ne,
            "label.t3": F,
            "label.r3": F,
            "label.texture.scale": 2,
            "label.rotationMode": Yn,
            "label.light": !1,
            "label.blend": F,
            "label.reverse.flip": !1,
            "label.reverse.color": sb,
            "label.reverse.cull": !1,
            "label.transparent": !1,
            "label.autorotate": !1,
            "label2.face": ne,
            "label2.t3": F,
            "label2.r3": F,
            "label2.texture.scale": 2,
            "label2.rotationMode": Yn,
            "label2.light": !1,
            "label2.blend": F,
            "label2.reverse.flip": !1,
            "label2.reverse.color": sb,
            "label2.reverse.cull": !1,
            "label2.transparent": !1,
            "label2.autorotate": !1,
            "note.face": ne,
            "note.t3": F,
            "note.r3": F,
            "note.texture.scale": 2,
            "note.rotationMode": Yn,
            "note.light": !1,
            "note.blend": F,
            "note.reverse.flip": !1,
            "note.reverse.color": sb,
            "note.reverse.cull": !1,
            "note.transparent": !1,
            "note.autorotate": !1,
            "note2.face": ne,
            "note2.t3": F,
            "note2.r3": F,
            "note2.texture.scale": 2,
            "note2.rotationMode": Yn,
            "note2.light": !1,
            "note2.blend": F,
            "note2.reverse.flip": !1,
            "note2.reverse.color": sb,
            "note2.reverse.cull": !1,
            "note2.transparent": !1,
            "note2.autorotate": !1,
            shape3d: F,
            "shape3d.color": fd,
            "shape3d.top.color": F,
            "shape3d.bottom.color": F,
            "shape3d.from.color": F,
            "shape3d.to.color": F,
            "shape3d.image": F,
            "shape3d.top.image": F,
            "shape3d.bottom.image": F,
            "shape3d.from.image": F,
            "shape3d.to.image": F,
            "shape3d.light": !0,
            "shape3d.side": 0,
            "shape3d.side.from": F,
            "shape3d.side.to": F,
            "shape3d.visible": !0,
            "shape3d.from.visible": !0,
            "shape3d.to.visible": !0,
            "shape3d.top.visible": !0,
            "shape3d.bottom.visible": !0,
            "shape3d.torus.radius": .17,
            "shape3d.resolution": 0,
            "shape3d.blend": F,
            "shape3d.opacity": F,
            "shape3d.reverse.flip": !1,
            "shape3d.reverse.color": sb,
            "shape3d.reverse.cull": !1,
            "shape3d.transparent": !1,
            "shape3d.uv.offset": F,
            "shape3d.uv.scale": F,
            "shape3d.top.uv.offset": F,
            "shape3d.top.uv.scale": F,
            "shape3d.bottom.uv.offset": F,
            "shape3d.bottom.uv.scale": F,
            "shape3d.from.uv.offset": F,
            "shape3d.from.uv.scale": F,
            "shape3d.to.uv.offset": F,
            "shape3d.to.uv.scale": F,
            "shape3d.top.cap": F,
            "shape3d.bottom.cap": F,
            "shape3d.start.angle": 0,
            "shape3d.sweep.angle": u,
            "shape3d.discard.selectable": !0,
            "shape3d.top.discard.selectable": !0,
            "shape3d.bottom.discard.selectable": !0,
            "shape3d.from.discard.selectable": !0,
            "shape3d.to.discard.selectable": !0,
            "shape3d.scaleable": !0,
            "shape3d.autorotate": !1,
            "shape3d.fixSizeOnScreen": F,
            "shape3d.image.cache": !1,
            "shape3d.alwaysOnTop": !1,
            "all.light": !0,
            "all.visible": !0,
            "all.color": fd,
            "all.image": F,
            "all.blend": F,
            "all.opacity": F,
            "all.reverse.flip": !1,
            "all.reverse.color": sb,
            "all.reverse.cull": !1,
            "all.transparent": !1,
            "all.uv": F,
            "all.uv.offset": F,
            "all.uv.scale": F,
            "all.discard.selectable": !0,
            mat: F,
            "left.mat": F,
            "right.mat": F,
            "top.mat": F,
            "bottom.mat": F,
            "front.mat": F,
            "back.mat": F
        }, !0);
        var tq, ri = !1, fr = [0, 0, 0, 0], Xg = {
            left: [1 / 255, 0, 0, 1],
            right: [2 / 255, 0, 0, 1],
            top: [3 / 255, 0, 0, 1],
            bottom: [4 / 255, 0, 0, 1],
            front: [5 / 255, 0, 0, 1],
            back: [6 / 255, 0, 0, 1],
            m: {
                1: $j,
                2: yo,
                3: ve,
                4: uo,
                5: ne,
                6: hr
            }
        }, Rm = function(v, A, k, Z) {
            if (A.getFaceVisible(v, k)) {
                Bn(A, ys(v, A.getFaceMat(v, k) || A.getMat(v)));
                var c = A._26I;
                A.getFaceReverseCull(v, k) ? c.enable(c.CULL_FACE) : c.disable(c.CULL_FACE),
                fk(c, A._prg.uFixPickReverseColor, Xg[k]),
                kf(c),
                pe(c, Z, 6),
                rf(c),
                cb(A)
            }
        }, Sn = function(d) {
            return d instanceof am
        }, ro = function(S) {
            return [S.x, S.e || 0, S.y]
        }, $e = function(U, S, b) {
            for (var S = To(S), d = S[0], k = S[1], D = S[2]; b--; )
                U.push(d, k, D)
        }, _l = function(q, D, N) {
            for (var D = To(D), o = D[0], R = D[1], c = D[2], l = D[3]; N--; )
                q.push(o, R, c, l)
        }, Ui = function(U, Z, I) {
            if (Z)
                for (var E, F, w, D = Z[0], d = Z[1], W = Z[2], V = Z[4], n = Z[5], p = Z[6], f = Z[8], g = Z[9], A = Z[10], i = Z[12], S = Z[13], b = Z[14], L = I.length, M = 0, M = 0; L > M; M += 3)
                    E = I[M],
                    F = I[M + 1],
                    w = I[M + 2],
                    U.push(D * E + V * F + f * w + i, d * E + n * F + g * w + S, W * E + p * F + A * w + b);
            else
                il(U, I)
        }, Yh = function(q, U) {
            var h = U.s("light.intensity")
              , W = To(U.s(ls))
              , B = W[0]
              , r = W[1]
              , O = W[2];
            1 !== h && (B *= h,
            r *= h,
            O *= h),
            q.push(B, r, O, U.s("light.disabled") ? 1 : 0)
        }, As = function(i, N, h) {
            fk(N, h.uHeadlightRange, i._headlightRange);
            var X = i._headlightIntensity
              , r = To(i._headlightColor);
            1 !== X && (r = [r[0] * X, r[1] * X, r[2] * X]),
            fk(N, h.uHeadlightColor, [r[0], r[1], r[2], i._headlightDisabled ? 1 : 0]);
            var P = i._59O
              , T = i._spots
              , x = i._dirs;
            if (P.length) {
                var I = []
                  , O = []
                  , g = [];
                P.forEach(function(f) {
                    Yh(I, f),
                    il(O, i._transformPointToViewSpace(f.p3())),
                    g.push(f.s("light.range"))
                }),
                N.uniform4fv(h.uPointColor, I),
                N.uniform1fv(h.uPointRange, g),
                N.uniform3fv(h.uPointPosition, O)
            }
            if (T.length) {
                var j = []
                  , J = []
                  , l = []
                  , H = []
                  , V = []
                  , m = [];
                T.forEach(function(w) {
                    Yh(j, w),
                    il(J, i._transformPointToViewSpace(w.p3())),
                    il(V, i._transformDirectionToViewSpace(w.p3(), w.s("light.center"))),
                    l.push(w.s("light.range")),
                    H.push(z(w.s("light.angle") / 2)),
                    m.push(w.s("light.exponent"))
                }),
                N.uniform4fv(h.uSpotColor, j),
                N.uniform1fv(h.uSpotRange, l),
                N.uniform1fv(h.uSpotAngle, H),
                N.uniform1fv(h.uSpotExponent, m),
                N.uniform3fv(h.uSpotPosition, J),
                N.uniform3fv(h.uSpotDirection, V)
            }
            if (x.length) {
                var K = []
                  , k = [];
                x.forEach(function(x) {
                    Yh(K, x),
                    il(k, i._transformDirectionToViewSpace(x.p3()))
                }),
                N.uniform4fv(h.uDirColor, K),
                N.uniform3fv(h.uDirDirection, k)
            }
        }, dn = function(Y) {
            return Y > 0 && 0 === (Y - 1 & Y)
        }, kh = function(G) {
            return G = X(0, b(L, G)),
            G = X(Ed, b(L - Ed, G))
        }, Hn = function() {
            return .05 + o() / 2
        }, Ri = function(e, s, m, K) {
            var S, l = e.getEye();
            return e.isOrtho() ? (S = Fo(e.getCenter(), l),
            S[0] += K[0],
            S[1] += K[1],
            S[2] += K[2]) : S = l,
            dq(s, m, K, S)
        }, dq = function(u, G, Q, p) {
            var q = Yg(u, G)
              , i = Fo(p, Q, !0)
              , D = Yg(i, G);
            if (t(D) < Ed)
                return V;
            var r = (q - Yg(Q, G)) / D;
            return [Q[0] + i[0] * r, Q[1] + i[1] * r, Q[2] + i[2] * r]
        }, Nn = function(t, q) {
            return {
                x: 2 * t.x - q.x,
                y: 2 * t.y - q.y
            }
        }, io = function(k, W, o, _) {
            var V, e;
            if (!k)
                return V = x(W.y - o.y, o.x - W.x),
                {
                    x: W.x + _ * E(V),
                    y: W.y + _ * z(V)
                };
            if (!o)
                return V = x(k.y - W.y, W.x - k.x),
                {
                    x: W.x + _ * E(V),
                    y: W.y + _ * z(V)
                };
            var C = Fo([k.x, k.y, 0], [W.x, W.y, 0], !0)
              , G = Fo([o.x, o.y, 0], [W.x, W.y, 0], !0)
              , c = -(C[0] + G[0]) / 2
              , y = -(C[1] + G[1]) / 2
              , Z = r(c * c + y * y);
            if (Ed > Z)
                return V = x(k.y - W.y, W.x - k.x),
                {
                    x: W.x + _ * E(V),
                    y: W.y + _ * z(V)
                };
            var D = k.x - W.x
              , g = k.y - W.y
              , U = o.x - W.x
              , L = o.y - W.y
              , F = r(D * D + g * g)
              , p = r(U * U + L * L);
            V = w(Yg(C, G)) / 2,
            e = C[1] * G[0] - C[0] * G[1] > 0 ? -1 : 1,
            c /= Z,
            y /= Z;
            var n = _ / E(V)
              , K = X(F, p) / z(V);
            Z = Math.min(n, K);
            var S = {
                x: W.x + e * Z * c,
                y: W.y + e * Z * y
            };
            return o.b && n > p / z(V) && (S.adjust = !0),
            S
        }, jc = function(u) {
            var K = u[1]
              , a = u[2]
              , I = u[3]
              , O = u[6]
              , w = u[7]
              , i = u[11];
            u[1] = u[4],
            u[2] = u[8],
            u[3] = u[12],
            u[4] = K,
            u[6] = u[9],
            u[7] = u[13],
            u[8] = a,
            u[9] = O,
            u[11] = u[14],
            u[12] = I,
            u[13] = w,
            u[14] = i
        }, _h = function(S) {
            var k = S[0]
              , I = S[1]
              , h = S[2]
              , u = S[3]
              , Z = S[4]
              , Y = S[5]
              , R = S[6]
              , v = S[7]
              , E = S[8]
              , O = S[9]
              , M = S[10]
              , n = S[11]
              , P = S[12]
              , a = S[13]
              , U = S[14]
              , G = S[15]
              , A = k * Y - I * Z
              , x = k * R - h * Z
              , q = k * v - u * Z
              , z = I * R - h * Y
              , Q = I * v - u * Y
              , F = h * v - u * R
              , j = E * a - O * P
              , W = E * U - M * P
              , B = E * G - n * P
              , d = O * U - M * a
              , i = O * G - n * a
              , f = M * G - n * U
              , H = A * f - x * i + q * d + z * B - Q * W + F * j;
            return H ? (H = 1 / H,
            S[0] = (Y * f - R * i + v * d) * H,
            S[1] = (h * i - I * f - u * d) * H,
            S[2] = (a * F - U * Q + G * z) * H,
            S[3] = (M * Q - O * F - n * z) * H,
            S[4] = (R * B - Z * f - v * W) * H,
            S[5] = (k * f - h * B + u * W) * H,
            S[6] = (U * q - P * F - G * x) * H,
            S[7] = (E * F - M * q + n * x) * H,
            S[8] = (Z * i - Y * B + v * j) * H,
            S[9] = (I * B - k * i - u * j) * H,
            S[10] = (P * Q - a * q + G * A) * H,
            S[11] = (O * q - E * Q - n * A) * H,
            S[12] = (Y * W - Z * d - R * j) * H,
            S[13] = (k * d - I * W + h * j) * H,
            S[14] = (a * x - P * z - U * A) * H,
            S[15] = (E * z - O * x + M * A) * H,
            void 0) : V
        }, ho = function(j, n) {
            if (n) {
                var G = n[0]
                  , c = n[1]
                  , q = n[2];
                j[12] = j[0] * G + j[4] * c + j[8] * q + j[12],
                j[13] = j[1] * G + j[5] * c + j[9] * q + j[13],
                j[14] = j[2] * G + j[6] * c + j[10] * q + j[14],
                j[15] = j[3] * G + j[7] * c + j[11] * q + j[15]
            }
        }, Cj = function(h, E) {
            if (E) {
                var M = E[0]
                  , k = E[1]
                  , d = E[2];
                h[0] = h[0] * M,
                h[1] = h[1] * M,
                h[2] = h[2] * M,
                h[3] = h[3] * M,
                h[4] = h[4] * k,
                h[5] = h[5] * k,
                h[6] = h[6] * k,
                h[7] = h[7] * k,
                h[8] = h[8] * d,
                h[9] = h[9] * d,
                h[10] = h[10] * d,
                h[11] = h[11] * d
            }
        }, ym = function(R, e, Y) {
            var S = e[0]
              , J = e[1]
              , v = e[2]
              , I = e[3]
              , k = e[4]
              , N = e[5]
              , L = e[6]
              , V = e[7]
              , E = e[8]
              , q = e[9]
              , O = e[10]
              , j = e[11]
              , d = e[12]
              , h = e[13]
              , g = e[14]
              , Q = e[15]
              , F = Y[0]
              , w = Y[1]
              , B = Y[2]
              , b = Y[3];
            return R[0] = F * S + w * k + B * E + b * d,
            R[1] = F * J + w * N + B * q + b * h,
            R[2] = F * v + w * L + B * O + b * g,
            R[3] = F * I + w * V + B * j + b * Q,
            F = Y[4],
            w = Y[5],
            B = Y[6],
            b = Y[7],
            R[4] = F * S + w * k + B * E + b * d,
            R[5] = F * J + w * N + B * q + b * h,
            R[6] = F * v + w * L + B * O + b * g,
            R[7] = F * I + w * V + B * j + b * Q,
            F = Y[8],
            w = Y[9],
            B = Y[10],
            b = Y[11],
            R[8] = F * S + w * k + B * E + b * d,
            R[9] = F * J + w * N + B * q + b * h,
            R[10] = F * v + w * L + B * O + b * g,
            R[11] = F * I + w * V + B * j + b * Q,
            F = Y[12],
            w = Y[13],
            B = Y[14],
            b = Y[15],
            R[12] = F * S + w * k + B * E + b * d,
            R[13] = F * J + w * N + B * q + b * h,
            R[14] = F * v + w * L + B * O + b * g,
            R[15] = F * I + w * V + B * j + b * Q,
            R
        }, Qq = function(Y, E, s, L) {
            var y, f, u, c, h, n, k, $, m, P, l = E[0], N = E[1], O = E[2], S = L[0], W = L[1], U = L[2], J = s[0], Q = s[1], e = s[2];
            return t(l - J) < Ed && t(N - Q) < Ed && t(O - e) < Ed ? el(Y) : (k = l - J,
            $ = N - Q,
            m = O - e,
            P = 1 / r(k * k + $ * $ + m * m),
            k *= P,
            $ *= P,
            m *= P,
            y = W * m - U * $,
            f = U * k - S * m,
            u = S * $ - W * k,
            P = r(y * y + f * f + u * u),
            P ? (P = 1 / P,
            y *= P,
            f *= P,
            u *= P) : (y = 0,
            f = 0,
            u = 0),
            c = $ * u - m * f,
            h = m * y - k * u,
            n = k * f - $ * y,
            P = r(c * c + h * h + n * n),
            P ? (P = 1 / P,
            c *= P,
            h *= P,
            n *= P) : (c = 0,
            h = 0,
            n = 0),
            Y[0] = y,
            Y[1] = c,
            Y[2] = k,
            Y[3] = 0,
            Y[4] = f,
            Y[5] = h,
            Y[6] = $,
            Y[7] = 0,
            Y[8] = u,
            Y[9] = n,
            Y[10] = m,
            Y[11] = 0,
            Y[12] = -(y * l + f * N + u * O),
            Y[13] = -(c * l + h * N + n * O),
            Y[14] = -(k * l + $ * N + m * O),
            Y[15] = 1,
            Y)
        }, Td = function(e, u, w, n, N) {
            var b = 1 / S(u / 2)
              , A = 1 / (n - N);
            return e[0] = b / w,
            e[1] = 0,
            e[2] = 0,
            e[3] = 0,
            e[4] = 0,
            e[5] = b,
            e[6] = 0,
            e[7] = 0,
            e[8] = 0,
            e[9] = 0,
            e[10] = (N + n) * A,
            e[11] = -1,
            e[12] = 0,
            e[13] = 0,
            e[14] = 2 * N * n * A,
            e[15] = 0,
            e
        }, Wf = function(e, R, Z, j, G, m, n) {
            var $ = 1 / (R - Z)
              , M = 1 / (j - G)
              , X = 1 / (m - n);
            return e[0] = -2 * $,
            e[1] = 0,
            e[2] = 0,
            e[3] = 0,
            e[4] = 0,
            e[5] = -2 * M,
            e[6] = 0,
            e[7] = 0,
            e[8] = 0,
            e[9] = 0,
            e[10] = 2 * X,
            e[11] = 0,
            e[12] = (R + Z) * $,
            e[13] = (G + j) * M,
            e[14] = (n + m) * X,
            e[15] = 1,
            e
        }, Mp = function(j, t) {
            var F = t[0]
              , $ = t[1]
              , k = t[2]
              , y = t[3]
              , Y = F * F + $ * $ + k * k + y * y
              , g = Y ? 1 / Y : 0;
            return j[0] = -F * g,
            j[1] = -$ * g,
            j[2] = -k * g,
            j[3] = y * g,
            j
        }, fb = function(X, e) {
            var C = e[0] + e[5] + e[10]
              , q = 0;
            return C > 0 ? (q = 2 * Math.sqrt(C + 1),
            X[3] = .25 * q,
            X[0] = (e[6] - e[9]) / q,
            X[1] = (e[8] - e[2]) / q,
            X[2] = (e[1] - e[4]) / q) : e[0] > e[5] & e[0] > e[10] ? (q = 2 * Math.sqrt(1 + e[0] - e[5] - e[10]),
            X[3] = (e[6] - e[9]) / q,
            X[0] = .25 * q,
            X[1] = (e[1] + e[4]) / q,
            X[2] = (e[8] + e[2]) / q) : e[5] > e[10] ? (q = 2 * Math.sqrt(1 + e[5] - e[0] - e[10]),
            X[3] = (e[8] - e[2]) / q,
            X[0] = (e[1] + e[4]) / q,
            X[1] = .25 * q,
            X[2] = (e[6] + e[9]) / q) : (q = 2 * Math.sqrt(1 + e[10] - e[0] - e[5]),
            X[3] = (e[1] - e[4]) / q,
            X[0] = (e[8] + e[2]) / q,
            X[1] = (e[6] + e[9]) / q,
            X[2] = .25 * q),
            X
        }, Fm = function(k, F, G) {
            var o = F[0]
              , n = F[1]
              , Q = F[2]
              , f = F[3]
              , T = o + o
              , C = n + n
              , g = Q + Q
              , X = o * T
              , w = o * C
              , P = o * g
              , D = n * C
              , L = n * g
              , s = Q * g
              , H = f * T
              , p = f * C
              , u = f * g;
            return k[0] = 1 - (D + s),
            k[1] = w + u,
            k[2] = P - p,
            k[3] = 0,
            k[4] = w - u,
            k[5] = 1 - (X + s),
            k[6] = L + H,
            k[7] = 0,
            k[8] = P + p,
            k[9] = L - H,
            k[10] = 1 - (X + D),
            k[11] = 0,
            k[12] = G[0],
            k[13] = G[1],
            k[14] = G[2],
            k[15] = 1,
            k
        }, Ak = function() {
            var Z = [0, 0, 0]
              , W = [0, 0, 0]
              , N = [0, 0, 0]
              , _ = function(H, A, J) {
                H[0] = A[1] * J[2] - A[2] * J[1],
                H[1] = A[2] * J[0] - A[0] * J[2],
                H[2] = A[0] * J[1] - A[1] * J[0]
            }
              , J = function(W) {
                return W[0] * W[0] + W[1] * W[1] + W[2] * W[2]
            }
              , z = function(q) {
                var Y = Math.sqrt(J(q));
                q[0] /= Y,
                q[1] /= Y,
                q[2] /= Y
            }
              , f = function(w, l, Q) {
                w[0] = l[0] - Q[0],
                w[1] = l[1] - Q[1],
                w[2] = l[2] - Q[2]
            };
            return function(L, Q, V) {
                var v = Ue();
                return f(N, L, Q),
                0 === J(N) && (N[2] = 1),
                z(N),
                _(Z, V, N),
                0 === J(Z) && (1 === Math.abs(V[2]) ? N[0] += 1e-4 : N[2] += 1e-4,
                z(N),
                _(Z, V, N)),
                z(Z),
                _(W, N, Z),
                v[0] = Z[0],
                v[4] = W[0],
                v[8] = N[0],
                v[1] = Z[1],
                v[5] = W[1],
                v[9] = N[1],
                v[2] = Z[2],
                v[6] = W[2],
                v[10] = N[2],
                v
            }
        }(), vd = function(F, X) {
            if (F.vr.enable) {
                var N = F.vr.getViewMatrix(X);
                if (N)
                    return N
            }
            return Qq(X ? X : Ue(), F._eye, F._center, F._up)
        }, nn = function(E) {
            if (E.vr.enable) {
                var v = E.vr.getProjectMatrix();
                if (v)
                    return v
            }
            var G = E.getAspect()
              , s = E._near
              , e = E._far
              , n = Ue();
            if (E._ortho) {
                var z = E._orthoWidth / 2
                  , Q = z / G;
                Wf(n, -z, z, -Q, Q, s, e)
            } else
                Td(n, E._fovy, G, s, e);
            return n
        }, pb = function(h, D) {
            if (!h)
                return V;
            var b = 0
              , i = 1
              , U = 2
              , B = []
              , H = 0
              , $ = h.length
              , o = $ / 3;
            if (D) {
                for (; $ > H; H++)
                    B[H] = 0;
                for (H = 0; H < D.length; H += 3) {
                    var w = []
                      , O = []
                      , j = [];
                    w[b] = h[3 * D[H + 1] + b] - h[3 * D[H] + b],
                    w[i] = h[3 * D[H + 1] + i] - h[3 * D[H] + i],
                    w[U] = h[3 * D[H + 1] + U] - h[3 * D[H] + U],
                    O[b] = h[3 * D[H + 2] + b] - h[3 * D[H + 1] + b],
                    O[i] = h[3 * D[H + 2] + i] - h[3 * D[H + 1] + i],
                    O[U] = h[3 * D[H + 2] + U] - h[3 * D[H + 1] + U],
                    j[b] = w[i] * O[U] - w[U] * O[i],
                    j[i] = w[U] * O[b] - w[b] * O[U],
                    j[U] = w[b] * O[i] - w[i] * O[b];
                    for (var A = 0; 3 > A; A++)
                        B[3 * D[H + A] + b] += j[b],
                        B[3 * D[H + A] + i] += j[i],
                        B[3 * D[H + A] + U] += j[U]
                }
            } else
                for (H = 0; o > H; H += 3) {
                    var w = []
                      , O = []
                      , j = [];
                    w[b] = h[3 * (H + 1) + b] - h[3 * H + b],
                    w[i] = h[3 * (H + 1) + i] - h[3 * H + i],
                    w[U] = h[3 * (H + 1) + U] - h[3 * H + U],
                    O[b] = h[3 * (H + 2) + b] - h[3 * (H + 1) + b],
                    O[i] = h[3 * (H + 2) + i] - h[3 * (H + 1) + i],
                    O[U] = h[3 * (H + 2) + U] - h[3 * (H + 1) + U],
                    j[b] = w[i] * O[U] - w[U] * O[i],
                    j[i] = w[U] * O[b] - w[b] * O[U],
                    j[U] = w[b] * O[i] - w[i] * O[b];
                    for (var A = 0; 3 > A; A++)
                        B[3 * (H + A) + b] = j[b],
                        B[3 * (H + A) + i] = j[i],
                        B[3 * (H + A) + U] = j[U]
                }
            for (H = 0; $ > H; H += 3) {
                var P = [];
                P[b] = B[H + b],
                P[i] = B[H + i],
                P[U] = B[H + U];
                var Q = r(P[b] * P[b] + P[i] * P[i] + P[U] * P[U]);
                0 === Q && (Q = Ed),
                P[b] = P[b] / Q,
                P[i] = P[i] / Q,
                P[U] = P[U] / Q,
                B[H + b] = P[b],
                B[H + i] = P[i],
                B[H + U] = P[U]
            }
            return new mj(B)
        }, Pn = function(F, m, Y, h) {
            if (Y || (Y = F.createTexture()),
            m) {
                var y = F.TEXTURE_2D
                  , C = F.REPEAT
                  , v = F.CLAMP_TO_EDGE
                  , K = F.TEXTURE_MIN_FILTER;
                h !== F.NEAREST && (h = F.LINEAR),
                Eg(F, Y),
                F.texImage2D(y, 0, F.RGBA, F.RGBA, F.UNSIGNED_BYTE, m),
                fp(F, F.TEXTURE_MAG_FILTER, h);
                var O = m.naturalWidth || m.width
                  , Z = m.naturalHeight || m.height;
                dn(O) && dn(Z) && !m.clampToEdge ? (fp(F, F.TEXTURE_WRAP_S, C),
                fp(F, F.TEXTURE_WRAP_T, C),
                fp(F, K, F.LINEAR_MIPMAP_LINEAR),
                F.generateMipmap(y)) : (fp(F, F.TEXTURE_WRAP_S, v),
                fp(F, F.TEXTURE_WRAP_T, v),
                fp(F, K, h)),
                Eg(F, V)
            }
            return Y
        }, Ul = function(N, S) {
            var c = new Uint8Array(3);
            return S = S || N.createTexture(),
            Eg(N, S),
            fp(N, N.TEXTURE_MIN_FILTER, N.LINEAR),
            N.texImage2D(N.TEXTURE_2D, 0, N.RGB, 1, 1, 0, N.RGB, N.UNSIGNED_BYTE, c),
            S
        }, Tk = function(T) {
            T._26I && T._prg && (T._26I.deleteProgram(T._prg),
            T._prg = V)
        }, kg = function(b, f, W, q) {
            var T = b.createShader(W);
            return b.shaderSource(T, q),
            b.compileShader(T),
            b.attachShader(f, T),
            T
        }, Bh = function(K) {
            return K.createBuffer()
        }, Eg = function(u, q) {
            u.bindTexture(u.TEXTURE_2D, q)
        }, lh = function(x, n) {
            x.bindFramebuffer(x.FRAMEBUFFER, n)
        }, fp = function(t, b, x) {
            t.texParameteri(t.TEXTURE_2D, b, x)
        }, wf = function(y, $) {
            if ($) {
                var $ = To($);
                y.clearColor($[0], $[1], $[2], $[3])
            }
        }, rg = function(l, J) {
            fk(l, J.uFix, !0),
            ch(l, J.aNormal)
        }, Il = function(q, B) {
            fk(q, B.uFix, !1),
            Sb(q, B.aNormal)
        }, Hr = function(Q, j, k, r, $, u, s, w) {
            Q._picking || (k ? (fk(Q, j.uBlend, !0),
            fk(Q, j.uBlendColor, k)) : fk(Q, j.uBlend, !1),
            fk(Q, j.uLight, r == V ? !0 : r),
            Hg($) && 1 !== $ && fk(Q, j.uPartOpacity, $),
            fk(Q, j.uReverseFlip, u == V ? !1 : u),
            fk(Q, j.uFixPickReverseColor, s || sb)),
            w ? Q.enable(Q.CULL_FACE) : Q.disable(Q.CULL_FACE)
        }, Uq = function(d, G) {
            d._picking || fk(d, G.uPartOpacity, 1)
        }, kf = function(a, I, x, P, j, r, k, p, F) {
            if (!x)
                return a.activeTexture(a.TEXTURE0),
                Eg(a, a._emptyTexture),
                a.activeTexture(a.TEXTURE1),
                Eg(a, a._emptyBlendTexture),
                void 0;
            fk(a, I.uTexture, !0),
            fk(a, I.uDiscardSelectable, mk(P) ? P : !0),
            Sb(a, I.aUv),
            ed(a, j, r, I.aUv, 2),
            F ? (fk(a, I.uBlendTexture, !0),
            a.activeTexture(a.TEXTURE1),
            Eg(a, F),
            a.uniform1i(I.uBlendSampler, 1)) : (fk(a, I.uBlendTexture, !1),
            a.activeTexture(a.TEXTURE1),
            Eg(a, a._emptyBlendTexture)),
            a.activeTexture(a.TEXTURE0),
            Eg(a, x),
            a.uniform1i(I.uSampler, 0);
            var b = [0, 0, 1, 1];
            k && (b[0] = k[0],
            b[1] = k[1]),
            p && (b[2] = p[0],
            b[3] = p[1]),
            fk(a, I.uOffsetScale, b)
        }, rf = function(L, f, I) {
            L.activeTexture(L.TEXTURE0),
            Eg(L, V),
            L.activeTexture(L.TEXTURE1),
            Eg(L, V),
            I && (ch(L, f.aUv),
            fk(L, f.uTexture, !1),
            fk(L, f.uBlendTexture, !1))
        }, Rl = function(E, K, q, B, N, $) {
            !q || i || d || E.lineWidth(q),
            B && !E._picking && fk(E, K.uFixPickReverseColor, B),
            N && ed(E, N, $, K.aPosition)
        }, de = function(X, Q, I, b) {
            tq && (b = X[tq]),
            X.drawArrays(b == V ? X.TRIANGLES : b, Q, I);
            var $ = X._renderInfo;
            $ && ($.calls++,
            $.vertices += I,
            (b == V || b === X.TRIANGLES) && ($.faces += I / 3),
            b === X.LINES && ($.lines += I / 2))
        }, pe = function(X, b, S, u) {
            tq && (u = X[tq]),
            X.drawElements(u == V ? X.TRIANGLES : u, S, X.UNSIGNED_SHORT, b == V ? 0 : 2 * b);
            var T = X._renderInfo;
            T && (T.calls++,
            T.vertices += S,
            (u == V || u === X.TRIANGLES) && (T.faces += S / 3),
            u === X.LINES && (T.lines += S / 2))
        }, ks = function(C, d, e, o, P) {
            var M = C.ARRAY_BUFFER;
            C.bindBuffer(M, d),
            e && C.bufferData(M, e, C.STATIC_DRAW),
            o != V && C.vertexAttribPointer(o, P ? P : 3, C.FLOAT, !1, 0, 0)
        }, ed = function(P, Q, X, _, z) {
            return X ? (yg(P, P.ARRAY_BUFFER, Q, X),
            _ != V && P.vertexAttribPointer(_, z ? z : 3, P.FLOAT, !1, 0, 0),
            void 0) : ks(P, Q, X, _, z)
        }, Oj = function(b, A, N) {
            var V = b.ELEMENT_ARRAY_BUFFER;
            b.bindBuffer(V, A),
            N && b.bufferData(V, N, b.STATIC_DRAW)
        }, Fk = function(K, T, h) {
            yg(K, K.ELEMENT_ARRAY_BUFFER, T, h)
        }, yg = function(D, g, S, N) {
            var f = N._bufId;
            f || (f = N._bufId = C.Math.generateIncreasingID());
            var S, p = D._bufPool;
            (S = p[f]) && S._buf ? D.bindBuffer(g, S._buf) : (S = p[f] = {
                _buf: Bh(D)
            },
            D.bindBuffer(g, S._buf),
            D.bufferData(g, N, D.STATIC_DRAW)),
            S._fid = D._renderInfo.frame
        }, fk = function(u, X, R) {
            if (R != V && X != V) {
                R = To(R);
                var P = R.length;
                3 === P ? u.uniform3fv(X, R) : 4 === P ? u.uniform4fv(X, R) : 16 === P ? u.uniformMatrix4fv(X, !1, R) : mk(R) ? u.uniform1i(X, R ? 1 : 0) : 2 === P ? u.uniform2fv(X, R) : u.uniform1f(X, R)
            }
        }, Sb = function(H, P) {
            P != V && P >= 0 && H.enableVertexAttribArray(P)
        }, ch = function(b, q) {
            q != V && q >= 0 && b.disableVertexAttribArray(q)
        }, cb = function(l, N) {
            var f = l.getGL()
              , B = l._prg;
            l._7O = l._8O.pop(),
            N && (fk(f, B.uMVMatrix, l._7O),
            l._6O = N,
            fk(f, B.uNMatrix, N))
        }, Jh = function(P, s) {
            return s || (s = Ue()),
            sp(s, P),
            _h(s),
            jc(s),
            s
        }, Bn = function(f, s) {
            var F = f.getGL()
              , P = f._prg
              , B = f._7O;
            s && (f._8O.push(Te(B)),
            ym(B, B, s)),
            fk(F, P.uMVMatrix, B),
            fk(F, P.uNMatrix, Jh(B, f._6O))
        }, xq = function(k, N, o, E, R, e) {
            if (o) {
                if (E) {
                    var L = o.value++
                      , W = 2147483648 | L
                      , s = [(255 & W >> 16) / 255, (255 & W >> 8) / 255, (255 & W) / 255, (255 & W >> 24) / 255];
                    o[L] = {
                        data: R,
                        part: e
                    }
                } else
                    s = fr;
                return fk(k, N.uFixPickReverseColor, s),
                s
            }
        }, Dk = function() {
            var r = {
                center: function(F, V, B, K, Q) {
                    var M = -V[1] / 2
                      , L = {
                        x: -V[0] / 2,
                        y: M,
                        width: V[0],
                        height: V[1]
                    }
                      , p = sg(F, L, B);
                    return [p.x + K, -p.y - Q, Hn()]
                },
                front: function(k, U, I, i, m) {
                    var c = -U[1] / 2
                      , Y = {
                        x: -U[0] / 2,
                        y: c,
                        width: U[0],
                        height: U[1]
                    }
                      , J = sg(k, Y, I);
                    return [J.x + i, -J.y - m, U[2] / 2 + Hn()]
                },
                back: function(f, X, z, o, t) {
                    var e = -X[0] / 2
                      , K = -X[1] / 2
                      , r = {
                        x: e,
                        y: K,
                        width: X[0],
                        height: X[1]
                    }
                      , T = sg(f, r, z);
                    return [-T.x - o, -T.y - t, -X[2] / 2 - Hn()]
                },
                left: function(s, o, N, m, n) {
                    var P = -o[1] / 2
                      , v = {
                        x: -o[2] / 2,
                        y: P,
                        width: o[2],
                        height: o[1]
                    }
                      , W = sg(s, v, N);
                    return [-o[0] / 2 - Hn(), -W.y - n, W.x + m]
                },
                right: function(d, F, q, p, l) {
                    var W = -F[2] / 2
                      , m = -F[1] / 2
                      , g = {
                        x: W,
                        y: m,
                        width: F[2],
                        height: F[1]
                    }
                      , i = sg(d, g, q);
                    return [F[0] / 2 + Hn(), -i.y - l, -i.x - p]
                },
                top: function(n, A, v, m, K) {
                    var G = {
                        x: -A[0] / 2,
                        y: -A[2] / 2,
                        width: A[0],
                        height: A[2]
                    }
                      , Y = sg(n, G, v);
                    return [Y.x + m, A[1] / 2 + Hn(), Y.y + K]
                },
                bottom: function(F, w, U, H, q) {
                    var A = -w[2] / 2
                      , t = {
                        x: -w[0] / 2,
                        y: A,
                        width: w[0],
                        height: w[2]
                    }
                      , r = sg(F, t, U);
                    return [r.x + H, -w[1] / 2 - Hn(), -r.y - q]
                }
            };
            return function(L, w, O, s, D, G) {
                return r[s](L, w, O, D || 0, G || 0)
            }
        }(), Mi = function(v, W, F, B, E, u, R, n, p, N) {
            if (E && (W[0] += E[0],
            W[1] += E[1],
            W[2] += E[2]),
            ho(v, F),
            n) {
                var r = Ue();
                if (Bj(r, p, N),
                Nj(W, r),
                ho(v, W),
                v.auto = n,
                v.pos = Nj([0, 0, 0], v),
                u) {
                    var o = v.mat2 = Ue();
                    Bj(o, u, R)
                }
            } else
                Bj(v, p, N),
                ho(v, W),
                B === $j ? hc(v, -l) : B === yo ? hc(v, l) : B === ve ? Cb(v, -l) : B === uo ? Cb(v, l) : B === hr && hc(v, L),
                Bj(v, u, R);
            return v
        }, Kb = function(J, V) {
            var C = V.auto
              , Q = V.mat2
              , s = J.gv;
            if (C) {
                var a, Y = Ue(), e = [0, 0, 0, 0];
                a = "string" == typeof C ? [C.indexOf("x") < 0 ? s._eye[0] : s._center[0], C.indexOf("y") < 0 ? s._eye[1] : s._center[1], C.indexOf("z") < 0 ? s._eye[2] : s._center[2]] : s._eye,
                fb(e, Qq(Ue(), a, s._center, s._up)),
                Fm(Y, Mp(e, e), V.pos),
                Q && ym(Y, Y, Q),
                Bn(s, Y)
            } else
                Bn(s, V)
        }, rl = function(i, v, x, Q, j) {
            var G = i.s
              , I = i.gv
              , b = I.getGL()
              , Z = I._prg
              , H = I._buffer
              , g = I._1O;
            Pn(b, zb, g),
            Kb(i, x),
            Hr(b, Z, G(v + ".blend"), G(v + ".light"), G(v + ".opacity"), G(v + ".reverse.flip"), G(v + ".reverse.color"), G(v + ".reverse.cull")),
            kf(b, Z, g, j, H.uv, Zl),
            ed(b, H.vs, Q, Z.aPosition),
            ed(b, H.ns, kc, Z.aNormal),
            Fk(b, H.is, Ti),
            pe(b, 0, Ti.length),
            rf(b, Z, g),
            Uq(b, Z),
            cb(I)
        }, ai = function(o, R, k) {
            var H = o.gv
              , S = o.data
              , X = o[R] = {
                blend: H.getBodyColor(S) || H.getFaceBlend(S, R),
                light: H.getFaceLight(S, R),
                color: H.getFaceColor(S, R),
                opacity: H.getFaceOpacity(S, R),
                transparent: H.getFaceTransparent(S, R),
                reverseFlip: H.getFaceReverseFlip(S, R),
                reverseColor: H.getFaceReverseColor(S, R),
                reverseCull: H.getFaceReverseCull(S, R),
                texture: H.getFaceImage(S, R),
                blendTexture: H.getFaceBlendImage(S, R),
                discardSelectable: H.getFaceDiscardSelectable(S, R)
            };
            if ("csg" !== R) {
                X.uv = H.getFaceUv(S, R) || k && k[R + "Uv"],
                X.uvScale = H.getFaceUvScale(S, R) || k && k[R + "UvScale"],
                X.uvOffset = H.getFaceUvOffset(S, R) || k && k[R + "UvOffset"];
                var x = H.getFaceMat(S, R);
                x && (X.mat = ys(S, x))
            }
            return X
        }, us = function(Q, k, F, W, V) {
            if (W) {
                if (!V(W.transparent))
                    return;
                var y = Q.data
                  , b = Q.gv
                  , e = b._buffer
                  , R = b.getTexture(W.texture, y)
                  , u = b.getTexture(W.blendTexture, y);
                kf(k, F, R, W.discardSelectable, e.uv, W.tuv, W.uvOffset, W.uvScale, u),
                Hr(k, F, W.blend, W.light, W.opacity, W.reverseFlip, W.reverseColor, W.reverseCull),
                fk(k, F.uDiffuse, W.color),
                ed(k, e.vs, W.vs, F.aPosition),
                ed(k, e.ns, W.ns, F.aNormal),
                de(k, 0, W.vs.length / 3),
                Uq(k, F),
                rf(k, F, R)
            }
        }, Zr = function(t, j, Y, p, H, n) {
            var m, D, E, B, F, J, T, h, w, x, d, S = [p - j, H - Y], g = t ? t.length : 0;
            for (E = 0; g > E; E++) {
                for (B = 2,
                m = t[E],
                F = m[0],
                J = m[1]; B + 1 < m.length; ) {
                    if (T = m[B],
                    h = m[B + 1],
                    D = Lp(j, Y, p, H, F, J, T, h, !0)) {
                        w = [T - F, h - J],
                        x = uf(w),
                        w[0] /= x,
                        w[1] /= x,
                        x = Yg(S, w),
                        x = x > 0 ? n : -n,
                        d = [w[0] * x, w[1] * x];
                        break
                    }
                    F = T,
                    J = h,
                    B += 2
                }
                if (d)
                    break
            }
            if (d)
                for (p = j + d[0],
                H = Y + d[1],
                E = 0; g > E; E++)
                    for (B = 2,
                    m = t[E],
                    F = m[0],
                    J = m[1]; B + 1 < m.length; ) {
                        if (T = m[B],
                        h = m[B + 1],
                        D = Lp(j, Y, p, H, F, J, T, h, !0))
                            return [0, 0];
                        F = T,
                        J = h,
                        B += 2
                    }
            return d ? d : [p - j, H - Y]
        }, Nc = C.graph3d = {}, jf = function(A, z, k) {
            fh(B + ".graph3d." + A, z, k)
        }, Ph = "~<yfusfw!+!yjsubNQv!>!opjujtpQ`mh!gjeof$!~<fdobutjEfojMb!>!fdobutjEfojMw|*itbEv)gj!ITBE!gfegj$!!gjeof$!~<ttfouihjsCidubCb!>!ttfouihjsCidubCw|*ttfouihjsCidubCv)gj!TTFOUIHJSCIDUBC!gfegj$!!gjeof$!~<eofmCidubCb!>!eofmCidubCw|*eofmCidubCv)gj!EOFMCIDUBC!gfegj$!!gjeof$!~<spmpDidubCb!>!spmpDidubCw|*spmpDidubCv)gj!SPMPDIDUBC!gfegj$!~<wVb!>!wVs|*fsvuyfUeofmCv)gj~<x{/fmbdTuftggPv!+!wVb!,!zy/fmbdTuftggPv!>!wVw|*fsvuyfUv)gj~<*yfusfw)4dfw!>!yfusfWw<**1/2!-mbnspOb)5dfw!+!yjsubNOv)4dfw!>!mbnspOw|*ldjQva!%%!yjGva)gj<*1/2!-opjujtpQb)5dfw!+!yjsubNWNv!>!yfusfw!5dfw|!*ejpw)ojbn!ejpw!gjeof$!<fdobutjEfojMw!ubpmg!hojzsbw<fdobutjEfojMb!ubpmg!fuvcjsuub<itbEv!mppc!nspgjov!ITBE!gfegj$!!gjeof$!<^UPQT`YBN]opjudfsjEupqTv!4dfw!nspgjov<^UPQT`YBN]opjujtpQupqTv!4dfw!nspgjov<^UPQT`YBN]spmpDupqTv!5dfw!nspgjov!1!?!UPQT`YBN!gj$!!gjeof$!<^UOJPQ`YBN]opjujtpQuojpQv!4dfw!nspgjov<^UOJPQ`YBN]spmpDuojpQv!5dfw!nspgjov!1!?!UOJPQ`YBN!gj$!!gjeof$!<^SJE`YBN]opjudfsjEsjEv!4dfw!nspgjov<^SJE`YBN]spmpDsjEv!5dfw!nspgjov!1!?!SJE`YBN!gj$!!gjeof$!<eofmCidubCw!4dfw!hojzsbw<eofmCidubCb!4dfw!fuvcjsuub<eofmCidubCv!mppc!nspgjov!EOFMCIDUBC!gfegj$!!gjeof$!<ttfouihjsCidubCw!ubpmg!hojzsbw<ttfouihjsCidubCb!ubpmg!fuvcjsuub<ttfouihjsCidubCv!mppc!nspgjov!TTFOUIHJSCIDUBC!gfegj$!!gjeof$!<spmpDidubCw!5dfw!hojzsbw<spmpDidubCb!5dfw!fuvcjsuub<spmpDidubCv!mppc!nspgjov!SPMPDIDUBC!gfegj$!<yfusfWw!4dfw!hojzsbw<mbnspOw!4dfw!hojzsbw<yjGv!mppc!nspgjov<ldjQv!mppc!nspgjov<yjsubNxfjWv!5ubn!nspgjov<yjsubNOv!5ubn!nspgjov<yjsubNQv!5ubn!nspgjov<yjsubNWNv!5ubn!nspgjov<opjujtpQb!4dfw!fuvcjsuub<mbnspOb!4dfw!fuvcjsuub<wVs!3dfw!hojzsbw<wVw!3dfw!hojzsbw<wVb!3dfw!fuvcjsuub<fmbdTuftggPv!5dfw!nspgjov<fsvuyfUeofmCv!mppc!nspgjov<fsvuyfUv!mppc!nspgjov!YJGFSQ^#CBRBEJxTT87hJFI,,bX1XrIwcn3UM{ZeZ,M6HEN6nLxe2Z72s2:3johr6foKrpqwxNKYkdbJ2CN[mBbf[wXU,T0oGuSEd190ohLZkEn8IuCe[OHoWeKz:Sf,VS7xdSLw23W1YJLU:jdv2{hiDbhDzNNEh9tp3xsuEp94Sl4c3wRzqwShMDRhCLRjCDEBOH5BBVRBCFRE4cJTHrTDH1BNgHJN", mc = "~~<eJ!>!spmpDhbsG`mh~<spmpDsfmqnbTwv!>+!eJ<*wVs!-sfmqnbTeofmCv)E3fsvuyfu!>!spmpDsfmqnbTwv!5dfw|!*fsvuyfUeofmCv)!gj!!gjeof$!~<ttfouihjsCidubCw!>+!chs/eJ!!!|*ttfouihjsCidubCv)gj!TTFOUIHJSCIDUBC!gfegj$!~<ttfouihjsCv!>+!chs/eJ!!!|*1/2!>a!ttfouihjsCv)gj~~<zujdbqPusbQv!>+!b/eJ!!!|*1/2!>a!zujdbqPusbQv)gj~!gjeof$!<*spudbGhpg!-*x/eJ!-chs/spmpDhpGv)5dfw!-eJ)yjn!>!eJ<*iuqfe!-sbGhpGv!-sbfOhpGv)qfutiuppnt!>!spudbGhpg!ubpmg<x/esppDhbsG`mh0{/esppDhbsG`mh!>!iuqfe!ubpmg!HPG!gfegj$!!gjeof$!~~~~<chs/^j]spmpDupqTv!+!udfggFupqt!+!fhobSm!+!*1/1!-*mbnspOm.!-O)upe)ybn!>,!chs/eJ<*1/1!-*^j]uofopqyFupqTv!-udfggFupqt)xpq)ybn!>!udfggFupqt|*^j]fmhoBupqTv!?!udfggFupqt)gj<*mbnspOm!-^j]opjudfsjEupqTv)upe!>!udfggFupqt!ubpmg<*spudfWm)f{jmbnspo!>!mbnspOm!4dfw|*1/1!?!fhobSm)!gj~<*1/2!-*^j]fhobSupqTv!0!*spudfWm)iuhofm))ojn!.!1/2!>!fhobSm|*1/1!?!^j]fhobSupqTv)!gj<1/2!>!fhobSm!ubpmg<^j]opjujtpQupqTv!.!yfusfWw!>!spudfWm!4dfw|*1/1!>>!x/^j]spmpDupqTv)gj|!*,,j!<UPQT`YBN!=!j!<1>j!uoj)spg!1!?!UPQT`YBN!gj$!!gjeof$!~~~<chs/^j]spmpDuojpQv!+!fhobSm!+!*1/1!-**spudfWm)f{jmbnspo.!-O)upe)ybn!>,!chs/eJ|*1/1!?!fhobSm)!gj~<*1/2!-*^j]fhobSuojpQv!0!*spudfWm)iuhofm))ojn!.!1/2!>!fhobSm|*1/1!?!^j]fhobSuojpQv)!gj<1/2!>!fhobSm!ubpmg<^j]opjujtpQuojpQv!.!yfusfWw!>!spudfWm!4dfw|*1/1!>>!x/^j]spmpDuojpQv)gj|!*,,j!<UOJPQ`YBN!=!j!<1>j!uoj)spg!1!?!UOJPQ`YBN!gj$!!gjeof$!~~<chs/^j]spmpDsjEv!+!*1/1!-**^j]opjudfsjEsjEv)f{jmbnspo.!-O)upe)ybn!>,!chs/eJ|*1/1!>>!x/^j]spmpDsjEv)gj|!*,,j!<SJE`YBN!=!j!<1>j!uoj)spg!1!?!SJE`YBN!gj$!~<chs/spmpDuihjmebfIv!+!nsfUusfcnbm!>+!chs/eJ~<*1/2!-fhobSuihjmebfIv0*yfusfWw)iuhofm)ojn!.!1/2!!>+!nsfUusfcnbm|*1/1!?!fhobSuihjmebfIv)gj<*1/1!-6/1!,!6/1!+!*M.!-O)upe)ybn!>!nsfUusfcnbm!ubpmg|*1/1!>>!x/spmpDuihjmebfIv)gj|*uihjMv)gj~!gjeof$!~<spmpDeofmCv!>+!eJ|*eofmCv)gj!ftmf$!~<spmpDeofmCv!>+!eJ|*eofmCv)gj!ftmf~<eofmCidubCw!>+!chs/eJ|*eofmCidubCv)gj!EOFMCIDUBC!gfegj$!~<spmpd!>!eJ|ftmf~<spmpDwv!>!eJ|*fsvuyfUv)gj|!ftmf~<spmpDftsfwfSldjQyjGv!>!eJ|*qjmGftsfwfSva!%%!ldbCtj)gj~<fvsu!>!ldbCtj<O.!>!O|*1/1!=!*O!-F)upe)gj<ftmbg!>!ldbCtj!mppc<F.!>!M!4dfw<*yfusfWw.)f{jmbnspo!>!F!4dfw<*mbnspOw)f{jmbnspo!>!O!4dfw!gjeof$!<ftvggjEv!>!spmpd!ftmf$!~<ftvggjEv!>!spmpd|ftmf~<spmpDidubCw!>!spmpd|*spmpDidubCv)gj!SPMPDIDUBC!gfegj$!<spmpd!5dfw|!ftmf~!gjeof$!~~<ftvggjEv!>!eJ|ftmf~<esbdtje|*1/1!>>!x/ftvggjEv)gj|!*!fdobutjEitbEv!?!*!fdobutjEqbHitbEv!-fdobutjEfojMw!)epn!%%!itbEv)!gj!ITBE!gfegj$!!gjeof$!<spmpDftsfwfSldjQyjGv!>!eJ!ftmf$!~<spmpDftsfwfSldjQyjGv!>!eJ|ftmf~<spmpDidubCw!>!eJ|*spmpDidubCv)gj!SPMPDIDUBC!gfegj$!|*yjGv)gj<eJ!5dfw|ftmf~~!<esbdtje!|!*1/1!>>!b/spmpDhbsG`mh)!gj!gjeof$!<spmpDftsfwfSldjQyjGv!>!spmpDhbsG`mh!ftmf$!~<spmpDftsfwfSldjQyjGv!>!spmpDhbsG`mh|ftmf~<spmpDidubCw!>!spmpDhbsG`mh|*spmpDidubCv)gj!SPMPDIDUBC!gfegj$!|*ldjQv)gj~~~!<esbdtje!|!*utfUbiqmBv!>=!b/spmpDwv)!gj!!!!|!ftmf~~!<esbdtje!|!*1/1!>>!b/spmpDwv)!gj!!!!|!*uofsbqtobsUv)!gj<*wVw!-sfmqnbTv)E3fsvuyfu!>!spmpDwv|**fmcbudfmfTesbdtjEv!%%!ldjQv)a!%%!fsvuyfUv)gj<spmpDwv!5dfw|!*ejpw)ojbn!ejpw!gjeof$!<fdobutjEfojMw!ubpmg!hojzsbw<fdobutjEqbHitbEv!ubpmg!nspgjov<fdobutjEitbEv!ubpmg!nspgjov<itbEv!mppc!nspgjov!ITBE!gfegj$!!gjeof$!<sbGhpGv!ubpmg!nspgjov<sbfOhpGv!ubpmg!nspgjov<spmpDhpGv!5dfw!nspgjov!HPG!gfegj$!!gjeof$!<^UPQT`YBN]opjudfsjEupqTv!4dfw!nspgjov<^UPQT`YBN]opjujtpQupqTv!4dfw!nspgjov<^UPQT`YBN]fhobSupqTv!ubpmg!nspgjov<^UPQT`YBN]fmhoBupqTv!ubpmg!nspgjov<^UPQT`YBN]uofopqyFupqTv!ubpmg!nspgjov<^UPQT`YBN]spmpDupqTv!5dfw!nspgjov!1!?!UPQT`YBN!gj$!!gjeof$!<^UOJPQ`YBN]opjujtpQuojpQv!4dfw!nspgjov<^UOJPQ`YBN]fhobSuojpQv!ubpmg!nspgjov<^UOJPQ`YBN]spmpDuojpQv!5dfw!nspgjov!1!?!UOJPQ`YBN!gj$!!gjeof$!<^SJE`YBN]opjudfsjEsjEv!4dfw!nspgjov<^SJE`YBN]spmpDsjEv!5dfw!nspgjov!1!?!SJE`YBN!gj$!!gjeof$!<eofmCidubCw!4dfw!hojzsbw<eofmCidubCv!mppc!nspgjov!EOFMCIDUBC!gfegj$!!gjeof$!<ttfouihjsCidubCw!ubpmg!hojzsbw<ttfouihjsCidubCv!mppc!nspgjov!TTFOUIHJSCIDUBC!gfegj$!!gjeof$!<spmpDidubCw!5dfw!hojzsbw<spmpDidubCv!mppc!nspgjov!SPMPDIDUBC!gfegj$!<spmpDuihjmebfIv!5dfw!nspgjov<fhobSuihjmebfIv!ubpmg!nspgjov<yfusfWw!4dfw!hojzsbw<mbnspOw!4dfw!hojzsbw<ftvggjEv!5dfw!nspgjov<zujdbqPusbQv!ubpmg!nspgjov<ttfouihjsCv!ubpmg!nspgjov<uihjMv!mppc!nspgjov<spmpDeofmCv!5dfw!nspgjov<eofmCv!mppc!nspgjov<wVs!3dfw!hojzsbw<sfmqnbTeofmCv!E3sfmqnbt!nspgjov<sfmqnbTv!E3sfmqnbt!nspgjov<wVw!3dfw!hojzsbw<fsvuyfUeofmCv!mppc!nspgjov<fsvuyfUv!mppc!nspgjov<uofsbqtobsUv!mppc!nspgjov<utfUbiqmBv!ubpmg!nspgjov<spmpDftsfwfSldjQyjGv!5dfw!nspgjov<qjmGftsfwfSv!mppc!nspgjov<ldjQv!mppc!nspgjov<yjGv!mppc!nspgjov<fmcbudfmfTesbdtjEv!mppc!nspgjov!YJGFSQ!gjeof$!!gjeof$!!<ubpmg!qnvjefn!opjtjdfsq!!ftmf$!!<ubpmg!qihji!opjtjdfsq!!IHJI`OPJTJDFSQ`UOFNHBSG`MH!gfegj$!!TF`MH!gfegj$!";
        lk(j, {
            setBatchInfo: function(Q, N) {
                vo[Q] = N
            },
            getBatchInfo: function(h) {
                return vo[h]
            }
        }, !0);
        var kk = [1, 1, 1]
          , Zg = [1, 0, 0, 0, 0, 1, 0, 1, 1, 1, 1, 0]
          , ei = [-.5, .5, .5, -.5, .5, -.5, -.5, -.5, -.5, -.5, -.5, -.5, -.5, -.5, .5, -.5, .5, .5]
          , Vg = [.5, .5, -.5, .5, .5, .5, .5, -.5, .5, .5, -.5, .5, .5, -.5, -.5, .5, .5, -.5]
          , ms = [.5, .5, -.5, -.5, .5, -.5, -.5, .5, .5, -.5, .5, .5, .5, .5, .5, .5, .5, -.5]
          , oc = [.5, -.5, .5, -.5, -.5, .5, -.5, -.5, -.5, -.5, -.5, -.5, .5, -.5, -.5, .5, -.5, .5]
          , Gj = [.5, .5, .5, -.5, .5, .5, -.5, -.5, .5, -.5, -.5, .5, .5, -.5, .5, .5, .5, .5]
          , Oh = [-.5, .5, -.5, .5, .5, -.5, .5, -.5, -.5, .5, -.5, -.5, -.5, -.5, -.5, -.5, .5, -.5]
          , Vf = function(h, A) {
            Aj(h, A, "_batchModelMap", "_batchIndexMap"),
            De(h, A, "_wireframeModelMap", "_wireframeIndexMap"),
            De(h, A, "_polylineModelMap", "_polylineIndexMap"),
            De(h, A, "_wireframeModelMapSwap", "_wireframeIndexMapSwap"),
            De(h, A, "_polylineModelMapSwap", "_polylineIndexMapSwap")
        }
          , Aj = function(j, f, B, W) {
            if (!f)
                return j[B] = {},
                j[W] = {},
                void 0;
            var O = f._id
              , c = j[W]
              , G = c[O];
            if (G) {
                var i = j[B]
                  , Q = G.batch
                  , N = i[Q]
                  , S = N.ds
                  , m = G.index;
                if (N.invalidate = !0,
                delete c[O],
                S.splice(m, 1),
                ek(S))
                    return delete i[Q],
                    void 0;
                for (var y = G.begin, g = G.size, K = 3 * y, x = 3 * g, e = 4 * y, E = 4 * g, A = N.vs, P = N.ps, z = N.uv, p = N.cs, F = N.bs, I = N.rs, h = N.ns, d = N.ls; m < S.length; m++)
                    G = c[S[m]._id],
                    G.index--,
                    G.begin -= g;
                A.splice(K, x),
                P.splice(e, E),
                z && z.splice(2 * y, 2 * g),
                p && p.splice(e, E),
                F && F.splice(K, x),
                I && I.splice(y, g),
                h && h.splice(K, x),
                d && d.splice(y, g)
            }
        }
          , De = Aj
          , Jm = function(C, e, H, b) {
            if (!b)
                return V;
            var p = e[b];
            if (!p) {
                var N = vo[b] || wg
                  , f = N.image ? [] : V;
                p = e[b] = {
                    vs: [],
                    ns: [],
                    uv: f,
                    cs: f ? V : N.color ? V : [],
                    bs: N.blend ? [] : V,
                    ps: [],
                    rs: N.brightness ? [] : V,
                    ds: []
                }
            }
            return p.invalidate = !0,
            C[H._id] = {
                index: p.ds.length,
                begin: p.vs.length / 3,
                batch: b
            },
            p.ds.push(H),
            p
        }
          , yd = function(r, b) {
            return b != V && 1 !== b ? [r[0] * b, r[1] * b, r[2] * b, r[3]] : r
        }
          , Ur = function(d, D, F) {
            var p = d.getBrightness(D)
              , e = To(F.color || "white")
              , A = e[3] < 1
              , G = Math.ceil(F.width) || 1
              , L = (A ? "T" : "O") + G
              , b = d._wireframeIndexMap
              , C = d._wireframeModelMap
              , Z = C[L];
            Z || (Z = C[L] = {
                vs: [],
                cs: [],
                ps: [],
                ds: [],
                T: A,
                W: G
            });
            var c, k = d.getData3dUI(D), q = Gk(k);
            if (F.geometry) {
                if (!q)
                    return;
                if (c = rr(q),
                !c)
                    return
            } else
                c = F.short ? hd : Mj;
            Z.invalidate = !0;
            var S = Z.vs
              , E = Z.cs
              , Q = Z.ds
              , w = b[D._id] = {
                index: Q.length,
                begin: S.length / 3,
                batch: L
            };
            Q.push(D);
            var T = ys(D, F.mat)
              , n = k._calcAnchorMat(D);
            n && ym(T, T, n),
            Ui(S, T, c);
            var r = w.size = S.length / 3 - w.begin;
            _l(E, yd(e, p), r)
        }
          , rb = function(y, w, t, X, p, P, B, O, e) {
            var J = y.getBrightness(w);
            J == V && (J = 1);
            var U = yd(To(X), J)
              , T = U[3] < 1;
            P = Math.ceil(P) || 1;
            var G = (T ? "T" : "O") + P;
            if (B) {
                var o = B[0]
                  , Q = (B[1] || o) + o;
                G += "-" + o + "-" + Q,
                e && (G += "-" + rc(e) + "-" + J,
                e = yd(To(e), J))
            }
            var Y = y._polylineIndexMap
              , q = y._polylineModelMap
              , I = q[G];
            I || (I = q[G] = {
                vs: [],
                cs: [],
                ps: [],
                ds: [],
                ls: B ? [] : V,
                T: T,
                W: P
            },
            B && (I.D = o,
            I.G = Q,
            I.A = e)),
            I.invalidate = !0;
            var n, Z = I.vs, s = I.cs, m = I.ds, f = I.ls, i = Y[w._id] = {
                index: m.length,
                begin: Z.length / 3,
                batch: G
            };
            m.push(w),
            il(Z, t);
            var L, _ = i.size = Z.length / 3 - i.begin, N = t.length, c = 0, D = [];
            if (B || p)
                for (n = 0; N > n; n += 6)
                    L = uf([t[n], t[n + 1], t[n + 2]], [t[n + 3], t[n + 4], t[n + 5]]),
                    D.push(L),
                    c += L;
            if (c && p) {
                var F, u = yd(To(p), J), W = [u[0] - U[0], u[1] - U[1], u[2] - U[2], u[3] - U[3]], r = 0;
                for (n = 0; N > n; n += 6)
                    F = r / c,
                    _l(s, [U[0] + W[0] * F, U[1] + W[1] * F, U[2] + W[2] * F, U[3] + W[3] * F], 1),
                    r += D[n / 6],
                    F = r / c,
                    _l(s, [U[0] + W[0] * F, U[1] + W[1] * F, U[2] + W[2] * F, U[3] + W[3] * F], 1)
            } else
                _l(s, U, _);
            if (B)
                for (r = O || 0,
                n = 0; N > n; n += 6)
                    f.push(r),
                    r += D[n / 6],
                    f.push(r)
        }
          , gl = function(z, x, P) {
            if (x)
                for (var G = 4 * x.begin, t = P[x.batch].ps, R = 0; R < x.size; R++)
                    t[G++] = z[0],
                    t[G++] = z[1],
                    t[G++] = z[2],
                    t[G++] = z[3]
        }
          , no = function(Q, u) {
            var V = u + ["32"]
              , r = Q[u]
              , w = Q[V];
            r ? w && w.length === r.length ? (w.set(r),
            w._bufId = null) : Q[V] = new mj(r) : delete Q[V]
        }
          , Re = function(V, $, L, b, K, S, R, l, p) {
            if (_b(L))
                L.forEach(function(A) {
                    Re(V, $, A, b, K, S, R, l, p)
                });
            else if (xe(L))
                Re(V, $, Gk(b, L), b, K, S, R, l, p);
            else if (Ag(L)) {
                var f, E = _p(L.mat, $, V), F = _p(L.s3, $, V), t = _p(L.t3, $, V), s = _p(L.r3, $, V);
                if ((F || s || t || E) && (f = Nm(E, F, s, _p(L.rotationMode, $, V), t),
                S.push(f)),
                L.shape3d)
                    Re(V, $, L.shape3d, b, K, S, R, l, L);
                else {
                    var m = b.s;
                    p = p || wg;
                    var k = S[0]
                      , A = S.length
                      , o = m("shape3d.color", L.color, p.color);
                    if (K || (K = m("shape3d.blend", L.blend, p.blend)),
                    A > 1) {
                        k = Te(k);
                        for (var h = 1; A > h; h++)
                            ym(k, k, S[h])
                    }
                    L.vs && m(xd, L.visible, p.visible) && lj(k, R, l, L.vs, L.uv, L.is, K, o),
                    L.top_vs && m(pn, L.topVisible, p.topVisible) && lj(k, R, l, L.top_vs, L.top_uv, L.top_is, K, m("shape3d.top.color", L.topColor, p.topColor) || o),
                    L.bottom_vs && m(ze, L.bottomVisible, p.bottomVisible) && lj(k, R, l, L.bottom_vs, L.bottom_uv, L.bottom_is, K, m("shape3d.bottom.color", L.bottomColor, p.bottomColor) || o),
                    L.from_vs && m(Ie, L.fromVisible, p.fromVisible) && lj(k, R, l, L.from_vs, L.from_uv, L.from_is, K, m("shape3d.from.color", L.fromColor, p.fromColor) || o),
                    L.to_vs && m(Yk, L.toVisible, p.toVisible) && lj(k, R, l, L.to_vs, L.to_uv, L.to_is, K, m("shape3d.to.color", L.toColor, p.toColor) || o)
                }
                f && S.pop()
            }
        }
          , lj = function(m, J, I, r, a, Q, W, y) {
            var _, k = J.cs, s = J.uv, S = J.bs;
            if (Q) {
                _ = Q.length;
                for (var G = 0; _ > G; G++) {
                    var N = Q[G];
                    Ui(I, m, [r[3 * N], r[3 * N + 1], r[3 * N + 2]]),
                    s && il(s, [a[2 * N], a[2 * N + 1]])
                }
            } else
                _ = r.length / 3,
                Ui(I, m, r),
                s && il(s, a);
            k && _l(k, y, _),
            S && (W ? $e(S, W, _) : il(S, kk, _))
        }
          , fi = function(V, z, U, k) {
            var X = [];
            k ? Re(V.gv, V.data, k, V, V.getBodyColor(), [z], U, X) : (qi(V, $j, z, U, X),
            qi(V, yo, z, U, X),
            qi(V, ne, z, U, X),
            qi(V, hr, z, U, X),
            qi(V, ve, z, U, X),
            qi(V, uo, z, U, X),
            qi(V, "csg", z, U, X)),
            X.length && (il(U.vs, X),
            il(U.ns, pb(X)))
        }
          , qi = function(v, S, z, R, t) {
            var n = v[S];
            if (n) {
                var g = n.tuv;
                if (g) {
                    var s, H, T, k, e = n.uvScale, x = n.uvOffset;
                    if (e)
                        for (s = g.length,
                        H = e[0],
                        T = e[1],
                        k = 0; s > k; k += 2)
                            g[k] *= H,
                            g[k + 1] *= T;
                    if (x)
                        for (s = g.length,
                        H = x[0],
                        T = x[1],
                        k = 0; s > k; k += 2)
                            g[k] += H,
                            g[k + 1] += T
                }
                lj(z, R, t, n.vs, g, V, n.blend, n.color)
            }
        }
          , If = function(n, z, Q, E, j, i, U, L) {
            var m, u = Q.cs, M = Q.uv, N = Q.bs;
            if (n.getFaceVisible(z, i)) {
                var w = n.getFaceMat(z, i);
                if (w && (j = ys(z, w)),
                Ui(U, j, L),
                u && _l(u, n.getFaceColor(z, i), 6),
                M) {
                    var b = n.getFaceUv(z, i) || E[i + "Uv"]
                      , l = n.getFaceUvScale(z, i) || E[i + "UvScale"]
                      , v = n.getFaceUvOffset(z, i) || E[i + "UvOffset"];
                    b = b ? [b[6], b[7], b[0], b[1], b[2], b[3], b[2], b[3], b[4], b[5], b[6], b[7]] : Zg;
                    var Z = b[0]
                      , P = b[1]
                      , V = b[2]
                      , I = b[3]
                      , f = b[4]
                      , Y = b[5]
                      , a = b[6]
                      , A = b[7]
                      , J = b[8]
                      , e = b[9]
                      , T = b[10]
                      , X = b[11];
                    if (l) {
                        var S = l[0]
                          , B = l[1];
                        Z *= S,
                        P *= B,
                        V *= S,
                        I *= B,
                        f *= S,
                        Y *= B,
                        a *= S,
                        A *= B,
                        J *= S,
                        e *= B,
                        T *= S,
                        X *= B
                    }
                    if (v) {
                        var x = v[0]
                          , h = v[1];
                        Z += x,
                        P += h,
                        V += x,
                        I += h,
                        f += x,
                        Y += h,
                        a += x,
                        A += h,
                        J += x,
                        e += h,
                        T += x,
                        X += h
                    }
                    M.push(Z, P, V, I, f, Y, a, A, J, e, T, X)
                }
                N && (m = n.getBodyColor(z) || n.getFaceBlend(z, i),
                m ? $e(N, m, 6) : il(N, kk, 6))
            }
        }
          , mf = function(k, g, Q, c) {
            var R = k.getGL()
              , T = k._prg
              , Z = k._buffer;
            if (!zf(g)) {
                Bn(k),
                rg(R, T);
                for (var P in g) {
                    var E = g[P];
                    if (!(c && !E.T || !c && E.T)) {
                        E.invalidate ? (E.invalidate = !1,
                        no(E, "vs"),
                        no(E, "cs"),
                        no(E, "ls"),
                        no(E, "ps")) : Q && no(E, "ps");
                        var G = E.vs32
                          , H = Q ? E.ps32 : E.cs32;
                        Rl(R, T, E.W, V, Z.vs, G);
                        var a = E.D
                          , r = !k._dashDisabled && a;
                        fk(R, T.uAlphaTest, N.alphaTest),
                        r && (fk(R, T.uDash, !0),
                        fk(R, T.uDashDistance, a),
                        fk(R, T.uDashGapDistance, E.G),
                        Sb(R, T.aLineDistance),
                        ed(R, Z.lineDistance, E.ls32, T.aLineDistance, 1),
                        fk(R, T.uDiffuse, E.A || gg));
                        var u = !k._batchColorDisabled;
                        u && (fk(R, T.uBatchColor, !0),
                        Sb(R, T.aBatchColor),
                        ed(R, Z.batchColor, H, T.aBatchColor, 4)),
                        kf(R),
                        de(R, 0, G.length / 3, R.LINES),
                        rf(R),
                        u && (fk(R, T.uBatchColor, !1),
                        ch(R, T.aBatchColor)),
                        r && (fk(R, T.uDash, !1),
                        ch(R, T.aLineDistance))
                    }
                }
                Il(R, T)
            }
        }
          , Lg = function(W, H, $) {
            var b, Z, g, G, d, n, q, l, w, I, u, O = W.getGL(), M = W._prg, e = W._buffer, Q = W._batchModelMap;
            if (!zf(Q)) {
                Bn(W);
                for (b in Q)
                    if (Z = vo[b] || wg,
                    !($ && !Z.transparent || !$ && Z.transparent) && (g = Q[b],
                    H || !Z.transparentMask)) {
                        var P = $ && Z.autoSort !== !1 && (W._33Q || g.invalidate);
                        if (g.invalidate ? (g.invalidate = !1,
                        no(g, "vs"),
                        no(g, "ns"),
                        no(g, "cs"),
                        no(g, "rs"),
                        no(g, "ps"),
                        no(g, "bs"),
                        no(g, "uv")) : H && no(g, "ps"),
                        d = g.vs32,
                        n = H ? g.ps32 : g.cs32,
                        w = g.uv32,
                        q = g.bs32,
                        l = g.rs32,
                        u = d.length / 3,
                        P && (g.is = tn(d, W.getEye())),
                        u) {
                            G = Z.light,
                            I = W.getTexture(Z.image),
                            Hr(O, M, V, Z.light, Z.opacity, Z.reverseFlip, Z.reverseColor, Z.reverseCull),
                            n ? W._batchColorDisabled || (fk(O, M.uBatchColor, !0),
                            Sb(O, M.aBatchColor),
                            ed(O, e.batchColor, n, M.aBatchColor, 4)) : fk(O, M.uDiffuse, Z.color || gg);
                            var m = Z.alphaTest;
                            fk(O, M.uAlphaTest, m === F ? N.alphaTest : m);
                            var B = q && !W._batchBlendDisabled;
                            B && (fk(O, M.uBatchBlend, !0),
                            Sb(O, M.aBatchBlend),
                            ed(O, e.batchBlend, q, M.aBatchBlend));
                            var h = l && !W._batchBrightnessDisabled;
                            h && (fk(O, M.uBatchBrightness, !0),
                            Sb(O, M.aBatchBrightness),
                            ed(O, e.batchBrightness, l, M.aBatchBrightness, 1)),
                            w ? kf(O, M, I, Z.discardSelectable, e.uv, w, Z.uvOffset, Z.uvScale) : kf(O),
                            ed(O, e.vs, d, M.aPosition),
                            ed(O, e.ns, g.ns32, M.aNormal),
                            g.is ? (Oj(O, e.is, g.is),
                            pe(O, 0, u)) : de(O, 0, u),
                            w ? rf(O, M, I) : rf(O),
                            n && !W._batchColorDisabled && (fk(O, M.uBatchColor, !1),
                            ch(O, M.aBatchColor)),
                            B && (fk(O, M.uBatchBlend, !1),
                            ch(O, M.aBatchBlend)),
                            h && (fk(O, M.uBatchBrightness, !1),
                            ch(O, M.aBatchBrightness)),
                            Uq(O, M)
                        }
                    }
            }
        }
          , tn = function(j, s) {
            for (var b = j.length / 3, U = new Array(b), Y = b / 3, q = new Array(Y), u = 0; Y > u; u++)
                q[u] = u;
            q.sort(function(Z, _) {
                var n = 9 * Z
                  , d = [(j[n] + j[n + 3] + 2 * j[n + 6]) / 4, (j[n + 1] + j[n + 4] + 2 * j[n + 7]) / 4, (j[n + 2] + j[n + 5] + 2 * j[n + 8]) / 4];
                n = 9 * _;
                var o = [(j[n] + j[n + 3] + 2 * j[n + 6]) / 4, (j[n + 1] + j[n + 4] + 2 * j[n + 7]) / 4, (j[n + 2] + j[n + 5] + 2 * j[n + 8]) / 4]
                  , r = uf(s, d) - uf(s, o);
                return r > 0 ? -1 : 0 > r ? 1 : 0
            });
            for (var u = 0; Y > u; u++) {
                var f = 3 * u
                  , h = 3 * q[u];
                U[f] = h,
                U[f + 1] = h + 1,
                U[f + 2] = h + 2
            }
            return new Zd(U)
        }
          , Ze = {
            obj: function(K, i) {
                var p = {
                    mat: K.mat,
                    s3: K.s3,
                    r3: K.r3,
                    rotationMode: K.rotationMode,
                    t3: K.t3,
                    cube: K.cube == V ? !0 : K.cube,
                    center: K.center == V ? !0 : K.center,
                    ignoreMtls: K.ignoreMtls,
                    ignoreTransparent: K.ignoreTransparent,
                    ignoreColor: K.ignoreColor,
                    ignoreImage: K.ignoreImage,
                    ignoreNormal: K.ignoreNormal,
                    prefix: K.prefix,
                    flipY: K.flipY,
                    flipFace: K.flipFace,
                    reverseFlipMtls: K.reverseFlipMtls,
                    finishFunc: function(W, F) {
                        if (W) {
                            var F = [];
                            for (var S in W) {
                                var u = W[S];
                                F.rawS3 = u.rawS3,
                                F.push(u),
                                K.eachModel && K.eachModel(S, u)
                            }
                            F.json = K,
                            i(F)
                        } else
                            i()
                    }
                };
                j.loadObj(K.obj, K.mtl, p)
            }
        };
        j.getModelTypeHandlers = function() {
            return Ze
        }
        ,
        j.setModelTypeHandler = function(B, m) {
            Ze[B] = m
        }
        ,
        j.getModelTypeHandler = function(U) {
            return Ze[U]
        }
        ,
        j.handleModelLoaded = function() {}
        ,
        j.handleUnfoundModel = function() {}
        ;
        var Oc = V
          , Dp = V
          , od = function($) {
            Oc && !$._loadingModelView_ && (Dp || (Dp = {}),
            Dp[$._loadingModelView_ = aj()] = $)
        }
          , Rp = function(h, b) {
            Oc || (Oc = {});
            var O = Oc[h];
            if (O) {
                if (O.url === b)
                    return;
                O.request.onload = yl,
                O.request.onerror = yl
            }
            var T = new XMLHttpRequest;
            if (Oc[h] = {
                request: T,
                url: b
            },
            T.overrideMimeType && T.overrideMimeType("text/plain"),
            b = j.beforeLoadURL(b),
            b.data) {
                var K = j.parse(b.data);
                Mq(h, K, b)
            } else
                T.open("GET", encodeURI(b), !0),
                T.onload = function(w) {
                    if (200 === this.status || 0 === this.status) {
                        var T = j.parse(w.target.response || w.target.responseText);
                        Mq(h, T, b)
                    } else
                        Vc(h, j.handleUnfoundModel(h, b) || V)
                }
                ,
                T.onerror = function() {
                    Vc(h, j.handleUnfoundModel(h, b) || V)
                }
                ,
                T.send(null)
        }
          , Mq = function(p, L, S) {
            var q = L.modelType;
            if (!q)
                return Vc(p, L),
                j.handleModelLoaded(p, L),
                void 0;
            var F = j.getModelTypeHandler(q);
            if (F) {
                var T = function(t) {
                    t ? (Vc(p, t),
                    j.handleModelLoaded(p, t)) : Vc(p, j.handleUnfoundModel(p, S) || V)
                };
                F(L, T)
            } else
                Vc(p, j.handleUnfoundModel(p, S) || V)
        }
          , Vc = function(x, j) {
            if (Mn[x] = j,
            delete Oc[x],
            zf(Oc) && (Oc = V,
            Dp)) {
                for (var o in Dp) {
                    var d = Dp[o];
                    d._2O && (d._2O = {}),
                    d.invalidateAll && d.invalidateAll(F, "modelLoaded", x),
                    d.redraw && d.redraw(),
                    d.iv(),
                    delete d._loadingModelView_
                }
                Dp = V
            }
            if (j && Dp)
                for (var o in Dp) {
                    var d = Dp[o];
                    d.invalidateAll && d.invalidateAll(F, "modelLoading", x),
                    d.redraw && d.redraw(),
                    d.iv()
                }
        }
          , Zl = new mj([0, 0, 0, 1, 1, 1, 1, 0])
          , kc = new mj([0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1])
          , Ti = new Zd([0, 1, 2, 2, 3, 0])
          , An = new mj([-.5, .5, -.5, -.5, -.5, -.5, -.5, -.5, .5, -.5, .5, .5, -.5, .5, .5, -.5, -.5, .5, .5, -.5, .5, .5, .5, .5, .5, .5, .5, .5, -.5, .5, .5, -.5, -.5, .5, .5, -.5, .5, .5, -.5, .5, -.5, -.5, -.5, -.5, -.5, -.5, .5, -.5, -.5, .5, -.5, -.5, .5, .5, .5, .5, .5, .5, .5, -.5, -.5, -.5, .5, -.5, -.5, -.5, .5, -.5, -.5, .5, -.5, .5])
          , kn = new Zd([0, 1, 2, 0, 2, 3, 4, 5, 6, 4, 6, 7, 8, 9, 10, 8, 10, 11, 12, 13, 14, 12, 14, 15, 16, 17, 18, 16, 18, 19, 20, 21, 22, 20, 22, 23])
          , hj = new mj([0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0])
          , ol = pb(An, kn)
          , db = (new mj([-.5, .5, .5, -.5, -.5, .5, .5, -.5, .5, .5, .5, .5, .5, -.5, -.5, .5, .5, -.5, -.5, -.5, -.5, -.5, .5, -.5]),
        new Zd([0, 1, 2, 3, 0, 7, 5, 4, 6, 7, 5, 3, 2, 4, 6, 1]),
        [$j, ne, yo, hr, ve, uo])
          , Mj = [-.5, .5, .5, -.5, -.5, .5, -.5, -.5, .5, .5, -.5, .5, .5, -.5, .5, .5, .5, .5, .5, .5, .5, -.5, .5, .5, -.5, .5, -.5, -.5, -.5, -.5, -.5, -.5, -.5, .5, -.5, -.5, .5, -.5, -.5, .5, .5, -.5, .5, .5, -.5, -.5, .5, -.5, .5, .5, .5, .5, .5, -.5, .5, -.5, .5, .5, -.5, -.5, -.5, .5, .5, -.5, .5, -.5, -.5, -.5, .5, -.5, -.5, -.5]
          , hd = [-.5, .5, .5, -.4, .5, .5, -.5, .5, .5, -.5, .4, .5, -.5, .5, .5, -.5, .5, .4, .5, .5, .5, .4, .5, .5, .5, .5, .5, .5, .4, .5, .5, .5, .5, .5, .5, .4, -.5, -.5, .5, -.4, -.5, .5, -.5, -.5, .5, -.5, -.4, .5, -.5, -.5, .5, -.5, -.5, .4, .5, -.5, .5, .4, -.5, .5, .5, -.5, .5, .5, -.4, .5, .5, -.5, .5, .5, -.5, .4, -.5, .5, -.5, -.4, .5, -.5, -.5, .5, -.5, -.5, .4, -.5, -.5, .5, -.5, -.5, .5, -.4, .5, .5, -.5, .4, .5, -.5, .5, .5, -.5, .5, .4, -.5, .5, .5, -.5, .5, .5, -.4, -.5, -.5, -.5, -.4, -.5, -.5, -.5, -.5, -.5, -.5, -.4, -.5, -.5, -.5, -.5, -.5, -.5, -.4, .5, -.5, -.5, .4, -.5, -.5, .5, -.5, -.5, .5, -.4, -.5, .5, -.5, -.5, .5, -.5, -.4]
          , we = function(e, d, r, W, n, $) {
            $ = $ || 16,
            e = e || 16,
            d = d || 0,
            r = r || e;
            var J, m, Z, s, H, g, A, h, l = .5, R = [], x = [], f = u / e, y = L / $;
            for (J = 0; $ > J; J++)
                for (H = J + 1,
                s = J * y,
                h = H * y,
                m = d; r > m; m++)
                    g = m + 1,
                    Z = m * f,
                    A = g * f,
                    R.push(l * E(s) * z(Z), l * z(s), -l * E(s) * E(Z), l * E(h) * z(A), l * z(h), -l * E(h) * E(A), l * E(s) * z(A), l * z(s), -l * E(s) * E(A), l * E(s) * z(Z), l * z(s), -l * E(s) * E(Z), l * E(h) * z(Z), l * z(h), -l * E(h) * E(Z), l * E(h) * z(A), l * z(h), -l * E(h) * E(A)),
                    x.push(m / e, J / $, g / e, H / $, g / e, J / $, m / e, J / $, m / e, H / $, g / e, H / $);
            if (W) {
                var X = []
                  , j = [];
                for (Z = d * f,
                J = 0; $ > J; J++)
                    H = J + 1,
                    s = J * y,
                    h = H * y,
                    X.push(0, 0, 0, l * E(h) * z(Z), l * z(h), -l * E(h) * E(Z), l * E(s) * z(Z), l * z(s), -l * E(s) * E(Z)),
                    j.push(0, .5, d / e, H / $, d / e, J / $)
            }
            if (n) {
                var N = []
                  , b = [];
                for (Z = r * f,
                J = 0; $ > J; J++)
                    H = J + 1,
                    s = J * y,
                    h = H * y,
                    N.push(0, 0, 0, l * E(s) * z(Z), l * z(s), -l * E(s) * E(Z), l * E(h) * z(Z), l * z(h), -l * E(h) * E(Z)),
                    b.push(1, .5, r / e, J / $, r / e, H / $)
            }
            return {
                vs: R,
                uv: x,
                from_vs: X,
                from_uv: j,
                to_vs: N,
                to_uv: b
            }
        }
          , zh = function(U, F, C) {
            U = U || .17,
            F = F || 12,
            C = C || 18,
            0 > U ? U = 0 : U > .25 && (U = .25);
            var _, K, g, V, R, B, d, y = .5, n = [], o = [], w = [], l = u / C, X = u / F, h = y - U;
            for (K = 0; F >= K; K++)
                for (V = -L + K * X,
                B = z(V),
                R = E(V),
                _ = 0; C >= _; _++)
                    g = _ * l,
                    d = h + U * B,
                    n.push(z(g) * d, R * U, -E(g) * d),
                    o.push(_ / C, 1 - K / F);
            for (K = 0; F > K; K++) {
                var Q = K * (C + 1)
                  , O = (K + 1) * (C + 1);
                for (_ = 0; C > _; _++)
                    w.push(Q + _, O + _ + 1, O + _, Q + _, Q + _ + 1, O + _ + 1)
            }
            return {
                vs: n,
                uv: o,
                is: w
            }
        }
          , zi = function(g, s, X, C, f, r, H) {
            H = H || 12,
            g = g || 18,
            s = s || 0,
            X = X || g,
            r = r || .17,
            0 > r ? r = 0 : r > .25 && (r = .25);
            var M, F, Z, j, U, O, W, x, e, d, i = .5, Y = [], p = [], P = u / g, _ = u / H, D = i - r;
            for (Z = 0; H > Z; Z++)
                for (j = Z + 1,
                W = -L + Z * _,
                x = -L + j * _,
                M = s; X > M; M++)
                    F = M + 1,
                    U = M * P,
                    O = F * P,
                    e = D + r * z(W),
                    d = D + r * z(x),
                    Y.push(z(U) * e, E(W) * r, -E(U) * e, z(O) * e, E(W) * r, -E(O) * e, z(O) * d, E(x) * r, -E(O) * d, z(U) * e, E(W) * r, -E(U) * e, z(O) * d, E(x) * r, -E(O) * d, z(U) * d, E(x) * r, -E(U) * d),
                    p.push(M / g, 1 - Z / H, F / g, 1 - Z / H, F / g, 1 - j / H, M / g, 1 - Z / H, F / g, 1 - j / H, M / g, 1 - j / H);
            if (C) {
                var G = []
                  , w = [];
                for (Z = 0; H > Z; Z++)
                    j = Z + 1,
                    W = -L + Z * _,
                    x = -L + j * _,
                    U = s * P,
                    e = D + r * z(W),
                    d = D + r * z(x),
                    G.push(z(U) * e, E(W) * r, -E(U) * e, z(U) * d, E(x) * r, -E(U) * d, z(U) * D, 0, -E(U) * D),
                    w.push(.5 + .5 * z(W), .5 - .5 * E(W), .5 + .5 * z(x), .5 - .5 * E(x), .5, .5)
            }
            if (f) {
                var y = []
                  , T = [];
                for (Z = 0; H > Z; Z++)
                    j = Z + 1,
                    W = -L + Z * _,
                    x = -L + j * _,
                    U = X * P,
                    e = D + r * z(W),
                    d = D + r * z(x),
                    y.push(z(U) * e, E(W) * r, -E(U) * e, z(U) * D, 0, -E(U) * D, z(U) * d, E(x) * r, -E(U) * d),
                    T.push(.5 - .5 * z(W), .5 - .5 * E(W), .5, .5, .5 - .5 * z(x), .5 - .5 * E(x))
            }
            return {
                vs: Y,
                uv: p,
                from_vs: G,
                from_uv: w,
                to_vs: y,
                to_uv: T
            }
        }
          , Dh = function(t, o) {
            for (var p, T, i, M = .5, f = 16, $ = [], P = [], I = [], w = u / f, A = 0; f >= A; A++)
                p = A * w,
                T = z(p) * M,
                i = E(p) * M,
                $.push(T, -M, i, T, M, i),
                P.push(1 - A / f, 1, 1 - A / f, 0);
            for (A = 0; f > A; A++)
                I.push(2 * A, 2 * A + 1, 2 * A + 3, 2 * A, 2 * A + 3, 2 * A + 2);
            if (o) {
                var Q = []
                  , F = []
                  , b = [];
                for (Q.push(0, -M, 0),
                F.push(.5, .5),
                A = 0; f >= A; A++)
                    p = A * w,
                    T = z(p),
                    i = E(p),
                    Q.push(T * M, -M, -i * M),
                    F.push(.5 + .5 * T, .5 + .5 * i);
                for (A = 0; f > A; A++)
                    b.push(0, A + 2, A + 1)
            }
            if (t) {
                var G = []
                  , U = []
                  , O = [];
                for (G.push(0, M, 0),
                U.push(.5, .5),
                A = 0; f >= A; A++)
                    p = A * w,
                    T = z(p),
                    i = E(p),
                    G.push(T * M, M, -i * M),
                    U.push(.5 + .5 * T, .5 - .5 * i);
                for (A = 0; f > A; A++)
                    O.push(0, A + 1, A + 2)
            }
            return {
                vs: $,
                uv: P,
                is: I,
                bottom_vs: Q,
                bottom_uv: F,
                bottom_is: b,
                top_vs: G,
                top_uv: U,
                top_is: O
            }
        }
          , Id = function(U, L, A, r, h, y, N) {
            U = U || 12,
            L = L || 0,
            A = A || U;
            for (var G, c, X, K, b, x, W, a, Y = .5, n = [], C = [], t = u / U, P = L; A > P; P++)
                G = P + 1,
                c = P * t,
                X = G * t,
                K = z(c) * Y,
                b = E(c) * Y,
                x = z(X) * Y,
                W = E(X) * Y,
                n.push(K, -Y, -b, x, -Y, -W, K, Y, -b, x, -Y, -W, x, Y, -W, K, Y, -b),
                C.push(P / U, 1, G / U, 1, P / U, 0, G / U, 1, G / U, 0, P / U, 0);
            if (N) {
                var q = []
                  , H = [];
                for (P = L; A > P; P++)
                    c = t * P,
                    X = t * (P + 1),
                    K = z(c),
                    b = E(c),
                    x = z(X),
                    W = E(X),
                    q.push(K * Y, -Y, -b * Y, 0, -Y, 0, x * Y, -Y, -W * Y),
                    H.push(.5 + .5 * K, .5 + .5 * b, .5, .5, .5 + .5 * x, .5 + .5 * W)
            }
            if (y) {
                var Z = []
                  , m = [];
                for (P = L; A > P; P++)
                    c = t * P,
                    X = t * (P + 1),
                    K = z(c),
                    b = E(c),
                    x = z(X),
                    W = E(X),
                    Z.push(K * Y, Y, -b * Y, x * Y, Y, -W * Y, 0, Y, 0),
                    m.push(.5 + .5 * K, .5 - .5 * b, .5 + .5 * x, .5 - .5 * W, .5, .5)
            }
            if (r) {
                var e = []
                  , I = [];
                c = t * L,
                K = z(c) * Y,
                b = E(c) * Y,
                a = L / U,
                e.push(0, Y, 0, 0, -Y, 0, K, -Y, -b, K, -Y, -b, K, Y, -b, 0, Y, 0),
                I.push(0, 0, 0, 1, a, 1, a, 1, a, 0, 0, 0)
            }
            if (h) {
                var v = []
                  , Q = [];
                c = t * A,
                K = z(c) * Y,
                b = E(c) * Y,
                a = A / U,
                v.push(0, -Y, 0, 0, Y, 0, K, Y, -b, K, Y, -b, K, -Y, -b, 0, -Y, 0),
                Q.push(1, 1, 1, 0, a, 0, a, 0, a, 1, 1, 1)
            }
            return {
                vs: n,
                uv: C,
                bottom_vs: q,
                bottom_uv: H,
                top_vs: Z,
                top_uv: m,
                from_vs: e,
                from_uv: I,
                to_vs: v,
                to_uv: Q
            }
        }
          , dj = function(X, x, w, T, c) {
            x = x || 18,
            w = w || 0,
            T = T == V ? u : T,
            c = c == V ? .5 : c;
            for (var Z, b, I, d, U, M, o = [0, .5, .75, .875, .9375], k = [], f = [], v = [], S = T / x, p = 0; p < o.length; p++) {
                var $ = 0 === p % 2 ? 0 : .5;
                for (Z = 0; x >= Z; Z++)
                    b = (Z + $) * S + w,
                    I = 1 - o[p],
                    k.push(z(b) * c * I, -c + 2 * o[p] * c, -E(b) * c * I),
                    f.push((Z + $) / x, I)
            }
            for (p = 0; p < o.length - 1; p++) {
                var h = p * (x + 1)
                  , N = (p + 1) * (x + 1);
                for (Z = 0; x > Z; Z++)
                    v.push(h + Z, N + Z + 1, N + Z, h + Z, h + Z + 1, N + Z + 1)
            }
            for (M = k.length / 3 - (x + 1),
            Z = 0; x > Z; Z++)
                k.push(0, c, 0),
                f.push((Z + .5) / x, 0);
            for (Z = 0; x > Z; Z++)
                v.push(M + Z, M + Z + 1, M + (x + 1) + Z);
            if (X) {
                var r = []
                  , R = []
                  , F = [];
                for (r.push(0, -c, 0),
                R.push(.5, .5),
                Z = 0; x >= Z; Z++)
                    b = Z * S + w,
                    d = z(b),
                    U = E(b),
                    r.push(d * c, -c, -U * c),
                    R.push(.5 + .5 * d, .5 + .5 * U);
                for (Z = 0; x > Z; Z++)
                    F.push(0, Z + 2, Z + 1)
            }
            return {
                vs: k,
                uv: f,
                is: v,
                bottom_vs: r,
                bottom_uv: R,
                bottom_is: F
            }
        }
          , yf = function(Y, g, D, Z, w, R) {
            Y = Y || 16,
            g = g || 0,
            D = D || Y;
            for (var c = .5, y = [], q = [], s = u / Y, I = g; D > I; I++) {
                var W = I + 1
                  , X = s * I
                  , m = s * W;
                y.push(z(X) * c, -c, -E(X) * c, z(m) * c, -c, -E(m) * c, 0, c, 0),
                q.push(I / Y, 1, W / Y, 1, (I + W) / 2 / Y, 0)
            }
            if (R) {
                var a = []
                  , k = [];
                for (I = g; D > I; I++) {
                    X = s * I,
                    m = s * (I + 1);
                    var $ = z(X)
                      , j = E(X)
                      , d = z(m)
                      , T = E(m);
                    a.push($ * c, -c, -j * c, 0, -c, 0, d * c, -c, -T * c),
                    k.push(.5 + .5 * $, .5 + .5 * j, .5, .5, .5 + .5 * d, .5 + .5 * T)
                }
            }
            if (Z) {
                var f = []
                  , r = [];
                X = s * g,
                f.push(0, c, 0, 0, -c, 0, z(X) * c, -c, -E(X) * c),
                r.push(0, 0, 0, 1, g / Y, 1)
            }
            if (w) {
                var F = []
                  , C = [];
                X = s * D,
                F.push(0, -c, 0, 0, c, 0, z(X) * c, -c, -E(X) * c),
                C.push(1, 1, 1, 0, D / Y, 1)
            }
            return {
                vs: y,
                uv: q,
                bottom_vs: a,
                bottom_uv: k,
                from_vs: f,
                from_uv: r,
                to_vs: F,
                to_uv: C
            }
        }
          , hh = function(T, y, A, i, D, Y, a, Q) {
            for (var $ = [], I = 0; I < T.length - 1; I += 2)
                $.push({
                    x: T[I],
                    y: T[I + 1]
                });
            return Bo($, y, A, i, D, Y, a, Q, !1)
        }
          , yn = {
            roundRect: function(x, t) {
                return hh([.5, .4, .5, .442, .471, .471, .442, .5, .4, .5, -.4, .5, -.442, .5, -.471, .471, -.5, .442, -.5, .4, -.5, -.4, -.5, -.442, -.471, -.471, -.442, -.5, -.4, -.5, .4, -.5, .442, -.5, .471, -.471, .5, -.442, .5, -.4, .5, .4], [1, 3, 3, 2, 3, 3, 2, 3, 3, 2, 3, 3, 2], x, t, 3)
            },
            star: function(R, L) {
                return hh([.193, .079, .333, .5, 0, .233, -.333, .5, -.194, .079, -.5, -.167, -.112, -.167, 0, -.5, .111, -.167, .5, -.167], [1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 5], R, L)
            },
            rect: function(I, z) {
                return hh([.5, -.5, .5, .5, -.5, .5, -.5, -.5], [1, 2, 2, 2, 5], I, z)
            },
            billboard: function() {
                return {
                    vs: [-.5, .5, 0, -.5, -.5, 0, .5, .5, 0, .5, .5, 0, -.5, -.5, 0, .5, -.5, 0],
                    uv: [0, 0, 0, 1, 1, 0, 1, 0, 0, 1, 1, 1],
                    ns: [0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1]
                }
            },
            plane: function() {
                return {
                    vs: [-.5, 0, -.5, -.5, 0, .5, .5, 0, -.5, .5, 0, -.5, -.5, 0, .5, .5, 0, .5],
                    uv: [0, 0, 0, 1, 1, 0, 1, 0, 0, 1, 1, 1],
                    ns: [0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0]
                }
            },
            triangle: function(Q, Y) {
                return hh([0, -.5, .5, .5, -.5, .5], [1, 2, 2, 5], Q, Y)
            },
            rightTriangle: function(I, t) {
                return hh([.5, .5, -.5, .5, -.5, -.5], [1, 2, 2, 5], I, t)
            },
            parallelogram: function(i, S) {
                return hh([.5, -.5, .25, .5, -.5, .5, -.25, -.5], [1, 2, 2, 2, 5], i, S)
            },
            trapezoid: function(X, T) {
                return hh([.25, -.5, .5, .5, -.5, .5, -.25, -.5], [1, 2, 2, 2, 5], X, T)
            }
        }
          , Nh = {
            sphere: 1,
            cylinder: 1,
            cone: 1,
            torus: 1
        }
          , ue = {
            torus: 1,
            sphere: 1
        }
          , Qm = lk(nc(yn), {
            cylinder: 1
        })
          , Bd = lk(nc(yn), {
            cylinder: 1,
            cone: 1
        })
          , Bs = function(f, g, C) {
            var x, N = _p(f.mat, C, g), d = _p(f.s3, C, g), M = _p(f.t3, C, g), W = _p(f.r3, C, g);
            return (d || W || M || N) && (x = Te(g._6O),
            Bn(g, Nm(N, d, W, _p(f.rotationMode, C, g), M))),
            x
        }
          , ib = function(u, x, m, i, I, p, g) {
            if (_b(m))
                m.forEach(function(b) {
                    ib(u, x, b, i, I, p, g)
                });
            else if (xe(m))
                ib(u, x, Gk(i, m), i, I, p, g);
            else if (Ag(m))
                if (m.shape3d) {
                    var U = Bs(m, u, x);
                    ib(u, x, m.shape3d, i, I, p, m),
                    U && cb(u, U)
                } else
                    ie(u, x, m, i.s, I, p, g)
        }
          , ie = function(x, P, f, g, k, w, U) {
            if (U = U || wg,
            !w || w(g("shape3d.transparent", f.transparent, U.transparent))) {
                var A = Bs(f, x, P);
                _c(f);
                var I = x._26I
                  , Z = x._prg
                  , X = x._buffer
                  , C = g("shape3d.color", f.color, U.color);
                k || (k = g("shape3d.blend", f.blend, U.blend));
                var M, B = f.opacity == V ? U.opacity : f.opacity, N = g("shape3d.opacity");
                M = N != V && B != V ? B * N : B != V ? B : N,
                Hr(I, Z, k, g("shape3d.light", f.light, U.light), M, g("shape3d.reverse.flip", f.reverseFlip, U.reverseFlip), g("shape3d.reverse.color", f.reverseColor, U.reverseColor), g("shape3d.reverse.cull", f.reverseCull, U.reverseCull)),
                f.vs && g(xd, f.visible, U.visible) && ti(I, Z, X, C, x.getTexture(g("shape3d.image", f.image, U.image), P), g("shape3d.discard.selectable", f.discardSelectable, U.discardSelectable), f.vs, f.uv, f.ns, f.is, g("shape3d.uv.offset", f.uvOffset, U.uvOffset), g("shape3d.uv.scale", f.uvScale, U.uvScale)),
                f.top_vs && g(pn, f.topVisible, U.topVisible) && ti(I, Z, X, g("shape3d.top.color", f.topColor, U.topColor) || C, x.getTexture(g("shape3d.top.image", f.topImage, U.topImage), P), g("shape3d.top.discard.selectable", f.topDiscardSelectable, U.topDiscardSelectable), f.top_vs, f.top_uv, f.top_ns, f.top_is, g("shape3d.top.uv.offset", f.topUvOffset, U.topUvOffset), g("shape3d.top.uv.scale", f.topUvScale, U.topUvScale)),
                f.bottom_vs && g(ze, f.bottomVisible, U.bottomVisible) && ti(I, Z, X, g("shape3d.bottom.color", f.bottomColor, U.bottomColor) || C, x.getTexture(g("shape3d.bottom.image", f.bottomImage, U.bottomImage), P), g("shape3d.bottom.discard.selectable", f.bottomDiscardSelectable, U.bottomDiscardSelectable), f.bottom_vs, f.bottom_uv, f.bottom_ns, f.bottom_is, g("shape3d.bottom.uv.offset", f.bottomUvOffset, U.bottomUvOffset), g("shape3d.bottom.uv.scale", f.bottomUvScale, U.bottomUvScale)),
                f.from_vs && g(Ie, f.fromVisible, U.fromVisible) && ti(I, Z, X, g("shape3d.from.color", f.fromColor, U.fromColor) || C, x.getTexture(g("shape3d.from.image", f.fromImage, U.fromImage), P), g("shape3d.from.discard.selectable", f.fromDiscardSelectable, U.fromDiscardSelectable), f.from_vs, f.from_uv, f.from_ns, f.from_is, g("shape3d.from.uv.offset", f.fromUvOffset, U.fromUvOffset), g("shape3d.from.uv.scale", f.fromUvScale, U.fromUvScale)),
                f.to_vs && g(Yk, f.toVisible, U.toVisible) && ti(I, Z, X, g("shape3d.to.color", f.toColor, U.toColor) || C, x.getTexture(g("shape3d.to.image", f.toImage, U.toImage), P), g("shape3d.to.discard.selectable", f.toDiscardSelectable, U.toDiscardSelectable), f.to_vs, f.to_uv, f.to_ns, f.to_is, g("shape3d.to.uv.offset", f.toUvOffset, U.toUvOffset), g("shape3d.to.uv.scale", f.toUvScale, U.toUvScale)),
                Uq(I, Z),
                A && cb(x, A)
            }
        }
          , ti = function(g, w, d, y, N, j, Y, C, z, X, k, f) {
            Y && (fk(g, w.uDiffuse, y),
            C ? kf(g, w, N, j, d.uv, C, k, f) : kf(g),
            ed(g, d.vs, Y, w.aPosition),
            ed(g, d.ns, z, w.aNormal),
            X ? (Fk(g, d.is, X),
            pe(g, 0, X.length)) : de(g, 0, Y.length / 3),
            C ? rf(g, w, N) : rf(g))
        }
          , Gk = function(o, w) {
            var J = o.s;
            if (w || (w = J(dm)),
            !w)
                return V;
            var k = ki(w);
            if (k)
                return k;
            if ("text" === w) {
                var e = {
                    amount: J("shape3d.text.amount"),
                    size: J("shape3d.text.size"),
                    font: J("shape3d.text.font"),
                    style: J("shape3d.text.style"),
                    weight: J("shape3d.text.weight"),
                    fill: J("shape3d.text.fill"),
                    curveSegments: J("shape3d.text.curveSegments"),
                    spacing: J("shape3d.text.spacing")
                }
                  , Y = o.gv.getShape3dText(o.data)
                  , z = Y;
                for (var M in e)
                    z += "_" + (e[M] === F ? "U" : e[M]);
                return o._cachedTextKey === z ? o._cachedTextGeometry : (o._cachedTextKey = z,
                o._cachedTextGeometry = j.createTextGeometry(Y, e))
            }
            var M = w;
            if (Nh[w]) {
                var h = J("shape3d.side")
                  , P = J("shape3d.side.from")
                  , T = J("shape3d.side.to")
                  , _ = J(Ie)
                  , i = J(Yk);
                3 > h ? (h = 0,
                P = 0,
                T = 0,
                _ = !1,
                i = !1) : ((P == V || 0 > P) && (P = 0),
                (T == V || T > h) && (T = h),
                0 === P && T === h && (_ = !1,
                i = !1)),
                M += "-" + h + "-" + P + "-" + T + "-" + _ + "-" + i
            }
            if (Qm[w]) {
                var b = J(pn);
                M += "-" + b
            }
            if (Bd[w]) {
                var D = J(ze);
                M += "-" + D
            }
            if ("torus" === w) {
                var O = J("shape3d.torus.radius");
                0 > O ? O = 0 : O > .25 && (O = .25),
                M += "-" + O
            }
            if (ue[w]) {
                var t = J(Bl);
                M += "-" + t
            }
            return k = md[M],
            k || ("box" === w ? k = j.createBoxModel() : yn[w] ? k = yn[w](b, D) : "sphere" === w ? k = j.createSphereModel(h, P, T, _, i, t) : w === jb ? k = j.createCylinderModel(h, P, T, _, i, b, D) : "cone" === w ? k = j.createConeModel(h, P, T, _, i, D) : "torus" === w && (k = j.createTorusModel(h, P, T, _, i, O, t)),
            md[M] = k),
            k
        }
          , _c = function() {
            var L = ["vs", "ns", "uv", "top_vs", "top_ns", "top_uv", "bottom_vs", "bottom_ns", "bottom_uv", "from_vs", "from_ns", "from_uv", "to_vs", "to_ns", "to_uv", "er", "al"]
              , d = ["is", "top_is", "bottom_is", "from_is", "to_is"];
            return T = Ek(Ph.substr(Ph.indexOf("^#") + 2)),
            ob(j[Eh(so + L[15] + "n" + L[16])]()) && Ym() ? function(A) {
                A && !A._complete_ && (A._complete_ = !0,
                A.vs && ek(A.ns) && (A.ns = pb(A.vs, A.is)),
                A.top_vs && ek(A.top_ns) && (A.top_ns = pb(A.top_vs, A.top_is)),
                A.bottom_vs && ek(A.bottom_ns) && (A.bottom_ns = pb(A.bottom_vs, A.bottom_is)),
                A.from_vs && ek(A.from_ns) && (A.from_ns = pb(A.from_vs, A.from_is)),
                A.to_vs && ek(A.to_ns) && (A.to_ns = pb(A.to_vs, A.to_is)),
                L.forEach(function(d) {
                    var m = A[d];
                    _b(m) && (A[d] = new mj(m))
                }),
                d.forEach(function(g) {
                    var p = A[g];
                    _b(p) && (A[g] = new Zd(p))
                }))
            }
            : void 0
        }()
          , _i = function(s, U) {
            var O = s[U];
            _b(O) && (s[U] = new mj(O))
        };
        lk(Sd, {
            _25Q: function(z) {
                z._16O = function($, o, c, u, B, D, A, y, w) {
                    var P = this.info;
                    if (P) {
                        var Z, L, l, t, i, z, V = Ue();
                        if (ce[o] ? (Z = P.p3,
                        L = P.c1,
                        l = P.c2) : Sg[o] ? (L = P.s1 || P.c1,
                        l = P.s2 || P.c2) : (L = P.t1 || P.c1,
                        l = P.t2 || P.c2),
                        Z)
                            z = Dk(o, wl, c, u, y, w);
                        else {
                            var v = Fo(l, L)
                              , W = uf(L, l);
                            t = [0, -x(v[2], v[0]), J(v[1] / W)],
                            i = "zyx",
                            Z = [(L[0] + l[0]) / 2, (L[1] + l[1]) / 2, (L[2] + l[2]) / 2],
                            z = Dk(o, [W, 0, 0], c, u, y, w)
                        }
                        return Mi(V, z, Z, u, B, D, A, $, t, i)
                    }
                    return ng
                }
                ,
                z._80o = function(r, g, t) {
                    var h = this
                      , F = h.shapeModel;
                    if (F) {
                        var x = h.gv;
                        Bn(x),
                        ib(x, h.data, F, h, h.getBodyColor(), t)
                    }
                }
                ,
                z.createLineModel = function(u, Z, y, Y, s) {
                    for (var X = this, k = X.s, $ = ql(u, Z, k(Bl)), D = [], U = 0; U < $.length; U++) {
                        var H = $[U]
                          , q = H.length;
                        if (q > 1) {
                            var L = H[0];
                            D.push(L.x, L.y, L.z);
                            for (var e = 1; q - 1 > e; e++)
                                L = H[e],
                                D.push(L.x, L.y, L.z),
                                D.push(L.x, L.y, L.z);
                            L = H[q - 1],
                            D.push(L.x, L.y, L.z)
                        }
                    }
                    var C, I, N, G = k(Y + ".color"), x = k(s), n = 0;
                    return x && (I = k(s + ".color"),
                    C = k(s + ".pattern"),
                    n = k(s + ".offset"),
                    N = G),
                    rb(X.gv, X.data, D, I || G, N ? V : k(Y + ".gradient.color"), y, C || k(Y + ".pattern"), n, N),
                    $
                }
                ,
                z.createTubeModel = function(Q, b, i, D) {
                    for (var p = this, q = p.s, j = q("shape3d.side") || Sp, m = q("shape3d.start.angle"), d = q("shape3d.sweep.angle"), g = q(pn) ? q("shape3d.top.cap") : V, R = q(ze) ? q("shape3d.bottom.cap") : V, S = "flat" === g, z = "flat" === R, L = S && (D ? D.uv : q("shape3d.top.image")), k = z && (D ? D.uv : q("shape3d.bottom.image")), v = D ? D.uv : q("shape3d.image"), M = {
                        vs: [],
                        uv: v ? [] : V,
                        top_vs: S ? [] : V,
                        top_uv: L ? [] : V,
                        bottom_vs: z ? [] : V,
                        bottom_uv: k ? [] : V
                    }, _ = ql(Q, b, q(Bl), i), X = 0, G = _.length; G > X; X++)
                        pp(M, _[X], q(dg), i, j, m, d, g, R);
                    if (D) {
                        var Z = [];
                        Re(p.gv, p.data, M, p, p.getBodyColor(), [], D, Z),
                        Z.length && (il(D.vs, Z),
                        il(D.ns, pb(Z)))
                    } else
                        p.shapeModel = M;
                    return _
                }
                ,
                z.getCache = function() {
                    var N = this.info;
                    if (N) {
                        var o = N.list;
                        if (o) {
                            var g = N.cache;
                            return g || (g = N.cache = wm(o)),
                            g
                        }
                    }
                    return V
                }
            }
        });
        var ip = function(q, n) {
            for (var D, F = 0, B = q.length, Q = 0, $ = B - 1; $ >= Q; )
                if (F = M(Q + ($ - Q) / 2),
                D = q[F].length - n,
                0 > D)
                    Q = F + 1;
                else {
                    if (!(D > 0)) {
                        $ = F;
                        break
                    }
                    $ = F - 1
                }
            F = $;
            var g = q[F]
              , L = g.point;
            return F === B - 1 || g.length === n || (L = (new Bq).subVectors(q[F + 1].point, L).normalize().multiplyScalar(n - g.length).add(L)),
            {
                point: L,
                tangent: g.tangent
            }
        }
          , wm = function(m) {
            for (var V, j, K = [], H = 0, R = 0; R < m.length; R++) {
                for (var S = m[R], o = 0; o < S.length; o++) {
                    V = S[o],
                    j && (H += j.distanceTo(V));
                    var g = new Bq
                      , C = S[o + 1];
                    C ? g.subVectors(C, V) : j ? g.subVectors(V, j) : g.x = 1,
                    g.normalize(),
                    K.push({
                        point: V,
                        length: H,
                        tangent: g
                    }),
                    j = V
                }
                j = null
            }
            return K
        }
          , ql = function(C, _, U, Z) {
            U = U || Rd;
            for (var r = [], j = 0, E = C.size(); E > j; j++) {
                var s = C.get(j);
                r.push(new Bq(s.x,s.e || 0,s.y))
            }
            _ && (Gl(_) && (_ = _._as),
            _.length || (_ = null));
            for (var L, W, n, p, T, Q = [], X = 0, u = 0, H = _ ? _.length : E; H > u; u++)
                if (T = _ ? _[u] : 0 === u ? 1 : 2,
                1 === T)
                    Q.push(n = []),
                    n.push(r[X++]);
                else if (2 === T || 5 === T)
                    if (p = 2 === T ? r[X++] : n[0],
                    Z) {
                        var h = _ ? _[u + 1] : H > u + 1 ? 2 : V;
                        if (2 === h || 5 === h) {
                            var e = n[n.length - 1]
                              , l = 2 === h ? r[X] : n[0]
                              , q = (new Bq).subVectors(e, p)
                              , i = (new Bq).subVectors(l, p)
                              , k = q.length()
                              , D = i.length();
                            if (k && D)
                                if (Z > k / 2 && Z > D / 2)
                                    n.push(p);
                                else
                                    for (q.multiplyScalar(b(Z, k / 2) / k).add(p),
                                    i.multiplyScalar(b(Z, D / 2) / D).add(p),
                                    L = new Pm(q,p,i).getPoints(U),
                                    W = 0; U >= W; W++)
                                        n.push(L[W])
                        } else
                            n.push(p)
                    } else
                        n.push(p);
                else if (3 === T)
                    for (L = new Pm(n[n.length - 1],r[X++],r[X++]).getPoints(U),
                    W = 1; U >= W; W++)
                        n.push(L[W]);
                else if (4 === T)
                    for (L = new Gi(n[n.length - 1],r[X++],r[X++],r[X++]).getPoints(U),
                    W = 1; U >= W; W++)
                        n.push(L[W]);
            return Q
        }
          , qf = function(d) {
            for (var i, q, s = new Bq, l = [], F = [], m = [], M = 0, H = d.length; H > M; M++)
                i = d[M],
                q = d[M + 1],
                q ? s.subVectors(q, i) : s.subVectors(i, d[M - 1]),
                l.push(s.normalize().clone());
            var S, x, j, K, X = new Bq, k = new Bq, f = new Mk, $ = 1e-4, v = Number.MAX_VALUE, c = l[0], o = F[0] = new Bq, a = m[0] = new Bq;
            for (x = t(c.x),
            j = t(c.y),
            K = t(c.z),
            v >= x && (v = x,
            X.set(1, 0, 0)),
            v >= j && (v = j,
            X.set(0, 1, 0)),
            v >= K && X.set(0, 0, 1),
            k.crossVectors(c, X).normalize(),
            o.crossVectors(c, k),
            a.crossVectors(c, o),
            M = 1; H > M; M++)
                F[M] = F[M - 1].clone(),
                m[M] = m[M - 1].clone(),
                k.crossVectors(l[M - 1], l[M]),
                k.length() > $ && (k.normalize(),
                S = w(Dn(l[M - 1].dot(l[M]), -1, 1)),
                F[M].applyMatrix4(f.makeRotationAxis(k, S))),
                m[M].crossVectors(l[M], F[M]);
            return {
                B: m,
                T: l,
                N: F
            }
        }
          , pp = function() {
            var G = function(F) {
                for (var v = 1; v < arguments.length; v++) {
                    var s = arguments[v];
                    F.push(s.x, s.y, s.z)
                }
            }
              , e = function($) {
                for (var f = 1; f < arguments.length; f++) {
                    var k = arguments[f].uv;
                    $.push(k[0], k[1])
                }
            }
              , A = function(r, s, k, Q, q) {
                var g = -Q * z(q)
                  , M = Q * E(q);
                return new Bq(r.x + g * k.x + M * s.x,r.y + g * k.y + M * s.y,r.z + g * k.z + M * s.z)
            }
              , L = function(W, f, g, e, s, J, H, N) {
                H = H || u;
                for (var m = [], C = H / s, T = 0; s >= T; T++) {
                    var t = A(W, f, g, e, T * C + J);
                    m.push(t),
                    N != V && (t.uv = [N, T / s])
                }
                return m
            }
              , f = function(U, I, W, J, j, T, p, t, e) {
                e = e || u;
                var i = I ? U.top_vs : U.bottom_vs;
                if (i)
                    for (var D = I ? U.top_uv : U.bottom_uv, H = e / p, B = 0; p > B; B++) {
                        var r, o;
                        I ? (r = B * H + t,
                        o = (B + 1) * H + t) : (o = B * H + t,
                        r = (B + 1) * H + t),
                        G(i, A(W, J, j, T, r), A(W, J, j, T, o), W),
                        D && D.push(.5 - .5 * z(r), .5 - .5 * E(r), .5 - .5 * z(o), .5 - .5 * E(o), .5, .5)
                    }
            };
            return function(u, k, y, j, h, C, Q, T, A) {
                var b = k.length;
                if (b > 1) {
                    var N, W, D, i, O, l, x, S = qf(k), B = S.T, c = S.N, v = S.B;
                    "flat" === T && f(u, !0, k[0], v[0], c[0], j, h, C, Q),
                    "flat" === A && f(u, !1, k[b - 1], v[b - 1], c[b - 1], j, h, C, Q);
                    var J, s, Y = [], E = I(h / 2), _ = "round" === T, z = "round" === A, n = k[0], K = B[0], d = v[0], P = c[0], R = k[b - 1], M = B[b - 1], t = v[b - 1], H = c[b - 1];
                    if (_) {
                        for (D = 1; E >= D; D++)
                            c.splice(0, 0, P),
                            v.splice(0, 0, d),
                            B.splice(0, 0, K),
                            s = -D / E * j,
                            k.splice(0, 0, K.clone().multiplyScalar(s).add(n)),
                            Y[E - D] = r(j * j - s * s);
                        b += E
                    }
                    if (z) {
                        for (D = 1; E >= D; D++)
                            c.push(H),
                            v.push(t),
                            B.push(M),
                            s = D / E * j,
                            k.push(M.clone().multiplyScalar(s).add(R)),
                            Y[k.length - 1] = r(j * j - s * s);
                        b += E
                    }
                    if (u.uv) {
                        var m = 0
                          , o = 0
                          , U = [];
                        for (y && (m = y),
                        O = k[0],
                        U[0] = 0,
                        D = 1; b > D; D++)
                            i = k[D],
                            U[D] = O.distanceTo(i),
                            O = i,
                            y || (m += U[D]);
                        for (J = [],
                        D = 0; b > D; D++)
                            o += U[D],
                            J[D] = m ? o / m : 0
                    }
                    for (D = 0; b > D; D++) {
                        if (i = k[D],
                        l = v[D],
                        x = c[D],
                        N = L(i, l, x, Y[D] === F ? j : Y[D], h, C, Q, J ? J[D] : V),
                        W)
                            for (var $ = 0; h > $; $++) {
                                var w = W[$]
                                  , X = W[$ + 1] || W[0]
                                  , g = N[$]
                                  , Z = N[$ + 1] || N[0];
                                G(u.vs, X, w, g, g, Z, X),
                                u.uv && e(u.uv, X, w, g, g, Z, X)
                            }
                        W = N
                    }
                }
            }
        }();
        lk(j, {
            getLineLength: function(D) {
                return D[D.length - 1].length
            },
            getLineOffset: function(H, b) {
                return ip(H, b)
            },
            getLineCacheInfo: function(V, I, P, E) {
                return wm(ql(V, I, P, E))
            }
        });
        var am = C.Light = function() {
            nm(am, this),
            this.s(ls, N[ls]),
            this.s(dm, "sphere"),
            this.s3(20, 20, 20)
        }
        ;
        bm("Light", xo, {
            _image: "light_icon",
            _icon: "light_icon",
            onStyleChanged: function(X, m, J) {
                am.superClass.onStyleChanged.apply(this, arguments),
                X === ls && this.s("shape3d.color", J)
            }
        });
        var _j = Nc.Graph3dView = function(v, Q) {
            var o = this;
            o._attributes = Q || j.graph3dViewAttributes,
            o._25I = {},
            o._view = Gc(1, o);
            var F = o._canvas = qb(o._view);
            F.addEventListener("webglcontextlost", function(m) {
                m.preventDefault(),
                Tk(o),
                o._26I && o._doBufferGC(o._26I, !0),
                o._26I = V,
                o._1o.texture = V,
                o._35O = !0
            }, !1),
            F.addEventListener("webglcontextrestored", function() {
                o._35O = !1,
                o.iv()
            }, !1),
            o._batchIndexMap = {},
            o._batchModelMap = {},
            o._wireframeIndexMap = {},
            o._wireframeModelMap = {},
            o._wireframeIndexMapSwap = {},
            o._wireframeModelMapSwap = {},
            o._polylineIndexMap = {},
            o._polylineIndexMap = {},
            o._polylineIndexMapSwap = {},
            o._polylineIndexMapSwap = {},
            o._8O = [],
            o._7O = Ue(),
            o._6O = Ue(),
            o._1o = new eb(o),
            o._30O = new lo(o),
            o._31O = new or(o),
            o._32O = new Gh(o),
            o._raycaster = new Br(o),
            o.vr = new En(o),
            o._33Q = !0,
            o._eye = nc(j.graph3dViewEye),
            o._center = nc(j.graph3dViewCenter),
            o._up = nc(j.graph3dViewUp),
            o._lightChanged = !1,
            o._59O = [],
            o._spots = [],
            o._dirs = [],
            o._frameId = 0,
            o.overlappingBox = new Dg(o),
            o.dm(v ? v : new Wm),
            o._coreInteractor = new Ch(this),
            o.setInteractors([new Xr(o)])
        }
          , Lr = {
            fogDisabled: 1,
            dashDisabled: 1,
            batchColorDisabled: 1,
            batchBlendDisabled: 1,
            batchBrightnessDisabled: 1
        }
          , Ko = 0;
        jf("Graph3dView", m, {
            ms_v: 1,
            ms_tip: 1,
            ms_gv: 1,
            ms_dm: 1,
            ms_lp: 1,
            ms_fire: 1,
            ms_sm: 1,
            _51o: 1,
            ms_ac: ["devicePixelRatio", "boundaries", "moveStep", "rotateStep", "editHelperDisabled", "sizeEditableFunc", "rotationEditableFunc", "editableFunc", "rotatable", "zoomable", "pannable", "walkable", "resettable", "mouseRoamable", Hk, Ao, "firstPersonMode", os, "movableFunc", "gridVisible", "gridSize", "gridGap", "gridColor", "originAxisVisible", "centerAxisVisible", "axisXColor", "axisYColor", "axisZColor", "editSizeColor", "rectSelectable", "rectSelectBackground", "headlightRange", "headlightColor", "headlightIntensity", "headlightDisabled", "ortho", "orthoWidth", "fovy", "near", "far", Pi, Do, "up", "aspect", "fogDisabled", "fogColor", "fogNear", "fogFar", "dashDisabled", "batchColorDisabled", "batchBlendDisabled", "batchBrightnessDisabled", "hoverDelay"],
            _editable: !1,
            _editHelperDisabled: j.graph3dViewEditHelperDisabled,
            _devicePixelRatio: F,
            _boundaries: F,
            _moveStep: j.graph3dViewMoveStep,
            _rotateStep: j.graph3dViewRotateStep,
            _pannable: j.graph3dViewPannable,
            _rotatable: j.graph3dViewRotatable,
            _walkable: j.graph3dViewWalkable,
            _resettable: j.graph3dViewResettable,
            _zoomable: j.graph3dViewZoomable,
            _firstPersonMode: j.graph3dViewFirstPersonMode,
            _mouseRoamable: j.graph3dViewMouseRoamable,
            _gridVisible: j.graph3dViewGridVisible,
            _gridSize: j.graph3dViewGridSize,
            _gridGap: j.graph3dViewGridGap,
            _gridColor: j.graph3dViewGridColor,
            _originAxisVisible: j.graph3dViewOriginAxisVisible,
            _centerAxisVisible: j.graph3dViewCenterAxisVisible,
            _axisXColor: j.graph3dViewAxisXColor,
            _axisYColor: j.graph3dViewAxisYColor,
            _axisZColor: j.graph3dViewAxisZColor,
            _ortho: j.graph3dViewOrtho,
            _orthoWidth: j.graph3dViewOrthoWidth,
            _fovy: j.graph3dViewFovy,
            _near: j.graph3dViewNear,
            _far: j.graph3dViewFar,
            _headlightColor: j.graph3dViewHeadlightColor,
            _headlightIntensity: j.graph3dViewHeadlightIntensity,
            _headlightRange: j.graph3dViewHeadlightRange,
            _headlightDisabled: j.graph3dViewHeadlightDisabled,
            _rectSelectable: j.graph3dViewRectSelectable,
            _rectSelectBackground: j.graph3dViewRectSelectBackground,
            _editSizeColor: j.graph3dViewEditSizeColor,
            _autoMakeVisible: Ck,
            _fogDisabled: j.graph3dViewFogDisabled,
            _fogColor: j.graph3dViewFogColor,
            _fogNear: j.graph3dViewFogNear,
            _fogFar: j.graph3dViewFogFar,
            _dashDisabled: j.graph3dViewDashDisabled,
            _batchColorDisabled: j.graph3dViewBatchColorDisabled,
            _batchBlendDisabled: j.graph3dViewBatchBlendDisabled,
            _batchBrightnessDisabled: j.graph3dViewBatchBrightnessDisabled,
            setEye: function(N, x, G) {
                1 === arguments.length && (x = N[1],
                G = N[2],
                N = N[0]);
                var s = this._eye;
                s[0] = N,
                s[1] = x,
                s[2] = G,
                this.fp(Pi, V, s)
            },
            setCenter: function(v, l, B) {
                1 === arguments.length && (l = v[1],
                B = v[2],
                v = v[0]);
                var b = this._center;
                b[0] = v,
                b[1] = l,
                b[2] = B,
                this.fp(Do, V, b)
            },
            setUp: function(Y, K, H) {
                1 === arguments.length && (K = Y[1],
                H = Y[2],
                Y = Y[0]);
                var i = this._up;
                i[0] = Y,
                i[1] = K,
                i[2] = H,
                this.fp("up", V, i)
            },
            getDevicePixelRatio: function() {
                return this._devicePixelRatio || nk
            },
            isTransparentMask: function(y) {
                return y.s("transparent.mask")
            },
            getCoreInteractor: function() {
                return this._coreInteractor
            },
            getAspect: function() {
                var f = this
                  , T = f._aspect;
                return T ? T : f.getWidth() / f.getHeight()
            },
            getCanvas: function() {
                return this._canvas
            },
            setDataModel: function(b) {
                var n = this
                  , z = n._dataModel
                  , y = n._selectionModel;
                z !== b && (z && (z.ump(n.handleDataModelPropertyChange, n),
                z.umm(n.handleDataModelChange, n),
                z.umd(n.handleDataPropertyChange, n),
                y || z.sm().ums(n.handleSelectionChange, n)),
                n._dataModel = b,
                b.mp(n.handleDataModelPropertyChange, n),
                b.mm(n.handleDataModelChange, n),
                b.md(n.handleDataPropertyChange, n),
                y ? y._21I(b) : b.sm().ms(n.handleSelectionChange, n),
                n.invalidateAll(!0),
                n.invalidateLight(),
                n.fp(gr, z, b),
                n._canvas.style.background = b.getBackground() || "")
            },
            handleDataModelPropertyChange: function(I) {
                if ("background" === I.property) {
                    var $ = this._canvas.style.background
                      , D = I.newValue || "";
                    this._canvas.style.background = D,
                    this.fp("canvasBackground", $, D)
                }
            },
            handleDataPropertyChange: function(f) {
                var A = f.data;
                this.invalidateData(A),
                Sn(A) && "s:light.type" === f.property && this.invalidateLight()
            },
            invalidateLight: function() {
                this._lightChanged || (this._lightChanged = !0,
                this.iv())
            },
            onPropertyChanged: function(e) {
                var Y = this
                  , T = e.property;
                Y.iv(),
                Y._18Q = V,
                "eye" === T ? Y._33Q = !0 : "devicePixelRatio" === T ? Y._42(V, Y.getDevicePixelRatio()) : Lr[T] && Tk(Y)
            },
            _5O: function(E) {
                var x = E._22Q();
                return x ? new x(this,E) : V
            },
            getData3dUI: function(u) {
                var k = this._25I[u._id];
                return k === F && (k = this._5O(u),
                this._25I[u._id] = k),
                k
            },
            invalidateAll: function(H) {
                var R = this;
                if (H) {
                    for (var U in R._25I) {
                        var E = R._25I[U];
                        E && E.dispose()
                    }
                    R._25I = {},
                    R.iv(),
                    Vf(R)
                } else
                    Vf(R),
                    R.dm().each(function(S) {
                        R.invalidateData(S)
                    })
            },
            invalidateSelection: function() {
                var T = this;
                T.sm().each(function(Z) {
                    T.invalidateData(Z)
                })
            },
            invalidateData: function(x) {
                var i = this
                  , e = i.getData3dUI(x);
                e && (e.iv(),
                i.iv()),
                Vf(i, x)
            },
            getShape3dText: function(X) {
                return X.getStyle("shape3d.text") || this.getLabel(X)
            },
            invalidateBatch: function(j) {
                var O = this
                  , B = O._batchModelMap
                  , p = B[j]
                  , r = []
                  , w = {};
                if (p) {
                    p.ds.forEach(function(B) {
                        var x = O.getData3dUI(B);
                        x && x.iv(),
                        delete O._batchIndexMap[B._id],
                        r.push(B._id)
                    }),
                    delete B[j];
                    for (var E, M, J, X, I, u, A, S, P, U = ["_wireframeModelMap", "_polylineModelMap", "_wireframeModelMapSwap", "_polylineModelMapSwap"], C = ["_wireframeIndexMap", "_polylineIndexMap", "_wireframeIndexMapSwap", "_polylineIndexMapSwap"], y = 0; y < U.length; y++) {
                        var W = O[U[y]]
                          , s = O[C[y]];
                        for (w = {},
                        S = 0; S < r.length; S++) {
                            var z = s[r[S]];
                            if (z) {
                                delete s[r[S]],
                                P = z.batch,
                                E = W[P];
                                var D = z.begin
                                  , e = z.size
                                  , q = 3 * D
                                  , H = 3 * e
                                  , T = 4 * D
                                  , G = 4 * e;
                                for (M = E.ds,
                                J = E.vs,
                                X = E.cs,
                                I = E.ps,
                                u = E.ls,
                                A = z.index,
                                E.invalidate = !0,
                                M[A] = F,
                                A = q; q + H > A; A++)
                                    J[A] = F;
                                for (A = T; T + G > A; A++)
                                    X[A] = F;
                                for (A = T; T + G > A; A++)
                                    I[A] = F;
                                if (u)
                                    for (A = q; q + H > A; A++)
                                        u[A] = F;
                                w[P] = !0
                            }
                        }
                        for (P in w) {
                            E = W[P],
                            M = E.ds,
                            J = E.vs,
                            X = E.cs,
                            I = E.ps,
                            u = E.ls;
                            var l = [];
                            for (A = 0; A < M.length; A++)
                                M[A] !== F && l.push(M[A]);
                            if (0 === l.length)
                                delete W[P];
                            else {
                                for (E.ds = l,
                                l = [],
                                A = 0; A < J.length; A++)
                                    J[A] !== F && l.push(J[A]);
                                for (E.vs = l,
                                l = [],
                                A = 0; A < X.length; A++)
                                    X[A] !== F && l.push(X[A]);
                                for (E.cs = l,
                                l = [],
                                A = 0; A < I.length; A++)
                                    I[A] !== F && l.push(I[A]);
                                if (E.ps = l,
                                u) {
                                    for (l = [],
                                    A = 0; A < u.length; A++)
                                        u[A] !== F && l.push(u[A]);
                                    E.ls = l
                                }
                            }
                        }
                    }
                    O.iv()
                }
            },
            handleDataModelChange: function(p) {
                var X = this
                  , n = p.kind
                  , j = p.data;
                if ("add" === n)
                    X.invalidateData(j),
                    vb(j) && j.getEdgeGroup() && j.getEdgeGroup().eachSiblingEdge(X.invalidateData, X),
                    Sn(j) && X.invalidateLight();
                else if (n === gf) {
                    var v = j._id
                      , q = X._25I[v];
                    q && (q.dispose(),
                    delete X._25I[v],
                    X.iv()),
                    j === X._currentSubGraph && X.setCurrentSubGraph(V),
                    Vf(X, j),
                    Sn(j) && X.invalidateLight()
                } else
                    n === vq && (X.invalidateAll(!0),
                    X.setCurrentSubGraph(V),
                    Vf(X),
                    X.invalidateLight())
            },
            toCanvas: function(m) {
                var C = this
                  , B = C.getGL();
                if (C.validate(),
                m) {
                    var O = B.getParameter(B.COLOR_CLEAR_VALUE);
                    wf(B, m)
                }
                C._42(V, 1);
                var s = C.getWidth()
                  , o = C.getHeight()
                  , R = new Uint8Array(4 * s * o)
                  , _ = qb()
                  , W = _.getContext("2d");
                B.readPixels(0, 0, s, o, B.RGBA, B.UNSIGNED_BYTE, R),
                ug(_, s, o, 1);
                for (var z = W.getImageData(0, 0, s, o), f = z.data, L = 0; L < f.length; L += 4) {
                    var Y = L / 4
                      , T = M(Y / s)
                      , y = Y - T * s;
                    Y = 4 * ((o - 1 - T) * s + y),
                    f[Y] = R[L],
                    f[Y + 1] = R[L + 1],
                    f[Y + 2] = R[L + 2],
                    f[Y + 3] = R[L + 3]
                }
                return W.putImageData(z, 0, 0),
                m && wf(B, O),
                C._42(V, C.getDevicePixelRatio()),
                _
            },
            toDataURL: function(U, B) {
                var W = this
                  , A = W.getGL();
                if (W.validate(),
                U) {
                    var Y = A.getParameter(A.COLOR_CLEAR_VALUE);
                    wf(A, U)
                }
                W._42(V, 1);
                var P = W._canvas.toDataURL(B || "image/png", 1);
                return U && wf(A, Y),
                W._42(V, W.getDevicePixelRatio()),
                P
            },
            getGL: function() {
                var q = this
                  , w = q._26I
                  , z = q._prg;
                if (!w)
                    try {
                        q._2O = {},
                        w = q._26I = q._canvas.getContext("webgl", q._attributes) || q._canvas.getContext("experimental-webgl", q._attributes),
                        w._emptyTexture = Ul(w),
                        w._emptyBlendTexture = Ul(w),
                        w._bufPool = {},
                        w._id = ++Ko,
                        q._buffer = {
                            vs: Bh(w),
                            ns: Bh(w),
                            is: Bh(w),
                            uv: Bh(w),
                            batchColor: Bh(w),
                            batchBlend: Bh(w),
                            batchBrightness: Bh(w),
                            lineDistance: Bh(w)
                        },
                        q._1O = Pn(w);
                        var K = q._cube = {
                            vs: Bh(w),
                            ns: Bh(w),
                            is: Bh(w),
                            uv: Bh(w)
                        };
                        ks(w, K.vs, An),
                        ks(w, K.ns, ol),
                        ks(w, K.uv, hj),
                        Oj(w, K.is, kn)
                    } catch (v) {}
                if (w && !z) {
                    if (z = q._prg = w.createProgram(),
                    !z)
                        return V;
                    var T = q._dirs.length
                      , o = q._spots.length
                      , f = q._59O.length
                      , j = ["uPMatrix", "uMVMatrix", "uNMatrix", "uViewMatrix", "aNormal", "aUv", "uOffsetScale", "uDiffuse", "uBlend", "uBlendColor", "uBrightness", "uPartOpacity", "uAlphaTest", "uTransparent", "uTexture", "uBlendTexture", "uSampler", "uBlendSampler", "uDiscardSelectable", "uFix", "uPick", "uReverseFlip", "uFixPickReverseColor", "uBatchBrightness", "aBatchBrightness", "uBatchColor", "aBatchColor", "uBatchBlend", "aBatchBlend", "uDash", "aLineDistance", "uDashDistance", "uDashGapDistance", "uLight", "uHeadlightRange", "uHeadlightColor", "uFogColor", "uFogNear", "uFogFar"];
                    T && j.push("uDirColor", "uDirDirection"),
                    o && j.push("uSpotColor", "uSpotRange", "uSpotAngle", "uSpotExponent", "uSpotPosition", "uSpotDirection"),
                    f && j.push("uPointColor", "uPointRange", "uPointPosition"),
                    wf(w, [0, 0, 0, 0]),
                    w.clearDepth(1),
                    w.enable(w.DEPTH_TEST),
                    w.depthFunc(w.LEQUAL),
                    w.enable(w.BLEND),
                    w.blendFuncSeparate(w.SRC_ALPHA, w.ONE_MINUS_SRC_ALPHA, w.ONE, w.ONE_MINUS_SRC_ALPHA),
                    ri || (Ph = Ek(Ph.substring(0, Ph.indexOf("^#"))),
                    mc = Ek(mc),
                    ri = !0);
                    var t = ["#define MAX_DIR " + T, "#define MAX_SPOT " + o, "#define MAX_POINT " + f, q._fogDisabled ? "" : "#define FOG", q._dashDisabled ? "" : "#define DASH", q._batchColorDisabled ? "" : "#define BATCHCOLOR", q._batchBlendDisabled ? "" : "#define BATCHBLEND", q._batchBrightnessDisabled ? "" : "#define BATCHBRIGHTNESS", ""].join("\n")
                      , p = kg(w, z, w.VERTEX_SHADER, Ph.replace("PREFIX", t))
                      , R = kg(w, z, w.FRAGMENT_SHADER, mc.replace("PREFIX", t));
                    i ? j.push("aPosition") : (z.aPosition = 0,
                    w.bindAttribLocation(z, 0, "aPosition")),
                    w.linkProgram(z),
                    j.forEach(function(l) {
                        z[l] = /^u/.test(l) ? w.getUniformLocation(z, l) : w.getAttribLocation(z, l)
                    }),
                    w.useProgram(z),
                    w.deleteShader(p),
                    w.deleteShader(R)
                }
                return w
            },
            getBrightness: function(Q) {
                var y = Q.s("brightness")
                  , e = this.isSelected(Q) ? Q.s("select.brightness") : V;
                return y == V ? e : e == V ? y : y * e
            },
            getWireframe: function(e) {
                var R = e.s("wf.visible")
                  , p = e.s("wf.width");
                return R === !0 || p > 0 && "selected" === R && this.isSelected(e) ? {
                    color: e.s("wf.color"),
                    width: p,
                    "short": e.s("wf.short"),
                    mat: e.s("wf.mat")
                } : void 0
            },
            _transformPointToViewSpace: function(e) {
                var R = [e[0], e[1], e[2]];
                return Nj(R, this._viewMatrix),
                R
            },
            _transformDirectionToViewSpace: function(D, y) {
                var c = [D[0], D[1], D[2]];
                Nj(c, this._viewMatrix);
                var V = y ? [y[0], y[1], y[2]] : [0, 0, 0];
                Nj(V, this._viewMatrix);
                var Z = V[0] - c[0]
                  , k = V[1] - c[1]
                  , Y = V[2] - c[2]
                  , H = Math.sqrt(Z * Z + k * k + Y * Y);
                return H ? [Z / H, k / H, Y / H] : [Z, k, Y]
            },
            getWireframeGeometry: function(b) {
                return b.s("wf.geometry") ? {
                    color: b.s("wf.color"),
                    width: b.s("wf.width"),
                    mat: b.s("wf.mat"),
                    geometry: !0
                } : void 0
            },
            getBodyColor: function(h) {
                return h.s("body.color")
            },
            getMat: function(H) {
                return H.getMat ? H.getMat() : H.s("mat")
            },
            getFaceMat: function(g, v) {
                return g.getFaceMat ? g.getFaceMat(v) : g.s(v + ".mat")
            },
            getFaceBlend: function(d, K) {
                return d.s(K + ".blend") || d.s("all.blend")
            },
            getFaceColor: function(I, Y) {
                return I.s(Y + ".color") || I.s("all.color")
            },
            getFaceImage: function(M, k) {
                return M.s(k + ".image") || M.s("all.image")
            },
            getFaceBlendImage: function(q, T) {
                return q.s(T + ".blend.image") || q.s("all.blend.image")
            },
            getFaceDiscardSelectable: function(s, w) {
                var d = s.s(w + ".discard.selectable");
                return d == V ? s.s("all.discard.selectable") : d
            },
            getFaceUv: function(g, c) {
                return g.s(c + ".uv") || g.s("all.uv")
            },
            getFaceUvOffset: function(K, v) {
                return K.s(v + ".uv.offset") || K.s("all.uv.offset")
            },
            getFaceUvScale: function(c, l) {
                return c.s(l + ".uv.scale") || c.s("all.uv.scale")
            },
            getFaceLight: function(g, Z) {
                var L = g.s(Z + ".light");
                return L == V ? g.s("all.light") : L
            },
            getFaceVisible: function(M, z) {
                var w = M.s(z + ".visible");
                return w == V ? M.s("all.visible") : w
            },
            getFaceOpacity: function(R, D) {
                var s = R.s(D + ".opacity");
                return s == V ? R.s("all.opacity") : s
            },
            getFaceTransparent: function($, l) {
                var c = $.s(l + ".transparent");
                return c == V ? $.s("all.transparent") : c
            },
            getFaceReverseColor: function(W, e) {
                return W.s(e + ".reverse.color") || W.s("all.reverse.color")
            },
            getFaceReverseFlip: function(T, a) {
                var E = T.s(a + ".reverse.flip");
                return E == V ? T.s("all.reverse.flip") : E
            },
            getFaceReverseCull: function(W, s) {
                var F = W.s(s + ".reverse.cull");
                return F == V ? W.s("all.reverse.cull") : F
            },
            getTextureMap: function() {
                return this._2O
            },
            deleteTexture: function(m) {
                var I = this
                  , d = I._2O[m];
                d && (delete I._2O[m],
                I.getGL().deleteTexture(d))
            },
            invalidateShape3dCachedImage: function(c) {
                var w = this.getData3dUI(c);
                w.invalidateCachedTexture(this.getGL())
            },
            isInteractive: function(d) {
                return d.s("interactive")
            },
            getTexture: function(W, x) {
                if (!W)
                    return V;
                var i = this
                  , J = i.getGL()
                  , Z = i._2O[W];
                if (!Z) {
                    var y = bn(W);
                    if (y)
                        if (y.tagName) {
                            if (y.dynamic)
                                return Pn(J, y, i._1O);
                            Z = i._2O[W] = Pn(J, y)
                        } else {
                            var Y, B = x && x.s("shape3d.image.cache") && !i.isInteractive(x), w = i.vr.isPresenting();
                            if (w && (x._textureUpdateFrame === J._renderInfo.frame ? B = !0 : x._textureUpdateFrame = J._renderInfo.frame),
                            B && (Y = i.getData3dUI(x),
                            Z = Y.getCachedTexture()),
                            !Z) {
                                var T = x && x.s("shape3d.fixSizeOnScreen")
                                  , m = T ? J.NEAREST : J.LINEAR;
                                if (!T && x && x.s("shape3d.vector.dynamic") && (Y || (Y = i.getData3dUI(x)),
                                T = Y.getVectorDynamicSize())) {
                                    var n = i.getDevicePixelRatio();
                                    T[0] *= n,
                                    T[1] *= n
                                }
                                var P = x && x.s("shape3d.texture.scale") || 1
                                  , _ = T && T[0] > 0 ? T[0] : P * Cm(y, x)
                                  , u = T && T[1] > 0 ? T[1] : P * Hi(y, x);
                                if (_ >= 1 && u >= 1) {
                                    var z = Kj(_, u);
                                    if (!Y && x && (Y = i.getData3dUI(x)),
                                    Y && Y.interactiveInfo) {
                                        var G = Y.interactiveInfo[W] = {};
                                        z.interactiveInfo = G.bodyInfo = {
                                            compInfos: [],
                                            matrix: new Hh,
                                            rect: {
                                                x: 0,
                                                y: 0,
                                                width: _,
                                                height: u
                                            }
                                        }
                                    }
                                    ts(z, y, 0, 0, _, u, x, i),
                                    z.interactiveInfo && (z.interactiveInfo = null),
                                    z.restore(),
                                    (B || w) && zm(y, x) ? (Z = Pn(J, zb, null, m),
                                    Y.setCachedTexture(Z),
                                    zb = null) : Z = Pn(J, zb, i._1O, m)
                                }
                            }
                        }
                }
                return Z
            },
            redraw: function() {
                this.iv()
            },
            validateImpl: function() {
                var S = this;
                if (S._lightChanged) {
                    S._lightChanged = !1;
                    var h = []
                      , k = []
                      , X = [];
                    S.dm().each(function(l) {
                        if (Sn(l)) {
                            var a = l.s("light.type");
                            a === ns ? h.push(l) : a === ld ? k.push(l) : a === Lm && X.push(l)
                        }
                    }),
                    (h.length !== S._59O.length || k.length !== S._spots.length || X.length !== S._dirs.length) && Tk(S),
                    S._59O = h,
                    S._spots = k,
                    S._dirs = X
                }
                S._42(),
                S._1o.iv()
            },
            getRenderInfo: function() {
                var l = this.getGL();
                return l ? l._renderInfo : void 0
            },
            showDebugTip: function() {
                var L = this
                  , Y = L._debugDiv;
                if (!Y) {
                    Y = L._debugDiv = s.createElement("div"),
                    Y.style.position = "absolute",
                    Y.style.overflow = "hidden",
                    Y.style.backgroundColor = "white",
                    Y.style.color = "black";
                    var M = L.getView();
                    L._79O ? M.insertBefore(Y, L._79O) : M.appendChild(Y),
                    L._debugTipTimerId = setInterval(function() {
                        var m = L.getRenderInfo();
                        if (m) {
                            var M = L.getGL()._validBufCount || 0
                              , G = "Draw Calls: " + m.calls + "<br/>" + "Vertices: " + m.vertices + "<br/>" + "Faces: " + m.faces + "<br/>" + "Lines: " + m.lines + "<br/>" + "Buffer Count: " + M;
                            Y.innerHTML = G
                        }
                    }, 10)
                }
            },
            hideDebugTip: function() {
                var S = this
                  , I = S._debugDiv;
                I && (delete S._debugDiv,
                cancelAnimationFrame(S._debugTipTimerId),
                delete S._debugTipTimerId,
                S.getView().removeChild(I))
            },
            _42: function(P, X) {
                var t = this;
                if (!t._35O && (!kq || Ud(kq))) {
                    var C, G;
                    P && (P instanceof xo ? G = P : C = P);
                    var K = t._canvas
                      , H = t.getGL()
                      , I = t._prg;
                    if (H) {
                        var e = t.getWidth()
                          , p = t.getHeight();
                        X ? P || ug(K, e, p, X) : (X = t.getDevicePixelRatio(),
                        P || e === K.clientWidth && p === K.clientHeight || ug(K, e, p, X)),
                        H.clear(H.COLOR_BUFFER_BIT),
                        H._renderInfo = {
                            calls: 0,
                            vertices: 0,
                            faces: 0,
                            lines: 0,
                            frame: P ? t._frameId : ++t._frameId
                        };
                        var g = function() {
                            if (t.overlappingBox.clear(),
                            t._81O = V,
                            H.clear(H.DEPTH_BUFFER_BIT),
                            fk(H, I.uBrightness, 1),
                            fk(H, I.uOpacity, 1),
                            fk(H, I.uPartOpacity, 1),
                            H._picking = !!P,
                            fk(H, I.uPick, !!P),
                            fk(H, I.uTexture, !1),
                            fk(H, I.uBlendTexture, !1),
                            fk(H, I.uAlphaTest, N.alphaTest),
                            fk(H, I.uTransparent, !1),
                            fk(H, I.uFix, !1),
                            fk(H, I.uBatchColor, !1),
                            fk(H, I.uBatchBlend, !1),
                            fk(H, I.uBatchBrightness, !1),
                            fk(H, I.uPMatrix, t._projectMatrix = nn(t)),
                            fk(H, I.uViewMatrix, vd(t, t._7O)),
                            t._viewMatrix = Te(t._7O),
                            P || (As(t, H, I),
                            t._fogDisabled || (fk(H, I.uFogColor, t._fogColor),
                            fk(H, I.uFogNear, t._fogNear),
                            fk(H, I.uFogFar, t._fogFar))),
                            Sb(H, I.aPosition),
                            Sb(H, I.aNormal),
                            ch(H, I.aUv),
                            ch(H, I.aBatchColor),
                            ch(H, I.aBatchBlend),
                            ch(H, I.aBatchBrightness),
                            ch(H, I.aLineDistance),
                            G) {
                                var o = H.getParameter(H.COLOR_CLEAR_VALUE);
                                H.clearColor(0, 0, 0, 0),
                                H.disable(H.BLEND),
                                ch(H, I.aNormal),
                                ks(H, t._cube.vs, V, I.aPosition),
                                Oj(H, t._cube.is),
                                Rm(G, t, $j, 0),
                                Rm(G, t, ne, 6),
                                Rm(G, t, yo, 12),
                                Rm(G, t, hr, 18),
                                Rm(G, t, ve, 24),
                                Rm(G, t, uo, 30),
                                Sb(H, I.aNormal),
                                wf(H, o)
                            } else if (C) {
                                C.value = 2;
                                var o = H.getParameter(H.COLOR_CLEAR_VALUE);
                                H.clearColor(0, 0, 0, 0),
                                H.disable(H.BLEND),
                                t._95I(H, I, C),
                                Lg(t, C),
                                mf(t, t._polylineModelMap, C),
                                mf(t, t._wireframeModelMap, C),
                                fk(H, I.uTransparent, !0),
                                t._95I(H, I, C, !0),
                                Lg(t, C, !0),
                                mf(t, t._polylineModelMap, C, !0),
                                mf(t, t._wireframeModelMap, C, !0),
                                fk(H, I.uTransparent, !1),
                                H.clear(H.DEPTH_BUFFER_BIT),
                                t._swapLineMap(),
                                t._95I(H, I, C, !1, !0),
                                mf(t, t._polylineModelMap, C),
                                mf(t, t._wireframeModelMap, C),
                                t._swapLineMap(),
                                H.disable(H.DEPTH_TEST),
                                t._30O._42(H, I, C),
                                H.enable(H.DEPTH_TEST),
                                wf(H, o)
                            } else
                                H.disable(H.BLEND),
                                t.drawSky(H, I),
                                t._31O._42(H, I),
                                t._95I(H, I),
                                Lg(t),
                                mf(t, t._polylineModelMap),
                                mf(t, t._wireframeModelMap),
                                H.enable(H.BLEND),
                                fk(H, I.uTransparent, !0),
                                H.depthMask(!1),
                                t._95I(H, I, V, !0),
                                Lg(t, V, !0),
                                mf(t, t._polylineModelMap, V, !0),
                                mf(t, t._wireframeModelMap, V, !0),
                                H.depthMask(!0),
                                fk(H, I.uTransparent, !1),
                                H.clear(H.DEPTH_BUFFER_BIT),
                                t._swapLineMap(),
                                t._95I(H, I, V, !1, !0),
                                mf(t, t._polylineModelMap),
                                mf(t, t._wireframeModelMap),
                                t._swapLineMap(),
                                H.disable(H.DEPTH_TEST),
                                H.disable(H.BLEND),
                                t._32O._42(H, I),
                                t._30O._42(H, I),
                                H.enable(H.DEPTH_TEST);
                            ks(H, V),
                            Oj(H, V)
                        }
                          , k = !1
                          , v = e * X
                          , A = p * X
                          , d = t.vr;
                        d.enable && d._42(H, v, A, g) && (k = !0);
                        var S = t.envRenderer;
                        S && S.enable && S._42(H, v, A, g) && (k = !0),
                        k || (H.viewport(0, 0, e * X, p * X),
                        g()),
                        t._33Q = !1,
                        t._doBufferGC(H)
                    }
                }
            },
            setBufferGCInterval: function(X) {
                this._bufferGCInterval = X
            },
            _doBufferGC: function(Y, X) {
                var c, q, D = Y._bufPool, v = 0, i = 0, $ = Y._renderInfo.frame, L = this._bufferGCInterval || 10;
                for (c in D)
                    v++,
                    q = D[c],
                    q && (X || $ - q._fid > L ? (Y.deleteBuffer(q._buf),
                    q._buf = null,
                    D[c] = null) : i++);
                if (v / 2 > i && v > 128) {
                    var G = {};
                    for (c in D)
                        D[c] && (G[c] = D[c]);
                    Y._bufPool = G
                }
                Y._validBufCount = i
            },
            _swapLineMap: function() {
                var o = this;
                R = o._polylineModelMap,
                o._polylineModelMap = o._polylineModelMapSwap,
                o._polylineModelMapSwap = R,
                R = o._wireframeModelMap,
                o._wireframeModelMap = o._wireframeModelMapSwap,
                o._wireframeModelMapSwap = R,
                R = o._polylineIndexMap,
                o._polylineIndexMap = o._polylineIndexMapSwap,
                o._polylineIndexMapSwap = R,
                R = o._wireframeIndexMap,
                o._wireframeIndexMap = o._wireframeIndexMapSwap,
                o._wireframeIndexMapSwap = R
            },
            _updateSkyBoxPosition: function(w) {
                if (this._skyBox && w && "eye" === w.property) {
                    var B = w.newValue;
                    this._skyBox.p3(B[0], B[1], B[2]),
                    this.invalidateData(this._skyBox)
                }
            },
            setSkyBox: function(U) {
                this._skyBox = U,
                this.ump(this._updateSkyBoxPosition, this),
                this.invalidateAll(),
                U && (this.mp(this._updateSkyBoxPosition, this),
                this._updateSkyBoxPosition())
            },
            drawSky: function(F, l, e) {
                var o = this
                  , X = o._skyBox;
                if (X) {
                    var d = o._headlightIntensity
                      , V = To(o._headlightColor)
                      , l = o._prg;
                    1 !== d && (V = [V[0] * d, V[1] * d, V[2] * d]),
                    fk(F, l.uHeadlightColor, [V[0], V[1], V[2], 1]);
                    var M = o.getData3dUI(X);
                    M && M._42(F, l, e, function() {
                        return !0
                    }),
                    F.clear(F.DEPTH_BUFFER_BIT),
                    fk(F, l.uHeadlightColor, [V[0], V[1], V[2], o._headlightDisabled ? 1 : 0])
                }
            },
            _95I: function(V, v, l, Q, C) {
                function s(x) {
                    if (!!x.s("shape3d.alwaysOnTop") == !!C && o.isVisible(x) && (!W || O)) {
                        if (!l && o.isTransparentMask(x))
                            return;
                        var n = o.getData3dUI(x);
                        n && n._42(V, v, l, c)
                    }
                }
                var o = this
                  , c = function(x) {
                    return Q ? x : !x
                };
                o.sky && V.clear(V.DEPTH_BUFFER_BIT),
                o.dm().each(s)
            },
            getLogicalPoint: function(D) {
                return jd(D, this._canvas)
            },
            isRectOverlapping: function(J) {
                var $ = this.getData3dUI(J);
                return $._rectOverlapping
            },
            getHitFaceInfo: function(P) {
                P.target && (P = this.lp(P));
                var W = this.getDataInfoAt(P);
                if (W) {
                    var R = this._1o.face(W.data, Ff(P.x, P.y));
                    if (R)
                        return {
                            data: W.data,
                            face: R
                        }
                }
                return V
            },
            unproject: function(w, e) {
                var P = this
                  , W = P.getWidth()
                  , $ = P.getHeight()
                  , f = w.target ? P.lp(w) : w
                  , x = f.x - W / 2
                  , L = f.y - $ / 2
                  , z = 2 * (x / W)
                  , E = 2 * (-1 * L / $);
                e = e || 0;
                var T = Ue()
                  , m = nn(P)
                  , Y = vd(P);
                ym(T, m, Y),
                _h(T);
                var A = xf([z, E, e, 1], T);
                return [A[0] / A[3], A[1] / A[3], A[2] / A[3]]
            },
            getDataAt: function(l) {
                var H = this.getDataInfoAt(l);
                return H ? H.data : V
            },
            getDataInfoAt: function(m, K) {
                return m.target && (m = this.lp(m)),
                this._1o.get(Ff(m.x, m.y, K), !0)
            },
            getDatasInRect: function(L) {
                return this._1o.get(L)
            },
            setEditable: function(s) {
                var l = this
                  , C = l._editable;
                l._editable = s,
                this.fp(Dq, C, s)
            },
            isEditable: function(y) {
                var S = this;
                return S._editable ? xj(y) ? y.s("3d.editable") ? S._editableFunc ? S._editableFunc(y) : !0 : !1 : !1 : !1
            },
            isSelectable: function(W) {
                return W.s("3d.selectable") && this.sm().isSelectable(W)
            },
            isMovable: function(q) {
                var T = this;
                return vb(q) && q.getStyle(bp) !== Se ? !1 : q.s("3d.movable") ? T._movableFunc ? T._movableFunc(q) : !0 : !1
            },
            isSizeEditable: function(Z) {
                return xj(Z) ? this._sizeEditableFunc ? this._sizeEditableFunc(Z) : !0 : !1
            },
            isRotationEditable: function(V) {
                return xj(V) && V.IRotatable !== !1 ? this._rotationEditableFunc ? this._rotationEditableFunc(V) : !0 : !1
            },
            handleDelete: function() {
                this._editable && this.removeSelection()
            },
            zoomIn: function(B) {
                this.setZoom(gs, B)
            },
            zoomOut: function(H) {
                this.setZoom(1 / gs, H)
            },
            setZoom: function(q, j) {
                if (1 !== q) {
                    var L = this;
                    if (L._ortho)
                        return L.setOrthoZoom(q, j),
                        void 0;
                    L._14o && L._14o.stop(!0);
                    var v = 1 / q
                      , p = L._eye
                      , w = L._center
                      , O = w[0] + (p[0] - w[0]) * v - p[0]
                      , m = w[1] + (p[1] - w[1]) * v - p[1]
                      , Z = w[2] + (p[2] - w[2]) * v - p[2];
                    if (!(uf(p, w) < L._moveStep && 1 > v)) {
                        if (j = bf(j)) {
                            var e = nc(p);
                            return j.action = function(r) {
                                L.fi({
                                    kind: L._zooming ? "betweenZoom" : "beginZoom"
                                }),
                                L._zooming = 1,
                                p[0] = e[0] + O * r,
                                p[1] = e[1] + m * r,
                                p[2] = e[2] + Z * r,
                                L.fp(Pi, V, p)
                            }
                            ,
                            j._37o = function() {
                                delete L._14o,
                                delete L._zooming,
                                L.fi({
                                    kind: "endZoom"
                                }),
                                L.onZoomEnded()
                            }
                            ,
                            L._14o = Xp(j)
                        }
                        p[0] += O,
                        p[1] += m,
                        p[2] += Z,
                        L.fp(Pi, V, p)
                    }
                }
            },
            setOrthoZoom: function(j, B) {
                if (1 !== j) {
                    var G = this;
                    G._14o && G._14o.stop(!0);
                    var n = G._orthoWidth
                      , K = n / j - n;
                    if (!(n < G._moveStep && j > 1))
                        return (B = bf(B)) ? (B.action = function(g) {
                            G.fi({
                                kind: G._zooming ? "betweenZoom" : "beginZoom"
                            }),
                            G._zooming = 1,
                            G.setOrthoWidth(n + K * g)
                        }
                        ,
                        B._37o = function() {
                            delete G._14o,
                            delete G._zooming,
                            G.fi({
                                kind: "endZoom"
                            }),
                            G.onZoomEnded()
                        }
                        ,
                        G._14o = Xp(B)) : (G.setOrthoWidth(n / j),
                        void 0)
                }
            },
            getPositionInfo: function(p) {
                var w = this
                  , t = w._eye
                  , T = w._center
                  , j = w.getAspect()
                  , B = p ? Yg(Fo(T, t, !0), Fo(p, t)) : uf(t, T);
                if (w._ortho) {
                    var N = w._orthoWidth;
                    return {
                        length: B,
                        height: N / j,
                        width: N
                    }
                }
                var z = 2 * S(w._fovy / 2) * B;
                return {
                    length: B,
                    height: z,
                    width: z * j
                }
            },
            getCenterInfo: function() {
                var o = this;
                return o._81O || (o._81O = o.getPositionInfo()),
                nc(o._81O)
            },
            rotate: function(g, W, b, d) {
                var J = this;
                if (g || W) {
                    d == V && (d = J._firstPersonMode),
                    J._88O && J._88O.stop(!0);
                    var y = J._center
                      , w = J._eye
                      , B = J.getCenterInfo().length
                      , Z = d ? y : w
                      , _ = d ? w : y
                      , Y = Fo(Z, _)
                      , D = x(Y[0], Y[2])
                      , l = x(r(Y[0] * Y[0] + Y[2] * Y[2]), Y[1])
                      , M = d ? Do : Pi;
                    return d && (W = -W),
                    (b = bf(b)) ? (b.action = function(S) {
                        J.fi({
                            kind: J._rotating ? "betweenRotate" : "beginRotate"
                        }),
                        J._rotating = 1;
                        var $ = D + g * S
                          , Q = l + W * S;
                        Q = kh(Q),
                        Y[0] = B * E(Q) * E($),
                        Y[1] = B * z(Q),
                        Y[2] = B * E(Q) * z($),
                        Z[0] = _[0] + Y[0],
                        Z[1] = _[1] + Y[1],
                        Z[2] = _[2] + Y[2],
                        J.fp(M, V, Z)
                    }
                    ,
                    b._37o = function() {
                        delete J._88O,
                        delete J._rotating,
                        J.fi({
                            kind: "endRotate"
                        }),
                        J.onRotateEnded()
                    }
                    ,
                    J._88O = Xp(b)) : (D += g,
                    l += W,
                    l = kh(l),
                    Y[0] = B * E(l) * E(D),
                    Y[1] = B * z(l),
                    Y[2] = B * E(l) * z(D),
                    Z[0] = _[0] + Y[0],
                    Z[1] = _[1] + Y[1],
                    Z[2] = _[2] + Y[2],
                    J.fp(M, V, Z),
                    void 0)
                }
            },
            pan: function(n, c, u, U) {
                if (n || c) {
                    var d = this;
                    U == V && (U = d._firstPersonMode),
                    d._89O && d._89O.stop(!0);
                    var T = vd(d)
                      , H = [T[0] * n, T[4] * n, T[8] * n]
                      , E = [T[1] * c, T[5] * c, T[9] * c]
                      , O = H[0] + E[0]
                      , I = H[1] + E[1]
                      , t = H[2] + E[2]
                      , f = d._center
                      , e = d._eye;
                    if (U) {
                        var C = Zr(d.getBoundaries(), e[0], e[2], e[0] + O, e[2] + t, r(O * O + t * t));
                        O = C[0],
                        t = C[1]
                    }
                    if (u = bf(u)) {
                        var K = nc(e)
                          , A = nc(f);
                        return u.action = function(M) {
                            d.fi({
                                kind: d._panning ? "betweenPan" : "beginPan"
                            }),
                            d._panning = 1,
                            f[0] = A[0] + O * M,
                            f[1] = A[1] + I * M,
                            f[2] = A[2] + t * M,
                            e[0] = K[0] + O * M,
                            e[1] = K[1] + I * M,
                            e[2] = K[2] + t * M,
                            d.fp(Pi, V, e),
                            d.fp(Do, V, f)
                        }
                        ,
                        u._37o = function() {
                            delete d._89O,
                            delete d._panning,
                            d.fi({
                                kind: "endPan"
                            }),
                            d.onPanEnded()
                        }
                        ,
                        d._89O = Xp(u)
                    }
                    f[0] += O,
                    f[1] += I,
                    f[2] += t,
                    e[0] += O,
                    e[1] += I,
                    e[2] += t,
                    d.fp(Pi, V, e),
                    d.fp(Do, V, f)
                }
            },
            walk: function(T, $, E) {
                if (T) {
                    var o = this;
                    E == V && (E = o._firstPersonMode),
                    o._90O && o._90O.stop(!0);
                    var U = o._center
                      , Z = o._eye
                      , N = Fo(U, Z, !0);
                    if (E) {
                        var d = Zr(o.getBoundaries(), Z[0], Z[2], Z[0] + N[0] * T, Z[2] + N[2] * T, t(T));
                        if (T = uf(d),
                        !T)
                            return;
                        N = [d[0] / T, 0, d[1] / T]
                    }
                    if ($ = bf($)) {
                        var J = nc(Z)
                          , F = nc(U);
                        return $.action = function(B) {
                            o.fi({
                                kind: o._walking ? "betweenWalk" : "beginWalk"
                            }),
                            o._walking = 1;
                            var Y = T * B;
                            Z[0] = J[0] + N[0] * Y,
                            Z[1] = J[1] + N[1] * Y,
                            Z[2] = J[2] + N[2] * Y,
                            U[0] = F[0] + N[0] * Y,
                            U[1] = F[1] + N[1] * Y,
                            U[2] = F[2] + N[2] * Y,
                            o.fp(Pi, V, Z),
                            o.fp(Do, V, U)
                        }
                        ,
                        $._37o = function() {
                            delete o._90O,
                            delete o._walking,
                            o.fi({
                                kind: "endWalk"
                            }),
                            o.onWalkEnded()
                        }
                        ,
                        o._90O = Xp($)
                    }
                    Z[0] += N[0] * T,
                    Z[1] += N[1] * T,
                    Z[2] += N[2] * T,
                    U[0] += N[0] * T,
                    U[1] += N[1] * T,
                    U[2] += N[2] * T,
                    o.fp(Pi, V, Z),
                    o.fp(Do, V, U)
                }
            },
            handleScroll: function(J, U) {
                J.preventDefault();
                var K = this
                  , m = K._moveStep;
                K.isFirstPersonMode() ? K.isPannable() && K.pan(0, U > 0 ? m : -m) : K.isZoomable() && K.setZoom(0 > U ? 1 / Rf : Rf)
            },
            handlePinch: function(l, j) {
                this.isZoomable() && this.setZoom(j > l ? 1 / Tj : Tj)
            },
            reset: function() {
                this.setCenter(j.graph3dViewCenter),
                this.setEye(j.graph3dViewEye),
                this.setUp(j.graph3dViewUp)
            },
            moveSelection: function(Q, G, Z) {
                var j = this;
                j.dm().beginTransaction(),
                Yb(this.sm().toSelection(this.isMovable, this), Q, G, Z),
                j.dm().endTransaction()
            },
            getMoveMode: function(y, h) {
                var v = h.s("3d.move.mode");
                if (v)
                    return v;
                var R = "88"
                  , w = "89"
                  , c = "90";
                return ig(y) || Vj[R] && Vj[w] && Vj[c] ? "xyz" : Vj[R] && Vj[w] ? "xy" : Vj[R] && Vj[c] ? "xz" : Vj[w] && Vj[c] ? "yz" : Vj[R] ? "x" : Vj[w] ? "y" : Vj[c] ? "z" : "xz"
            },
            handleTick: function() {
                var N = this
                  , K = !1
                  , g = N._moveStep
                  , m = g
                  , B = !1
                  , e = !0
                  , U = N._rotateStep * (e ? -1 : 1);
                if (N.isWalkable() || (m = 0),
                N.isPannable() || (g = 0),
                N.isRotatable() || (U = 0),
                N._32Q) {
                    var W = (Cl() - N._32Q) / 50;
                    m *= W,
                    g *= W,
                    U *= W
                }
                N._31Q && (vi(N._31Q),
                delete N._31Q,
                delete N._32Q),
                op() && (K = !0,
                N.pan(-g, 0, B, e)),
                Om() && (K = !0,
                N.pan(g, 0, B, e)),
                Kk() && (K = !0,
                ig() ? N.pan(0, g, B, e) : N.walk(m, B, e)),
                Pf() && (K = !0,
                ig() ? N.pan(0, -g, B, e) : N.walk(-m, B, e)),
                Db() && (K = !0,
                N.rotate(-U, 0, B, e)),
                Hb() && (K = !0,
                N.rotate(U, 0, B, e)),
                Xc() && (K = !0,
                N.rotate(0, -U / 2, B, e)),
                On() && (K = !0,
                N.rotate(0, U / 2, B, e)),
                K && (N._32Q = Cl(),
                N._31Q = dk(N.handleTick, N))
            },
            handleKeyDown: function(i) {
                var s = this;
                !jr(i) && pd[i.keyCode] ? s.handleTick() : Nd(i) ? s.selectAll() : Sm(i) ? s.handleDelete(i) : uc(i) && this.isResettable() && s.reset()
            },
            checkDoubleClickOnNote: function(d, e, B) {
                var q = this;
                if (B === yi) {
                    if (e.s("note.toggleable"))
                        return e.s(nq, !e.s(nq)),
                        q.fi({
                            kind: "toggleNote",
                            event: d,
                            data: e,
                            part: B
                        }),
                        !0
                } else if (B === Gp && e.s("note2.toggleable"))
                    return e.s(fo, !e.s(fo)),
                    q.fi({
                        kind: "toggleNote2",
                        event: d,
                        data: e,
                        part: B
                    }),
                    !0;
                return !1
            },
            checkDoubleClickOnRotation: function(y, o, s) {
                return s === wd ? (o.setRotationX(0),
                !0) : s === si ? (o.setRotationY(0),
                !0) : s === Ik ? (o.setRotationZ(0),
                !0) : !1
            },
            onRotateEnded: function() {},
            onWalkEnded: function() {},
            toViewPosition: function(n) {
                var x = this
                  , p = x.getWidth() / 2
                  , e = x.getHeight() / 2
                  , W = x._18Q;
                return W && W._wh === p / e || (W = nn(x),
                x._18Q = ym(W, W, vd(x)),
                x._18Q._wh !== p / e),
                n = xf([n[0], n[1], n[2], 1], W),
                {
                    x: p + p * n[0] / n[3],
                    y: e - e * n[1] / n[3]
                }
            },
            getHitPosition: function(L, j, K) {
                var n = this
                  , S = n.getWidth()
                  , i = n.getHeight()
                  , G = L.target ? n.lp(L) : L
                  , A = G.x - S / 2
                  , h = G.y - i / 2
                  , q = n.getCenterInfo()
                  , E = vd(n);
                j = j ? j : [0, 0, 0],
                K = K ? K : [0, 1, 0],
                A = A / S * q.width,
                h = -1 * h / i * q.height;
                var c = [E[0] * A, E[4] * A, E[8] * A]
                  , u = [E[1] * h, E[5] * h, E[9] * h]
                  , l = [c[0] + u[0], c[1] + u[1], c[2] + u[2]]
                  , Y = n.getCenter()
                  , Z = Ri(n, j, K, [l[0] + Y[0], l[1] + Y[1], l[2] + Y[2]]);
                return Z ? Z : [0, 0, 0]
            },
            intersectObject: function(e, l) {
                return this._raycaster.intersectObject(e, l)
            },
            intersectObjects: function(Y, l, k) {
                return this._raycaster.intersectObjects(Y, l, k)
            },
            getLineLength: function(D) {
                this.validate();
                var c = this.getData3dUI(D);
                if (c && c.getCache) {
                    var y = c.getCache();
                    if (y)
                        return y[y.length - 1].length
                }
                return 0
            },
            getLineOffset: function(A, p) {
                var R = this.getData3dUI(A);
                if (R && R.getCache) {
                    var J = R.getCache();
                    if (J)
                        return ip(J, p)
                }
                return V
            },
            isLabelVisible: function() {
                return !0
            },
            isNoteVisible: function() {
                return !0
            },
            flyTo: function() {
                function w(n, i, e) {
                    A.fromArray(ys(e, i.getMat(e)));
                    var W = e.getAnchor3d();
                    n.push((new dr).set(0 - W.x, 0 - W.y, 0 - W.z).applyMatrix4(A)),
                    n.push((new dr).set(0 - W.x, 0 - W.y, 1 - W.z).applyMatrix4(A)),
                    n.push((new dr).set(0 - W.x, 1 - W.y, 0 - W.z).applyMatrix4(A)),
                    n.push((new dr).set(0 - W.x, 1 - W.y, 1 - W.z).applyMatrix4(A)),
                    n.push((new dr).set(1 - W.x, 0 - W.y, 0 - W.z).applyMatrix4(A)),
                    n.push((new dr).set(1 - W.x, 0 - W.y, 1 - W.z).applyMatrix4(A)),
                    n.push((new dr).set(1 - W.x, 1 - W.y, 0 - W.z).applyMatrix4(A)),
                    n.push((new dr).set(1 - W.x, 1 - W.y, 1 - W.z).applyMatrix4(A))
                }
                var l = new dr
                  , f = new dr
                  , d = new dr
                  , z = new dr
                  , A = new Wc
                  , H = new C.Math.Quaternion
                  , r = new Qj;
                return function(R, g, M) {
                    var i = this;
                    if (M !== F)
                        g = {
                            animation: g,
                            ratio: M
                        };
                    else {
                        var G = typeof g;
                        ("boolean" === G || "object" === G && g.duration) && (g = {
                            animation: g
                        })
                    }
                    g = g || {},
                    l.fromArray(i.getEye()),
                    f.fromArray(i.getCenter());
                    var n, T, t = [], _ = g.center, p = g.distance === F;
                    if (_ && d.fromArray(_),
                    R instanceof C.Node)
                        _ || d.fromArray(R.p3()),
                        p && (w(t, i, R),
                        n = t.length);
                    else {
                        if (R || (R = i.dm().getDatas()),
                        !R.length)
                            return;
                        if ((p || !_) && (t = [],
                        R.forEach(function(f) {
                            w(t, i, f)
                        }),
                        n = t.length),
                        !_) {
                            for (d.set(0, 0, 0),
                            T = 0; n > T; T++)
                                d.add(t[T]);
                            d.multiplyScalar(1 / n)
                        }
                    }
                    if (i.setCenter(d.x, d.y, d.z),
                    z.subVectors(l, f),
                    g.direction || g.worldDirection) {
                        !g.worldDirection && R instanceof C.Node ? H.setFromEuler(r.set(R.r3(), R.getRotationMode(), !0)) : H.set(0, 0, 0, 1);
                        var c = z.length();
                        z.fromArray(g.worldDirection || g.direction).applyQuaternion(H).setLength(c)
                    }
                    if (p) {
                        for (var B, e, k, V, W, O = i.getNear(), S = 10, M = g.ratio || .8; S--; ) {
                            for (i._eye[0] = z.x + d.x,
                            i._eye[1] = z.y + d.y,
                            i._eye[2] = z.z + d.z,
                            B = nn(i),
                            ym(B, B, vd(i)),
                            V = !0,
                            W = -1 / 0,
                            T = 0; n > T; T++) {
                                if (k = t[T],
                                e = xf([k.x, k.y, k.z, 1], B),
                                e[3] < O && S) {
                                    z.multiplyScalar(2),
                                    V = !1;
                                    break
                                }
                                W = Math.max(W, Math.max(Math.abs(e[0]), Math.abs(e[1])) / M - e[3])
                            }
                            if (V)
                                break
                        }
                        z.setLength(W + z.length()).add(d)
                    } else
                        z.setLength(g.distance).add(d);
                    i._flyAnim && i._flyAnim.stop(!0);
                    var q = bf(g.animation);
                    if (q) {
                        i.setEye(l.x, l.y, l.z),
                        i.setCenter(f.x, f.y, f.z);
                        var L = (new dr).subVectors(z, l)
                          , E = (new dr).subVectors(d, f)
                          , v = new dr
                          , y = new dr;
                        return q.action = function(n) {
                            v.copy(l).addScaledVector(L, n),
                            y.copy(f).addScaledVector(E, n),
                            i.setCenter(y.x, y.y, y.z),
                            i.setEye(v.x, v.y, v.z)
                        }
                        ,
                        q._37o = function() {
                            delete i._flyAnim
                        }
                        ,
                        {
                            lastEye: l,
                            lastCenter: f,
                            eye: z,
                            center: d,
                            animation: i._flyAnim = Xp(q)
                        }
                    }
                    return i.setEye(z.x, z.y, z.z),
                    {
                        lastEye: l,
                        lastCenter: f,
                        eye: z,
                        center: d
                    }
                }
            }()
        }),
        Nc.RenderEnv = function(b) {
            this.gv = b,
            this.enable = !1
        }
        ,
        m.defineProperties(Nc.RenderEnv.prototype, {
            debugOn: {
                get: function() {
                    return this._debugOn
                },
                set: function(k) {
                    this._debugOn = k,
                    this.capture && this.capture()
                }
            }
        }),
        m.assign(Nc.RenderEnv.prototype, {
            renderEnvToCube: function(G, r, n, j) {
                var Z = this
                  , H = Z.gv;
                if (!G || !r || !n)
                    return Z.enable = !1,
                    Z._42 = null,
                    void 0;
                Z.enable = !0;
                var M = Math.floor(j / G * r)
                  , u = H.getGL()
                  , T = Z._renderTargets;
                T ? T.length < n && (T = Z._renderTargets = T.concat(new Array(n - T.length))) : T = Z._renderTargets = new Array(n);
                for (var Q = 0; n > Q; Q++)
                    T[Q] ? T[Q].setSize(u, j, M) : T[Q] = new Nc.RenderTarget(H,u,j,M);
                var p = !1;
                Z.capture = function() {
                    p = !0,
                    H._42(),
                    p = !1
                }
                ;
                var L = new dr
                  , c = new dr
                  , k = new dr
                  , q = new dr
                  , b = (new dr).setY(0)
                  , _ = 2 * Math.PI / n
                  , X = G / 2 / Math.tan(Math.PI / n)
                  , h = 2 * Math.atan2(r / 2, X)
                  , E = G / r;
                Z._42 = function(x, r, Q, i) {
                    var B = Z._debugOn;
                    if (!p && !B)
                        return !1;
                    L.copy(H.getEye()),
                    q.copy(H.getCenter()).sub(L);
                    var y = Math.atan2(q.z, q.x)
                      , U = H.getNear()
                      , s = H.getFovy()
                      , J = H.getAspect();
                    c.copy(H.getCenter());
                    for (var F, u = 0; n > u; u++)
                        if (F = T[u],
                        b.setZ(Math.cos(y)).setX(Math.sin(y)).multiplyScalar(X),
                        y -= _,
                        k.addVectors(L, b),
                        H.setNear(X),
                        H.setCenter([k.x, k.y, k.z]),
                        H.setFovy(h),
                        H.setAspect(E),
                        B) {
                            var D = Math.round(r / n);
                            x.viewport(D * u, 0, D, Q),
                            i()
                        } else
                            lh(x, F.frame),
                            x.viewport(0, 0, F.width, F.height),
                            x.clear(x.COLOR_BUFFER_BIT),
                            i(),
                            lh(x, V),
                            F.assureTexture();
                    return H.setNear(U),
                    H.setCenter([c.x, c.y, c.z]),
                    H.setFovy(s),
                    H.setAspect(J),
                    !0
                }
                ,
                Z.capture()
            },
            getTextureInfo: function(u) {
                var E = this._renderTargets;
                if (!E)
                    return null;
                var c = this._renderTargets[u];
                return c ? {
                    index: u,
                    texture: c.texture,
                    textureName: c.uuid
                } : null
            }
        }),
        m.assign(Nc.Graph3dView.prototype, {
            renderEnvToCube: function(s, n, y, R) {
                var h = this;
                h.envRenderer || (h.envRenderer = new Nc.RenderEnv(h)),
                h.envRenderer.renderEnvToCube(s, n, y, R)
            }
        }),
        Nc.RenderTarget = function(g, u, i, L) {
            var M = this;
            M.uuid = C.Math.generateUUID(),
            M.gv = g,
            M.init(g, u),
            M.setSize(u, i, L)
        }
        ,
        m.assign(Nc.RenderTarget.prototype, {
            init: function(v, H) {
                var B = this
                  , z = B.texture = H.createTexture();
                H.activeTexture(H.TEXTURE0),
                H.bindTexture(H.TEXTURE_2D, z),
                H.texParameteri(H.TEXTURE_2D, H.TEXTURE_WRAP_S, H.CLAMP_TO_EDGE),
                H.texParameteri(H.TEXTURE_2D, H.TEXTURE_WRAP_T, H.CLAMP_TO_EDGE),
                H.texParameteri(H.TEXTURE_2D, H.TEXTURE_MIN_FILTER, H.NEAREST),
                H.texParameteri(H.TEXTURE_2D, H.TEXTURE_MAG_FILTER, H.NEAREST),
                H.bindTexture(H.TEXTURE_2D, null),
                B.render = H.createRenderbuffer(),
                B.frame = H.createFramebuffer(),
                v._2O[B.uuid] = z
            },
            assureTexture: function() {
                var t = this
                  , E = t.uuid
                  , Q = t.gv._2O;
                Q[E] || (Q[E] = t.texture)
            },
            setSize: function(X, O, M) {
                var z = this;
                if (z.width !== O || z.height !== M) {
                    var n = X.RGBA
                      , j = X.TEXTURE_2D
                      , p = X.RENDERBUFFER
                      , J = X.FRAMEBUFFER;
                    Eg(X, z.texture),
                    X.texImage2D(j, 0, n, O, M, 0, n, X.UNSIGNED_BYTE, V),
                    fp(X, X.TEXTURE_MIN_FILTER, X.LINEAR),
                    X.bindRenderbuffer(p, z.render),
                    X.renderbufferStorage(p, X.DEPTH_COMPONENT16, O, M),
                    lh(X, z.frame),
                    X.framebufferTexture2D(J, X.COLOR_ATTACHMENT0, j, z.texture, 0),
                    X.framebufferRenderbuffer(J, X.DEPTH_ATTACHMENT, p, z.render),
                    Eg(X, V),
                    X.bindRenderbuffer(p, V),
                    lh(X, V),
                    z.width = O,
                    z.height = M
                }
            },
            toCanvas: function() {
                var m = this
                  , $ = m.gv.getGL();
                $.bindFramebuffer($.FRAMEBUFFER, m.frame);
                var O = m.width
                  , A = m.height
                  , g = new Uint8Array(4 * O * A);
                $.readPixels(0, 0, O, A, $.RGBA, $.UNSIGNED_BYTE, g),
                $.bindFramebuffer($.FRAMEBUFFER, null);
                var u = s.createElement("canvas");
                u.width = O,
                u.height = A;
                var d = u.getContext("2d")
                  , c = d.createImageData(O, A);
                return c.data.set(g),
                d.putImageData(c, 0, 0),
                u
            }
        });
        var Yi = Nc.Interactor = function(J) {
            this.gv = J
        }
        ;
        jf("Interactor", m, {
            ms_listener: 1,
            getView: function() {
                return this.gv.getView()
            },
            setUp: function() {
                this.addListeners()
            },
            tearDown: function() {
                this.removeListeners()
            }
        });
        var Xr = Nc.DefaultInteractor = function(U) {
            nm(Xr, this, [U])
        }
        ;
        jf("DefaultInteractor", Yi, {
            handle_contextmenu: function(j) {
                vh(j)
            },
            handle_mousewheel: function(k) {
                this.gv.handleScroll(k, k.wheelDelta / 40)
            },
            handle_DOMMouseScroll: function(c) {
                2 === c.axis && this.gv.handleScroll(c, -c.detail)
            },
            handle_keydown: function(r) {
                this.gv.handleKeyDown(r)
            },
            handle_mousedown: function(O) {
                this.handle_touchstart(O)
            },
            handle_touchstart: function(o) {
                vh(o);
                var Y = this
                  , W = Y.gv
                  , s = _e(o)
                  , U = W.getDataInfoAt(o)
                  , $ = U ? U.data : V
                  , y = U ? U.part : V
                  , R = W.sm()
                  , f = Ml(o)
                  , l = mq(o);
                W.setFocus(o) && (Y._62O = V,
                Y._57I = V,
                $ ? jr(o) ? R.co($) ? R.rs($) : R.as($) : R.co($) || R.ss($) : s && (jr(o) ? W.isRectSelectable() && (Y._62O = qc) : Y._57I = Qn(o)),
                Y._31Q && (vi(Y._31Q),
                delete Y._31Q,
                delete Y._32Q),
                Y._62O || (W.isFirstPersonMode() && (ig(o) || l > 2 ? Y._62O = "pan" : W.isMouseRoamable() || Nq ? (Y._62O = "roaming",
                Y.foward = f && _e(o),
                Y._32Q = Cl(),
                Y._31Q = dk(Y.tick, Y)) : s || (Y._62O = "roaming")),
                Y._62O || (s && f && rk[y] ? (Y._62O = y,
                Y.p3 = $.p3()) : s && f && xj($) && W.isSelected($) ? W.isMovable($) ? (Y._62O = "move",
                Y.p3 = $.p3(),
                Y.movedata = $) : W.isInteractive($) && (Y._62O = "none") : Nq && (l > 2 ? Y._62O = "pan" : 2 === l && (Y.dist = wi(o),
                Y._62O = "pinch")))),
                Y.point = W.lp(o),
                Dl(Y, o),
                _g(o) ? W.handleDoubleClick(o, $, y) : W.handleClick(o, $, y))
            },
            tick: function() {
                var $ = this
                  , W = $.gv
                  , g = W._moveStep;
                $.point && W.isWalkable() && ($._32Q && (g *= (Cl() - $._32Q) / 50),
                W.walk($.foward ? g : -g),
                $._32Q = Cl(),
                $._31Q = dk($.tick, $))
            },
            handle_mouseup: function(E) {
                this.handle_touchend(E)
            },
            handle_touchend: function(A) {
                var m = this._57I;
                m && (uf(m, Qn(A)) <= 1 && this.gv.sm().cs(),
                this._57I = V)
            },
            handleWindowMouseMove: function(m) {
                this.handleWindowTouchMove(m)
            },
            handleWindowTouchMove: function(U) {
                var I, P, z = this, a = z.gv, $ = z._62O, R = z.point, A = a.dm(), O = a.lp(U), M = O.x - R.x, W = O.y - R.y, p = -u * M / a.getWidth(), v = -u * W / a.getHeight();
                if ("roaming" === $)
                    z.rotate(U, p / 2, v / 2);
                else if ($ === wd || $ === si || $ === Ik)
                    a._86O || A.beginTransaction(),
                    a.fi({
                        kind: a._86O ? "betweenEditRotation" : "beginEditRotation",
                        event: U
                    }),
                    a._86O = 1,
                    a.sm().each(function(J) {
                        if (xj(J) && a.isRotationEditable(J)) {
                            var Y = t(p) > t(v) ? p : v;
                            $ === wd ? J.setRotationX(J.getRotationX() + Y) : $ === si ? J.setRotationY(J.getRotationY() + Y) : $ === Ik && J.setRotationZ(J.getRotationZ() + Y)
                        }
                    });
                else if ("move" === $ || rk[$]) {
                    $ === Er || $ === Fn || $ === Qo ? (a._87O || A.beginTransaction(),
                    a.fi({
                        kind: a._87O ? "betweenEditScale" : "beginEditScale",
                        event: U
                    }),
                    a._87O = 1) : (a._moving || A.beginTransaction(),
                    a.fi({
                        kind: a._moving ? "betweenMove" : "beginMove",
                        event: U
                    }),
                    a._moving = 1);
                    var d, F = z.p3, x = a.getPositionInfo(F), o = vd(a);
                    d = $ === vf ? "x" : $ === og ? "y" : $ === Ej ? "z" : $ === Er ? "sx" : $ === Fn ? "sy" : $ === Qo ? "sz" : a.getMoveMode(U, z.movedata),
                    M = M / a.getWidth() * x.width,
                    W = -1 * W / a.getHeight() * x.height;
                    var Q, n, g = [o[0] * M, o[4] * M, o[8] * M], h = [o[1] * W, o[5] * W, o[9] * W], C = g[0] + h[0], E = g[1] + h[1], w = g[2] + h[2], L = [F[0] + C, F[1] + E, F[2] + w], y = Fo(a.getEye(), L, !0);
                    if ("xyz" === d ? (Q = L,
                    a.moveSelection(C, E, w)) : "xz" === d ? (Q = Ri(a, F, [0, 1, 0], L),
                    Q && a.moveSelection(Q[0] - F[0], 0, Q[2] - F[2])) : "xy" === d ? (Q = Ri(a, F, [0, 0, 1], L),
                    Q && a.moveSelection(Q[0] - F[0], Q[1] - F[1], 0)) : "yz" === d ? (Q = Ri(a, F, [1, 0, 0], L),
                    Q && a.moveSelection(0, Q[1] - F[1], Q[2] - F[2])) : "x" === d || "sx" === d ? (y[0] = 0,
                    Q = Ri(a, F, y, L),
                    Q && (n = Q[0] - F[0],
                    "x" === d ? a.moveSelection(n, 0, 0) : a.sm().each(function(Y) {
                        xj(Y) && a.isSizeEditable(Y) && (I = Y.getScaleX() + n / 100,
                        P = I / Y.getScaleX(),
                        Y.setScaleX(I),
                        ig(U) && (Y.setScaleY(Y.getScaleY() * P),
                        Y.setScaleTall(Y.getScaleTall() * P)))
                    }))) : "y" === d || "sy" === d ? (y[1] = 0,
                    Q = Ri(a, F, y, L),
                    Q && (n = Q[1] - F[1],
                    "y" === d ? a.moveSelection(0, n, 0) : a.sm().each(function(w) {
                        xj(w) && a.isSizeEditable(w) && (I = w.getScaleTall() + n / 100,
                        P = I / w.getScaleTall(),
                        w.setScaleTall(I),
                        ig(U) && (w.setScaleY(w.getScaleY() * P),
                        w.setScaleX(w.getScaleX() * P)))
                    }))) : ("z" === d || "sz" === d) && (y[2] = 0,
                    Q = Ri(a, F, y, L),
                    Q && (n = Q[2] - F[2],
                    "z" === d ? a.moveSelection(0, 0, n) : a.sm().each(function(w) {
                        xj(w) && a.isSizeEditable(w) && (I = w.getScaleY() + n / 100,
                        P = I / w.getScaleY(),
                        w.setScaleY(I),
                        ig(U) && (w.setScaleX(w.getScaleX() * P),
                        w.setScaleTall(w.getScaleTall() * P)))
                    }))),
                    !Q)
                        return;
                    z.p3 = Q
                } else if ($ === qc) {
                    var X = z.div;
                    X || (X = z.div = ff(),
                    mg(z.getView(), X),
                    X.op = R,
                    X.style.background = a.getRectSelectBackground()),
                    a.fi({
                        kind: a._rectSelecting ? "betweenRectSelect" : "beginRectSelect",
                        event: U
                    }),
                    a._rectSelecting = 1,
                    X.rect = Pr(X.op, O),
                    Pc(X, X.rect)
                } else if ("pinch" === $ && 2 === mq(U)) {
                    a.fi({
                        kind: a._pinching ? "betweenPinch" : "beginPinch",
                        event: U
                    }),
                    a._pinching = 1;
                    var n = wi(U);
                    a.handlePinch(n, z.dist),
                    z.dist = n
                } else
                    "pan" === $ || ig(U) ? z.pan(U, M, W) : "none" === $ || a.isFirstPersonMode() || (_e(U) ? z.rotate(U, p, v) : (z.pan(U, M, 0),
                    a.isWalkable() && (a.fi({
                        kind: a._walking ? "betweenWalk" : "beginWalk",
                        event: U
                    }),
                    a._walking = 1,
                    a.walk(W / a.getHeight() * a.getCenterInfo().height))));
                z.point = O
            },
            pan: function(H, U, D) {
                var F = this.gv;
                if (F.isPannable()) {
                    var r = F.getCenterInfo()
                      , W = U / F.getWidth() * r.width
                      , g = -1 * D / F.getHeight() * r.height;
                    F.fi({
                        kind: F._panning ? "betweenPan" : "beginPan",
                        event: H
                    }),
                    F._panning = 1,
                    F.pan(-W, -g)
                }
            },
            rotate: function(O, q, Z) {
                var z = this.gv;
                z.isRotatable() && (z.fi({
                    kind: z._rotating ? "betweenRotate" : "beginRotate",
                    event: O
                }),
                z._rotating = 1,
                z.rotate(q, Z))
            },
            handleWindowMouseUp: function(n) {
                this.handleWindowTouchEnd(n)
            },
            handleWindowTouchEnd: function(L) {
                var P = this
                  , h = P.gv
                  , z = h.dm()
                  , K = P.div;
                if (K) {
                    var D = h.getDatasInRect(K.rect);
                    if (!D.isEmpty()) {
                        var g = h.sm()
                          , l = g.toSelection();
                        D.each(function(d) {
                            g.co(d) ? l.remove(d) : l.add(d)
                        }),
                        g.ss(l)
                    }
                    hp(K)
                }
                h._moving && (delete h._moving,
                h.fi({
                    kind: "endMove",
                    event: L
                }),
                h.onMoveEnded(),
                z.endTransaction()),
                h._panning && (delete h._panning,
                h.fi({
                    kind: "endPan",
                    event: L
                }),
                h.onPanEnded()),
                h._rotating && (delete h._rotating,
                h.fi({
                    kind: "endRotate",
                    event: L
                }),
                h.onRotateEnded()),
                h._86O && (delete h._86O,
                h.fi({
                    kind: "endEditRotation",
                    event: L
                }),
                z.endTransaction()),
                h._87O && (delete h._87O,
                h.fi({
                    kind: "endEditScale",
                    event: L
                }),
                z.endTransaction()),
                h._pinching && (delete h._pinching,
                h.fi({
                    kind: "endPinch",
                    event: L
                }),
                h.onPinchEnded()),
                h._rectSelecting && (delete h._rectSelecting,
                h.fi({
                    kind: "endRectSelect",
                    event: L
                }),
                h.onRectSelectEnded()),
                h._walking && (delete h._walking,
                h.fi({
                    kind: "endWalk",
                    event: L
                }),
                h.onWalkEnded()),
                P.dist = P.point = P._62O = P.p3 = P.movedata = P.div = P._57I = P._32Q = P._31Q = P.foward = V
            }
        });
        var vg = Nc.MapInteractor = function(q) {
            nm(vg, this, [q]),
            this._minPhi = 0,
            this._maxPhi = 5 * L / 12,
            this._keepHorizon = !0,
            this._threshold = 2,
            this._touchScaleThreshold = .05,
            this._touchRotateThreshold = .03,
            this._touchScaleCheckAccuracy = .01
        }
        ;
        jf("MapInteractor", Yi, {
            handle_contextmenu: function(v) {
                vh(v)
            },
            handle_mousewheel: function(j) {
                this.gv.handleScroll(j, j.wheelDelta / 40)
            },
            handle_DOMMouseScroll: function(J) {
                2 === J.axis && this.gv.handleScroll(J, -J.detail)
            },
            handle_keydown: function(G) {
                this.gv.handleKeyDown(G)
            },
            handle_mousedown: function(T) {
                this.handle_touchstart(T)
            },
            handle_touchstart: function(R) {
                vh(R);
                var J = this
                  , H = J.gv;
                if (H.setFocus(R)) {
                    H.lp(R);
                    var e = H.getDataInfoAt(R)
                      , w = e ? e.data : V
                      , K = e ? e.part : V;
                    if (!w || !H.isInteractive(w)) {
                        var $ = J.editing = {
                            point: H.lp(R)
                        };
                        Nq ? $.touch = !0 : ($.touch = !1,
                        $.pan = _e(R)),
                        Dl(J, R)
                    }
                    _g(R) ? H.handleDoubleClick(R, w, K) : H.handleClick(R, w, K)
                }
            },
            handle_mouseup: function(c) {
                this.handle_touchend(c)
            },
            handle_touchend: function() {},
            handleWindowMouseMove: function(u) {
                this.handleWindowTouchMove(u)
            },
            handleWindowTouchMove: function(A) {
                var b = this
                  , H = b.gv
                  , z = b.editing;
                if (z) {
                    var f = H.lp(A)
                      , y = z.point
                      , B = f.x - y.x
                      , G = f.y - y.y;
                    if (!z.moved) {
                        if (Math.abs(B) < b.threshold && Math.abs(G) < b.threshold && !(A.touches && A.touches.length > 1))
                            return;
                        z.moved = !0
                    }
                    if (z.point = f,
                    z.touch) {
                        var P = A.touches.length;
                        if (2 !== P)
                            b.pan(A, B, G);
                        else {
                            if (1 >= P)
                                return;
                            var N = A.touches
                              , O = {
                                x: N[0].clientX,
                                y: N[0].clientY
                            }
                              , r = {
                                x: N[1].clientX,
                                y: N[1].clientY
                            }
                              , d = {
                                x: r.x - O.x,
                                y: r.y - O.y
                            }
                              , n = z.lastCenter
                              , $ = Math.atan2(d.y, d.x)
                              , Z = z.theta
                              , U = 0;
                            Z == V ? Z = z.theta = $ : (U = $ - Z,
                            z.thetaStarted || Math.abs(U) > b.touchRotateThreshold ? (z.thetaStarted = !0,
                            z.theta = $) : U = 0);
                            var h = L * (O.y + r.y) / 2 / H.getHeight()
                              , w = z.phi
                              , t = 0;
                            w == V ? w = z.phi = h : (t = h - w,
                            z.phiStarted || Math.abs(t) > b.touchRotateThreshold ? (z.phiStarted = !0,
                            z.phi = h) : t = 0);
                            var Y, c = Math.sqrt(d.x * d.x + d.y * d.y), Q = z.vlen;
                            if (Q) {
                                var i = O.x - n.x
                                  , q = O.y - n.y
                                  , s = r.x - n.x
                                  , o = r.y - n.y
                                  , m = Math.sqrt(i * i + q * q)
                                  , W = Math.sqrt(s * s + o * o)
                                  , g = Q / 2
                                  , J = b._sign2(m - g)
                                  , R = b._sign2(W - g);
                                0 > J * R || 0 === J && 0 === R ? (Y = 1,
                                z.vlen = c) : (Y || (Y = c / Q),
                                z.scaleStarted || Math.abs(Y - 1) > b.touchScaleThreshold ? (z.vlen = c,
                                z.scaleStarted = !0) : Y = 1)
                            } else
                                Q = z.vlen = c,
                                Y = 1;
                            1 !== Y && H.setZoom(Y),
                            (t || U) && b.rotate(A, U, -t),
                            z.lastCenter = {
                                x: (r.x + O.x) / 2,
                                y: (r.y + O.y) / 2
                            }
                        }
                    } else if (z.pan)
                        b.pan(A, B, G);
                    else {
                        var j = -u * B / H.getWidth()
                          , K = -u * G / H.getHeight();
                        b.rotate(A, j, K)
                    }
                }
            },
            _sign2: function(U) {
                return Math.abs(U) < this._touchScaleCheckAccuracy ? 0 : U > 0 ? 1 : -1
            },
            handleWindowMouseUp: function(v) {
                this.handleWindowTouchEnd(v)
            },
            handleWindowTouchEnd: function(J) {
                var I = this
                  , B = I.editing;
                if (I.editing = null,
                B) {
                    var d = I.gv;
                    if (!B.moved && B.pan) {
                        var g = d.getDataAt(J);
                        g ? d.sm().setSelection([g]) : d.sm().clearSelection()
                    } else
                        d._panning = null,
                        d._rotating = null,
                        d.fi({
                            kind: B.pan ? "endPan" : "endRotate",
                            event: J
                        })
                }
            },
            pan: function(D, L, S) {
                var z = this
                  , Q = z.gv;
                if (Q.isPannable()) {
                    var M = Q.getCenterInfo()
                      , T = -L / Q.getWidth() * M.width
                      , F = 1 * S / Q.getHeight() * M.height;
                    Q.fi({
                        kind: Q._panning ? "betweenPan" : "beginPan",
                        event: D
                    }),
                    Q._panning = 1;
                    var B = z.keepHorizon
                      , O = z.editing.touch;
                    if ((O && D.touches && D.touches.length > 1 || !O && ig(D)) && (B = !B),
                    !B)
                        return Q.pan(T, F);
                    if (T || F) {
                        var E = vd(Q)
                          , x = [E[0] * T, E[4] * T, E[8] * T]
                          , m = [E[1], 0, E[9]]
                          , C = Math.sqrt(m[0] * m[0] + m[2] * m[2]);
                        C && (m = [m[0] / C * F, 0, m[2] / C * F]);
                        var d = x[0] + m[0]
                          , v = x[1] + m[1]
                          , Y = x[2] + m[2]
                          , a = Q._center
                          , g = Q._eye;
                        a[0] += d,
                        a[1] += v,
                        a[2] += Y,
                        g[0] += d,
                        g[1] += v,
                        g[2] += Y,
                        Q.fp(Pi, V, g),
                        Q.fp(Do, V, a)
                    }
                }
            },
            rotate: function(C, c, L) {
                var H = this
                  , P = H.gv;
                if (P.isRotatable()) {
                    var f = P._center
                      , A = P._eye
                      , W = Fo(A, f)
                      , w = x(r(W[0] * W[0] + W[2] * W[2]), W[1])
                      , _ = w + L;
                    _ = Math.max(H.minPhi, Math.min(H.maxPhi, _)),
                    L = _ - w,
                    P.fi({
                        kind: P._rotating ? "betweenRotate" : "beginRotate",
                        event: C
                    }),
                    P._rotating = 1,
                    P.rotate(c, L)
                }
            }
        }),
        m.defineProperties(vg.prototype, {
            minPhi: {
                get: function() {
                    return this._minPhi
                },
                set: function(w) {
                    this._minPhi = w
                }
            },
            maxPhi: {
                get: function() {
                    return this._maxPhi
                },
                set: function(Y) {
                    this._maxPhi = Y
                }
            },
            keepHorizon: {
                get: function() {
                    return this._keepHorizon
                },
                set: function(e) {
                    this._keepHorizon = e
                }
            },
            threshold: {
                get: function() {
                    return this._threshold
                },
                set: function(V) {
                    this._threshold = V
                }
            },
            touchScaleThreshold: {
                get: function() {
                    return this._touchScaleThreshold
                },
                set: function(z) {
                    this._touchScaleThreshold = z
                }
            },
            touchRotateThreshold: {
                get: function() {
                    return this._touchRotateThreshold
                },
                set: function(Y) {
                    this._touchRotateThreshold = Y
                }
            }
        });
        var eb = function(M) {
            this.gv = M
        };
        fh(eb, m, {
            _iv: !0,
            iv: function() {
                this._iv = !0
            },
            face: function(O, w) {
                var Q = this
                  , p = Q.gv.getGL();
                if (!p || !xj(O))
                    return V;
                var D = w.x
                  , H = w.width
                  , W = w.height
                  , l = Q.height - w.y - W
                  , F = M(H / 2)
                  , s = new Uint8Array(4 * H * W)
                  , R = 0;
                for (Q.iv(),
                Q.validate(O),
                lh(p, Q.frame),
                p.readPixels(D, l, H, W, p.RGBA, p.UNSIGNED_BYTE, s),
                lh(p, V),
                Q.iv(); F >= R; R++)
                    for (var X = F - R, a = F + R, i = X; a >= i; i++)
                        for (var x = X; a >= x; x++)
                            if (i === X || i === a || x === X || x === a) {
                                var T = Xg.m[s[4 * (i * H + x)]];
                                if (T)
                                    return T
                            }
            },
            get: function(N, K) {
                this.validate();
                var h = this
                  , b = h.gv.getGL();
                if (!b)
                    return V;
                var j, E, H = N.x, m = N.width, A = N.height, w = h.height - N.y - A, q = M(m / 2), T = new Uint8Array(4 * m * A), O = 0, J = T.length, B = K ? V : new Vr, p = K ? V : {};
                if (lh(b, h.frame),
                b.readPixels(H, w, m, A, b.RGBA, b.UNSIGNED_BYTE, T),
                lh(b, V),
                K) {
                    for (; q >= O; O++)
                        for (var P = q - O, R = q + O, t = P; R >= t; t++)
                            for (var d = P; R >= d; d++)
                                if ((t === P || t === R || d === P || d === R) && (j = h.info(T, 4 * (t * m + d))))
                                    return j
                } else
                    for (; J > O; O += 4)
                        j = h.info(T, O),
                        j && (E = j.data,
                        p[E._id] || (B.add(E),
                        p[E._id] = E));
                return B
            },
            info: function(T, V) {
                return this.colorMap[(T[V] << 16) + (T[V + 1] << 8) + T[V + 2] + ((127 & T[V + 3]) << 24)]
            },
            validate: function(u) {
                var m = this
                  , b = m.gv
                  , N = b.getGL();
                if (N) {
                    var k = b.getWidth()
                      , R = b.getHeight()
                      , G = N.RGBA
                      , X = N.TEXTURE_2D
                      , H = N.RENDERBUFFER
                      , L = N.FRAMEBUFFER;
                    m.texture || (m.texture = Pn(N),
                    m.render = N.createRenderbuffer(),
                    m.frame = N.createFramebuffer()),
                    (m.width !== k || m.height !== R) && (Eg(N, m.texture),
                    N.texImage2D(X, 0, G, k, R, 0, G, N.UNSIGNED_BYTE, V),
                    fp(N, N.TEXTURE_MIN_FILTER, N.LINEAR),
                    N.bindRenderbuffer(H, m.render),
                    N.renderbufferStorage(H, N.DEPTH_COMPONENT16, k, R),
                    lh(N, m.frame),
                    N.framebufferTexture2D(L, N.COLOR_ATTACHMENT0, X, m.texture, 0),
                    N.framebufferRenderbuffer(L, N.DEPTH_ATTACHMENT, H, m.render),
                    Eg(N, V),
                    N.bindRenderbuffer(H, V),
                    lh(N, V),
                    m.width = k,
                    m.height = R),
                    m._iv && (m._iv = !1,
                    lh(N, m.frame),
                    b._42(u || (m.colorMap = {}), 1),
                    lh(N, V))
                }
            }
        });
        var or = function(p) {
            this.gv = p
        };
        fh(or, m, {
            gap: 0,
            size: 0,
            _42: function(_, f) {
                var m = this
                  , K = m.gv
                  , Y = K._gridGap
                  , b = K._gridSize;
                if (K._gridVisible) {
                    if (m.gap !== Y || m.size !== b) {
                        for (var k = [], U = K._gridSize / 2, B = Y * U, R = 0; 2 * U + 1 > R; R++) {
                            var g = 6 * R
                              , A = 6 * (2 * U + 1) + g;
                            k[g] = -B,
                            k[g + 1] = 0,
                            k[g + 2] = -B + R * Y,
                            k[g + 3] = B,
                            k[g + 4] = 0,
                            k[g + 5] = -B + R * Y,
                            k[A] = -B + R * Y,
                            k[A + 1] = 0,
                            k[A + 2] = -B,
                            k[A + 3] = -B + R * Y,
                            k[A + 4] = 0,
                            k[A + 5] = B
                        }
                        m.vs = new mj(k),
                        m.gap = Y,
                        m.size = b
                    }
                    Bn(K),
                    rg(_, f),
                    kf(_),
                    Rl(_, f, 1, K._gridColor, K._buffer.vs, m.vs),
                    de(_, 0, m.vs.length / 3, _.LINES),
                    rf(_),
                    Il(_, f)
                } else
                    m.vs = m.gap = m.size = V
            }
        });
        var Gh = function(t) {
            this.gv = t
        };
        fh(Gh, m, {
            _42: function(u, $) {
                var O = this.gv
                  , F = O._buffer.vs
                  , f = O._axisXColor
                  , t = O._axisYColor
                  , e = O._axisZColor
                  , U = O._originAxisVisible
                  , r = O._centerAxisVisible;
                if (U || r) {
                    var N = i ? u.TRIANGLES : u.TRIANGLE_FAN
                      , l = u.LINES;
                    if (Bn(O),
                    rg(u, $),
                    kf(u),
                    U) {
                        var d = O.getCenterInfo()
                          , Q = b(d.width, d.height) / 5
                          , q = .8 * Q
                          , R = .05 * Q;
                        Rl(u, $, 1.5, f, F, new mj([0, 0, 0, Q, 0, 0, q, R, 0, q, 0, R, q, -R, 0, q, 0, -R, q, R, 0, 0, 0, 0, 0, Q, 0, R, q, 0, 0, q, R, -R, q, 0, 0, q, -R, R, q, 0, 0, 0, 0, 0, 0, Q, R, 0, q, 0, R, q, -R, 0, q, 0, -R, q, R, 0, q])),
                        de(u, 0, 2, l),
                        de(u, 1, 6, N),
                        Rl(u, $, V, t),
                        de(u, 7, 2, l),
                        de(u, 8, 6, N),
                        Rl(u, $, V, e),
                        de(u, 14, 2, l),
                        de(u, 15, 6, N)
                    }
                    if (r) {
                        var G = O._center
                          , m = G[0]
                          , Z = G[1]
                          , h = G[2]
                          , d = O.getPositionInfo(G);
                        Q = b(d.width, d.height) / 20,
                        Rl(u, $, 1.5, f, F, new mj([m, Z, h, m + Q, Z, h, m, Z, h, m, Z + Q, h, m, Z, h, m, Z, h + Q])),
                        de(u, 0, 2, l),
                        Rl(u, $, V, t),
                        de(u, 2, 2, l),
                        Rl(u, $, V, e),
                        de(u, 4, 2, l)
                    }
                    rf(u),
                    Il(u, $)
                }
            }
        });
        var lo = function(P) {
            this.gv = P
        }
          , vf = "edit_tx"
          , og = "edit_ty"
          , Ej = "edit_tz"
          , wd = "edit_rx"
          , si = "edit_ry"
          , Ik = "edit_rz"
          , Er = "edit_sx"
          , Fn = "edit_sy"
          , Qo = "edit_sz"
          , rk = {};
        rk[vf] = 1,
        rk[og] = 1,
        rk[Ej] = 1,
        rk[wd] = 1,
        rk[si] = 1,
        rk[Ik] = 1,
        rk[Er] = 1,
        rk[Fn] = 1,
        rk[Qo] = 1,
        fh(lo, m, {
            _42: function(X, q, C) {
                var r = this
                  , p = r.gv
                  , W = p.sm().ld();
                if (p.isEditable(W) && !p.isEditHelperDisabled() && xj(W) && (!p.isFirstPersonMode() || !p.isMouseRoamable() && !Nq)) {
                    Bn(p);
                    var G, F, M = p.isMovable(W), Q = p.isRotationEditable(W), Y = p.isSizeEditable(W), R = p._axisXColor, Z = p._axisYColor, $ = p._axisZColor, K = p._editSizeColor, z = W.p3(), J = uf(p.getEye(), z) / 10, v = J / (C ? 5 : 10), f = .7 * J, T = .4 * f, w = z[0], y = z[1], j = z[2];
                    G = [0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0],
                    M && r._17O(X, q, W, C, vf, R, G, [w, y - v, j, w + f, y - v, j, w + f, y, j, w + f, y, j, w, y, j, w, y - v, j, w, y - v, j + v, w + f, y - v, j + v, w + f, y - v, j, w + f, y - v, j, w, y - v, j, w, y - v, j + v]),
                    F = w + f,
                    Y && r._17O(X, q, W, C, Er, K, G, [F, y - v, j, F + T, y - v, j, F + T, y, j, F + T, y, j, F, y, j, F, y - v, j, F, y - v, j + v, F + T, y - v, j + v, F + T, y - v, j, F + T, y - v, j, F, y - v, j, F, y - v, j + v]),
                    F += T,
                    Q && r._17O(X, q, W, C, wd, R, G, [F, y - v, j, F + T, y - v, j, F + T, y, j, F + T, y, j, F, y, j, F, y - v, j, F, y - v, j + v, F + T, y - v, j + v, F + T, y - v, j, F + T, y - v, j, F, y - v, j, F, y - v, j + v]),
                    G = [0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0],
                    M && r._17O(X, q, W, C, og, Z, G, [w, y, j, w, y + f, j, w - v, y + f, j, w - v, y + f, j, w - v, y, j, w, y, j, w, y, j, w, y, j - v, w, y + f, j - v, w, y + f, j - v, w, y + f, j, w, y, j]),
                    F = y + f,
                    Y && r._17O(X, q, W, C, Fn, K, G, [w, F, j, w, F + T, j, w - v, F + T, j, w - v, F + T, j, w - v, F, j, w, F, j, w, F, j, w, F, j - v, w, F + T, j - v, w, F + T, j - v, w, F + T, j, w, F, j]),
                    F += T,
                    Q && r._17O(X, q, W, C, si, Z, G, [w, F, j, w, F + T, j, w - v, F + T, j, w - v, F + T, j, w - v, F, j, w, F, j, w, F, j, w, F, j - v, w, F + T, j - v, w, F + T, j - v, w, F + T, j, w, F, j]),
                    G = [1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0],
                    M && r._17O(X, q, W, C, Ej, $, G, [w, y, j, w, y, j + f, w, y - v, j + f, w, y - v, j + f, w, y - v, j, w, y, j, w, y - v, j, w - v, y - v, j, w - v, y - v, j + f, w - v, y - v, j + f, w, y - v, j + f, w, y - v, j]),
                    F = j + f,
                    Y && r._17O(X, q, W, C, Qo, K, G, [w, y, F, w, y, F + T, w, y - v, F + T, w, y - v, F + T, w, y - v, F, w, y, F, w, y - v, F, w - v, y - v, F, w - v, y - v, F + T, w - v, y - v, F + T, w, y - v, F + T, w, y - v, F]),
                    F += T,
                    Q && r._17O(X, q, W, C, Ik, $, G, [w, y, F, w, y, F + T, w, y - v, F + T, w, y - v, F + T, w, y - v, F, w, y, F, w, y - v, F, w - v, y - v, F, w - v, y - v, F + T, w - v, y - v, F + T, w, y - v, F + T, w, y - v, F])
                }
            },
            _17O: function(x, d, o, m, E, X, S, W) {
                var Y = this.gv._buffer;
                xq(x, d, m, !0, o, E),
                Hr(x, d, V, !0, V, !0, V, !1),
                fk(x, d.uDiffuse, X),
                ks(x, Y.vs, new mj(W), d.aPosition),
                ks(x, Y.ns, new mj(S), d.aNormal),
                kf(x),
                de(x, 0, 12),
                rf(x),
                Uq(x, d)
            }
        });
        var Br = C.Raycaster = function(b) {
            this.gv = b
        }
        ;
        bm("Raycaster", m, {
            intersect: function(e) {
                var j = this
                  , Z = j.gv
                  , h = Z.getDataAt(e);
                return h ? j.intersectObject(e, h) : null
            },
            intersectObjects: function(T, z, N) {
                var D, C, o, Q, d = this, J = 1 / 0, j = T.origin || (new dr).fromArray(d.gv.getEye());
                return z.forEach(function(S) {
                    N && N(S) === !1 || S.s("intersect") !== !1 && (D = d.intersectObject(T, S),
                    D && (C = j.distanceToSquared(D.world),
                    J > C && (o = S,
                    Q = D,
                    J = C)))
                }),
                {
                    data: o,
                    intersect: Q
                }
            },
            intersectObject: function(i, h) {
                if (i instanceof Qd)
                    return this._intersectObjectImpl(i, h);
                var N, S, w = this, R = w.gv;
                S = R.unproject(i);
                var Y = R.getEye();
                R.isOrtho() ? (N = Fo(R.getCenter(), Y),
                N[0] += N[0],
                N[1] += N[1],
                N[2] += N[2]) : N = Y,
                N = new dr(N);
                var m = new dr(S).sub(N).normalize()
                  , d = new C.Math.Ray(N,m);
                return w._intersectObjectImpl(d, h)
            },
            _intersectObjectImpl: function() {
                function i() {
                    var z = new dr;
                    return z.subVectors(f, I),
                    e.subVectors(r, I),
                    z.cross(e).normalize(),
                    z
                }
                function W(V, D, f, K, M, N, Q) {
                    return cn.barycoordFromPoint(V, D, f, K, Y),
                    M.multiplyScalar(Y.x),
                    N.multiplyScalar(Y.y),
                    Q.multiplyScalar(Y.z),
                    M.add(N).add(Q),
                    M.clone()
                }
                var m = new Wc
                  , D = new Wc
                  , P = new Qd
                  , u = new dr
                  , G = new dr
                  , H = new dr
                  , c = new dr
                  , O = new dr
                  , r = new dr
                  , I = new dr
                  , f = new dr
                  , l = new ph
                  , V = new ph
                  , y = new ph
                  , e = new dr
                  , d = {
                    vs: An,
                    is: kn,
                    uv: hj
                }
                  , Y = new dr;
                return function(T, q) {
                    var _ = this.gv.getData3dUI(q)
                      , Z = q.mat || _.mat;
                    if (Z) {
                        m.fromArray(Z),
                        D.getInverse(m),
                        P.copy(T).applyMatrix4(D);
                        var U, M, E = "body", a = _.shapeModel;
                        if (a || (a = Gk(_)),
                        a || (q instanceof C.Node && !(q instanceof C.Shape) ? (U = !0,
                        a = d) : (M = !0,
                        a = [_.left, _.front, _.right, _.back, _.top, _.bottom])),
                        !a)
                            return console.log("Can not find shape model."),
                            null;
                        _b(a) || (a = [a]);
                        var L, F, k, A, h, e, o, N, s, p, B, g, K, X, $ = 1 / 0, z = ["", "top_", "bottom_"], R = !1;
                        for (L = 0,
                        F = a.length; F > L; L++)
                            if (g = a[L])
                                for (k = 0,
                                A = z.length; A > k; k++)
                                    if (K = z[k],
                                    o = g[K + "vs"],
                                    N = g[K + "is"],
                                    s = g[K + "uv"] || g[K + "tuv"],
                                    o) {
                                        if (X = g[K + "boundingBox"]) {
                                            if (!P.intersectBox(X))
                                                continue
                                        } else
                                            g[K + "boundingBox"] = X = new C.Math.Box3;
                                        for (h = 0,
                                        e = N ? N.length : o.length / 3; e > h; h += 3)
                                            N ? (G.fromArray(o, 3 * N[h]),
                                            H.fromArray(o, 3 * N[h + 1]),
                                            c.fromArray(o, 3 * N[h + 2])) : (G.fromArray(o, 3 * h),
                                            H.fromArray(o, 3 * (h + 1)),
                                            c.fromArray(o, 3 * (h + 2))),
                                            X.expandByPoint(G),
                                            X.expandByPoint(H),
                                            X.expandByPoint(c),
                                            p = P.intersectTriangle(G, H, c, !1, u),
                                            p && (B = P.origin.distanceTo(p),
                                            $ > B && ($ = B,
                                            O.copy(p),
                                            r.copy(G),
                                            I.copy(H),
                                            f.copy(c),
                                            "" !== K ? E = K.slice(0, -1) : U ? E = db[Math.floor(h / 6)] : M && (E = db[L]),
                                            s && (R = !0,
                                            N ? (l.fromArray(s, 2 * N[h]),
                                            V.fromArray(s, 2 * N[h + 1]),
                                            y.fromArray(s, 2 * N[h + 2])) : (l.fromArray(s, 2 * h),
                                            V.fromArray(s, 2 * (h + 1)),
                                            y.fromArray(s, 2 * (h + 2))))))
                                    }
                        if (!isFinite($))
                            return null;
                        var t, x = O.clone().applyMatrix4(m);
                        R && (t = W(O, r, I, f, l, V, y));
                        var S = i(r, I, f)
                          , n = i(r.applyMatrix4(m), I.applyMatrix4(m), f.applyMatrix4(m))
                          , j = P.direction.dot(S);
                        return j > 0 && (S.multiplyScalar(-1),
                        n.multiplyScalar(-1)),
                        {
                            world: x,
                            local: O.clone(),
                            worldNormal: n,
                            normal: S,
                            uv: t,
                            part: E
                        }
                    }
                }
            }()
        });
        var Xk = function(r, a) {
            this.gv = r,
            this.s = function(n, i, A) {
                return i == V && (i = A),
                i == V ? a.getStyle(n) : _p(i, a, r)
            }
            ,
            this.data = a
        };
        fh(Xk, m, {
            I3d: !0,
            ms_icons: 1,
            _iv: !0,
            iv: function() {
                this._iv = !0
            },
            _42: function(w, e, K, p) {
                var l = this
                  , h = l.data;
                if (!(h instanceof Lc)) {
                    var E, Z, b, H, Q, f, G, c = l.gv, U = h._id, s = l.s("shape3d.alwaysOnTop") ? null : l.s("batch"), I = c._batchIndexMap, m = c._batchModelMap, D = c.isSelectable(h), L = c.getBrightness(h), d = L != V && 1 !== L;
                    if (l.needValidate(w)) {
                        if (b = Jm(I, m, h, s),
                        l.validate(b, s ? vo[s] || wg : V),
                        b && (H = I[U],
                        Q = H.size = b.vs.length / 3 - H.begin,
                        G = b.rs))
                            for (L = d ? L : 1,
                            f = 0; Q > f; f++)
                                G.push(L);
                        if (xj(h)) {
                            var T = c.getWireframeGeometry(h);
                            if (T)
                                Ur(c, h, T);
                            else {
                                var S = c.getWireframe(h);
                                S && Ur(c, h, S)
                            }
                        }
                        l.labelInfo = l.label2Info = l.noteInfo = l.note2Info = l._38o = V,
                        l._24O(Pd, "getLabel"),
                        l._24O(mi, "getLabel2"),
                        l._26O(yi, "getNote"),
                        l._26O(Gp, "getNote2"),
                        l._15O(),
                        l.interactiveInfo = c.isInteractive(h) ? {} : V,
                        l._iv = !1
                    }
                    d && fk(w, e.uBrightness, L),
                    fk(w, e.uAlphaTest, l.s("alphaTest")),
                    Z = xq(w, e, K, D, h, ar),
                    Z && (gl(Z, I[U], m),
                    gl(Z, c._polylineIndexMap[U], c._polylineModelMap),
                    gl(Z, c._wireframeIndexMap[U], c._wireframeModelMap)),
                    I[U] || l._80o(w, e, p),
                    c.isLabelVisible(h) && ((E = l.labelInfo) && (xq(w, e, K, D, h, Pd),
                    l._28O(E, Pd, p)),
                    (E = l.label2Info) && (xq(w, e, K, D, h, mi),
                    l._28O(E, mi, p))),
                    c.isNoteVisible(h) && ((E = l.noteInfo) && (xq(w, e, K, D, h, yi),
                    l._29O(E, yi, p)),
                    (E = l.note2Info) && (xq(w, e, K, D, h, Gp),
                    l._29O(E, Gp, p))),
                    (E = l._38o) && l._99O(w, e, E, K, D, p),
                    d && fk(w, e.uBrightness, 1)
                }
            },
            needValidate: function() {
                return this._iv
            },
            validate: function() {},
            _16O: function() {
                return ng
            },
            _80o: function() {},
            dispose: function() {},
            _calcAnchorMat: function(a) {
                if (a.hasOwnProperty("_anchor") || a.hasOwnProperty("_anchorElevation")) {
                    var s = a.getAnchor3d()
                      , C = {
                        x: s.x - .5,
                        y: s.y - .5,
                        z: s.z - .5
                    }
                      , B = Ue();
                    return ho(B, [-C.x, -C.y, -C.z]),
                    B
                }
            },
            getBodyColor: function(J) {
                var H = this.data
                  , F = this.gv.getBodyColor(H);
                return F ? F : J ? H.getStyle(J) : V
            },
            _24O: function(t, M) {
                var J = this
                  , f = J.data
                  , F = J.gv
                  , y = J.s
                  , U = F[M](f);
                if (U != V) {
                    var E = y(t + ".scale")
                      , $ = y(t + ".max")
                      , w = J[t + "Info"] = {
                        label: U,
                        textureScale: y(t + ".texture.scale"),
                        color: F[M + "Color"](f),
                        font: y(t + ".font"),
                        align: y(t + ".align"),
                        background: F[M + "Background"](f)
                    }
                      , h = w.rect = pq(w, U);
                    $ > 0 && $ < h.width && (w.labelWidth = h.width,
                    h.width = $),
                    h.x = h.y = 0,
                    h.width *= E,
                    h.height *= E,
                    w.mat = J._16O(y(t + ".autorotate"), y(t + ".position"), h, y(t + ".face"), y(t + ".t3"), y(t + ".r3"), y(t + ".rotationMode"));
                    var b = h.width / 2
                      , N = h.height / 2;
                    w.vs = new mj([-b, N, 0, -b, -N, 0, b, -N, 0, b, N, 0]),
                    h.width /= E,
                    h.height /= E
                }
            },
            _26O: function(K, j) {
                var x = this
                  , t = x.data
                  , F = x.gv
                  , P = x.s
                  , H = F[j](t);
                if (H != V) {
                    var p = P(K + ".scale")
                      , N = this[K + "Info"] = {
                        note: H,
                        textureScale: P(K + ".texture.scale"),
                        expanded: P(K + ".expanded"),
                        font: P(K + ".font"),
                        color: P(K + ".color"),
                        align: P(K + ".align"),
                        borderWidth: P(K + ".border.width"),
                        borderColor: P(K + ".border.color"),
                        background: F[j + "Background"](t)
                    };
                    if (N.expanded) {
                        var A = P(K + ".max")
                          , O = pq(N, H);
                        O.width += 6,
                        O.height += 2,
                        A > 0 && A < O.width && (N.labelWidth = O.width,
                        O.width = A);
                        var J = {
                            x: -O.width / 2,
                            y: -8 - O.height,
                            width: O.width,
                            height: O.height + 8
                        }
                    } else
                        J = {
                            x: -6,
                            y: -18,
                            width: 12,
                            height: 18
                        };
                    N.mat = x._16O(P(K + ".autorotate"), P(K + ".position"), V, P(K + ".face"), P(K + ".t3"), P(K + ".r3"), P(K + ".rotationMode")),
                    N.rect = J,
                    1 !== p && (J = nc(J),
                    J.x *= p,
                    J.height *= p,
                    J.y = -J.height,
                    J.width *= p);
                    var b = J.x
                      , w = J.y
                      , c = J.width
                      , L = J.height;
                    N.vs = new mj([b, -w, 0, b, -w - L, 0, b + c, -w - L, 0, b + c, -w, 0])
                }
            },
            _28O: function(c, p, x) {
                if (x(this.s(p + ".transparent"))) {
                    var u = c.rect
                      , C = c.textureScale
                      , f = u.width * C
                      , j = u.height * C;
                    if (f >= 1 && j >= 1) {
                        var E = Kj(f, j);
                        1 !== C && (E.translate(E, u.x, u.y),
                        E.scale(C, C),
                        E.translate(E, -u.x, -u.y)),
                        Ji(E, c),
                        E.restore(),
                        rl(this, p, c.mat, c.vs, !0)
                    }
                }
            },
            _29O: function(_, e, X) {
                if (X(this.s(e + ".transparent"))) {
                    var k = _.rect
                      , y = _.textureScale
                      , s = k.x
                      , S = k.y
                      , p = k.width * y
                      , c = k.height * y;
                    if (p >= 1 && c >= 1) {
                        k.x = k.y = 0;
                        var h = Kj(p, c);
                        1 !== y && h.scale(y, y),
                        Jl(h, _),
                        h.restore(),
                        k.x = s,
                        k.y = S,
                        rl(this, e, _.mat, _.vs, !1)
                    }
                }
            },
            _99O: function(F, Q, t, Z, y, I) {
                if (t) {
                    var U = this
                      , i = U.gv
                      , n = U.data
                      , X = i._buffer
                      , P = i._1O
                      , S = t.icons;
                    for (var W in S) {
                        var k = S[W]
                          , w = t.rects[W];
                        if (w && I(_p(k.transparent, n, i))) {
                            xq(F, Q, Z, y, n, W);
                            var K = _p(k.shape3d, n, i)
                              , h = K ? [K] : _p(k.names, n, i)
                              , R = h ? h.length : 0
                              , E = _p(k.textureScale, n, i) || 1
                              , M = _p(k.light, n, i);
                            M == V && (M = K ? !0 : !1),
                            Hr(F, Q, _p(k.blend, n, i), M, _p(k.opacity, n, i), _p(k.reverseFlip, n, i), _p(k.reverseColor, n, i), _p(k.reverseCull, n, i));
                            for (var L = 0; R > L; L++) {
                                var b = h[L]
                                  , u = w[L];
                                if (Kb(U, u.mat),
                                K)
                                    ib(i, n, Gk(U, K), U);
                                else {
                                    var m = bn(b);
                                    if (m) {
                                        var H = u.width * E
                                          , l = u.height * E;
                                        if (H >= 1 && l >= 1) {
                                            var p = Kj(H, l);
                                            rh(p, m, _p(k.stretch, n, i), 0, 0, H, l, n, i),
                                            p.restore(),
                                            Pn(F, zb, P),
                                            kf(F, Q, P, _p(k.discardSelectable, n, i), X.uv, Zl),
                                            ks(F, X.vs, u.vs, Q.aPosition),
                                            ed(F, X.ns, kc, Q.aNormal),
                                            Fk(F, X.is, Ti),
                                            pe(F, 0, Ti.length),
                                            rf(F, Q, P)
                                        }
                                    }
                                }
                                cb(i)
                            }
                            Uq(F, Q)
                        }
                    }
                }
            }
        });
        var td = function($, y) {
            nm(td, this, [$, y])
        };
        fh(td, Xk, {
            _16O: function(T, c, B, e, D, I, p, Q, W) {
                var j = this.data
                  , u = j.getFinalScale3d()
                  , G = Dk(c, u, B, e, Q, W);
                if (j.hasOwnProperty("_anchor") || j.hasOwnProperty("_anchorElevation")) {
                    var v = j.getAnchor3d();
                    G[0] -= (v.x - .5) * u[0],
                    G[1] -= (v.y - .5) * u[1],
                    G[2] -= (v.z - .5) * u[2]
                }
                return Mi(Ue(), G, j.p3(), e, D, I, p, T, j.getFinalRotation3d(), j.getRotationMode())
            },
            clear: function() {
                var b = this;
                b.faceMat = b.mat = b.shapeModel = b.left = b.right = b.front = b.back = b.top = b.bottom = b.csg = V
            },
            needValidate: function(G) {
                if (this._iv)
                    return this._validateFrameId = G._renderInfo.frame,
                    !0;
                if (this.s("shape3d.autorotate") || this.s("shape3d.fixSizeOnScreen") || this.s("hide.overlapping.group")) {
                    var Q = G._renderInfo.frame;
                    if (this._validateFrameId !== Q)
                        return this._validateFrameId = Q,
                        !0
                }
                return !1
            },
            validate: function(z, E) {
                var h = this
                  , g = h.gv
                  , f = h.data
                  , L = Gk(h);
                h._updateAutoRotation(),
                h._updateFixSize2d(),
                h._updateOverlapping(),
                (this.s("shape3d.autorotate") || this.s("shape3d.fixSizeOnScreen")) && (De(g, f, "_wireframeModelMap", "_wireframeIndexMap"),
                De(g, f, "_wireframeModelMapSwap", "_wireframeIndexMapSwap"));
                var w = ys(f, g.getMat(f), L ? h.s("shape3d.scaleable") : !0)
                  , O = h._calcAnchorMat(f);
                if (O && ym(w, w, O),
                f.mat = w,
                h.clear(),
                z) {
                    var $ = [];
                    L ? Re(g, f, L, h, h.getBodyColor(), [w], z, $) : (If(g, f, z, E, w, $j, $, ei),
                    If(g, f, z, E, w, yo, $, Vg),
                    If(g, f, z, E, w, ve, $, ms),
                    If(g, f, z, E, w, uo, $, oc),
                    If(g, f, z, E, w, ne, $, Gj),
                    If(g, f, z, E, w, hr, $, Oh)),
                    $.length && (il(z.vs, $),
                    il(z.ns, pb($)))
                } else
                    h.mat = w,
                    (h.shapeModel = L) || (h._cubeUvs = null,
                    h.vf($j, 0),
                    h.vf(yo, 16),
                    h.vf(ne, 8),
                    h.vf(hr, 24),
                    h.vf(ve, 32),
                    h.vf(uo, 40))
            },
            _updateAutoRotation: function() {
                var S = new Qj;
                return function() {
                    var q = this
                      , l = q.data
                      , G = q.s("shape3d.autorotate");
                    if (!G)
                        return l._dynamicRotation && delete l._dynamicRotation,
                        void 0;
                    var Y, W = q.gv;
                    Y = "string" == typeof G ? [G.indexOf("x") < 0 ? W._eye[0] : W._center[0], G.indexOf("y") < 0 ? W._eye[1] : W._center[1], G.indexOf("z") < 0 ? W._eye[2] : W._center[2]] : W._eye;
                    var K = W._center
                      , R = l.p3()
                      , J = Ak([R[0] + Y[0] - K[0], R[1] + Y[1] - K[1], R[2] + Y[2] - K[2]], R, W._up)
                      , w = l.r3();
                    S.set(0, 0, 0, l.getRotationMode(), !0).setFromRotationMatrix(J),
                    Math.abs(w[0] - S.x) < 1e-5 && Math.abs(w[1] - S.y) < 1e-5 && Math.abs(w[2] - S.z) < 1e-5 || (l._dynamicRotation = [S.x, S.y, S.z])
                }
            }(),
            _updateFixSize2d: function() {
                var b = this
                  , K = b.data
                  , e = b.s("shape3d.fixSizeOnScreen");
                if (!e)
                    return K._dynamicScale3d && delete K._dynamicScale3d,
                    void 0;
                var n = b.gv;
                K.getFinalScale3d();
                var c = ys(K, n.getMat(K))
                  , P = Nj([0, 0, 0], c)
                  , O = n.toViewPosition(P);
                if (!isNaN(O.x) && !isNaN(O.y)) {
                    var w = Nj([1, 0, 0], c)
                      , z = n.toViewPosition(w)
                      , U = Nj([0, 1, 0], c)
                      , D = n.toViewPosition(U)
                      , d = z.x - O.x
                      , J = D.y - O.y
                      , I = K._dynamicScale3d || [1, 1, 1]
                      , f = bn(K.s("shape3d.image"))
                      , j = e[0] > 0 ? e[0] : f ? Cm(f, b) : 20
                      , _ = e[1] > 0 ? e[1] : f ? Hi(f, b) : 20
                      , l = Math.abs(d / j)
                      , E = Math.abs(J / _);
                    Math.abs(l - 1) < .001 && Math.abs(E - 1) < .001 || (K._dynamicScale3d = [I[0] / l, I[1] / E, I[2]])
                }
            },
            _updateOverlapping: function() {
                var _ = this
                  , B = _.s("hide.overlapping.group");
                if (!B)
                    return _._rectOverlapping && (_._rectOverlapping = F),
                    void 0;
                var C, E, v, i = _.gv, f = _.data, l = ys(f, i.getMat(f)), q = 1 / 0, u = 1 / 0, a = -1 / 0, P = -1 / 0, L = f.getAnchor3d(), b = L.x, k = L.y, A = L.z;
                for (C = 0; 8 > C; C++) {
                    if (E = Nj([(C >> 2) - b, (1 & C >> 1) - k, (1 & C) - A], l),
                    v = i.toViewPosition(E),
                    isNaN(v.x) || isNaN(v.y))
                        return;
                    q = Math.min(q, v.x),
                    a = Math.max(a, v.x),
                    u = Math.min(u, v.y),
                    P = Math.max(P, v.y)
                }
                var Q = {
                    x: q,
                    y: u,
                    w: a - q,
                    h: P - u
                };
                _._rectOverlapping = i.overlappingBox.isOverlapping(B, Q)
            },
            getVectorDynamicSize: function() {
                var M, U = this, O = U.s("shape3d"), p = U.data;
                if ("billboard" === O || "plane" === O || (M = p._currentCubeElementId) != V) {
                    var u, C, Z = U.gv, g = ys(p, Z.getMat(p)), f = function(n, V) {
                        var H = Z.toViewPosition(Nj(n, g))
                          , U = Z.toViewPosition(Nj(V, g))
                          , B = H.x - U.x
                          , c = H.y - U.y;
                        return Math.min(2048, Math.sqrt(B * B + c * c))
                    };
                    if ("billboard" === O)
                        u = f([-.5, 0, 0], [.5, 0, 0]),
                        C = f([0, -.5, 0], [0, .5, 0]);
                    else if ("plane" === O)
                        u = f([-.5, 0, 0], [.5, 0, 0]),
                        C = f([0, 0, -.5], [0, 0, .5]);
                    else if (p._currentCubeElementId != V) {
                        var t = 3 * kn[M + 1]
                          , b = 3 * kn[M]
                          , n = 3 * kn[M + 2];
                        u = f([An[t], An[t + 1], An[t + 2]], [An[n], An[n + 1], An[n + 2]]),
                        C = f([An[t], An[t + 1], An[t + 2]], [An[b], An[b + 1], An[b + 2]])
                    }
                    return [u, C]
                }
            },
            getCachedTexture: function() {
                var f = this
                  , S = f.data
                  , u = S._currentCubeElementId;
                return u != V ? f._cubeCachedImage ? f._cubeCachedImage[u] : null : f._shape3dCachedImage
            },
            setCachedTexture: function(_) {
                var y = this
                  , j = y.data
                  , k = j._currentCubeElementId;
                if (k != V) {
                    if (!y._cubeCachedImage)
                        return y._cubeCachedImage = {};
                    y._cubeCachedImage[k] = _
                } else
                    y._shape3dCachedImage = _
            },
            invalidateCachedTexture: function(N) {
                var $, k, I, B = this;
                if ((I = B._shape3dCachedImage) && (N.deleteTexture(I),
                B._shape3dCachedImage = null),
                k = B._cubeCachedImage) {
                    for ($ in k)
                        N.deleteTexture(k[$]);
                    B._cubeCachedImage = null
                }
            },
            vf: function(z, W) {
                var $ = this;
                if ($.gv.getFaceVisible($.data, z)) {
                    var v = ai($, z);
                    v.mat && ($.faceMat = !0);
                    var C = v.uv;
                    if (C) {
                        var N = $._cubeUvs;
                        N || (N = $._cubeUvs = new mj([0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0]));
                        for (var F = 0; 8 > F; F++)
                            N[W + F] = C[F]
                    }
                    return v
                }
            },
            _80o: function(H, o, m) {
                var F = this;
                if (F._rectOverlapping)
                    return !0;
                var v = F.gv
                  , Z = F.data
                  , N = v._cube
                  , S = F.shapeModel;
                Bn(v, F.mat),
                S ? ib(v, Z, S, F, F.getBodyColor(), m) : (ks(H, N.vs, V, o.aPosition),
                ks(H, N.ns, V, o.aNormal),
                Oj(H, N.is),
                F._18O(H, o, F.left, 0, m),
                F._18O(H, o, F.front, 6, m),
                F._18O(H, o, F.right, 12, m),
                F._18O(H, o, F.back, 18, m),
                F._18O(H, o, F.top, 24, m),
                F._18O(H, o, F.bottom, 30, m)),
                cb(v),
                F.faceMat && (F._18O(H, o, F.left, 0, m, !0),
                F._18O(H, o, F.front, 6, m, !0),
                F._18O(H, o, F.right, 12, m, !0),
                F._18O(H, o, F.back, 18, m, !0),
                F._18O(H, o, F.top, 24, m, !0),
                F._18O(H, o, F.bottom, 30, m, !0))
            },
            _18O: function(w, i, K, v, T, d) {
                if (K) {
                    if (!T(K.transparent))
                        return;
                    if (d && !K.mat || !d && K.mat)
                        return;
                    d && Bn(this.gv, K.mat);
                    var n = this
                      , t = n.data;
                    t._currentCubeElementId = v;
                    var M = n.gv
                      , R = M.getTexture(K.texture, t)
                      , E = K.uv
                      , G = K.uvScale
                      , U = K.uvOffset
                      , I = K.discardSelectable;
                    R ? E ? kf(w, i, R, I, M._buffer.uv, n._cubeUvs, U, G) : kf(w, i, R, I, M._cube.uv, V, U, G) : kf(w),
                    Hr(w, i, K.blend, K.light, K.opacity, K.reverseFlip, K.reverseColor, K.reverseCull),
                    fk(w, i.uDiffuse, K.color),
                    pe(w, v, 6),
                    Uq(w, i),
                    rf(w, i, R),
                    d && cb(M),
                    t._currentCubeElementId = null
                }
            }
        });
        var Nb = function(i, I) {
            nm(Nb, this, [i, I])
        };
        fh(Nb, Xk, {
            _25Q: 1,
            validate: function(g) {
                var T = this
                  , k = T.gv
                  , C = T.data
                  , m = T.s
                  , d = m("edge.width")
                  , h = C._40I
                  , $ = C._41I;
                if (T.shapeModel = T.info = V,
                h && $) {
                    var W, Z, K, Y, y, q, t, H, z, D, o = C.isLooped(), U = m(bp), A = j.getEdgeType(U);
                    if (A) {
                        var x = A(C, Rb(T, k, C, o, U), k, T._19Q);
                        if (!x.points || x.points.isEmpty())
                            return;
                        q = T.info = {},
                        t = x.segments,
                        y = x.points,
                        H = y.size();
                        for (var M = h.getElevation(), J = $.getElevation(), R = 0; H > R; R++) {
                            var N = y.get(R);
                            N.e == V && (N.e = M + (J - M) * R / (H - 1))
                        }
                        z = ro(y.get(0)),
                        D = ro(y.get(H - 1));
                        var O = H % 2;
                        0 === O ? (q.c1 = ro(y.get(H / 2 - 1)),
                        q.c2 = ro(y.get(H / 2))) : q.p3 = ro(y.get((H - O) / 2)),
                        q.s1 = z,
                        q.s2 = ro(y.get(1)),
                        q.t1 = ro(y.get(H - 2)),
                        q.t2 = D
                    } else {
                        y = new Vr,
                        q = T.info = {};
                        var w = m("edge.offset")
                          , Q = m("edge.center")
                          , E = m("edge.source.t3")
                          , P = m("edge.target.t3")
                          , s = h.p3()
                          , L = $.p3();
                        if (E && (s[0] += E[0],
                        s[1] += E[1],
                        s[2] += E[2]),
                        P && (L[0] += P[0],
                        L[1] += P[1],
                        L[2] += P[2]),
                        U === Se) {
                            t = m("edge.segments");
                            var r = q.points = m(No) || cj;
                            if (H = r.size()) {
                                z = ro(r.get(0)),
                                D = ro(r.get(H - 1)),
                                !Q && w && (K = Fo(z, s, !0),
                                w = b(w, uf(s, z)),
                                s = [s[0] + K[0] * w, s[1] + K[1] * w, s[2] + K[2] * w],
                                K = Fo(L, D, !0),
                                w = b(w, uf(D, L)),
                                L = [L[0] - K[0] * w, L[1] - K[1] * w, L[2] - K[2] * w]);
                                var O = H % 2;
                                0 === O ? (W = ro(r.get(H / 2 - 1)),
                                Z = ro(r.get(H / 2))) : q.p3 = ro(r.get((H - O) / 2)),
                                q.s1 = s,
                                q.s2 = z,
                                q.t1 = D,
                                q.t2 = L
                            } else
                                !Q && w && (K = Fo(L, s, !0),
                                Y = uf(s, L),
                                w = $i(w, Y),
                                s = [s[0] + K[0] * w, s[1] + K[1] * w, s[2] + K[2] * w],
                                L = [L[0] - K[0] * w, L[1] - K[1] * w, L[2] - K[2] * w]),
                                W = s,
                                Z = L;
                            y.add({
                                x: s[0],
                                y: s[2],
                                e: s[1]
                            }),
                            y.addAll(r),
                            y.add({
                                x: L[0],
                                y: L[2],
                                e: L[1]
                            })
                        } else {
                            var i = Rb(T, k, C, o, U);
                            if (T._19Q || (i = -i),
                            o) {
                                var e = s[0]
                                  , n = s[1]
                                  , I = s[2]
                                  , l = h.getTall() / 2 + i;
                                W = [e - i, n + l, I],
                                Z = [e + i, n + l, I],
                                y.add({
                                    x: e - i,
                                    y: I,
                                    e: n
                                }),
                                y.add({
                                    x: e - i,
                                    y: I,
                                    e: n + l
                                }),
                                y.add({
                                    x: e + i,
                                    y: I,
                                    e: n + l
                                }),
                                y.add({
                                    x: e + i,
                                    y: I,
                                    e: n
                                })
                            } else {
                                K = Fo(L, s, !0),
                                Y = uf(s, L);
                                var X = {
                                    x: s[0],
                                    y: s[2]
                                }
                                  , v = {
                                    x: L[0],
                                    y: L[2]
                                }
                                  , u = io(V, X, v, i)
                                  , B = u.x - X.x
                                  , G = u.y - X.y;
                                w = $i(w, Y),
                                K[0] *= w,
                                K[1] *= w,
                                K[2] *= w,
                                W = [s[0] + K[0] + B, s[1] + K[1], s[2] + K[2] + G],
                                Z = [L[0] - K[0] + B, L[1] - K[1], L[2] - K[2] + G],
                                Q ? (y.add({
                                    x: s[0],
                                    y: s[2],
                                    e: s[1]
                                }),
                                y.add({
                                    x: W[0],
                                    y: W[2],
                                    e: W[1]
                                }),
                                y.add({
                                    x: Z[0],
                                    y: Z[2],
                                    e: Z[1]
                                }),
                                y.add({
                                    x: L[0],
                                    y: L[2],
                                    e: L[1]
                                })) : (y.add({
                                    x: W[0],
                                    y: W[2],
                                    e: W[1]
                                }),
                                y.add({
                                    x: Z[0],
                                    y: Z[2],
                                    e: Z[1]
                                }))
                            }
                        }
                        q.c1 = W,
                        q.c2 = Z
                    }
                    q.list = m(dm) === jb ? T.createTubeModel(y, t, d / 2, g) : T.createLineModel(y, t, d, "edge", "edge.dash")
                }
            }
        });
        var pi = function(m, Z) {
            nm(pi, this, [m, Z])
        };
        fh(pi, td, {
            _80o: function(G, L, E) {
                var Q = this
                  , M = Q.gv
                  , F = Q.shapeModel;
                Bn(M, Q.mat),
                F ? ib(M, Q.data, F, Q, Q.getBodyColor(), E) : (us(Q, G, L, Q.left, E),
                us(Q, G, L, Q.front, E),
                us(Q, G, L, Q.right, E),
                us(Q, G, L, Q.back, E),
                us(Q, G, L, Q.top, E),
                us(Q, G, L, Q.bottom, E)),
                cb(M)
            },
            validate: function(r, b) {
                var O, a, i = this, w = i.s, d = i.data, e = d.p3(), N = d._thickness / 2, D = d.isClosePath(), k = d.getPoints(), X = d.getSegments(), J = w(Bl), $ = r && r.uv;
                if (i.clear(),
                0 > N)
                    a = i.shapeModel = Bo(k, X, w(pn), w(ze), J, w(dg), d.getTall(), d.getShapeElevation(), D),
                    w(xd) ? w("shape3d.image") || delete a.uv : (delete a.vs,
                    delete a.ns,
                    delete a.uv),
                    w("shape3d.top.image") || delete a.top_uv,
                    w("shape3d.bottom.image") || delete a.bottom_uv;
                else if (w(dm) === jb)
                    O = Gm(k, X, J, D),
                    a = i.shapeModel = {
                        vs: []
                    },
                    w("shape3d.image") && (a.uv = [],
                    a.sum = w(dg) || Sj(O) || 1,
                    a.len = 0),
                    w(pn) && !D && (a.top_vs = [],
                    w("shape3d.top.image") && (a.top_uv = [])),
                    w(ze) && !D && (a.bottom_vs = [],
                    w("shape3d.bottom.image") && (a.bottom_uv = [])),
                    i._12O(O, N);
                else {
                    var h, t, C, q, L, n, s, I, T, g;
                    if (O = Gm(k, X, J, D),
                    L = i.vf(ne, $, !1, b),
                    N && (n = i.vf(hr, $, !1, b),
                    s = D ? V : i.vf($j, $, !1, b),
                    I = D ? V : i.vf(yo, $, !1, b),
                    T = i.vf(ve, $, !1, b),
                    g = i.vf(uo, $, !1, b)),
                    N) {
                        for (var K = 0, z = O.length; z > K; K++)
                            O[K] = i._tryRemoveBezierPoints(O[K], N);
                        i._12O(O, N)
                    } else
                        L && O.forEach(function(A) {
                            if (q = A.length,
                            q > 0)
                                for (h = A[0],
                                C = 1; q > C; C++)
                                    t = A[C],
                                    i.addV(L.vs, h, t),
                                    h = t
                        });
                    i._20Q(O),
                    r || (L && (L.ns = pb(L.vs),
                    _i(L, "vs"),
                    _i(L, gh)),
                    N && (n && (n.ns = pb(n.vs),
                    _i(n, "vs"),
                    _i(n, gh)),
                    s && (s.ns = pb(s.vs),
                    _i(s, "vs"),
                    _i(s, gh)),
                    I && (I.ns = pb(I.vs),
                    _i(I, "vs"),
                    _i(I, gh)),
                    T && (T.ns = pb(T.vs),
                    _i(T, "vs"),
                    _i(T, gh)),
                    g && (g.ns = pb(g.vs),
                    _i(g, "vs"),
                    _i(g, gh))))
                }
                var Y = i.mat = Ue();
                ho(Y, e),
                Bj(Y, d.getFinalRotation3d(), d.getRotationMode());
                var _ = d.getScale3d()
                  , m = d._dynamicScale3d;
                m && (_[0] *= m[0],
                _[1] *= m[1],
                _[2] *= m[2]),
                Cj(Y, _),
                ho(Y, Wd(e)),
                r && (fi(i, Y, r, a),
                i.clear())
            },
            _20Q: function($) {
                var m, x, G, o, n, S, W, z = this, r = z.front, R = z.back, h = z.top, E = z.bottom, v = r ? r.tuv : V, X = R ? R.tuv : V, K = h ? h.tuv : V, O = E ? E.tuv : V, N = 0;
                (v || X || K || O) && (m = z.s(dg) || Sj($) || 1,
                $.forEach(function(p) {
                    if (x = p.length,
                    x > 0)
                        for (S = p[0],
                        G = 1; x > G; G++)
                            W = p[G],
                            o = N / m,
                            N += uf(S, W),
                            n = N / m,
                            z._14O(r, o, n),
                            z._14O(R, 1 - n, 1 - o),
                            z._14O(h, o, n),
                            z._14O(E, o, n),
                            S = W
                }))
            },
            _14O: function(Z, I, N) {
                if (Z) {
                    var U = Z.uv
                      , j = Z.tuv;
                    if (j) {
                        if (U)
                            var F = U[0] + (U[6] - U[0]) * I
                              , b = U[1] + (U[7] - U[1]) * I
                              , Y = U[2] + (U[4] - U[2]) * I
                              , A = U[3] + (U[5] - U[3]) * I
                              , m = U[2] + (U[4] - U[2]) * N
                              , q = U[3] + (U[5] - U[3]) * N
                              , d = U[0] + (U[6] - U[0]) * N
                              , t = U[1] + (U[7] - U[1]) * N;
                        else
                            F = I,
                            b = 0,
                            Y = I,
                            A = 1,
                            m = N,
                            q = 1,
                            d = N,
                            t = 0;
                        j.push(Y, A, m, q, d, t, d, t, F, b, Y, A)
                    }
                }
            },
            _13O: function(p) {
                var k = p.uv
                  , i = p.tuv;
                i && (k ? i.push(k[2], k[3], k[4], k[5], k[6], k[7], k[6], k[7], k[0], k[1], k[2], k[3]) : i.push(0, 1, 1, 1, 1, 0, 1, 0, 0, 0, 0, 1))
            },
            _tryRemoveBezierPoints: function(A, r) {
                var e = A.length;
                if (4 > e)
                    return A;
                var L, Y, w, D, t, W, o = !1, h = function(E) {
                    return A[E]
                }, n = function(L) {
                    return A[e - 1 - L]
                };
                for (t = 0; 1 >= t; t++)
                    for (W = t ? n : h,
                    Y = W(0),
                    w = W(1),
                    L = 2; e - 1 > L; L++)
                        if (D = W(L),
                        !D.remove)
                            if (D.b) {
                                var b = io(Y, w, D, r);
                                b.adjust ? (D.remove = !0,
                                o = !0) : (Y = w,
                                w = D)
                            } else
                                Y = w,
                                w = D;
                if (!o)
                    return A;
                var J = [];
                for (L = 0; e > L; L++)
                    A[L].remove || J.push(A[L]);
                return J
            },
            _12O: function(z, J) {
                var g, m, b, X, n, O = this;
                z.forEach(function(M) {
                    if (n = M.length,
                    n > 0)
                        for (g = {
                            p: M[0],
                            n: !0
                        },
                        X = 1; n > X; X++)
                            m = M[X],
                            b = n - 1 > X ? M[X + 1] : V,
                            O.addPoint(g, m, b, J, M)
                })
            },
            addPoint: function(z, y, A, E, K) {
                var o, r, Y, v, g, I, h, R, e, x = this, k = z.p, u = z.f, W = z.b, P = x.s("shape3d.side") || Sp, C = x.s("shape3d.start.angle"), J = x.s("shape3d.sweep.angle"), m = x.shapeModel, O = x.data.isClosePath();
                if (z.n && (z.n = !1,
                u = O && K.length > 2 ? io(K[K.length - 2], k, y, E) : io(V, k, y, E),
                W = Nn(k, u),
                m ? m.top_vs && x._10O(W, u, P, C, J, m.top_vs, m.top_uv) : (o = x.left) && (x.addV(o.vs, W, u),
                x._13O(o))),
                r = A ? io(k, y, A, E) : O && K.length > 2 ? io(k, y, K[1], E) : io(k, y, V, E),
                Y = Nn(y, r),
                m) {
                    var D, q, t = m.vs, b = m.uv, _ = m.sum;
                    for (b && (D = m.len / _,
                    m.len += uf(k, y),
                    q = m.len / _),
                    I = x._9O(W, u, P, C, J),
                    h = x._9O(Y, r, P, C, J),
                    R = 0; P > R; R++)
                        e = R + 1,
                        il(t, I[e]),
                        il(t, h[R]),
                        il(t, I[R]),
                        il(t, h[R]),
                        il(t, I[e]),
                        il(t, h[e]),
                        b && (v = R / P,
                        g = e / P,
                        b.push(D, g, q, v, D, v, q, v, D, g, q, g));
                    !A && m.bottom_vs && x._10O(Y, r, P, C, J, m.bottom_vs, m.bottom_uv, !0)
                } else
                    !A && (o = x.right) && (x.addV(o.vs, r, Y),
                    x._13O(o)),
                    (o = x.front) && x.addV(o.vs, u, r),
                    (o = x.back) && x.addV(o.vs, Y, W),
                    (o = x.top) && x.addH(o.vs, u, r, Y, W, !0),
                    (o = x.bottom) && x.addH(o.vs, W, Y, r, u);
                z.p = y,
                z.f = r,
                z.b = Y
            },
            _10O: function(U, x, L, A, e, Q, B, m) {
                var N, T, G = this, n = G.data, P = G._9O(U, x, L, A, e), M = (U.x + x.x) / 2, r = (U.y + x.y) / 2, v = n.getShapeElevation(), o = 0;
                for (o = 0; L > o; o++)
                    m ? (il(Q, P[o]),
                    il(Q, P[o + 1])) : (il(Q, P[o + 1]),
                    il(Q, P[o])),
                    il(Q, [M, v, r]),
                    B && (m ? (N = u * (o + 1) / L + A,
                    T = u * o / L + A) : (N = u * o / L + A,
                    T = u * (o + 1) / L + A),
                    B.push(.5 - .5 * z(T), .5 - .5 * E(T), .5 - .5 * z(N), .5 - .5 * E(N), .5, .5))
            },
            _9O: function(V, Y, e, h, s) {
                var Q, U, j = this, p = j.data, a = [], C = (V.x + Y.x) / 2, g = (V.y + Y.y) / 2, c = p.getTall() / 2, f = p.getShapeElevation(), N = 0;
                for (s = s || u; e >= N; N++)
                    Q = s * N / e + h,
                    U = z(Q),
                    a.push([C + (V.x - C) * U, f + c * E(Q), g + (V.y - g) * U]);
                return a
            },
            addV: function(V, o, r) {
                var Z = o.x
                  , m = o.y
                  , P = r.x
                  , G = r.y
                  , N = this.data
                  , M = N.getShapeElevation()
                  , K = N.getTall() / 2;
                V.push(Z, M - K, m, P, M - K, G, P, M + K, G, P, M + K, G, Z, M + K, m, Z, M - K, m)
            },
            addH: function(a, N, O, o, Y, L) {
                var M = this.data
                  , y = M.getTall() / 2
                  , K = M.getShapeElevation() + (L ? y : -y);
                a.push(N.x, K, N.y, O.x, K, O.y, o.x, K, o.y, o.x, K, o.y, Y.x, K, Y.y, N.x, K, N.y)
            },
            vf: function(E, Q, T, M) {
                var N, u = this, s = u.gv.getFaceVisible(u.data, E);
                return (T || s) && (N = ai(u, E, M),
                N.vs = [],
                N.tuv = s && (N.texture || Q) ? [] : V,
                N.visible = s),
                N
            }
        });
        var _o = function(G, m) {
            nm(_o, this, [G, m])
        };
        fh(_o, Xk, {
            _25Q: 1,
            validate: function(F) {
                var Q = this
                  , R = Q.data
                  , x = Q.s
                  , T = R.getPoints()
                  , Y = T.size();
                if (Q.shapeModel = Q.info = V,
                Y > 1) {
                    var N = Q.info = {}
                      , n = R.getSegments()
                      , r = R.getThickness()
                      , S = ro(T.get(0))
                      , I = ro(T.get(Y - 1))
                      , s = Y % 2;
                    0 === s ? (N.c1 = ro(T.get(Y / 2 - 1)),
                    N.c2 = ro(T.get(Y / 2))) : N.p3 = ro(T.get((Y - s) / 2)),
                    N.s1 = S,
                    N.s2 = ro(T.get(1)),
                    N.t1 = ro(T.get(Y - 2)),
                    N.t2 = I,
                    N.list = x(dm) === jb ? Q.createTubeModel(T, n, r / 2, F) : Q.createLineModel(T, n, r, "shape.border", "shape.dash")
                }
                var W = R.p3()
                  , C = Q.mat = Ue();
                ho(C, W),
                Bj(C, R.getFinalRotation3d(), R.getRotationMode());
                var L = R.getScale3d()
                  , l = R._dynamicScale3d;
                l && (L[0] *= l[0],
                L[1] *= l[1],
                L[2] *= l[2]),
                Cj(C, L),
                ho(C, Wd(W))
            },
            _80o: function(O, Y, b) {
                var c = this
                  , S = c.shapeModel;
                if (S) {
                    var Q = c.gv;
                    Bn(Q, c.mat),
                    ib(Q, c.data, S, c, c.getBodyColor(), b),
                    cb(Q)
                }
            }
        });
        var En = C.graph3d.VR = function(y) {
            var u = this;
            u.gv = y,
            u._controllers = [],
            u.switch = new jp(u),
            u._enable = !1,
            u._defaultCallLater = C.Default.callLater,
            "undefined" != typeof q && "VRFrameData"in q && (u._frameData = new q.VRFrameData),
            u.measureOflength = 1,
            u.eyesOffset = [0, 0, 0],
            u._orientation = new C.Math.Quaternion,
            u._lastHeadPose = [0, 0, 0],
            u._offsetToBeAdd = [0, 0, 0]
        }
        ;
        fh(En, m, {
            ms_fire: !0,
            _42: function(z, N, y, L) {
                var P = this
                  , j = P.gv;
                if (P._deviceInAction) {
                    var I = P._device;
                    if (I) {
                        var s = P._measureOflength;
                        I.depthNear = j.getNear() * s,
                        I.depthFar = j.getFar() * s;
                        var l = P._offsetToBeAdd;
                        if (P.eyesOffset[0] += l[0],
                        P.eyesOffset[1] += l[1],
                        P.eyesOffset[2] += l[2],
                        l[0] = 0,
                        l[1] = 0,
                        l[2] = 0,
                        I.isPresenting === !1)
                            return P._controllers.forEach(function(t) {
                                t && t.update()
                            }),
                            j.iv(),
                            !1;
                        var t = P._frameData;
                        I.getFrameData(t);
                        var K = t.pose.position;
                        return K && (j.setEye(P.toViewPosition(K)),
                        P._orientation.fromArray(t.pose.orientation)),
                        P._controllers.forEach(function(E) {
                            E && E.update()
                        }),
                        z.viewport(0, 0, N / 2, y),
                        P._viewMatrix = P._copyViewMatrix(t.leftViewMatrix),
                        P._projectMatrix = P._copyProjectMatrix(t.leftProjectionMatrix),
                        L(),
                        z.viewport(N / 2, 0, N / 2, y),
                        P._viewMatrix = P._copyViewMatrix(t.rightViewMatrix),
                        P._projectMatrix = P._copyProjectMatrix(t.rightProjectionMatrix),
                        L(),
                        P._lastViewMatrix = P._viewMatrix,
                        P._lastProjectMatrix = P._projectMatrix,
                        P._viewMatrix = null,
                        P._projectMatrix = null,
                        P.submitFrame(),
                        !0
                    }
                }
            },
            onVRDisplayPresentChange: function() {
                var S = this.isPresenting();
                this._injectGraphView(S),
                this.fp("present", !S, S)
            },
            getOrientation: function() {
                return this._orientation
            },
            addController: function(X) {
                X = X || 0;
                var B = this
                  , j = B.getController(X);
                return j ? j : (j = new In(B,X),
                B._controllers.push(j),
                j)
            },
            getController: function(Z) {
                Z = Z || 0;
                for (var D = this._controllers, W = 0, G = D.length; G > W; W++)
                    if (D[W] && D[W].id === Z)
                        return D[W];
                return null
            },
            removeController: function(m) {
                m = m || 0;
                for (var c = this._controllers, K = 0, l = c.length; l > K; K++)
                    if (c[K] && c[K].id === m)
                        return c.splice(K, 1),
                        !0;
                return !1
            },
            getLastHeadPose: function() {
                return this._lastHeadPose
            },
            toViewPosition: function(J, U) {
                var P = this
                  , n = P._scaleFactor
                  , v = P._eyesOffset
                  , K = P._lastHeadPose;
                return K[0] = J[0] * n,
                K[1] = J[1] * n,
                K[2] = J[2] * n,
                U ? (U[0] = K[0] + v[0],
                U[1] = K[1] + v[1],
                U[2] = K[2] + v[2],
                U) : [K[0] + v[0], K[1] + v[1], K[2] + v[2]]
            },
            addEyesOffset: function(r, H, F) {
                var L = this._offsetToBeAdd;
                L[0] += r,
                L[1] += H,
                L[2] += F
            },
            _copyViewMatrix: function(q) {
                var O = this.dup(q)
                  , Y = this._scaleFactor;
                O[12] *= Y,
                O[13] *= Y,
                O[14] *= Y;
                var K = this._eyesOffset;
                if (K && (K[0] || K[1] || K[2])) {
                    var o = K[0]
                      , c = K[1]
                      , x = K[2];
                    O[12] -= O[0] * o + O[4] * c + O[8] * x,
                    O[13] -= O[1] * o + O[5] * c + O[9] * x,
                    O[14] -= O[2] * o + O[6] * c + O[10] * x
                }
                return O
            },
            shutdown: function() {
                var S = this._device;
                S && S.isPresenting && S.exitPresent()
            },
            isPresenting: function() {
                var Q = this._device;
                return Q && Q.isPresenting
            },
            _copyProjectMatrix: function(b) {
                var o = this.dup(b)
                  , R = this._scaleFactor;
                return o[14] *= R,
                o
            },
            dup: function(M, v) {
                for (var j = M.length, f = v || new Array(j); j--; )
                    f[j] = M[j];
                return f
            },
            getViewMatrix: function(n) {
                var G = this._viewMatrix;
                return G ? this.dup(G, n) : void 0
            },
            getProjectMatrix: function() {
                var P = this._projectMatrix;
                return P ? this.dup(P) : void 0
            },
            submitFrame: function() {
                var I = this;
                if (I._enable && I._deviceInAction) {
                    var C = I._device;
                    C && C.isPresenting && (C.submitFrame(),
                    I.gv.iv())
                }
            },
            intersectWorld: function(O) {
                var m = this.gv;
                return m.intersectObjects(O, m.dm().getDatas())
            },
            setDevice: function(h) {
                var B = this;
                B._device = h
            },
            _injectGraphView: function() {
                var y, A, G;
                return function(b) {
                    var D = this.gv;
                    if (!b)
                        return y && (D.getWidth = y,
                        D.getHeight = A,
                        D.getDevicePixelRatio = G),
                        void 0;
                    var F = this._device
                      , N = F.getEyeParameters("left")
                      , $ = N.renderWidth
                      , k = N.renderHeight;
                    y = D.getWidth,
                    A = D.getHeight,
                    G = D.getDevicePixelRatio,
                    D.getWidth = function() {
                        return 2 * $
                    }
                    ,
                    D.getHeight = function() {
                        return k
                    }
                    ,
                    D.getDevicePixelRatio = function() {
                        return 1
                    }
                }
            }(),
            _injectCallLaterFunc: function(b) {
                var O = this;
                if (!b)
                    return dk = C.Default.callLater = O._defaultCallLater,
                    void 0;
                var O = this;
                dk = C.Default.callLater = function(s, b, i, d) {
                    var G = O._device;
                    return G && G.isPresenting ? d ? Q(function() {
                        dk(s, b, i)
                    }, d) : G.requestAnimationFrame(function() {
                        O._deviceInAction = !0,
                        s.apply(b, i),
                        O._deviceInAction = !1
                    }) : O._defaultCallLater(s, b, i, i)
                }
            }
        }),
        m.defineProperties(En.prototype, {
            enable: {
                get: function() {
                    return this._enable
                },
                set: function(d) {
                    var n = this;
                    n._enable !== d && (n._enable = d,
                    d ? (n.switch.showButton(),
                    n._injectCallLaterFunc(!0)) : (n.shutdown(),
                    n.switch.hideButton(),
                    n._injectCallLaterFunc(!1)),
                    n.fp("enable", !d, d))
                }
            },
            measureOflength: {
                get: function() {
                    return this._measureOflength
                },
                set: function(K) {
                    this._measureOflength = K;
                    var u = this._scaleFactor = 1 / K;
                    this._controllers.forEach(function(Q) {
                        Q && Q._setScaleFactor(u)
                    })
                }
            },
            eyesOffset: {
                get: function() {
                    return this._eyesOffset
                },
                set: function(W) {
                    this._eyesOffset = W
                }
            },
            controllerModel: {
                get: function() {
                    return this._controllerModel
                },
                set: function(T) {
                    var E;
                    "object" == typeof T ? (E = T.mtl,
                    T = T.obj) : (E = T + ".mtl",
                    T += ".obj");
                    var Q = this
                      , R = Q._controllerModel;
                    R && R.obj === T && R.mtl === E || (R = Q._controllerModel = {
                        obj: T,
                        mtl: E
                    },
                    j.loadObj(T, E, {
                        finishFunc: function(s, q) {
                            Q._controllerModel === R && j.setShape3dModel("vrControllerModel", q)
                        }
                    }))
                }
            },
            interactive: {
                get: function() {
                    return !!this._interactive
                },
                set: function(e) {
                    !!e != !!this._interactive && (this._interactive = e,
                    e && this.addController(0),
                    this.gv.getCoreInteractor().enableVR(e))
                }
            }
        });
        var In = function(K, M) {
            function m(c) {
                var e = navigator.getGamepads && navigator.getGamepads();
                if (e)
                    for (var j = 0, N = 0, p = e.length; p > j; j++) {
                        var L = e[j];
                        if (L) {
                            var I = L.id;
                            if ("OpenVR Gamepad" === I || "OpenVR Controller" === I || 0 === I.indexOf("Oculus Touch") || 0 === I.indexOf("Spatial Controller")) {
                                if (N === c)
                                    return L;
                                N++
                            }
                        }
                    }
            }
            function Q(s, b, z) {
                return Math.abs(s[0] - b[0]) < z && Math.abs(s[1] - b[1]) < z && Math.abs(s[2] - b[2]) < z ? !0 : !1
            }
            var O = this;
            O.vr = K,
            O.id = M;
            var t, b, u = [0, 0], y = [{
                id: "thumbpad",
                pressed: !1
            }, {
                id: "trigger",
                pressed: !1
            }, {
                id: "grips",
                pressed: !1
            }, {
                id: "menu",
                pressed: !1
            }], q = new xo;
            q.s("shape3d", "vrControllerModel"),
            q.isController = !0,
            q.s("intersect", !1),
            O.getGamepad = function() {
                return b
            }
            ,
            O.getButtonState = function(N) {
                y.forEach(function(T) {
                    return T.id === N ? T.pressed : void 0
                })
            }
            ,
            O.getNode = function() {
                return q
            }
            ;
            var R = .003;
            O.setRotationEpsilon = function(f) {
                R = f
            }
            ;
            var W = 5e-4
              , n = W;
            O.setPositionEpsilon = function(q) {
                W = q,
                n = q * O.vr._scaleFactor
            }
            ,
            O._setScaleFactor = function(e) {
                q.s3(e, e, e),
                n = W * e
            }
            ,
            O._setScaleFactor(O.vr._scaleFactor);
            var N, d = new df, U = new Wc, c = [0, 0, 0], i = [0, 0, 0], E = new Qj, s = new dr, g = new Qd;
            O.getRay = function() {
                return N ? (g.origin.fromArray(c),
                g.direction.copy(s),
                N = !1,
                g) : g
            }
            ,
            O.update = function() {
                if (t = b,
                b = m(M),
                t != b && console.log("gamepad changed", b),
                !b || b.pose === F)
                    return b = null,
                    q.s("3d.visible", !1),
                    void 0;
                if (j.getShape3dModel("vrControllerModel")) {
                    q.dm() || K.gv.dm().add(q),
                    q.s("3d.visible", !0);
                    var V = b.pose;
                    if (null !== V) {
                        V.position && (O.vr.toViewPosition(V.position, c),
                        Q(q.p3(), c, n) || (N = !0,
                        q.p3(c))),
                        V.orientation && (d.fromArray(V.orientation),
                        s.set(0, 0, -1).applyQuaternion(d).normalize(),
                        U.makeRotationFromQuaternion(d),
                        E.set(0, 0, 0, q.getRotationMode(), !0).setFromRotationMatrix(U),
                        i[0] = E.x,
                        i[1] = E.y,
                        i[2] = E.z,
                        Q(q.r3(), i, R) || (N = !0,
                        q.r3(i))),
                        N && K.fp("gamepad.pose", null, {
                            position: c,
                            rotation: i,
                            id: M
                        });
                        var a = b.axes;
                        (u[0] !== a[0] || u[1] !== a[1]) && (u = [a[0], a[1]],
                        K.fp("gamepad.axes", null, {
                            id: M,
                            axes: u
                        }));
                        var g, J, v, T, _ = b.buttons;
                        for (g = 0,
                        J = _.length; J > g; g++)
                            v = _[g],
                            T = v.pressed,
                            T !== y[g].pressed && (y[g].pressed = T,
                            K.fp("gamepad.button." + y[g].id, null, {
                                id: M,
                                _62O: T ? "down" : "up"
                            }))
                    }
                }
            }
        }
          , jp = function(M) {
            this.vr = M,
            this._button = null
        };
        fh(jp, m, {
            showButton: function() {
                var X = this.assureButton();
                if (!X.parentNode) {
                    var G = this.vr.gv
                      , L = G.getView();
                    G._79O ? L.insertBefore(X, G._79O) : L.appendChild(X)
                }
            },
            hideButton: function() {
                var Z = this._button;
                Z && Z.parentNode && Z.parentNode.removeChild(Z)
            },
            assureButton: function() {
                var Z = this._button;
                return Z ? Z : this._button = this.createButton(this.vr.gv)
            },
            createButton: function(m) {
                function k(t, j) {
                    t.textContent = j && j.isPresenting ? " VR " : " VR "
                }
                function E(L) {
                    v.style.display = "",
                    v.style.cursor = "pointer",
                    v.style.left = "calc(50% - 50px)",
                    v.style.width = "100px",
                    k(v, L),
                    v.onmouseenter = function() {
                        v.style.opacity = "1.0"
                    }
                    ,
                    v.onmouseleave = function() {
                        v.style.opacity = "0.5"
                    }
                    ,
                    v.onclick = function() {
                        L.isPresenting ? L.exitPresent() : L.requestPresent([{
                            source: m.getCanvas()
                        }])
                    }
                    ,
                    m.vr.setDevice(L)
                }
                function u() {
                    v.style.display = "",
                    v.style.cursor = "auto",
                    v.style.left = "calc(50% - 75px)",
                    v.style.width = "150px",
                    k(v, null),
                    v.onmouseenter = null,
                    v.onmouseleave = null,
                    v.onclick = null,
                    m.vr.setDevice(null)
                }
                function f(s) {
                    s.style.position = "absolute",
                    s.style.bottom = "20px",
                    s.style.padding = "12px 6px",
                    s.style.border = "1px solid #fff",
                    s.style.borderRadius = "4px",
                    s.style.color = "#000",
                    s.style.font = "normal 13px sans-serif",
                    s.style.textAlign = "center",
                    s.style.opacity = "0.5",
                    s.style.outline = "none",
                    s.style.zIndex = "999"
                }
                if ("getVRDisplays"in navigator) {
                    var v = this._button = s.createElement("button");
                    return v.style.display = "none",
                    f(v),
                    q.addEventListener("vrdisplayconnect", function(I) {
                        E(I.display)
                    }, !1),
                    q.addEventListener("vrdisplaydisconnect", function() {
                        u()
                    }, !1),
                    q.addEventListener("vrdisplaypresentchange", function(Z) {
                        k(v, Z.display),
                        m.vr.onVRDisplayPresentChange()
                    }, !1),
                    navigator.getVRDisplays().then(function(m) {
                        m.length > 0 ? E(m[0]) : u()
                    }),
                    v
                }
                var D = s.createElement("a");
                return D.href = "https://webvr.info",
                D.innerHTML = " webvr",
                D.style.left = "calc(50% - 90px)",
                D.style.width = "180px",
                D.style.textDecoration = "none",
                f(D),
                D
            }
        }),
        m.defineProperties(jp.prototype, {}),
        lk(j, {
            accordionViewExpandIcon: Ef(nl),
            accordionViewCollapseIcon: Ef(nl, !0),
            accordionViewLabelColor: ag,
            accordionViewLabelFont: oi,
            accordionViewTitleBackground: Lj,
            accordionViewSelectBackground: Jp,
            accordionViewSelectWidth: 3,
            accordionViewSeparatorColor: F,
            splitViewDividerSize: 1,
            splitViewDividerBackground: Lj,
            splitViewDragOpacity: .5,
            splitViewToggleIcon: {
                width: 16,
                height: 16,
                comps: [{
                    type: Pj,
                    rect: [2, 2, 12, 12],
                    background: nl
                }]
            },
            propertyViewLabelColor: Ge,
            propertyViewLabelSelectColor: ag,
            propertyViewLabelFont: oi,
            propertyViewExpandIcon: Ef(nd),
            propertyViewCollapseIcon: Ef(nd, !0),
            propertyViewBackground: Aq,
            propertyViewRowLineVisible: !0,
            propertyViewColumnLineVisible: !0,
            propertyViewRowLineColor: qp,
            propertyViewColumnLineColor: qp,
            propertyViewSelectBackground: Jp,
            listViewLabelColor: Ge,
            listViewLabelSelectColor: ag,
            listViewLabelFont: oi,
            listViewRowLineVisible: !1,
            listViewRowLineColor: qp,
            listViewSelectBackground: Jp,
            treeViewLabelColor: Ge,
            treeViewLabelSelectColor: ag,
            treeViewLabelFont: oi,
            treeViewExpandIcon: Ef(Mb),
            treeViewCollapseIcon: Ef(Mb, !0),
            treeViewRowLineVisible: !1,
            treeViewRowLineColor: qp,
            treeViewSelectBackground: Jp,
            treeViewDoubleClickToToggle: !0,
            tableViewLabelColor: Ge,
            tableViewLabelSelectColor: ag,
            tableViewLabelFont: oi,
            tableViewRowLineVisible: !0,
            tableViewColumnLineVisible: !0,
            tableViewRowLineColor: qp,
            tableViewColumnLineColor: qp,
            tableViewSelectBackground: Jp,
            treeTableViewLabelColor: Ge,
            treeTableViewLabelSelectColor: ag,
            treeTableViewLabelFont: oi,
            treeTableViewExpandIcon: Ef(Mb),
            treeTableViewCollapseIcon: Ef(Mb, !0),
            treeTableViewRowLineVisible: !0,
            treeTableViewColumnLineVisible: !0,
            treeTableViewRowLineColor: qp,
            treeTableViewColumnLineColor: qp,
            treeTableViewSelectBackground: Jp,
            tableHeaderLabelColor: Ge,
            tableHeaderLabelFont: oi,
            tableHeaderColumnLineVisible: !0,
            tableHeaderColumnLineColor: Kl,
            tableHeaderBackground: Aq,
            tableHeaderMoveBackground: Gn,
            tableHeaderInsertColor: Jp,
            tableHeaderSortDescIcon: Un(nd, !0),
            tableHeaderSortAscIcon: Un(nd),
            tabViewTabGap: 1,
            tabViewLabelColor: ag,
            tabViewLabelFont: oi,
            tabViewTabBackground: Lj,
            tabViewSelectWidth: 3,
            tabViewSelectBackground: Jp,
            tabViewMoveBackground: Gn,
            tabViewInsertColor: Jp,
            toolbarLabelColor: Ge,
            toolbarLabelSelectColor: ag,
            toolbarLabelFont: oi,
            toolbarBackground: Aq,
            toolbarSelectBackground: Jp,
            toolbarItemGap: 8,
            toolbarSeparatorColor: Vo
        }, !0);
        var of = {
            translateX: 1,
            sortColumn: 1
        }
          , Tg = {
            sortable: 1,
            sortOrder: 1,
            sortFunc: 1
        }
          , ss = {
            focusData: 1
        }
          , Zp = {
            dataModel: 1,
            sortColumn: 1,
            sortFunc: 1,
            visibleFunc: 1,
            rootData: 1,
            rootVisible: 1
        }
          , Qr = {
            dataModel: 1,
            sortFunc: 1,
            visibleFunc: 1,
            categorizable: 1
        }
          , Sk = function(U, a) {
            a.add(U),
            U.hasChildren() && U.eachChild(function(w) {
                Sk(w, a)
            })
        }
          , Qc = function(b, d, l, Y, B, A, s, C, x, E, w) {
            var q, _ = l.getValueType(E), Q = l.getAlign(E);
            if (l.getEnumValues(E)) {
                var f = l.toEnumLabel(d, E)
                  , M = tb || 0
                  , z = 0
                  , v = A
                  , t = j.getTextSize(Y, f).width;
                return q = bn(l.toEnumIcon(d, E)),
                q && (z = A + tb / 2,
                "center" === Q ? z += (C - (M + t)) / 2 : "right" === Q && (z = z + C - (M + t)),
                Lk(b, q, z, s + x / 2, E, w),
                v = z + tb / 2),
                f != V && (q ? Gg(b, f, Y, B, v, s, C - (v - A), x) : Gg(b, f, Y, B, A, s, C, x, Q)),
                void 0
            }
            return d = l.formatValue(d),
            d != V ? _ === Zc ? (he(b, A, s, C, x, d),
            void 0) : _ === Km || !_ && mk(d) ? (q = bn(d ? $m : wb),
            Lk(b, q, A + C / 2, s + x / 2, E, w),
            void 0) : (Gg(b, d, Y, B, A, s, C, x, Q),
            void 0) : void 0
        }
          , nr = function(V, u) {
            var k = u.view
              , c = $k(V)
              , O = u.column || u.property;
            k.getDataModel().beginTransaction(),
            u.editor = V,
            V.info = u,
            k.setCurrentEditor(V),
            k.getView().insertBefore(c, k._79O),
            Pc(V, u.editorRect),
            V.setFocus ? V.setFocus() : Fl(V),
            V.commitValue = function(p, x) {
                V._17Q && (V = V._17Q),
                x || k.setValue(u.data, O, V.getValue ? V.getValue() : V.value),
                V.close && V.close(),
                hp(c)
            }
            ,
            O.onEditorCreated && O.onEditorCreated(u)
        }
          , bh = function(l, E, t, c, A) {
            var T = Jk(l, t)
              , m = E.value
              , o = E.view
              , x = A.getValueType(E.data);
            return T.onblur = T.onchange = function() {
                o.endEditing()
            }
            ,
            "input" === l ? (m = A.formatValue(m),
            m != V && (T.value = m),
            T.onkeydown = function(k) {
                uj(k) ? o.endEditing() : Kq(k) && o.endEditing(!0)
            }
            ,
            (x === so || x === eq) && T.addEventListener(Pp, j.numberListener, !1)) : l === qc && c.forEach(function(N) {
                var u = s.createElement("option");
                u.innerHTML = A.toEnumLabel(N),
                u.value = N,
                A.isEnumEqual(m, N) && (u.selected = !0),
                mg(T, u)
            }),
            nr(T, E),
            T
        }
          , Ce = C.widget = {}
          , lm = function(r, a, h) {
            fh(B + ".widget." + r, a, h)
        };
        lk(Sd, {
            ms_value: function(x) {
                x.getValue = function(C) {
                    var c = this.getItemById(C)
                      , T = c.element;
                    return xe(T) ? T : T ? T.getValue ? T.getValue() : T.value : c.selected
                }
                ,
                x.setValue = function(l, o) {
                    var N = this.getItemById(l);
                    if (N) {
                        var n = N.element;
                        n && !xe(n) ? n.setValue ? n.setValue(o) : n.value = o : mk(o) ? (N.selected = o,
                        this.iv()) : (N.element = o,
                        this.iv())
                    }
                }
                ,
                x.v = function(z, u) {
                    var m = this;
                    if (2 === arguments.length)
                        m.setValue(z, u);
                    else {
                        if (!Ag(z))
                            return m.getValue(z);
                        for (var C in z)
                            m.setValue(C, z[C])
                    }
                    return m
                }
            },
            _46o: function(k) {
                k._icon = V,
                k._accessType = V,
                k._valueType = V,
                k._editable = !1,
                k._batchEditable = !0,
                k._align = $j,
                k._nullable = !0,
                k._emptiable = !1,
                k.setParent = Pg,
                k.formatValue = function(F) {
                    var I = this
                      , c = I._valueType;
                    return I.getEnumValues() ? I.toEnumLabel(F) : c === Km ? !!F : F != V && c === so ? D(F) : F
                }
                ,
                k.setEnum = function(G, j, Y, z, S, C, q) {
                    var c = this;
                    G && !_b(G) && G.values && (z = G.editable,
                    Y = G.icons,
                    j = G.labels,
                    S = G.strict,
                    C = G.maxHeight,
                    q = G.dropDownWidth,
                    G = G.values),
                    Gl(G) && (G = G._as),
                    Gl(j) && (j = j._as),
                    Gl(Y) && (Y = Y._as),
                    c._enumValues = G,
                    c._enumLabels = j,
                    c._enumIcons = Y,
                    c._enumEditable = z,
                    c._enumStrict = S == V ? !0 : S,
                    c._enumMaxHeight = C,
                    c._enumDropDownWidth = q,
                    G && G.length && Hg(G[0]) && (c._valueType = eq),
                    c.fp("enum", !1, !0)
                }
                ,
                k.getEnumDropDownWidth = function() {
                    return this._enumDropDownWidth
                }
                ,
                k.getEnumMaxHeight = function() {
                    return this._enumMaxHeight
                }
                ,
                k.isEnumEditable = function() {
                    return this._enumEditable
                }
                ,
                k.getEnumValues = function() {
                    return this._enumValues
                }
                ,
                k.getEnumLabels = function() {
                    return this._enumLabels
                }
                ,
                k.getEnumIcons = function() {
                    return this._enumIcons
                }
                ,
                k.isEnumStrict = function() {
                    return this._enumStrict
                }
                ,
                k.isEnumEqual = function(U, N) {
                    return this._enumStrict ? U === N : U == N
                }
                ,
                k.toEnumLabel = function(f, l) {
                    var W = this
                      , t = W.getEnumValues(l)
                      , K = W.getEnumLabels(l);
                    if (t && K)
                        for (var w = 0; w < t.length; w++)
                            if (W.isEnumEqual(f, t[w]))
                                return K[w];
                    return f
                }
                ,
                k.toEnumIcon = function(T, H) {
                    var r = this
                      , q = r.getEnumValues(H)
                      , g = r.getEnumIcons(H);
                    if (q && g)
                        for (var f = 0; f < q.length; f++)
                            if (r.isEnumEqual(T, q[f]))
                                return g[f];
                    return F
                }
            },
            _45o: function(R) {
                R._87o = function(s, b, x, l, d, q) {
                    if (s) {
                        var u = this
                          , c = u._90I
                          , X = ff(1);
                        u._columnLineVisible && (d -= 1),
                        u._rowLineVisible && (q -= 1),
                        0 >= d || 0 >= q || (u._90I || (c = u._90I = {}),
                        c[b] || (c[b] = new Vr),
                        Pc(X, u.tx() + x, u.ty() + l, d, q),
                        mg(X, s),
                        u._view.insertBefore(X, u._79O),
                        s.onParentAdded && s.onParentAdded(X),
                        c[b].add(X))
                    }
                }
                ,
                R._76o = function() {
                    var h = this
                      , l = h._90I;
                    if (l) {
                        for (var Z in l)
                            l[Z].each(function(y) {
                                hp(y)
                            });
                        delete h._90I
                    }
                }
                ,
                R._77o = function(F) {
                    var T = this;
                    if (T._90I) {
                        var d = T._90I[F];
                        d && (d.each(function(k) {
                            hp(k)
                        }),
                        delete T._90I[F])
                    }
                }
            },
            _47o: function(g) {
                g.getValue = function(W, V) {
                    return V.getValue ? V.getValue(W, V, this) : dl(W, V.getAccessType(), V.getName())
                }
                ,
                g.setValue = function(W, N, h) {
                    if (N.isEmptiable(W) || "" !== h || (h = F),
                    N.isNullable(W) || h != V) {
                        var a = this
                          , z = N.getName(W)
                          , L = N.getAccessType(W)
                          , U = N.getValueType(W);
                        U === so && xe(h) ? h = p(h) : U === eq && xe(h) ? h = parseFloat(h) : U === Km && xe(h) && (h = "true" === h),
                        a._batchEditable && N._batchEditable && a.isSelected(W) ? a.sm().each(function(r) {
                            N.setValue ? N.setValue(r, N, h, a) : ll(r, L, z, h)
                        }) : N.setValue ? N.setValue(W, N, h, a) : ll(W, L, z, h)
                    }
                }
                ,
                g.setCurrentEditor = function(m) {
                    this.endEditing(),
                    this._currentEditor = m,
                    this.redraw()
                }
                ,
                g.isEditing = function(C, z) {
                    var M = this
                      , S = M._currentEditor;
                    if (!S)
                        return !1;
                    if (z) {
                        var Q = S.info;
                        return Q ? (Q.column || Q.property) === z && Q.data === C : !1
                    }
                    return !0
                }
                ,
                g.endEditing = function(Y) {
                    var l = this
                      , c = l._currentEditor;
                    c && (delete l._currentEditor,
                    c.commitValue && c.commitValue(c.info, Y),
                    l.redraw(),
                    l.getDataModel().endTransaction())
                }
                ,
                g.beginEditing = function(j) {
                    this.endEditing();
                    var w = this
                      , $ = j.column || j.property;
                    if ($.beginEditing)
                        $.beginEditing(j);
                    else {
                        var t = j.data
                          , u = j.value
                          , H = w.getSelectBackground(t)
                          , v = $.getEnumValues(t)
                          , i = $.getSlider(t)
                          , e = $.getColorPicker(t);
                        if (i) {
                            var b = uq(Ce.Slider, i);
                            return b.setValue(u),
                            b.getView().onblur = function() {
                                w.endEditing()
                            }
                            ,
                            b.isInstant() && (b.onValueChanged = function() {
                                w.setValue(t, $, b.getValue())
                            }
                            ),
                            nr(b, j),
                            void 0
                        }
                        if (e || $.getValueType(t) === Zc) {
                            var _ = uq(Ce.ColorPicker, e);
                            return _.setValue(u),
                            _.onClosed = function() {
                                w.endEditing()
                            }
                            ,
                            _.isInstant() && (_.onValueChanged = function(P, E) {
                                w.setValue(t, $, E)
                            }
                            ),
                            nr(_, j),
                            _.open(),
                            void 0
                        }
                        if (v) {
                            if (Ce.ComboBox) {
                                var k = new Ce.ComboBox;
                                k.setValue(u),
                                k.setValues(v),
                                k.setLabels($.getEnumLabels(t)),
                                k.setIcons($.getEnumIcons(t)),
                                k.setEditable($.isEnumEditable(t)),
                                k.setStrict($.isEnumStrict(t)),
                                k.setMaxHeight($.getEnumMaxHeight(t)),
                                k.setDropDownWidth($.getEnumDropDownWidth(t)),
                                k.onClosed = function() {
                                    w.endEditing()
                                }
                                ,
                                nr(k, j),
                                k.open()
                            } else
                                bh(qc, j, H, v, $);
                            return
                        }
                        var Q = $.getValueType(t);
                        if (Q === Km || mk(u))
                            return w.setValue(t, $, !u),
                            void 0;
                        if ($.getItemEditor(t)) {
                            var I = Fp($.getItemEditor(t))
                              , a = new I(t,$,w,j)
                              , y = a.getView();
                            return y._17Q = a,
                            a.setValue(u),
                            Fq(y),
                            nr(y, j),
                            a.editBeginning && a.editBeginning(),
                            void 0
                        }
                        bh("input", j, H, V, $)
                    }
                }
            },
            _44o: function(u) {
                u.init = function(J) {
                    var e = this
                      , p = e.th = new xb(J)
                      , i = e._view = Gc(1, e);
                    e.tv = e._tableView = J,
                    mg(i, p.getView()),
                    mg(i, J.getView()),
                    p.mp(function(q) {
                        q.property === Xq && e.iv()
                    }),
                    e.iv()
                }
                ,
                u.getTableView = function() {
                    return this.tv
                }
                ,
                u.getTableHeader = function() {
                    return this.th
                }
                ,
                u.getDataModel = function() {
                    return this.tv.dm()
                }
                ,
                u.getColumnModel = function() {
                    return this.tv.getColumnModel()
                }
                ,
                u.setColumns = function(j) {
                    this.tv.setColumns(j)
                }
                ,
                u.addColumns = function(R) {
                    this.tv.addColumns(R)
                }
                ,
                u.endEditing = function() {
                    this.tv.endEditing()
                }
                ,
                u.validateImpl = function() {
                    var T = this
                      , r = T.th
                      , M = qo(r)
                      , A = {
                        x: 0,
                        y: 0,
                        width: T.getWidth(),
                        height: M
                    };
                    Pc(r, A),
                    A.y = M,
                    A.height = X(0, T.getHeight() - M),
                    Pc(T.tv, A)
                }
            },
            ms_vs: function($) {
                $._41o = function() {
                    return this._29I.height < this._59I
                }
                ,
                $._43o = function() {
                    var T = this;
                    T._41o() && (T._58I || (Q(function() {
                        T._94O()
                    }, Wh),
                    T.iv()),
                    T._58I = new Date)
                }
                ,
                $._94O = function() {
                    var s = this;
                    if (s._58I) {
                        var W = new Date;
                        W.getTime() - s._58I.getTime() >= Wh ? (delete s._58I,
                        s.iv()) : Q(function() {
                            s._94O()
                        }, Wh)
                    }
                }
                ,
                $._93I = function() {
                    var u = this
                      , J = u._27I;
                    if (u._58I || !u._autoHideScrollBar) {
                        J || mg(u._79O, J = u._27I = ff());
                        var e = u._29I
                          , o = e.height
                          , N = u._59I
                          , E = u.getScrollBarSize()
                          , M = e.width - E - 2
                          , V = o * (-u.ty() / N)
                          , f = o * (o / N)
                          , W = J.style;
                        N > o ? (bj > f && (V = V + f / 2 - bj / 2,
                        0 > V && (V = 0),
                        V + bj > o && (V = o - bj),
                        f = bj),
                        W.visibility = Fi,
                        W.background = u.getScrollBarColor(),
                        W.borderRadius = E / 2 + gn,
                        Pc(J, M, V, E, f)) : W.visibility = te
                    } else
                        J && (J.style.visibility = te)
                }
            },
            ms_hs: function(k) {
                k._40o = function() {
                    return this._29I.width < this._91I
                }
                ,
                k._42o = function() {
                    var f = this;
                    f._40o() && (f._95O || (Q(function() {
                        f._94I()
                    }, Wh),
                    f.iv()),
                    f._95O = new Date)
                }
                ,
                k._94I = function() {
                    var z = this;
                    if (z._95O) {
                        var p = new Date;
                        p.getTime() - z._95O.getTime() >= Wh ? (delete z._95O,
                        z.iv()) : Q(function() {
                            z._94I()
                        }, Wh)
                    }
                }
                ,
                k._92I = function() {
                    var K = this
                      , S = K._28I;
                    if (K._95O || !K._autoHideScrollBar) {
                        S || mg(K._79O, S = K._28I = ff());
                        var l = K._29I
                          , r = l.width
                          , A = K._91I
                          , X = K.getScrollBarSize()
                          , x = l.height - X - 2
                          , n = r * (-K.tx() / A)
                          , u = r * (r / A)
                          , N = S.style;
                        A > r ? (bj > u && (n = n + u / 2 - bj / 2,
                        0 > n && (n = 0),
                        n + bj > r && (n = r - bj),
                        u = bj),
                        N.visibility = Fi,
                        N.background = K.getScrollBarColor(),
                        N.borderRadius = X / 2 + gn,
                        Pc(S, n, x, u, X)) : N.visibility = te
                    } else
                        S && (S.style.visibility = te)
                }
            }
        }),
        im($m, Uk(16, 16, [{
            type: Ci,
            rect: [1, 1, 14, 14],
            background: Jp
        }, {
            type: hq,
            rect: [1, 1, 14, 14],
            width: 1,
            color: sd
        }, {
            type: Mg,
            points: [13, 3, 7, 12, 4, 8],
            borderWidth: 2,
            borderColor: "#FFF"
        }])),
        im(wb, Uk(16, 16, {
            type: hq,
            rect: [1, 1, 14, 14],
            width: 1,
            color: sd
        })),
        im(ke, Uk(16, 16, [{
            type: br,
            rect: [2, 2, 12, 12],
            borderWidth: 1,
            borderColor: sd,
            background: "#FFF"
        }, {
            type: br,
            rect: [4, 4, 8, 8],
            background: Jp
        }])),
        im(eo, Uk(16, 16, {
            type: br,
            rect: [2, 2, 12, 12],
            borderWidth: 1,
            borderColor: sd
        })),
        Sd._15Q = function(o) {
            o._29I = zs,
            o._59I = 0,
            o._91I = 0,
            o._5o = function(R) {
                var X = this;
                X._30I = new Vr,
                X._rows = new Vr,
                X._rowMap = {},
                X._31I = 0,
                X._14I = 0,
                X._view = Gc(1, X),
                X._canvas = qb(X._view),
                mg(X._view, X._79O = ff()),
                X.dm(R ? R : new Wm)
            }
            ,
            o.getCheckIcon = function(E) {
                var Z = this.sm()
                  , I = Z.co(E);
                return Z.sg() ? bn(I ? ke : eo) : bn(I ? $m : wb)
            }
            ,
            o.checkData = function($) {
                var T = this.sm()
                  , i = T.co($);
                T.sg() && i || (this._32o = 1,
                i ? T.rs($) : T.as($),
                delete this._32o)
            }
            ,
            o.getDataAt = function(t) {
                t.target && (t = this.lp(t));
                var K = M(t.y / this._rowHeight)
                  , U = this._rows;
                return 0 > K || K >= U.size() ? V : U.get(K)
            }
            ,
            o.onDataDoubleClicked = function() {}
            ,
            o.onDataClicked = function() {}
            ,
            o.adjustTranslateX = function() {
                return 0
            }
            ,
            o.adjustTranslateY = function(H) {
                var e = this.getHeight() - this._59I;
                return e > H && (H = e),
                H > 0 ? 0 : D(H)
            }
            ,
            o.onPropertyChanged = function(n) {
                var h = this
                  , c = n.property;
                Zp[c] ? h.ivm() : ss[c] || h.redraw(),
                c === cd ? h._42o() : c === ao && h._43o()
            }
            ,
            o.getLabel = function(e) {
                return e.toLabel()
            }
            ,
            o.getLabelFont = function() {
                return this._labelFont
            }
            ,
            o.getLabelColor = function(Q) {
                var r = this;
                if (r.isCheckMode()) {
                    if (r._focusData === Q)
                        return r._labelSelectColor
                } else if (r.isSelected(Q))
                    return r._labelSelectColor;
                return r._labelColor
            }
            ,
            o.getStartRowIndex = function() {
                return this._31I
            }
            ,
            o.getEndRowIndex = function() {
                return this._14I
            }
            ,
            o.getRowDatas = function() {
                return this._rows
            }
            ,
            o.getRowIndex = function(s) {
                return this._rowMap[s._id]
            }
            ,
            o.getRowSize = function() {
                return this._rows.size()
            }
            ,
            o.getViewRect = function() {
                return nc(this._29I)
            }
            ,
            o.isVisible = function(b) {
                return this._visibleFunc ? this._visibleFunc(b) : !0
            }
            ,
            o.getCurrentSortFunc = function() {
                return this._sortFunc
            }
            ,
            o.setDataModel = function(L) {
                var q = this
                  , r = q._dataModel
                  , z = q._selectionModel;
                r !== L && (r && (r.umm(q.handleDataModelChange, q),
                r.umd(q.handleDataPropertyChange, q),
                r.umh(q.handleHierarchyChange, q),
                z || r.sm().ums(q.handleSelectionChange, q)),
                q._dataModel = L,
                L.mm(q.handleDataModelChange, q),
                L.md(q.handleDataPropertyChange, q),
                L.mh(q.handleHierarchyChange, q),
                z ? z._21I(L) : L.sm().ms(q.handleSelectionChange, q),
                q.fp("dataModel", r, L))
            }
            ,
            o.validateModel = function() {
                var f = this;
                f._rows.clear(),
                f._rowMap = {},
                f.buildChildren(f._dataModel._roots);
                var C = f._rows = f._rows.toList(f.isVisible, f)
                  , e = 0
                  , i = f.getCurrentSortFunc()
                  , d = C.size();
                for (i && C.sort(i); d > e; e++)
                    f._rowMap[C.get(e)._id] = e
            }
            ,
            o.buildChildren = function(t) {
                var Y = this;
                t.each(function(L) {
                    Y._rows.add(L),
                    Y.buildChildren(L._children)
                })
            }
            ,
            o.handleDataModelChange = function() {
                this.ivm()
            }
            ,
            o.handleDataPropertyChange = function(M) {
                "parent" === M.property ? this.ivm() : this.invalidateData(M.data)
            }
            ,
            o.handleHierarchyChange = function() {
                this.ivm()
            }
            ,
            o.handleSelectionChange = function(C) {
                C.datas.each(this.invalidateData, this),
                this.onSelectionChanged(C)
            }
            ,
            o.onSelectionChanged = function(V) {
                var y = this
                  , m = y.sm();
                !y.isAutoMakeVisible() || 1 !== m.size() || "set" !== V.kind && "append" !== V.kind || y._32o || y.makeVisible(m.ld())
            }
            ,
            o.handleBackgroundClick = function(f) {
                _e(f) && !this.isCheckMode() && this.sm().cs()
            }
            ,
            o.makeVisible = function(B) {
                B && (this._23I = B,
                this.iv())
            }
            ,
            o.scrollToIndex = function(T) {
                var N = this
                  , X = N._29I
                  , d = X.height
                  , l = N._rowHeight
                  , W = l * T;
                T >= 0 && T < N._rows.size() && d > 0 && (W + l > X.y + d ? N.ty(-W + d - l) : W < X.y && N.ty(-W))
            }
            ,
            o.autoScroll = function(k, N) {
                var e = this
                  , m = e._rowHeight
                  , Z = m
                  , G = m / 4
                  , v = e._29I
                  , t = e.lp(k)
                  , E = {
                    x: e.tx(),
                    y: e.ty()
                };
                return m > 0 && v && (t.x - v.x < Z ? e.translate(G, 0) : v.x + v.width - t.x < Z && e.translate(-G, 0),
                t.y - v.y < Z ? e.translate(0, G) : v.y + v.height - t.y < Z && e.translate(0, -G)),
                E.x = e.tx() - E.x,
                E.y = e.ty() - E.y,
                N && (N.x += E.x,
                N.y += E.y),
                E
            }
            ,
            o.getTopRowOrderSelection = function() {
                var W = this.sm().getTopSelection()
                  , V = {}
                  , s = new Vr;
                return W.each(function(P) {
                    V[P._id] = P
                }),
                this._rows.each(function(u) {
                    V[u._id] && s.add(u)
                }),
                s
            }
            ,
            o.getRowOrderSelection = function() {
                var w = new Vr;
                return this._rows.each(function(Y) {
                    this.isSelected(Y) && w.add(Y)
                }, this),
                w
            }
            ,
            o.ivm = function() {
                this.invalidateModel()
            }
            ,
            o.invalidateModel = function() {
                var Y = this;
                Y._96I || (Y._96I = 1,
                Y._32I = 1,
                delete Y._24I),
                Y.iv()
            }
            ,
            o.redraw = function() {
                var W = this;
                W._32I || (W._32I = 1,
                delete W._24I,
                W.iv())
            }
            ,
            o.invalidateData = function(_) {
                var C = this;
                Y ? C.redraw() : C._32I || (C._24I || (C._24I = {}),
                C._24I[_._id] = _,
                C.iv())
            }
            ,
            o.getFocusData = function() {
                return this._focusData
            }
            ,
            o.setFocusDataById = function(u) {
                this.setFocusData(this.dm().getDataById(u))
            }
            ,
            o.setFocusData = function(Q) {
                var d = this
                  , O = d._focusData;
                O !== Q && (d._focusData = Q,
                d.fp("focusData", O, Q),
                O && d.invalidateData(O),
                Q && (d.invalidateData(Q),
                d.isAutoMakeVisible() && d.makeVisible(Q)))
            }
            ,
            o.drawRowBackground = function(v, H, x, Q, G, K, g) {
                var Z = this
                  , i = Z.isCheckMode();
                (H === Z._focusData && i || x && !i) && he(v, Q, G, K, g, Z.getSelectBackground(H))
            }
            ,
            o.drawData = function(R, W, n) {
                var Z = this
                  , y = Z._rowHeight
                  , P = y * n
                  , r = Z._29I
                  , l = r.x
                  , u = r.width;
                R.save(),
                R.beginPath(),
                R.rect(l, P, u, y),
                R.clip(),
                Z._87o(Z.drawRow(R, W, Z.isSelected(W), l, P, u, y), n, l, P, u, y),
                R.restore(),
                Z._rowLineVisible && he(R, l, P + y - 1, u, 1, Z._rowLineColor)
            }
            ,
            o._12I = function(q) {
                var p = this
                  , m = p._31I
                  , o = p._29I
                  , f = o.x
                  , j = o.y
                  , E = o.width
                  , z = o.height;
                for (q.beginPath(),
                q.rect(f, j, E, z),
                q.clip(),
                q.clearRect(f, j, E, z),
                p._76o(),
                p._93db(q); m < p._14I; m++)
                    p.drawData(q, p._rows.get(m), m);
                p._92db(q)
            }
            ,
            o._13I = function(K) {
                for (var Y, J = this, c = J._rowHeight, q = J._29I, l = q.x, P = q.width, b = J._31I, U = J._30I; b < J._14I; b++)
                    Y = J._rows.get(b),
                    J._24I[Y._id] && U.add({
                        data: Y,
                        index: b
                    });
                U.isEmpty() || (K.beginPath(),
                U.each(function(w) {
                    K.rect(l, w.index * c, P, c)
                }),
                K.clip(),
                U.each(function(o) {
                    K.clearRect(l, o.index * c, P, c)
                }),
                U.each(function(_) {
                    J._77o(_.index)
                }),
                J._93db(K),
                U.each(function(T) {
                    J.drawData(K, T.data, T.index)
                }),
                J._92db(K),
                U.clear())
            }
            ,
            o.validateImpl = function() {
                var g = this
                  , p = g._canvas
                  , X = g.getWidth()
                  , u = g.getHeight()
                  , h = g._rowHeight
                  , S = g._32I;
                (X !== p.clientWidth || u !== p.clientHeight) && (ug(p, X, u),
                S = 1);
                var B = W && !O;
                g._96I && !B && g.validateModel();
                var v = g._29I
                  , U = {
                    x: -g.tx(),
                    y: -g.ty(),
                    width: X,
                    height: u
                }
                  , c = g._rows.size()
                  , Q = Zf(p)
                  , f = g._23I;
                S || gi(U, v) || (S = 1),
                g._29I = U,
                g._59I = c * h,
                g._31I = M(U.y / h),
                g._14I = I((U.y + U.height) / h),
                g._31I < 0 && (g._31I = 0),
                g._14I > c && (g._14I = c),
                g._99I && S && g._99I(),
                Pk(Q, g.tx(), g.ty(), 1),
                S ? g._12I(Q) : g._24I && g._13I(Q),
                g._93I(),
                g._92I(),
                Q.restore(),
                g._32I = g._24I = g._96I = V,
                f && (g.scrollToIndex(g.getRowIndex(f)),
                delete g._23I),
                g.tx(g.tx()),
                g.ty(g.ty())
            }
        }
        ,
        Sd._48o = function(y) {
            y._rootVisible = !0,
            y._rootData = V,
            y._35o = function() {
                this._expandMap = {},
                this._levelMap = {}
            }
            ,
            y.validateModel = function() {
                var L = this
                  , d = L._rootData;
                L._rows.clear(),
                L._levelMap = {},
                L._rowMap = {},
                L._currentLevel = 0,
                d ? L._rootVisible ? L.isVisible(d) && L.buildData(d) : L.buildChildren(d) : L.buildChildren(),
                delete L._currentLevel
            }
            ,
            y.buildData = function(W) {
                var M = this
                  , s = W._id
                  , Q = M._rows;
                M._rowMap[s] = Q.size(),
                Q.add(W),
                M._levelMap[s] = M._currentLevel,
                M.isExpanded(W) && (M._currentLevel++,
                M.buildChildren(W),
                M._currentLevel--)
            }
            ,
            y.buildChildren = function(s) {
                var R = this
                  , T = s ? s._children : R._dataModel._roots
                  , H = R.getCurrentSortFunc();
                H && R.isChildrenSortable(s) ? T.toList(R.isVisible, R).sort(H).each(R.buildData, R) : T.each(function(D) {
                    R.isVisible(D) && R.buildData(D)
                })
            }
            ,
            y.getLevel = function(p) {
                return this._levelMap[p._id]
            }
            ,
            y.getToggleIcon = function(C) {
                var O = this
                  , i = O._loader
                  , D = O._collapseIcon;
                return i && !i.isLoaded(C) ? D : C.hasChildren() ? O.isExpanded(C) ? O._expandIcon : D : V
            }
            ,
            y.isCheckMode = function() {
                return this._checkMode != V
            }
            ,
            y.isChildrenSortable = function() {
                return !0
            }
            ,
            y.handleDataModelChange = function(U) {
                var f = this;
                U.kind === gf ? delete f._expandMap[U.data._id] : U.kind === vq && (f._expandMap = {}),
                f.ivm()
            }
            ,
            y.toggle = function(P) {
                var C = this;
                C.isExpanded(P) ? C.collapse(P) : C.expand(P)
            }
            ,
            y.isExpanded = function(L) {
                return 1 === this._expandMap[L._id]
            }
            ,
            y.expand = function(y) {
                var P = this
                  , v = P._loader;
                P.isExpanded(y) || (v && !v.isLoaded(y) && v.load(y),
                P._expandMap[y._id] = 1,
                P.ivm(),
                P.onExpanded(y))
            }
            ,
            y.onExpanded = function() {}
            ,
            y.collapse = function(r) {
                var A = this;
                A.isExpanded(r) && (delete A._expandMap[r._id],
                A.ivm(),
                A.onCollapsed(r))
            }
            ,
            y.onCollapsed = function() {}
            ,
            y.expandAll = function(B) {
                if (B)
                    this.expand(B),
                    B.eachChild(function(k) {
                        this.expandAll(k)
                    }, this);
                else {
                    var A = this;
                    A._dataModel.each(function(F) {
                        F.hasChildren() && (A._expandMap[F._id] = 1)
                    }),
                    A.ivm()
                }
            }
            ,
            y.collapseAll = function() {
                this._expandMap = {},
                this.ivm()
            }
            ,
            y.makeVisible = function(B) {
                if (B) {
                    var W = this;
                    if (!W._rootData || B.isDescendantOf(W._rootData)) {
                        for (var q = B._parent; q; )
                            W.expand(q),
                            q = q._parent;
                        W._23I = B,
                        W.iv()
                    }
                }
            }
            ,
            y.checkData = function(g) {
                var u, E = this, D = E._checkMode, S = E.sm(), m = S.co(g);
                if (!S.sg() || !m) {
                    if (E._32o = 1,
                    D === Hm)
                        m ? S.rs(g) : S.as(g);
                    else if (D === Ok)
                        u = new Vr(g),
                        u.addAll(g._children);
                    else if ("descendant" === D)
                        u = new Vr,
                        Sk(g, u);
                    else if ("all" === D && (u = new Vr,
                    Sk(g, u),
                    !m))
                        for (var l = g._parent; l; )
                            u.add(l),
                            l = l._parent;
                    u && (m ? S.rs(u) : S.as(u)),
                    delete E._32o
                }
            }
            ,
            y._97I = function(T, Z, A, V, s, S, n) {
                var e = this
                  , F = e._indent
                  , p = e._levelMap[Z._id]
                  , c = e.getIconWidth(Z)
                  , $ = bn(e.getToggleIcon(Z));
                $ ? (V += F * p,
                Lk(T, $, V + F / 2, s + n / 2, Z, e),
                V += F) : V += F * (p + 1),
                e._checkMode && (Lk(T, e.getCheckIcon(Z), V + F / 2, s + n / 2, Z, e),
                V += F),
                e.drawIcon(T, Z, V, s, c, n),
                e.drawLabel(T, Z, V + c, s, n)
            }
        }
        ,
        Sd._14Q = function(F) {
            F.getIcon = function(F) {
                return F.getIcon()
            }
            ,
            F.getIconWidth = function(v) {
                return this.getIcon(v) ? this._indent : 0
            }
            ,
            F.drawIcon = function(n, m, I, x, E, u) {
                if (E) {
                    var U = this
                      , D = U.getBodyColor(m)
                      , i = bn(U.getIcon(m), D);
                    i && (u -= U.isRowLineVisible() ? 1 : 0,
                    rh(n, i, Gr, I, x, E, u, m, U, D),
                    Mo(n, U.getBorderColor(m), I, x, E, u))
                }
            }
            ,
            F.drawLabel = function(z, L, y, m, a) {
                var S = this;
                Gg(z, S.getLabel(L), S.getLabelFont(L), S.getLabelColor(L), y, m, 0, a)
            }
        }
        ,
        Sd._50o = function(v) {
            v._98I = function() {
                var h = this
                  , u = h._39o = new Wm;
                h._60I = new Vr,
                u.mm(h._17o, h),
                u.md(h._18o, h),
                u.mh(h._19o, h)
            }
            ,
            v.setColumns = function(V) {
                this._39o.clear(),
                this.addColumns(V)
            }
            ,
            v.addColumns = function(S) {
                var J = this._39o;
                S.forEach(function(A) {
                    if (!(A instanceof Kf)) {
                        var N = Fp(A.className);
                        A = uq(N ? N : Kf, A)
                    }
                    J.add(A)
                })
            }
            ,
            v.onColumnClicked = function() {}
            ,
            v.onCheckColumnClicked = function() {}
            ,
            v._3Q = function(D) {
                for (var g, I = 0, J = this._60I, K = J.size(); K > I; I++)
                    if (g = J.get(I),
                    g.column === D)
                        return g;
                return V
            }
            ,
            v.getColumnAt = function(W) {
                var y = this._4Q(W);
                return y ? y.column : V
            }
            ,
            v._4Q = function(e) {
                for (var S = this, H = e.target ? S.lp(e).x : e.x, k = S._60I, P = 0; P < k.size(); P++) {
                    var R = k.get(P)
                      , U = R.startX;
                    if (H >= U && H < U + R.column.getWidth())
                        return R
                }
                return V
            }
            ,
            v.getToolTip = function(h) {
                var n = this
                  , l = n.getDataAt(h)
                  , T = n.getColumnAt(h);
                return l && T ? T.getToolTip(l, n) : V
            }
            ,
            v.adjustTranslateX = function(P) {
                var q = this.getWidth() - this._91I;
                return q > P && (P = q),
                P > 0 ? 0 : D(P)
            }
            ,
            v._99I = function() {
                var Y = this
                  , _ = Y._29I
                  , $ = Y._60I;
                $.clear(),
                Y._91I = 0,
                Y._39o._roots.each(function(d) {
                    if (d.isVisible()) {
                        var l = Y._91I + d.getWidth();
                        Y._91I <= _.x + _.width && l >= _.x && $.add({
                            column: d,
                            startX: Y._91I
                        }),
                        Y._91I = l
                    }
                })
            }
            ,
            v.drawData = function(O, X, W) {
                var z = this
                  , D = z._rowHeight
                  , c = D * W
                  , g = z.isSelected(X)
                  , j = z._29I
                  , n = j.x
                  , K = j.width;
                z.drawRowBackground(O, X, g, n, c, K, D),
                z._60I.each(function(y) {
                    var E = y.column
                      , Y = y.startX
                      , J = E.getWidth();
                    J > 0 && !z.isEditing(X, E) && (O.save(),
                    O.beginPath(),
                    O.rect(Y, c, J, D),
                    O.clip(),
                    z._87o(z.drawCell(O, X, g, E, Y, c, J, D), W, Y, c, J, D),
                    z._columnLineVisible && he(O, Y + J - 1, c, 1, D, z._columnLineColor),
                    O.restore())
                }),
                z._rowLineVisible && he(O, n, c + D - 1, K, 1, z._rowLineColor)
            }
            ,
            v.drawCell = function(O, R, j, e, S, X, w, c) {
                var D = this;
                if (e.drawCell)
                    return e.drawCell(O, R, j, e, S, X, w, c, D);
                var G = D.getValue(R, e);
                Qc(O, G, e, D.getLabelFont(R, e, G), D.getLabelColor(R, e, G), S, X, w, c, R, D)
            }
            ,
            v.getColumnModel = function() {
                return this._39o
            }
            ,
            v._17o = function() {
                this.redraw()
            }
            ,
            v._18o = function(P) {
                var j = this;
                P.data === j._sortColumn && Tg[P.property] ? j.ivm() : (j._42o(),
                j.redraw())
            }
            ,
            v._19o = function() {
                this.redraw()
            }
            ,
            v.getCurrentSortFunc = function() {
                var C = this
                  , Z = C._sortColumn;
                if (Z && Z.isSortable()) {
                    var u = Z.getSortFunc()
                      , c = dh === Z.getSortOrder() ? 1 : -1;
                    return u || (u = rj),
                    function(Q, h) {
                        return u.call(C, C.getValue(Q, Z), C.getValue(h, Z), Q, h) * c
                    }
                }
                return C._sortFunc
            }
            ,
            v.isCellEditable = function(x, J, U) {
                return J.isEditable() && this.isEditable() ? J.isCellEditable ? J.isCellEditable(x, J, U, this) : !0 : !1
            }
            ,
            v._37O = function(v, Y) {
                if (_e(Y))
                    for (var I = this, T = I.lp(Y), D = I._60I, _ = I._rowHeight, W = I._29I, A = W.x, b = W.y, s = W.width, S = W.height, O = 0; O < D.size(); O++) {
                        var j = D.get(O)
                          , B = j.startX
                          , h = j.column
                          , V = h.getWidth();
                        if (h !== I._31o && h !== I._4o && T.x >= B && T.x < B + V && I.isCellEditable(v, h, Y)) {
                            var i = {
                                x: B,
                                y: I.getRowIndex(v) * _,
                                width: V,
                                height: _
                            }
                              , l = {
                                x: i.x + I.tx(),
                                y: i.y + I.ty(),
                                width: i.width,
                                height: i.height
                            }
                              , u = 0
                              , N = 0;
                            return i.x < A ? u = i.x - A : i.x + i.width > A + s && (u = i.x + i.width - A - s),
                            u && (I.tx(I.tx() - u),
                            l.x -= u),
                            i.y < b ? N = i.y - b : i.y + _ > b + S && (N = i.y + _ - b - S),
                            N && (I.ty(I.ty() - N),
                            l.y -= N),
                            I.beginEditing({
                                data: v,
                                column: h,
                                value: I.getValue(v, h),
                                event: Y,
                                rect: i,
                                editorRect: l,
                                view: I
                            }),
                            void 0
                        }
                    }
            }
        }
        ,
        Ce.BaseItemEditor = function(H, c, k, _) {
            this._data = H,
            this._column = c,
            this._master = k,
            this._editInfo = _
        }
        ,
        lm("BaseItemEditor", m, {
            ms_ac: ["data", "column", "master", "editInfo"],
            editBeginning: function() {},
            getView: function() {},
            getValue: function() {},
            setValue: function() {}
        });
        var Sl = C.Tab = function() {
            nm(Sl, this)
        }
        ;
        bm("Tab", $n, {
            ms_ac: ["view", "closable", "disabled"],
            _icon: V,
            _closable: !1,
            _disabled: !1,
            setParent: Pg
        });
        var Kf = C.Column = function() {
            nm(Kf, this)
        }
        ;
        bm("Column", $n, {
            _46o: 1,
            ms_ac: ["accessType", "valueType", Fi, Dq, Wn, tg, "align", Zc, "sortOrder", Pq, "sortable", "clickable", "nullable", "emptiable", "slider", "colorPicker", "itemEditor"],
            _visible: !0,
            _width: 80,
            _sortOrder: dh,
            _sortFunc: V,
            _sortable: !0,
            _clickable: !0,
            setWidth: function(h) {
                16 > h && (h = 16);
                var w = this._width;
                this._width = h,
                this.fp(tg, w, h)
            },
            getToolTip: function(r, w) {
                return this.formatValue(w.getValue(r, this))
            }
        });
        var Yr = C.Property = function() {
            nm(Yr, this)
        }
        ;
        bm("Property", $n, {
            _46o: 1,
            ms_ac: ["accessType", "valueType", Dq, Wn, "categoryName", Zc, "align", "nullable", "emptiable", "slider", "itemEditor", "colorPicker"],
            _categoryName: V,
            getToolTip: function(G, y, x) {
                var n = this;
                return y ? n.formatValue(x.getValue(G, n)) : x.getPropertyName(n)
            }
        }),
        Ce.AccordionView = function() {
            var B = this;
            B._20o = {},
            B._21o = new Vr,
            B._10o = V,
            B._9o = V,
            B._11o = V,
            B._view = Gc(0, B),
            B.iv()
        }
        ,
        lm("AccordionView", m, {
            ms_v: 1,
            ms_fire: 1,
            ms_ac: [Ug, ui, "titleHeight", Jq, rq, "titleBackground", "selectWidth", Fg, "orientation", "separatorColor"],
            _expandIcon: j.accordionViewExpandIcon,
            _collapseIcon: j.accordionViewCollapseIcon,
            _titleHeight: Kc,
            _labelColor: j.accordionViewLabelColor,
            _labelFont: j.accordionViewLabelFont,
            _titleBackground: j.accordionViewTitleBackground,
            _selectBackground: j.accordionViewSelectBackground,
            _selectWidth: j.accordionViewSelectWidth,
            _orientation: "v",
            _separatorColor: j.accordionViewSeparatorColor,
            onPropertyChanged: function() {
                this.iv()
            },
            getView: function() {
                return this._view
            },
            getTitles: function() {
                return this._21o
            },
            getCurrentTitle: function() {
                return this._10o
            },
            add: function(I, i, $, z) {
                var S = this
                  , u = ff();
                if (S._20o[I])
                    throw I + " already exists";
                u.onmousedown = vh,
                u.style.cursor = jm,
                u.addEventListener(Nq ? Xe : kl, function(U) {
                    vh(U)
                }, !1),
                u.addEventListener(Nq ? pj : ur, function(W) {
                    vh(W),
                    _e(W) && (S._10o === I ? S.collapse() : S.expand(I))
                }, !1),
                mg(S._view, u),
                S._20o[I] = {
                    content: i,
                    div: u,
                    canvas: qb(u),
                    icon: z
                },
                S._21o.add(I),
                $ && S.expand(I),
                S.iv()
            },
            remove: function(U) {
                var w = this
                  , r = w._20o[U];
                r && (hp(r.div),
                delete w._20o[U],
                w._21o.remove(U),
                w.iv())
            },
            clear: function() {
                var v = this;
                v._21o.toArray().forEach(v.remove, v),
                v._20o = {},
                v._21o.clear(),
                v.iv()
            },
            isExpanded: function(v) {
                return this._10o === v
            },
            expand: function(g) {
                var N = this;
                N._20o[g] && N._10o !== g && (N._10o = g,
                N.onExpanded(g),
                N.iv())
            },
            onExpanded: function() {},
            collapse: function() {
                var Z = this;
                Z._10o && (Z.onCollapsed(Z._10o),
                delete Z._10o,
                Z.iv())
            },
            onCollapsed: function() {},
            initCanvas: function(m, s, P) {
                ug(m, s, P);
                var _ = Zf(m);
                return Pk(_, 0, 0, 1),
                _.clearRect(0, 0, s, P),
                _
            },
            drawTitle: function(k, K, l, P, w) {
                var u = this
                  , f = bn(w.icon)
                  , p = u.isExpanded(K)
                  , s = u._titleHeight
                  , a = u._titleBackground
                  , D = u._selectWidth
                  , O = u._separatorColor
                  , V = bn(p ? u._expandIcon : u._collapseIcon)
                  , T = D + 4;
                he(k, 0, 0, l, P, a),
                p && D && he(k, 0, 0, D, P, u._selectBackground),
                (p || u._21o.get(u._21o.size() - 1) !== K) && he(k, 0, P - 1, l, 1, O ? O : wc(a)),
                f && (Lk(k, f, T + Cm(f) / 2, s / 2),
                T += Cm(f) + 2),
                Gg(k, K, u.getLabelFont(K), u.getLabelColor(K), T, 0, 0, s),
                V && Lk(k, V, l - Cm(V) / 2 - 4, s / 2)
            },
            validateImpl: function() {
                var A = this
                  , y = A._view
                  , G = 0
                  , c = 0
                  , F = A.getWidth()
                  , h = A.getHeight()
                  , M = A._titleHeight
                  , b = A._21o.size() * M
                  , e = A._11o
                  , Q = A._9o;
                delete A._11o,
                delete A._9o,
                A._21o.each(function(g) {
                    var n, V, j = A._20o[g], Y = j.content, L = A._10o === g;
                    ub(A) ? (Pc(j.div, G, 0, M, h),
                    n = A.initCanvas(j.canvas, M, h),
                    Sc(n, 0, h),
                    wo(n, -l),
                    A.drawTitle(n, g, h, M, j),
                    n.restore(),
                    L ? (V = X(0, F - b),
                    Y && (A._11o = Y,
                    A._9o = $k(Y),
                    Pc(Y, G + M, 0, V, h)),
                    G += M + V) : G += M) : (Pc(j.div, 0, c, F, M),
                    n = A.initCanvas(j.canvas, F, M),
                    A.drawTitle(n, g, F, M, j),
                    n.restore(),
                    L ? (V = X(0, h - b),
                    Y && (A._11o = Y,
                    A._9o = $k(Y),
                    Pc(Y, 0, c + M, F, V)),
                    c += M + V) : c += M)
                });
                var s = A._9o;
                e && e !== A._11o && e.endEditing && e.endEditing(),
                s && s !== Q && mg(y, s),
                Q && Q !== s && hp(Q)
            }
        }),
        Ce.SplitView = function(a, N, e, B) {
            var X = this
              , S = X._dividerDiv = ff()
              , W = X._60O = qb()
              , $ = X._61O = qb()
              , Z = W.style
              , p = $.style;
            X._view = Gc(1, X),
            mg(X._view, S),
            Z.msTouchAction = Jg,
            Z.pointerEvents = Jg,
            Z.cursor = jm,
            p.msTouchAction = Jg,
            p.pointerEvents = Jg,
            p.cursor = jm,
            a && X.setLeftView(a),
            N && X.setRightView(N),
            e && X.setOrientation(e),
            B != V && X.setPosition(B),
            X.setStatus(wh),
            new me(X)
        }
        ,
        lm("SplitView", m, {
            ms_v: 1,
            ms_fire: 1,
            ms_ac: ["continuousLayout", "dividerSize", "dividerBackground", "toggleIcon", "togglable", "dragOpacity", "orientation", "draggable", "status"],
            _continuousLayout: !1,
            _position: .5,
            _togglable: !0,
            _orientation: "h",
            _draggable: !0,
            _dividerSize: j.splitViewDividerSize,
            _dividerBackground: j.splitViewDividerBackground,
            _dragOpacity: j.splitViewDragOpacity,
            _toggleIcon: j.splitViewToggleIcon,
            onPropertyChanged: function() {
                this.iv()
            },
            getDividerDiv: function() {
                return this._dividerDiv
            },
            getPosition: function() {
                return this._position
            },
            setPosition: function(H, l) {
                var v = this
                  , w = v._position;
                isNaN(H) || (l || (v._82O = 0 > H ? -1 : H > 1 ? 1 : 0),
                v._position = H,
                v.fp(Xd, w, H))
            },
            getLeftView: function() {
                return this._leftView
            },
            setLeftView: function(f) {
                var P = this
                  , s = P._leftView
                  , $ = P._view;
                if (P._leftView !== f) {
                    if (s && s !== P._rightView) {
                        var o = $k(s);
                        o.parentNode === $ && hp(o)
                    }
                    if (P._leftView = f,
                    f) {
                        var r = $k(f);
                        r.parentNode !== $ && $.insertBefore(r, P._dividerDiv)
                    }
                    P.fp("leftView", s, f)
                }
            },
            getRightView: function() {
                return this._rightView
            },
            setRightView: function(o) {
                var G = this
                  , c = G._rightView
                  , t = G._view;
                if (G._rightView !== o) {
                    if (c && c !== G._leftView) {
                        var j = $k(c);
                        j.parentNode === t && hp(j)
                    }
                    if (G._rightView = o,
                    o) {
                        var S = $k(o);
                        S.parentNode !== t && t.insertBefore(S, G._dividerDiv)
                    }
                    G.fp("rightView", c, o)
                }
            },
            validateImpl: function() {
                var K = this
                  , h = K._draggable
                  , N = K._position
                  , S = K.getWidth()
                  , j = K.getHeight()
                  , p = K._dividerSize
                  , V = K._dividerBackground
                  , R = Nq ? 18 : 8
                  , Y = K._dividerDiv
                  , a = K._82O
                  , t = K._60O
                  , g = K._61O
                  , O = K._toggleIcon
                  , I = K._status
                  , n = Y.style
                  , _ = null
                  , x = Nq ? 20 : 4
                  , e = O.comps[0];
                p >= R || 0 === p ? K._coverDiv && (hp(K._coverDiv),
                delete K._coverDiv) : K._coverDiv || (K._coverDiv = ff(),
                i && (K._coverDiv.style.background = zc),
                mg(Y, K._coverDiv)),
                K._togglable ? t.parentNode || (mg(Y, t),
                mg(Y, g)) : (hp(t),
                hp(g));
                var u = K._coverDiv
                  , B = K._leftView
                  , s = K._rightView;
                if (ub(K)) {
                    if (p > S && (p = S),
                    I === wh)
                        if (1 === a)
                            var Q = b(N, S)
                              , q = X(0, S - p - Q);
                        else
                            -1 === a ? (q = b(-N, S),
                            Q = X(0, S - p - q)) : (Q = D((S - p) * N),
                            q = X(0, S - p - Q));
                    else
                        "cl" === I ? (Q = 0,
                        q = X(0, S - p)) : "cr" === I && (q = 0,
                        Q = X(0, S - p));
                    B && Pc(B, 0, 0, Q, j),
                    s && Pc(s, Q + p, 0, q, j),
                    Pc(Y, Q, 0, p, j),
                    K._22o = Q,
                    u && (Pc(u, p / 2 - R / 2, 0, R, j),
                    u.style.cursor = h ? Rr : ""),
                    Y.style.cursor = h ? Rr : "";
                    var A = Y.clientHeight / 2
                      , C = Y.clientWidth;
                    ug(t, C, C),
                    Pc(t, 0, A - C - x, C, C),
                    _ = Zf(t),
                    Pk(_, 0, 0, 1),
                    e.rotation = -l,
                    ts(_, O, 0, 0, C, C),
                    _.restore(),
                    ug(g, C, C),
                    Pc(g, 0, A + x, C, C),
                    _ = Zf(g),
                    Pk(_, 0, 0, 1),
                    e.rotation = l,
                    ts(_, O, 0, 0, C, C),
                    _.restore()
                } else {
                    if (p > j && (p = j),
                    I === wh)
                        if (1 === a)
                            var P = b(N, j)
                              , G = X(0, j - p - P);
                        else
                            -1 === a ? (G = b(-N, j),
                            P = X(0, j - p - G)) : (P = D((j - p) * N),
                            G = X(0, j - p - P));
                    else
                        "cl" === I ? (P = 0,
                        G = X(0, j - p)) : "cr" === I && (G = 0,
                        P = X(0, j - p));
                    B && Pc(B, 0, 0, S, P),
                    s && Pc(s, 0, P + p, S, G),
                    Pc(Y, 0, P, S, p),
                    K._22o = P,
                    u && (Pc(u, 0, p / 2 - R / 2, S, R),
                    u.style.cursor = h ? qk : ""),
                    n.cursor = h ? qk : "";
                    var H = Y.clientWidth / 2
                      , C = Y.clientHeight;
                    ug(t, C, C),
                    Pc(t, H - C - x, 0, C, C),
                    _ = Zf(t),
                    Pk(_, 0, 0, 1),
                    e.rotation = 0,
                    ts(_, O, 0, 0, C, C),
                    _.restore(),
                    ug(g, C, C),
                    Pc(g, H + x, 0, C, C),
                    _ = Zf(g),
                    Pk(_, 0, 0, 1),
                    e.rotation = L,
                    ts(_, O, 0, 0, C, C),
                    _.restore()
                }
                n.background = V
            }
        });
        var me = function(U) {
            this.sv = U,
            this.addListeners()
        };
        fh(me, m, {
            ms_listener: 1,
            getView: function() {
                return this.sv.getView()
            },
            handle_touchstart: function(p) {
                var k = this
                  , $ = k.sv
                  , y = $._dividerDiv
                  , o = $._60O
                  , A = $._61O
                  , L = $._status
                  , V = p.target;
                if (V === o)
                    L === wh ? $.setStatus("cl") : "cr" === L && $.setStatus(wh);
                else if (V === A)
                    L === wh ? $.setStatus("cr") : "cl" === L && $.setStatus(wh);
                else if (Ml(p) && (V === y || V === $._coverDiv) && (vh(p),
                $.isDraggable())) {
                    $.getLeftView(),
                    $.getRightView();
                    var w = k.maskDiv = ff();
                    if (w.style.left = 0,
                    w.style.top = 0,
                    w.style.width = $.getWidth() + "px",
                    w.style.height = $.getHeight() + "px",
                    $.getView().appendChild(w),
                    !$.isContinuousLayout()) {
                        var H = k.resizeDiv = ff();
                        H.style.left = y.style.left,
                        H.style.top = y.style.top,
                        H.style.width = y.style.width,
                        H.style.height = y.style.height,
                        H.style.opacity = $.getDragOpacity(),
                        H.style.background = $.getDividerBackground(),
                        mg(k.getView(), H)
                    }
                    k._lastAbsPosition = $._22o,
                    k._86o = ub($) ? Qn(p).x : Qn(p).y,
                    Dl(k, p)
                }
            },
            handleWindowTouchMove: function(I) {
                Ml(I) && this.update(I, this.sv.isContinuousLayout())
            },
            handleWindowTouchEnd: function(F) {
                var h = this;
                h.update(F, !0),
                h.sv.setStatus(wh),
                h.maskDiv && hp(h.maskDiv),
                h.resizeDiv && hp(h.resizeDiv),
                h.maskDiv = h.resizeDiv = V
            },
            handle_mousedown: function(g) {
                _e(g) && this.handle_touchstart(g)
            },
            handleWindowMouseMove: function(u) {
                this.handleWindowTouchMove(u)
            },
            handleWindowMouseUp: function(x) {
                this.handleWindowTouchEnd(x)
            },
            update: function(V, r) {
                var O = this
                  , I = O.sv
                  , d = ub(I) ? I.getWidth() : I.getHeight()
                  , i = I._dividerSize
                  , U = O._lastAbsPosition - O._86o;
                ub(I) ? (U += Qn(V).x,
                U > d - i && (U = d - i),
                0 > U && (U = 0),
                O.resizeDiv && (O.resizeDiv.style.left = U + gn)) : (U += Qn(V).y,
                U > d - i && (U = d - i),
                0 > U && (U = 0),
                O.resizeDiv && (O.resizeDiv.style.top = U + gn)),
                r && d !== i && (1 === I._82O ? I.setPosition(U, 1) : -1 === I._82O ? I.setPosition(U - d + i, 1) : I.setPosition(U / (d - i), 1))
            }
        }),
        Ce.TabView = function() {
            var Y = this
              , z = Y._view = Gc(1, Y)
              , m = Y._91O = ff(1)
              , w = Y._tabModel = new Wm
              , r = w.sm()
              , Z = Y.invalidate;
            Y._7o = new Vr,
            Y._canvas = qb(m),
            mg(z, m),
            mg(z, Y._92O = ff(1)),
            r.setSelectionMode(Fe),
            r.ms(Y.handleSelectionChange, Y),
            w.mm(Z, Y),
            w.md(Z, Y),
            w.mh(Z, Y),
            new gd(Y),
            Y.iv()
        }
        ,
        lm("TabView", m, {
            ms_v: 1,
            ms_fire: 1,
            ms_tx: 1,
            ms_ty: 1,
            ms_lp: 1,
            ms_ac: ["movable", "tabGap", "tabHeight", "tabPosition", Jq, rq, "tabBackground", "selectWidth", Fg, "moveBackground", "insertColor"],
            _tabPosition: ve,
            _tabHeight: Kc,
            _tabGap: j.tabViewTabGap,
            _labelColor: j.tabViewLabelColor,
            _labelFont: j.tabViewLabelFont,
            _tabBackground: j.tabViewTabBackground,
            _selectWidth: j.tabViewSelectWidth,
            _selectBackground: j.tabViewSelectBackground,
            _moveBackground: j.tabViewMoveBackground,
            _insertColor: j.tabViewInsertColor,
            _movable: !0,
            handleSelectionChange: function() {
                this._selectionChanged = !0,
                this.invalidate()
            },
            getContentDiv: function() {
                return this._92O
            },
            getTitleDiv: function() {
                return this._91O
            },
            getTabModel: function() {
                return this._tabModel
            },
            add: function(T, a, Q) {
                var k = new Sl
                  , Y = this._tabModel;
                return k.setName(T),
                k.setView(a),
                Y.add(k),
                Q && Y.sm().ss(k),
                k
            },
            getLabel: function(z) {
                return z.toLabel()
            },
            onPropertyChanged: function() {
                this.iv()
            },
            _7Q: function(d) {
                this._23o = d,
                this.iv()
            },
            get: function(g) {
                var L = this
                  , E = L._tabModel;
                if (Hg(g))
                    return E._roots.get(g);
                if (xe(g)) {
                    var p;
                    return E.each(function(G) {
                        g === L.getLabel(G) && (p = G)
                    }),
                    p
                }
                return g instanceof Sl ? g : V
            },
            select: function(R) {
                this._tabModel.sm().ss(this.get(R))
            },
            remove: function(n) {
                var G = this;
                if (n = G.get(n)) {
                    var b = G._tabModel
                      , i = b._roots.indexOf(n);
                    G._tabModel.remove(n),
                    G.selectByIndex(--i)
                }
            },
            getCurrentTab: function() {
                return this._8o
            },
            hideTabView: function(I, i) {
                i.parentNode === this._92O && (Kr(i) ? (i.style.display = uk,
                i._tab_ = I) : hp(i),
                Wr())
            },
            showTabView: function(O, a) {
                Kr(a) && (a.style.display = "block",
                a._tab_ = O),
                a.parentNode !== this._92O && (mg(this._92O, a),
                Wr())
            },
            _24o: function() {
                var A, u = this, E = u._8o, I = u._9o, B = u._tabModel.sm().ld();
                B && (A = $k(B.getView())),
                A !== I && (I && (E.getView() && E.getView().endEditing && E.getView().endEditing(),
                u.hideTabView(E, I)),
                A && u.showTabView(B, A)),
                u._8o = B,
                u._9o = A,
                E !== B && u.onTabChanged(E, B)
            },
            onTabClosing: function() {
                return !0
            },
            onTabChanged: function() {},
            onTabClosed: function(O, Y) {
                this.selectByIndex(--Y)
            },
            selectByIndex: function(T) {
                var w = this
                  , m = w._tabModel
                  , e = m.size();
                if (e && !m.sm().ld()) {
                    T == V && (T = 0),
                    T >= e && (T = e - 1),
                    0 > T && (T = 0);
                    for (var t = T; t >= 0; t--) {
                        var k = w.get(t);
                        if (!k.isDisabled())
                            return w.select(k),
                            k
                    }
                    for (t = T + 1; e > t; t++)
                        if (k = w.get(t),
                        !k.isDisabled())
                            return w.select(k),
                            k
                }
            },
            getTabWidth: function(y) {
                var w = 4
                  , G = bn(y.getIcon());
                G && (w += Cm(G, y) + 4);
                var H = this.getLabel(y);
                return H && (w += bk(this.getLabelFont(y), H).width + 4),
                y.isClosable() && (w += 10),
                w
            },
            drawTab: function(J, Z, N, i, a, z, E) {
                var v, Q = this, C = Q._tabPosition, t = N + 4, g = Q._selectWidth, s = bn(Z.getIcon()), x = Z.isDisabled(), P = Q.getLabelColor(Z), $ = Q.getLabelFont(Z), X = Q.getLabel(Z), d = Q._selectBackground, q = C === $j + "-vertical", y = C === yo + "-vertical";
                (q || y) && (t = i + 4),
                x && (J.globalAlpha = Uo),
                he(J, N, i, a, z, E),
                Z === Q._8o && g && (C === ve ? he(J, N, i + z - g, a, g, d) : C === $j ? he(J, N + a - g, i, g, z, d) : C === yo ? he(J, N, i, g, z, d) : q ? he(J, N + a - g, i, g, z, d) : y ? he(J, N, i, g, z, d) : he(J, N, i, a, g, d));
                var V = a / 2;
                if (q && (Sc(J, V, i + z / 2),
                wo(J, L),
                Sc(J, -V, -i - z / 2)),
                s) {
                    var j = Hi(s, Z)
                      , I = Cm(s, Z);
                    if (q || y) {
                        var o = N + a / 2
                          , W = t + j / 2;
                        Sc(J, o, W),
                        wo(J, l),
                        Sc(J, -o, -W),
                        Lk(J, s, N + a / 2, t + j / 2, Z, Q),
                        Sc(J, o, W),
                        wo(J, -l),
                        Sc(J, -o, -W),
                        t += j + 4
                    } else
                        Lk(J, s, t + I / 2, i + z / 2, Z, Q),
                        t += I + 4
                }
                return q || y ? (Sc(J, a / 2, t + a / 2),
                wo(J, l),
                Sc(J, -a / 2, -t - a / 2),
                Gg(J, X, $, P, N, t, z, a),
                Sc(J, a / 2, t + a / 2),
                wo(J, -l),
                Sc(J, -a / 2, -t - a / 2)) : Gg(J, X, $, P, t, i, a, z),
                q && (Sc(J, V, i + z / 2),
                wo(J, -L),
                Sc(J, -V, -i - z / 2)),
                Z.isClosable() && (v = y ? {
                    x: N + a - 12,
                    y: i + z - 12,
                    width: 12,
                    height: 12
                } : {
                    x: N + a - 12,
                    y: i + 2,
                    width: 12,
                    height: 12
                },
                this.drawCloseIcon(Z, J, P, v)),
                x && (J.globalAlpha = 1),
                v
            },
            drawCloseIcon: function(X, k, b, h) {
                var T = h.x
                  , N = h.y;
                k.strokeStyle = b,
                k.lineWidth = 1,
                k.beginPath(),
                k.moveTo(T + 2, N + 8),
                k.lineTo(T + 8, N + 2),
                k.moveTo(T + 8, N + 8),
                k.lineTo(T + 2, N + 2),
                k.stroke()
            },
            validateImpl: function() {
                var Y = this;
                Y._24o();
                var D, P = Y._canvas, J = Y._tabPosition, h = Y._91O, w = Y._92O, m = Y._tabModel, c = Y.getWidth(), z = Y.getHeight(), C = Y._tabHeight, o = Y._7o, U = Y._tabGap, d = J === ve, v = J === $j, N = J === yo, x = J === $j + "-vertical", V = J === yo + "-vertical", K = Y._23o, e = 0;
                if ((v || N) && m._roots.each(function(h) {
                    e = X(Y.getTabWidth(h), e)
                }),
                d ? (Pc(h, 0, 0, c, C),
                D = {
                    x: 0,
                    y: C,
                    width: c,
                    height: X(0, z - C)
                }) : v ? (Pc(h, 0, 0, e, z),
                D = {
                    x: e,
                    y: 0,
                    width: X(0, c - e),
                    height: z
                }) : N ? (Pc(h, c - e, 0, e, z),
                D = {
                    x: 0,
                    y: 0,
                    width: X(0, c - e),
                    height: z
                }) : x ? (Pc(h, 0, 0, C, z),
                D = {
                    x: C,
                    y: 0,
                    width: X(0, c - C),
                    height: z
                }) : V ? (Pc(h, c - C, 0, C, z),
                D = {
                    x: 0,
                    y: 0,
                    width: X(0, c - C),
                    height: z
                }) : (Pc(h, 0, z - C, c, C),
                D = {
                    x: 0,
                    y: 0,
                    width: c,
                    height: X(0, z - C)
                }),
                Pc(w, D),
                x || V) {
                    Y._9o && (D.x = 0,
                    Pc(Y._8o.getView(), D)),
                    ug(P, C, z);
                    var F = Zf(P)
                      , n = 0;
                    if (Pk(F, 0, Y.ty(), 1),
                    F.clearRect(0, 0, C, z),
                    o.clear(),
                    m._roots.each(function(x) {
                        var f, S = Y.getTabWidth(x);
                        K && K.tab === x || (f = Y.drawTab(F, x, 0, n, C, S, Y._tabBackground)),
                        o.add({
                            _75o: f,
                            tab: x,
                            startY: n,
                            endY: n + S,
                            height: S
                        }),
                        n += S + U
                    }),
                    Y._23Q = X(0, n - U),
                    K) {
                        var l = K.position;
                        Y.drawTab(F, K.tab, 0, K.startY, C, K.height, Y._moveBackground),
                        he(F, 0, l, C, 1, Y._insertColor)
                    }
                    if (F.restore(),
                    Y._selectionChanged) {
                        Y._selectionChanged = !1;
                        for (var j = Y.ty(), u = 0; u < o.size(); u++) {
                            var k = o.get(u);
                            if (k.tab === Y._8o) {
                                if (k.endY + j < 0) {
                                    Y.ty(-k.startY);
                                    break
                                }
                                if (k.startY + j > z) {
                                    Y.ty(z - k.endY);
                                    break
                                }
                            }
                        }
                    }
                    Y.ty(Y.ty())
                } else if (v || N) {
                    Y._9o && (D.x = 0,
                    Pc(Y._8o.getView(), D)),
                    ug(P, e, z);
                    var F = Zf(P)
                      , n = 0;
                    if (Pk(F, 0, Y.ty(), 1),
                    F.clearRect(0, 0, e, z),
                    o.clear(),
                    m._roots.each(function($) {
                        var j;
                        K && K.tab === $ || (j = Y.drawTab(F, $, 0, n, e, C, Y._tabBackground)),
                        o.add({
                            _75o: j,
                            tab: $,
                            startY: n,
                            endY: n + C,
                            height: C
                        }),
                        n += C + U
                    }),
                    Y._23Q = X(0, n - U),
                    K) {
                        var l = K.position;
                        Y.drawTab(F, K.tab, 0, K.startY, e, K.height, Y._moveBackground),
                        he(F, 0, l, e, 1, Y._insertColor)
                    }
                    if (F.restore(),
                    Y._selectionChanged) {
                        Y._selectionChanged = !1;
                        for (var j = Y.ty(), u = 0; u < o.size(); u++) {
                            var k = o.get(u);
                            if (k.tab === Y._8o) {
                                if (k.endY + j < 0) {
                                    Y.ty(-k.startY);
                                    break
                                }
                                if (k.startY + j > z) {
                                    Y.ty(z - k.endY);
                                    break
                                }
                            }
                        }
                    }
                    Y.ty(Y.ty())
                } else {
                    Y._9o && (D.y = 0,
                    Pc(Y._8o.getView(), D)),
                    ug(P, c, C);
                    var F = Zf(P)
                      , G = 0;
                    if (Pk(F, Y.tx(), 0, 1),
                    F.clearRect(0, 0, c, C),
                    o.clear(),
                    m._roots.each(function(z) {
                        var v, u = Y.getTabWidth(z);
                        K && K.tab === z || (v = Y.drawTab(F, z, G, 0, u, C, Y._tabBackground)),
                        o.add({
                            _75o: v,
                            tab: z,
                            startX: G,
                            endX: G + u,
                            width: u
                        }),
                        G += u + U
                    }),
                    Y._64I = X(0, G - U),
                    K) {
                        var l = K.position;
                        Y.drawTab(F, K.tab, K.startX, 0, K.width, C, Y._moveBackground),
                        Cp(F, Y._insertColor, l, 0, C)
                    }
                    if (F.restore(),
                    Y._selectionChanged) {
                        Y._selectionChanged = !1;
                        for (var S = Y.tx(), u = 0; u < o.size(); u++) {
                            var k = o.get(u);
                            if (k.tab === Y._8o) {
                                if (k.endX + S < 0) {
                                    Y.tx(-k.startX);
                                    break
                                }
                                if (k.startX + S > c) {
                                    Y.tx(c - k.endX);
                                    break
                                }
                            }
                        }
                    }
                    Y.tx(Y.tx())
                }
                for (var A = [], f = w.children, u = 0; u < f.length; u++) {
                    var g = f[u]
                      , H = g._tab_;
                    H && !m.contains(H) && A.push(g)
                }
                A.forEach(function(F) {
                    w.removeChild(F)
                })
            }
        });
        var gd = function(R) {
            this.tv = R,
            this.addListeners()
        };
        fh(gd, m, {
            ms_listener: 1,
            getView: function() {
                return this.tv._91O
            },
            handle_mousewheel: function(H) {
                this.handleScroll(H, 10 * (H.wheelDelta / 40))
            },
            handle_DOMMouseScroll: function(Y) {
                this.handleScroll(Y, 10 * -Y.detail)
            },
            handleScroll: function(c, Z) {
                vh(c);
                var v = this.tv
                  , L = v._tabPosition;
                !v._40o() || L !== ve && L !== uo || v.tx(this.tv.tx() + Z),
                !v._41o() || L !== $j && L !== yo && L !== $j + "-vertical" && L !== yo + "-vertical" || v.ty(this.tv.ty() + Z)
            },
            _8Q: function(a) {
                var D, k, i = this.tv, y = i._tabPosition, U = i._7o;
                if (y === ve || y === uo) {
                    var J = i.lp(a).x;
                    for (D = 0; D < U.size(); D++)
                        if (k = U.get(D),
                        k.startX <= J && J <= k.endX)
                            return k
                } else if (y === $j || y === yo || y === $j + "-vertical" || y === yo + "-vertical") {
                    var v = i.lp(a).y;
                    for (D = 0; D < U.size(); D++)
                        if (k = U.get(D),
                        k.startY <= v && v <= k.endY)
                            return k
                }
                return V
            },
            isClickable: function(T) {
                var o = this.tv
                  , U = o._tabPosition
                  , H = this._73o = this._8Q(T);
                return !o._40o() || U !== ve && U !== uo ? !o._41o() || U !== $j && U !== yo && U !== $j + "-vertical" && U !== yo + "-vertical" ? H && (!H.tab.isDisabled() || o.isMovable()) : !0 : !0
            },
            handle_mousemove: function(g) {
                var u = this;
                wq ? u._74o = u._8Q(g) : u.getView().style.cursor = u.isClickable(g) ? jm : ""
            },
            handle_mousedown: function(j) {
                this.handle_mousemove(j),
                this.handle_touchstart(j)
            },
            handle_touchstart: function(m) {
                var f = this
                  , F = f.tv
                  , L = F._tabPosition;
                vh(m),
                _e(m) && f.isClickable(m) && (L === ve || L === uo ? (f.x = Qn(m).x,
                f.lp = F.lp(m),
                f.tx = F.tx()) : (f.y = Qn(m).y,
                f.lp = F.lp(m),
                f.ty = F.ty()),
                Dl(f, m))
            },
            handleWindowMouseMove: function(k) {
                this.handleWindowTouchMove(k)
            },
            handleWindowTouchMove: function(Y) {
                var F, S = this, T = S.tv, R = T._tabPosition, f = S._73o;
                if (R === ve || R === uo) {
                    if (F = Qn(Y).x - S.x,
                    !S._25o && !S.moving && t(F) > 2 && (T._40o() && !jr(Y) ? S._25o = 1 : f && T.isMovable() && (S.moving = 1)),
                    S._25o)
                        T.tx(S.tx + F);
                    else if (S.moving) {
                        var z = S.lp.x + F
                          , K = T._tabGap / 2;
                        T._7o.each(function(M) {
                            var d = M.endX
                              , l = z - M.startX < d - z;
                            z >= M.startX && d >= z && T._7Q({
                                tab: f.tab,
                                startX: f.startX + F,
                                width: f.width,
                                front: l,
                                insertTab: M.tab,
                                position: l ? X(0, M.startX - K) : b(T._64I, d + K)
                            })
                        })
                    }
                } else if (F = Qn(Y).y - S.y,
                !S._25o && !S.moving && t(F) > 2 && (T._41o() && !jr(Y) ? S._25o = 1 : f && T.isMovable() && (S.moving = 1)),
                S._25o)
                    T.ty(S.ty + F);
                else if (S.moving) {
                    var G = S.lp.y + F
                      , K = T._tabGap / 2;
                    T._7o.each(function(U) {
                        var e = U.endY
                          , C = G - U.startY < e - G;
                        G >= U.startY && e >= G && T._7Q({
                            tab: f.tab,
                            startY: f.startY + F,
                            height: f.height,
                            front: C,
                            insertTab: U.tab,
                            position: C ? X(0, U.startY - K) : b(T._23Q, e + K)
                        })
                    })
                }
            },
            handleWindowMouseUp: function(J) {
                this.handleWindowTouchEnd(J)
            },
            handleWindowTouchEnd: function() {
                var y = this
                  , J = y.tv
                  , P = J._tabPosition
                  , j = J.getTabModel()
                  , m = j._roots
                  , N = y._73o;
                if (y.moving) {
                    var v = J._23o;
                    if (v && v.insertTab !== v.tab) {
                        var c = v.tab
                          , D = m.remove(c)
                          , F = m.indexOf(v.insertTab);
                        F >= 0 && (v.front || F++,
                        F <= m.size() && (m.add(c, F),
                        j._38I(c, D, F)))
                    }
                    J._7Q(V),
                    delete y.moving
                } else if (!y._25o && N) {
                    c = N.tab;
                    var e = y._74o;
                    if (!e || e.tab === c)
                        if (!c.isDisabled() && Kp(N._75o, y.lp)) {
                            var S = function() {
                                var H = m.indexOf(c);
                                j.remove(c),
                                J.onTabClosed(c, H)
                            };
                            J.onTabClosing(c, S) && S()
                        } else
                            c.isDisabled() || J._8o === c || j.sm().ss(c)
                }
                y._25o = y._73o = y._74o = P === ve || P === uo ? y.x = y.lp = y.tx = V : y.y = y.lp = y.ty = V
            }
        }),
        Ce.PropertyView = function(q) {
            var Z = this;
            Z._view = Gc(1, Z),
            Z._canvas = qb(Z._view),
            mg(Z._view, Z._79O = ff()),
            Z._rows = new Vr,
            Z._28o = new Vr,
            Z._26o = {},
            Z._26Q = {};
            var l = Z._propertyModel = new Wm
              , p = Z.ivm;
            l.mm(p, Z),
            l.md(p, Z),
            l.mh(p, Z),
            Z.dm(q ? q : new Wm),
            new sc(Z)
        }
        ,
        lm("PropertyView", m, {
            ms_ac: [Jq, Tf, rq, Dq, Wn, "categorizable", Wo, Pq, os, Ug, ui, Vi, Hc, Hl, "selectRowIndex", Fg, "background", mp, Rj, wr, bc, Ln],
            ms_v: 1,
            ms_dm: 1,
            ms_fire: 1,
            ms_sm: 1,
            _49o: 1,
            ms_txy: 1,
            ms_lp: 1,
            ms_vs: 1,
            _45o: 1,
            _47o: 1,
            ms_tip: 1,
            _29I: zs,
            _59I: 0,
            _9I: 0,
            _selectRowIndex: -1,
            _editable: !0,
            _batchEditable: !0,
            _categorizable: !0,
            _indent: tb,
            _background: j.propertyViewBackground,
            _expandIcon: j.propertyViewExpandIcon,
            _collapseIcon: j.propertyViewCollapseIcon,
            _scrollBarColor: th,
            _scrollBarSize: xs,
            _autoHideScrollBar: Op,
            _selectBackground: j.propertyViewSelectBackground,
            _rowHeight: Mm,
            _rowLineVisible: j.propertyViewRowLineVisible,
            _rowLineColor: j.propertyViewRowLineColor,
            _10I: .5,
            _columnLineVisible: j.propertyViewColumnLineVisible,
            _columnLineColor: j.propertyViewColumnLineColor,
            _labelColor: j.propertyViewLabelColor,
            _labelSelectColor: j.propertyViewLabelSelectColor,
            _labelFont: j.propertyViewLabelFont,
            getRows: function() {
                return this._rows
            },
            getColumnPosition: function() {
                return this._10I
            },
            setColumnPosition: function(j) {
                0 > j && (j = 0),
                j > 1 && (j = 1);
                var w = this
                  , k = w._10I;
                w._10I = j,
                w.fp("columnPosition", k, j)
            },
            getPropertyName: function(l) {
                return l.toLabel()
            },
            getLabelFont: function() {
                return this._labelFont
            },
            getLabelColor: function(Z, d, w) {
                return w === this._selectRowIndex ? this._labelSelectColor : this._labelColor
            },
            getPropertyFont: function() {
                return this._labelFont
            },
            getPropertyColor: function(Z, E) {
                return E === this._selectRowIndex ? this._labelSelectColor : Z.getColor() || this._labelColor
            },
            getCategoryFont: function() {
                return this._labelFont
            },
            getCategoryColor: function() {
                return this._labelColor
            },
            adjustTranslateX: function() {
                return 0
            },
            adjustTranslateY: function(L) {
                var k = this.getHeight() - this._59I;
                return k > L && (L = k),
                L > 0 ? 0 : D(L)
            },
            isExpanded: function(f) {
                if (!f)
                    return !0;
                var D = this._26o[f];
                return D ? D.isExpanded : !(this._26Q[f] === !1)
            },
            toggle: function(b) {
                var d = this;
                d.isExpanded(b) ? d.collapse(b) : d.expand(b)
            },
            expandAll: function() {
                this.validate();
                for (var _ in this._26o)
                    this.expand(_)
            },
            expand: function(Y) {
                if (Y && Y !== uk) {
                    var T = this
                      , C = T._26o[Y];
                    C && !C.isExpanded && (C.isExpanded = !0,
                    T.onExpanded(Y),
                    T.ivm())
                }
            },
            onExpanded: function() {},
            collapseAll: function() {
                this.validate();
                for (var F in this._26o)
                    this.collapse(F)
            },
            collapse: function(Z) {
                if (Z && Z !== uk) {
                    var R = this
                      , s = R._26o[Z];
                    s && s.isExpanded && (s.isExpanded = !1,
                    R.onCollapsed(Z),
                    R.ivm())
                }
            },
            onCollapsed: function() {},
            getCategoryName: function(A) {
                if (!this.isCategorizable())
                    return uk;
                var Y = A.getCategoryName();
                return Y ? Y : uk
            },
            getPropertyModel: function() {
                return this._propertyModel
            },
            handleSelectionChange: function() {
                this.ivm()
            },
            setDataModel: function(G) {
                var Q = this
                  , d = Q._dataModel;
                d !== G && (d && (d.umd(Q.handlePropertyChange, Q),
                Q._selectionModel || d.sm().ums(Q.handleSelectionChange, Q)),
                Q._dataModel = G,
                G.md(Q.handlePropertyChange, Q),
                Q._selectionModel ? Q._selectionModel._21I(G) : G.sm().ms(Q.handleSelectionChange, Q),
                Q.fp(gr, d, G))
            },
            isVisible: function(Q) {
                return this._visibleFunc ? this._visibleFunc(Q) : !0
            },
            onPropertyChanged: function(z) {
                var d = this
                  , I = z.property;
                Qr[I] ? d.ivm() : d.iv(),
                I === ao && d._43o()
            },
            getCurrentData: function() {
                return this._27o
            },
            updateCurrentData: function() {
                this._27o = this.sm().ld()
            },
            getRawProperties: function() {
                return this._27o ? this._propertyModel._roots : cj
            },
            handlePropertyChange: function(A) {
                this._27o === A.data && this.iv()
            },
            ivm: function() {
                this.invalidateModel()
            },
            invalidateModel: function() {
                var x = this;
                x._96I || (x.setSelectRowIndex(-1),
                x._96I = 1,
                x.iv())
            },
            redraw: function() {
                this.iv()
            },
            validateModel: function() {
                var $ = this
                  , W = $._rows
                  , t = $._28o
                  , J = {}
                  , S = new Vr
                  , s = $._27o;
                $.updateCurrentData(),
                s !== $._27o && $.endEditing(),
                W.clear(),
                t.clear(),
                $.getRawProperties().each(function(c) {
                    if ($.isVisible(c)) {
                        S.add(c);
                        var X = $.getCategoryName(c);
                        J[X] || (t.add(X, X === uk ? 0 : F),
                        J[X] = {
                            isExpanded: $.isExpanded(X),
                            properties: new Vr
                        })
                    }
                }),
                $._sortFunc && S.sort($._sortFunc);
                for (var e in $._26o)
                    $._26Q[e] = $.isExpanded(e);
                $._26o = J,
                t.each(function(E) {
                    E !== uk && W.add(E);
                    var h = J[E];
                    h.isExpanded && S.each(function(T) {
                        $.getCategoryName(T) === E && (h.properties.add(T),
                        W.add({
                            property: T,
                            data: $._27o
                        }))
                    }, $)
                })
            },
            validateImpl: function() {
                var f = this;
                f._76o(),
                f._96I && (f.validateModel(),
                delete f._96I);
                var l = f._canvas
                  , $ = f.getWidth()
                  , Q = f.getHeight()
                  , N = -f.ty()
                  , m = f._rowHeight
                  , R = f._indent
                  , F = $ - R
                  , x = f._rows
                  , L = x.size()
                  , E = f._9I = R + F * f._10I
                  , d = f._59I = L * m;
                ug(l, $, Q),
                f._29I = {
                    x: 0,
                    y: N,
                    width: $,
                    height: Q
                },
                f._31I = M(N / m),
                f._14I = I((N + Q) / m),
                f._31I < 0 && (f._31I = 0),
                f._14I > L && (f._14I = L);
                var n, K = Zf(l), A = f._background;
                Pk(K, 0, -N, 1),
                K.beginPath(),
                K.rect(0, N, $, Q),
                K.clip(),
                K.clearRect(0, N, $, Q),
                f._93db(K),
                A && he(K, 0, 0, R, d, A);
                for (var Y = f._31I; Y < f._14I; Y++) {
                    var P = x.get(Y)
                      , N = m * Y;
                    if (xe(P))
                        A && he(K, R, N, F, m, A),
                        n = bn(f.isExpanded(P) ? f._expandIcon : f._collapseIcon),
                        n && rh(K, n, Gr, 0, N, R, m),
                        K.save(),
                        K.beginPath(),
                        K.rect(R, N, F, m),
                        K.clip(),
                        f.drawCategoryName(K, P, Y, R, N, F, m),
                        K.restore();
                    else {
                        var U = P.property
                          , _ = P.data
                          , n = bn(U.getIcon())
                          , p = f._selectRowIndex === Y ? f.getSelectBackground() : V;
                        if (n && rh(K, n, Gr, 0, N, R, m),
                        p && he(K, R, N, F, m, p),
                        K.save(),
                        K.beginPath(),
                        K.rect(R, N, E - R, m),
                        K.clip(),
                        f.drawPropertyName(K, U, Y, R, N, E - R, m),
                        K.restore(),
                        !f.isEditing(_, U)) {
                            var b = E + 1
                              , D = $ - E - 1;
                            K.save(),
                            K.beginPath(),
                            K.rect(b, N, D, m),
                            K.clip(),
                            f._87o(f.drawPropertyValue(K, U, f.getValue(_, U), Y, b, N, D, m, _), Y, b, N, D, m),
                            K.restore()
                        }
                    }
                    f._rowLineVisible && he(K, R, N + m - 1, F, 1, f._rowLineColor)
                }
                f._columnLineVisible && (he(K, E, 0, 1, d, f._columnLineColor),
                he(K, $ - 1, 0, 1, d)),
                f._92db(K),
                f._93I(),
                K.restore(),
                f.ty(f.ty())
            },
            drawCategoryName: function(I, O, b, C, L, N, H) {
                Gg(I, O, this.getCategoryFont(O), this.getCategoryColor(O), C, L, N, H)
            },
            drawPropertyName: function(j, T, s, K, U, V, W) {
                return T.drawPropertyName ? (T.drawPropertyName(j, T, s, K, U, V, W, this),
                void 0) : (Gg(j, this.getPropertyName(T), this.getPropertyFont(T, s), this.getPropertyColor(T, s), K, U, V, W),
                void 0)
            },
            drawPropertyValue: function(i, F, t, e, V, g, Z, n, s) {
                return F.drawPropertyValue ? F.drawPropertyValue(i, F, t, e, V, g, Z, n, s, this) : (Qc(i, t, F, this.getLabelFont(F, t, e), this.getLabelColor(F, t, e), V, g, Z, n, s, this),
                void 0)
            },
            isPropertyEditable: function(n) {
                return n.isEditable() && this.isEditable()
            },
            setProperties: function(B) {
                this._propertyModel.clear(),
                this.addProperties(B)
            },
            addProperties: function(x) {
                if (x) {
                    var h = this._propertyModel;
                    x.forEach(function(k) {
                        if (!(k instanceof Yr)) {
                            var d = Fp(k.className);
                            k = uq(d ? d : Yr, k)
                        }
                        h.add(k)
                    })
                }
            },
            getRowIndexAt: function(i) {
                var j = this
                  , m = M(j.lp(i).y / j._rowHeight);
                return m >= 0 && m < j._rows.size() ? m : -1
            },
            getPropertyAt: function(Z) {
                var y = this
                  , I = y.getRowIndexAt(Z);
                return I >= 0 ? y._rows.get(I).property : V
            },
            getToolTip: function($) {
                var E = this
                  , r = E.getPropertyAt($)
                  , U = E._27o;
                return r && U ? r.getToolTip(U, E._9I < E.lp($).x, E) : V
            }
        });
        var sc = function(z) {
            this.pv = z,
            this.addListeners()
        };
        fh(sc, m, {
            ms_listener: 1,
            getView: function() {
                return this.pv._view
            },
            setCursor: function(E) {
                this.getView().style.cursor = E
            },
            clear: function() {
                var l = this;
                l._62O = l.cp = l.ty = l.p = V,
                l.setCursor(Hm)
            },
            handle_mousedown: function(L) {
                this.handle_touchstart(L)
            },
            handle_touchstart: function(y) {
                var V = this
                  , G = V.pv;
                vh(y),
                G.setFocus(y) && (_e(y) ? (V.cp = Qn(y),
                V.ty = G.ty(),
                V.p = G.getColumnPosition(),
                V.handle_touchmove(y)) : G.setSelectRowIndex(G.getRowIndexAt(y)))
            },
            handleWindowMouseUp: function() {
                this.clear()
            },
            handleWindowTouchEnd: function() {
                this.clear()
            },
            handle_mouseup: function(h) {
                this.handle_touchend(h)
            },
            handle_touchend: function(u) {
                var t = this;
                if (t.cp && !t._62O) {
                    var k = t.pv
                      , I = k.lp(u)
                      , w = I.x
                      , G = I.y
                      , W = k._indent
                      , v = k.getRowIndexAt(u)
                      , Y = k._9I;
                    if (v >= 0) {
                        var d = k._rowHeight
                          , M = d * v
                          , F = k._rows.get(v)
                          , A = F.property;
                        if (xe(F))
                            bn(k.isExpanded(F) ? k._expandIcon : k._collapseIcon) && w >= 0 && W >= w && G >= M && M + d >= G ? k.toggle(F) : _g(u) && k.toggle(F);
                        else if (w > Y && k.isPropertyEditable(A, u)) {
                            var R = {
                                x: Y + 1,
                                y: M,
                                width: k.getWidth() - Y - 1,
                                height: d
                            }
                              , i = {
                                x: R.x + k.tx(),
                                y: R.y + k.ty(),
                                width: R.width,
                                height: R.height
                            }
                              , e = 0
                              , r = k._29I;
                            R.y < r.y ? e = R.y - r.y : R.y + d > r.y + r.height && (e = R.y + d - r.y - r.height),
                            e && (k.ty(k.ty() - e),
                            i.y -= e),
                            k.beginEditing({
                                data: F.data,
                                property: A,
                                value: k.getValue(F.data, A),
                                event: u,
                                rect: R,
                                editorRect: i,
                                view: k
                            })
                        }
                    }
                    k.setSelectRowIndex(v)
                }
                t.clear()
            },
            handleWindowMouseMove: function(Q) {
                this.handleWindowTouchMove(Q)
            },
            handleWindowTouchMove: function(u) {
                var t = this
                  , $ = t.pv
                  , w = t.ty
                  , W = t.cp
                  , e = Qn(u)
                  , g = t._62O;
                if ("p" === g)
                    $.setTranslateY(w + e.y - W.y);
                else if ("c" === g) {
                    var o = $.getWidth() - $._indent;
                    if (o > 16) {
                        var f = t.p - (W.x - e.x) / o
                          , N = 16 / o;
                        N > f && (f = N),
                        f > 1 - N && (f = 1 - N),
                        $.setColumnPosition(f)
                    }
                } else
                    "s" === g && $.setTranslateY(w + (W.y - e.y) * $._59I / $._29I.height)
            },
            handle_mousemove: function(A) {
                this.handle_touchmove(A)
            },
            handle_touchmove: function(E) {
                if (!wq && _e(E)) {
                    var T = this
                      , G = T.pv
                      , F = t(G.lp(E).x - G._9I) <= (Nq ? 8 : 3);
                    T.cp ? T._62O || (F ? (T._62O = "c",
                    Dl(T)) : t(Qn(E).y - T.cp.y) >= 2 && (T._62O = T.isV(E) ? "s" : "p",
                    Dl(T))) : (F ? T.setCursor(Rr) : T.setCursor(Hm),
                    T.isV(E) && G._43o())
                }
            },
            isV: function(Y) {
                var Z = this.pv
                  , K = Z._29I;
                return Z._41o() && K.x + K.width - Z.lp(Y).x < Cq
            },
            handle_mousewheel: function(H) {
                this.handleScroll(H, H.wheelDelta / 40)
            },
            handle_DOMMouseScroll: function(o) {
                2 === o.axis && this.handleScroll(o, -o.detail)
            },
            handleScroll: function(_, Q) {
                var T = this.pv;
                vh(_),
                T.endEditing(),
                T.translate(0, Q * T.getRowHeight())
            },
            handle_keydown: function(p) {
                var K = this.pv
                  , z = K._rows.size()
                  , Z = K._selectRowIndex + (Xc(p) ? -1 : 1);
                (Xc(p) || On(p)) && (0 > Z && (Z = 0),
                Z >= z && (Z = z - 1),
                K.setSelectRowIndex(Z))
            }
        }),
        Ce.ListView = function(W) {
            this._5o(W),
            new Jd(this)
        }
        ,
        lm("ListView", m, {
            ms_ac: [Jq, Tf, rq, mp, Wo, Rj, wr, Pq, os, Vi, Hc, Hl, Ao, Fg],
            ms_v: 1,
            ms_bnb: 1,
            ms_tip: 1,
            ms_fire: 1,
            ms_sm: 1,
            _49o: 1,
            ms_txy: 1,
            ms_lp: 1,
            ms_vs: 1,
            ms_hs: 1,
            _15Q: 1,
            _14Q: 1,
            ms_dm: 1,
            _45o: 1,
            _checkMode: !1,
            _indent: tb,
            _rowHeight: Mm,
            _rowLineVisible: j.listViewRowLineVisible,
            _rowLineColor: j.listViewRowLineColor,
            _scrollBarColor: th,
            _scrollBarSize: xs,
            _autoMakeVisible: Ck,
            _autoHideScrollBar: Op,
            _selectBackground: j.listViewSelectBackground,
            _labelColor: j.listViewLabelColor,
            _labelSelectColor: j.listViewLabelSelectColor,
            _labelFont: j.listViewLabelFont,
            isCheckMode: function() {
                return this._checkMode
            },
            setCheckMode: function(V) {
                var R = this
                  , U = R._checkMode;
                R._checkMode = V,
                R.fp(ji, U, V)
            },
            drawRow: function(Z, U, G, J, k, m, A) {
                var g = this
                  , l = 0
                  , p = g._indent
                  , i = g.getIconWidth(U);
                g.drawRowBackground(Z, U, G, J, k, m, A),
                g._checkMode && (Lk(Z, bn(g.getCheckIcon(U)), l + p / 2, k + A / 2, U, g),
                l += p),
                g.drawIcon(Z, U, l, k, i, A),
                g.drawLabel(Z, U, l + i, k, A)
            }
        });
        var Jd = function(u) {
            this.list = u,
            this._lastSelectDataTime = Cl(),
            this.addListeners()
        };
        fh(Jd, m, {
            ms_listener: 1,
            getView: function() {
                return this.list._view
            },
            clear: function(h) {
                var I = this
                  , v = I.list;
                h && "d" === I._62O && !I.dragCancel && v.handleDragAndDrop(h, "end"),
                v.draggingData && (v.draggingData = null,
                v.redraw()),
                I.dragCancel = I._62O = I._isV = I._isH = I.cp = I.tx = I.ty = V
            },
            handle_mousedown: function(b) {
                this.handle_touchstart(b)
            },
            handle_touchstart: function(f) {
                var M = this
                  , $ = M.list;
                if (vh(f),
                $.setFocus(f)) {
                    var j = $.getDataAt(f);
                    M.cp = Qn(f),
                    M.tx = $.tx(),
                    M.ty = $.ty(),
                    _e(f) ? j && $.handleDragAndDrop && !M.isV(f) && !M.isH(f) && ($.draggingData = j,
                    $.redraw(),
                    $.handleDragAndDrop(f, "prepare")) : (j && M._33o(f, j),
                    M.clear(f))
                }
            },
            handleWindowMouseUp: function(x) {
                this.clear(x)
            },
            handleWindowTouchEnd: function(S) {
                this.clear(S)
            },
            handle_mouseup: function(M) {
                this.handle_touchend(M)
            },
            handle_touchend: function(R) {
                var h = this
                  , j = h.list;
                if (!h._isV && !h._isH && h.cp && !h._62O) {
                    var Z = j.getDataAt(R);
                    Z ? (j.isCheckMode() ? h._34o(R, Z) : h._33o(R, Z),
                    _g(R) ? j.onDataDoubleClicked(Z, R) : j.onDataClicked(Z, R)) : j.handleBackgroundClick(R)
                }
                h.clear(R)
            },
            handleWindowMouseMove: function(h) {
                this.handleWindowTouchMove(h)
            },
            handleWindowTouchMove: function(E) {
                var c = this
                  , T = c.list
                  , j = c._62O
                  , k = c.tx
                  , G = c.ty
                  , P = c.cp
                  , i = Qn(E)
                  , l = T._29I;
                "p" === j ? T.setTranslate(k + i.x - P.x, G + i.y - P.y) : "v" === j ? T.ty(G + (P.y - i.y) * T._59I / l.height) : "h" === j ? T.tx(k + (P.x - i.x) * T._91I / l.width) : "d" === j && (c.dragCancel || T.handleDragAndDrop(E, "between"))
            },
            handle_mousemove: function(d) {
                this.handle_touchmove(d)
            },
            handle_touchmove: function(P) {
                if (!wq && _e(P)) {
                    var q = this
                      , r = q.list;
                    if (q._isV = q.isV(P),
                    q._isH = q.isH(P),
                    q.cp) {
                        if (!q._62O) {
                            if (uf(Qn(P), q.cp) < 2)
                                return;
                            q._isV ? q._62O = "v" : q._isH ? q._62O = "h" : r.draggingData && !this.dragCancel ? (q._62O = "d",
                            r.handleDragAndDrop(P, "begin")) : q._62O = "p",
                            q._62O && "d" !== q._62O && r.draggingData && (r.draggingData = null,
                            r.redraw()),
                            Dl(q)
                        }
                    } else
                        q._isV && r._43o(),
                        q._isH && r._42o()
                }
            },
            isV: function(E) {
                var A = this.list
                  , g = A._29I;
                return A._41o() && g.x + g.width - A.lp(E).x < Cq
            },
            isH: function(p) {
                var l = this.list
                  , g = l._29I;
                return l._40o() && g.y + g.height - l.lp(p).y < Cq
            },
            handle_mousewheel: function(O) {
                this.handleScroll(O, O.wheelDelta / 40, O.wheelDelta !== O.wheelDeltaX)
            },
            handle_DOMMouseScroll: function(l) {
                this.handleScroll(l, -l.detail, 1)
            },
            handleScroll: function(G, R, x) {
                var n = this.list;
                vh(G),
                n.endEditing && n.endEditing(),
                x && n._41o() ? n.translate(0, R * n.getRowHeight()) : n._40o() && n.translate(10 * R, 0)
            },
            handle_keydown: function(V) {
                if (!j.isInput(V.target)) {
                    var n, s = this.list, i = s.sm(), u = s._rows, R = u.size();
                    if (Nd(V))
                        s.selectAll();
                    else if (Sm(V))
                        s.handleDelete && s.handleDelete(V);
                    else if (Kq(V))
                        "d" !== this._62O || this.dragCancel || (s.handleDragAndDrop(V, "cancel"),
                        this.dragCancel = !0);
                    else if (uc(V))
                        s.isCheckMode() && (n = s.getFocusData(),
                        n && s.checkData(n));
                    else if (Xc(V) || On(V)) {
                        var q = s.isCheckMode();
                        if (n = q ? s.getFocusData() : i.ld()) {
                            var Q = s.getRowIndex(n);
                            Q >= 0 && (Xc(V) ? 0 !== Q && (n = u.get(Q - 1),
                            q ? s.setFocusData(n) : i.ss(n)) : Q !== R - 1 && (n = u.get(Q + 1),
                            q ? s.setFocusData(n) : i.ss(n)))
                        } else
                            R > 0 && (n = u.get(0),
                            q ? s.setFocusData(n) : i.ss(n))
                    }
                }
            },
            _34o: function(T, Z) {
                var C = this.list
                  , n = C.lp(T).x;
                return n >= 0 && n <= C._indent ? (C.checkData(Z),
                void 0) : (C.setFocusData(Z),
                void 0)
            },
            _33o: function(Y, H) {
                var l = this.list
                  , N = l.sm()
                  , b = N.ld();
                if (jr(Y))
                    l.isSelected(H) ? N.rs(H) : N.as(H);
                else if (ig(Y))
                    if (b)
                        for (var k = l.getRowIndex(b), f = l.getRowIndex(H); k !== f; )
                            k += f > k ? 1 : -1,
                            N.as(l._rows.get(k));
                    else
                        N.ss(H);
                else if (_e(Y)) {
                    var s = Cl();
                    if (N.contains(H)) {
                        var R = s - this._lastSelectDataTime;
                        l.handleDataDoubleSelect && R > 500 && 1500 > R && l.handleDataDoubleSelect(Y, H)
                    }
                    N.ss(H),
                    this._lastSelectDataTime = s
                } else
                    N.contains(H) || N.ss(H)
            }
        }),
        Ce.TreeView = function(A) {
            var H = this;
            H._35o(),
            H._5o(A),
            new pc(H)
        }
        ,
        lm("TreeView", m, {
            ms_ac: [Jq, Tf, rq, "rootVisible", ji, "rootData", Pq, os, Vi, Hc, Hl, Wo, mp, Rj, wr, Ug, ui, Ao, Fg, "loader", "doubleClickToToggle"],
            ms_v: 1,
            ms_bnb: 1,
            ms_tip: 1,
            ms_fire: 1,
            ms_sm: 1,
            _49o: 1,
            ms_txy: 1,
            ms_lp: 1,
            ms_vs: 1,
            ms_hs: 1,
            _15Q: 1,
            ms_dm: 1,
            _48o: 1,
            _14Q: 1,
            _45o: 1,
            _checkMode: V,
            _indent: tb,
            _rowHeight: Mm,
            _rowLineVisible: j.treeViewRowLineVisible,
            _rowLineColor: j.treeViewRowLineColor,
            _scrollBarColor: th,
            _scrollBarSize: xs,
            _autoHideScrollBar: Op,
            _expandIcon: j.treeViewExpandIcon,
            _collapseIcon: j.treeViewCollapseIcon,
            _autoMakeVisible: Ck,
            _selectBackground: j.treeViewSelectBackground,
            _labelColor: j.treeViewLabelColor,
            _labelSelectColor: j.treeViewLabelSelectColor,
            _labelFont: j.treeViewLabelFont,
            _doubleClickToToggle: j.treeViewDoubleClickToToggle,
            drawRow: function($, Q, J, h, c, B, m) {
                var K = this;
                K.drawRowBackground($, Q, J, h, c, B, m),
                K._97I($, Q, J, 0, c, B, m)
            },
            isOnToggleIcon: function(g) {
                var k = this.getDataAt(g);
                if (k) {
                    var e = this.getIndent()
                      , a = this.lp(g).x;
                    if (bn(this.getToggleIcon(k))) {
                        var X = e * this.getLevel(k);
                        if (a >= X && X + e >= a)
                            return !0
                    }
                }
                return !1
            }
        });
        var pc = function(U) {
            nm(pc, this, [U])
        };
        fh(pc, Jd, {
            toggle: function(k, r, N, P) {
                var o = this.list
                  , A = o.lp(k).x;
                if (bn(o.getToggleIcon(r))) {
                    var x = N * P;
                    if (A >= x && x + N >= A)
                        return o.toggle(r),
                        !0
                }
                return o.isDoubleClickToToggle() && _g(k) ? (o.toggle(r),
                !0) : !1
            },
            _34o: function(K, D) {
                var y = this.list
                  , c = y.lp(K).x
                  , n = y._levelMap[D._id]
                  , d = y._indent
                  , F = d * (n + 1);
                return c >= F && F + d >= c ? (y.checkData(D),
                void 0) : (this.toggle(K, D, d, n) || y.setFocusData(D),
                void 0)
            },
            _33o: function(s, G) {
                var I = this
                  , q = I.list;
                I.toggle(s, G, q._indent, q.getLevel(G)) || pc.superClass._33o.call(I, s, G)
            },
            handle_keydown: function(x) {
                if (Db(x) || Hb(x)) {
                    var i = this.list
                      , j = i._rows
                      , h = i.isCheckMode()
                      , G = i.sm()
                      , A = h ? i.getFocusData() : G.ld();
                    A ? A.hasChildren() && (Db(x) ? i.collapse(A) : i.expand(A)) : j.size() > 0 && (A = j.get(0),
                    h ? i.setFocusData(A) : G.ss(A))
                } else
                    pc.superClass.handle_keydown.call(this, x)
            }
        });
        var Vk = Ce.TableView = function(Z) {
            this._98I(),
            this._5o(Z),
            new zk(this)
        }
        ;
        lm("TableView", m, {
            ms_ac: [Jq, Tf, rq, "sortMode", Dq, Wn, mp, Rj, wr, bc, Ln, "sortColumn", Pq, os, Vi, Hc, Hl, Ao, Fg],
            ms_v: 1,
            ms_fire: 1,
            ms_sm: 1,
            _49o: 1,
            ms_txy: 1,
            ms_lp: 1,
            ms_vs: 1,
            ms_hs: 1,
            _15Q: 1,
            ms_dm: 1,
            ms_tip: 1,
            _50o: 1,
            _45o: 1,
            _47o: 1,
            _sortMode: Xh,
            _editable: !0,
            _batchEditable: !1,
            _rowHeight: Mm,
            _rowLineVisible: j.tableViewRowLineVisible,
            _rowLineColor: j.tableViewRowLineColor,
            _columnLineVisible: j.tableViewColumnLineVisible,
            _columnLineColor: j.tableViewColumnLineColor,
            _scrollBarColor: th,
            _scrollBarSize: xs,
            _autoHideScrollBar: Op,
            _autoMakeVisible: Ck,
            _selectBackground: j.tableViewSelectBackground,
            _labelColor: j.tableViewLabelColor,
            _labelSelectColor: j.tableViewLabelSelectColor,
            _labelFont: j.tableViewLabelFont,
            getCheckColumn: function() {
                var H = this;
                if (!H._31o) {
                    var h = H._31o = new Kf;
                    h.setEditable(!0),
                    h.setWidth(40),
                    h.getValue = H.getCheckColumValue,
                    h.drawCell = H.drawCheckColumnCell
                }
                return H._31o
            },
            isCheckMode: function() {
                return this._39o.contains(this._31o)
            },
            setCheckMode: function(H) {
                var $ = this
                  , U = $._39o
                  , Z = $.getCheckColumn();
                H !== $.isCheckMode() && (H ? U.add(Z, 0) : U.remove(Z),
                $.fp(ji, !H, H))
            },
            getCheckColumValue: function(u, P, S) {
                return S.isSelected(u)
            },
            drawCheckColumnCell: function(y, O, V, k, g, q, o, p, u) {
                Lk(y, u.getCheckIcon(O), g + o / 2, q + p / 2, O, u)
            }
        });
        var zk = function(a) {
            nm(zk, this, [a])
        };
        fh(zk, Jd, {
            _34o: function(B, N) {
                var k = this.list
                  , u = k._31o;
                if (k.isCellEditable(N, u, B)) {
                    var h = k._3Q(u)
                      , l = k.lp(B).x;
                    if (h && l >= h.startX && l < h.startX + u.getWidth())
                        return k.checkData(N),
                        void 0
                }
                k._37O(N, B),
                k.setFocusData(N)
            },
            _33o: function(z, q) {
                this.list._37O(q, z),
                zk.superClass._33o.apply(this, arguments)
            }
        });
        var sj = Ce.TreeTableView = function(j) {
            var G = this
              , S = G._4o = new Kf;
            G._35o(),
            G._98I(),
            G._5o(j),
            S.setDisplayName("Name"),
            S.setEditable(!0),
            S.setWidth(180),
            S.drawCell = Lq,
            S.getValue = Vn,
            G._39o.add(S),
            new xg(G)
        }
          , Lq = function(N, J, F, b, c, j, i, L, W) {
            W._97I(N, J, F, c, j, i, L)
        }
          , Vn = function(p, Y, z) {
            return z.getLabel(p)
        };
        lm("TreeTableView", m, {
            ms_ac: [Jq, Tf, rq, "sortMode", Dq, Wn, Wo, ji, "rootData", "rootVisible", Pq, os, "sortColumn", Ug, ui, Vi, Hc, Hl, Ao, wr, mp, Rj, bc, Ln, Fg, "loader"],
            ms_v: 1,
            ms_bnb: 1,
            ms_fire: 1,
            ms_sm: 1,
            _49o: 1,
            ms_txy: 1,
            ms_lp: 1,
            ms_vs: 1,
            ms_hs: 1,
            _15Q: 1,
            ms_dm: 1,
            ms_tip: 1,
            _50o: 1,
            _48o: 1,
            _14Q: 1,
            _45o: 1,
            _47o: 1,
            _sortMode: Xh,
            _checkMode: V,
            _editable: !0,
            _batchEditable: !1,
            _indent: tb,
            _rowHeight: Mm,
            _rowLineVisible: j.treeTableViewRowLineVisible,
            _rowLineColor: j.treeTableViewRowLineColor,
            _columnLineVisible: j.treeTableViewColumnLineVisible,
            _columnLineColor: j.treeTableViewColumnLineColor,
            _expandIcon: j.treeTableViewExpandIcon,
            _collapseIcon: j.treeTableViewCollapseIcon,
            _scrollBarColor: th,
            _scrollBarSize: xs,
            _autoHideScrollBar: Op,
            _autoMakeVisible: Ck,
            _selectBackground: j.treeTableViewSelectBackground,
            _labelColor: j.treeTableViewLabelColor,
            _labelSelectColor: j.treeTableViewLabelSelectColor,
            _labelFont: j.treeTableViewLabelFont,
            getTreeColumn: function() {
                return this._4o
            }
        });
        var xg = function(T) {
            nm(xg, this, [T])
        };
        fh(xg, Jd, {
            _34o: function(A, R) {
                var T = this.list
                  , b = T._4o
                  , U = T._3Q(b)
                  , n = T.lp(A).x;
                if (U) {
                    var g = T._indent
                      , K = U.startX + g * T.getLevel(R);
                    if (bn(T.getToggleIcon(R)) && n >= K && K + g >= n)
                        return T.toggle(R),
                        void 0;
                    if (T.isCellEditable(R, b) && (K += g,
                    n >= K && K + g >= n))
                        return T.checkData(R),
                        void 0
                }
                T._37O(R, A),
                T.setFocusData(R)
            },
            _33o: function(I, g) {
                var l = this.list
                  , u = l.lp(I).x;
                if (bn(l.getToggleIcon(g))) {
                    var y = l._3Q(l._4o);
                    if (y) {
                        var m = l._indent
                          , T = y.startX + m * l.getLevel(g);
                        if (u >= T && T + m >= u)
                            return l.toggle(g),
                            void 0
                    }
                }
                l._37O(g, I),
                xg.superClass._33o.apply(this, arguments)
            }
        });
        var xb = Ce.TableHeader = function(q) {
            var Y = this
              , i = Y._view = Gc(1, Y)
              , W = Y._39o = q.getColumnModel()
              , d = Y.iv;
            Y.tv = Y._tableView = q,
            Y._60I = new Vr,
            Y._canvas = qb(i),
            i.style.background = j.tableHeaderBackground || "",
            i.style.height = jo + gn,
            W.mm(d, Y),
            W.md(d, Y),
            W.mh(d, Y),
            q.mp(function(p) {
                of[p.property] && Y.iv()
            }, Y),
            new El(Y),
            Y.iv()
        }
        ;
        lm("TableHeader", m, {
            ms_v: 1,
            ms_lp: 1,
            ms_fire: 1,
            ms_ac: ["checkIcon", "sortDescIcon", "sortAscIcon", Jq, rq, Wo, "moveBackground", "insertColor", bc, Ln, "resizable", "movable"],
            _checkIcon: wb,
            _movable: !0,
            _resizable: !0,
            _labelColor: j.tableHeaderLabelColor,
            _labelFont: j.tableHeaderLabelFont,
            _columnLineColor: j.tableHeaderColumnLineColor,
            _columnLineVisible: j.tableHeaderColumnLineVisible,
            _sortDescIcon: j.tableHeaderSortDescIcon,
            _sortAscIcon: j.tableHeaderSortAscIcon,
            _moveBackground: j.tableHeaderMoveBackground,
            _insertColor: j.tableHeaderInsertColor,
            _indent: tb,
            getCheckIcon: function() {
                return this._checkIcon
            },
            getTableView: function() {
                return this.tv
            },
            getLabel: function(j) {
                return j.toLabel()
            },
            getLabelFont: function() {
                return this._labelFont
            },
            getLabelColor: function(T) {
                return T.getColor() || this._labelColor
            },
            getLabelAlign: function(O) {
                return O._align
            },
            onPropertyChanged: function() {
                this.iv()
            },
            _5Q: function(a) {
                this._61I = a,
                this.iv()
            },
            getLogicalPoint: function(f) {
                return jd(f, this._canvas, this.tv.tx())
            },
            validateImpl: function() {
                var v = this
                  , U = v._canvas
                  , L = v.getWidth()
                  , G = v.getHeight()
                  , O = v.tv
                  , I = v._60I
                  , i = v._61I
                  , E = -O.tx()
                  , K = 0;
                (L !== U.clientWidth || G !== U.clientHeight) && ug(U, L, G),
                I.clear(),
                v._39o._roots.each(function(J) {
                    if (J.isVisible()) {
                        var v = K + J.getWidth();
                        E + L >= K && v >= E && I.add({
                            column: J,
                            startX: K
                        }),
                        K = v
                    }
                });
                var e = Zf(U);
                if (Pk(e, -E, 0, 1),
                e.beginPath(),
                e.rect(E, 0, L, G),
                e.clip(),
                e.clearRect(E, 0, L, G),
                I.each(function($) {
                    var E = $.column
                      , j = $.startX
                      , n = E.getWidth();
                    n > 0 && (e.save(),
                    e.beginPath(),
                    e.rect(j, 0, n, G),
                    e.clip(),
                    i && i.column === E || v.drawColumn(e, E, j, 0, n, G),
                    v._columnLineVisible && he(e, j + n - 1, 0, 1, G, v._columnLineColor),
                    e.restore())
                }),
                i) {
                    var Q = i.column
                      , K = i.startX
                      , S = i.position
                      , A = Q.getWidth();
                    e.save(),
                    e.beginPath(),
                    e.rect(K, 0, A, G),
                    e.clip(),
                    e.fillStyle = v._moveBackground,
                    e.fill(),
                    v.drawColumn(e, Q, K, 0, A, G),
                    e.restore(),
                    Cp(e, v._insertColor, S, 0, G)
                }
                e.restore()
            },
            _6Q: function(Q) {
                var m = this.tv;
                return m._31o === Q && m.sm().getSelectionMode() === Fb
            },
            drawColumn: function($, K, b, n, M, e) {
                var U = this
                  , u = U.tv
                  , z = bn(K.getIcon())
                  , d = U.getLabelAlign(K);
                if (U._6Q(K)) {
                    var j = bn(U._checkIcon);
                    Lk($, j, b + M / 2, n + e / 2, K, U)
                } else {
                    var t = U.getLabel(K)
                      , O = U.getLabelFont(K)
                      , C = U.getLabelColor(K)
                      , V = bk(O, t).width
                      , L = z ? U._indent : 0;
                    d === $j ? (z && rh($, z, Gr, b, n, L, e),
                    Gg($, t, O, C, b + L, n, M, e, $j)) : d === yo ? (z && rh($, z, Gr, b + M - V - L, n, L, e),
                    Gg($, t, O, C, b, n, M, e, yo)) : (z && rh($, z, Gr, b + (M - V - L) / 2, n, L, e),
                    Gg($, t, O, C, b + (M - V + L) / 2, n, 0, e, $j))
                }
                if (K.isSortable() && u.getSortColumn() === K && (z = bn(K.getSortOrder() === dh ? U._sortAscIcon : U._sortDescIcon))) {
                    var c = Cm(z, K) / 2 + 2;
                    Lk($, z, d === yo ? b + c : b + M - c, n + e / 2, K, u)
                }
            }
        });
        var El = function(f) {
            var V = this;
            V.th = f,
            V.tv = f._tableView,
            V.addListeners()
        };
        fh(El, m, {
            ms_listener: 1,
            getView: function() {
                return this.th.getView()
            },
            setCursor: function(G) {
                this.getView().style.cursor = G
            },
            handle_mousemove: function(p) {
                if (!wq) {
                    var C = this;
                    delete C._29o,
                    C.setCursor(Hm);
                    for (var f = C.th, q = f._60I, e = f.lp(p).x, I = q.size() - 1; I >= 0; I--) {
                        var j = q.get(I)
                          , A = j.column
                          , Q = j.startX + A.getWidth();
                        if (f.isResizable() && t(Q - e) <= (Nq ? 10 : 3))
                            return C._29o = j,
                            C.setCursor(Rr),
                            void 0;
                        e > j.startX && Q > e && (C._29o = j),
                        (A.isClickable() || A.isSortable() || f.isMovable() || C.tv.getCheckColumn && A === C.tv.getCheckColumn()) && e > j.startX && Q > e && C.setCursor(jm)
                    }
                }
            },
            handle_mousedown: function(r) {
                this.handle_touchstart(r)
            },
            handle_touchstart: function(I) {
                var H = this;
                vh(I),
                H.tv.endEditing(),
                H.handle_mousemove(I),
                H._29o && (H.x = Qn(I).x,
                H.lx = H.th.lp(I).x,
                H.w = H._29o.column.getWidth(),
                Dl(H, I))
            },
            handleWindowMouseMove: function(T) {
                this.handleWindowTouchMove(T)
            },
            handleWindowTouchMove: function(Y) {
                var J = this
                  , W = J.th
                  , D = J.getView().style.cursor
                  , S = J._29o
                  , C = Qn(Y).x - J.x;
                if (J.resizing || J.moving || (D === Rr ? J.resizing = 1 : W.isMovable() && D === jm && t(C) > 2 && (J.moving = 1)),
                J.resizing)
                    S.column.setWidth(J.w + C);
                else if (J.moving) {
                    var o = J.lx + C;
                    W._60I.each(function(E) {
                        var D = E.startX
                          , Y = D + E.column.getWidth();
                        if (o >= D && Y >= o) {
                            var T = {
                                column: S.column,
                                startX: S.startX + C,
                                front: Y - o > o - D,
                                insertColumn: E.column
                            };
                            T.position = T.front ? D : Y,
                            W._5Q(T)
                        }
                    })
                }
            },
            _16Q: function(U, W) {
                var A = this
                  , o = A.tv
                  , r = A.th
                  , n = r._checkIcon;
                if (r._6Q(U)) {
                    var x = bn(n)
                      , Q = A.lx
                      , w = U.getWidth()
                      , h = Cm(x, U);
                    if (Q >= W + w / 2 - h && W + w / 2 + h >= Q) {
                        r.setCheckIcon(n === $m ? wb : $m);
                        var c = o.sm()
                          , u = o._rows;
                        return n === $m ? c.rs(u) : c.ss(u),
                        o.onCheckColumnClicked(U),
                        !0
                    }
                }
                return !1
            },
            handleWindowMouseUp: function(T) {
                this.handleWindowTouchEnd(T)
            },
            handleWindowTouchEnd: function(E) {
                var i = this
                  , D = i.tv
                  , B = i.th
                  , A = i._29o;
                if (i.moving) {
                    var b = B._61I;
                    if (b && b.insertColumn !== b.column) {
                        var g = b.column
                          , w = D.getColumnModel()._roots
                          , x = w.remove(g)
                          , O = w.indexOf(b.insertColumn);
                        O >= 0 && (b.front || O++,
                        O <= w.size() && (w.add(g, O),
                        D.getColumnModel()._38I(g, x, O)))
                    }
                    B._5Q(V),
                    delete i.moving
                } else if (!i.resizing && A) {
                    g = A.column;
                    var R = B.lp(E).x
                      , z = A.startX
                      , p = !0;
                    if (B.onColumnClicked) {
                        var U = B.onColumnClicked(g, E, z);
                        U === !1 && (p = !1)
                    }
                    if (p && R >= z && R <= z + g.getWidth() && !i._16Q(g, z)) {
                        if (g.isSortable()) {
                            var Q = D.getSortMode()
                              , L = g.getSortOrder();
                            Q === Xh ? D.getSortColumn() === g ? (L === hf && D.setSortColumn(V),
                            g.setSortOrder(L === dh ? hf : dh)) : D.setSortColumn(g) : "bistate" === Q && (D.getSortColumn() === g ? g.setSortOrder(L === dh ? hf : dh) : D.setSortColumn(g))
                        }
                        D.onColumnClicked(g, E, z)
                    }
                }
                i._29o = i.resizing = i.x = i.lx = i.w = V
            }
        }),
        Ce.TablePane = function(c) {
            this.init(new Vk(c))
        }
        ,
        lm("TablePane", m, {
            ms_v: 1,
            _44o: 1
        }),
        Ce.TreeTablePane = function(h) {
            this.init(new sj(h))
        }
        ,
        lm("TreeTablePane", m, {
            ms_v: 1,
            _44o: 1
        }),
        Ce.Toolbar = function(y) {
            var T = this
              , z = T._view = Gc(1, T)
              , i = z.style;
            i.background = j.toolbarBackground || "",
            i.height = Kc + gn,
            T._canvas = qb(z),
            T._30o = new Vr,
            T._90I = new Vr,
            T.setItems(y || []),
            z.handleGroupSelectedChanged = function(r) {
                if (r.isSelected()) {
                    var E = r.getGroupId();
                    null != E && T._items.forEach(function(m) {
                        var q = m.element;
                        q && q !== r && q.setSelected && q.getGroupId && q.getGroupId() === E && q.setSelected(!1)
                    })
                }
            }
            ,
            new Uf(T)
        }
        ,
        lm("Toolbar", m, {
            ms_v: 1,
            ms_fire: 1,
            ms_tx: 1,
            ms_lp: 1,
            ms_tip: 1,
            ms_value: 1,
            ms_ac: [Di, Jq, rq, Tf, Fg, "itemGap", "separatorColor", "currentItem", "stickToRight"],
            _labelColor: j.toolbarLabelColor,
            _labelSelectColor: j.toolbarLabelSelectColor,
            _labelFont: j.toolbarLabelFont,
            _selectBackground: j.toolbarSelectBackground,
            _itemGap: j.toolbarItemGap,
            _separatorColor: j.toolbarSeparatorColor,
            _stickToRight: !1,
            getSumWidth: function() {
                return this._64I
            },
            getToolTip: function(b) {
                var J = this.getItemInfoAt(b);
                return J ? J.item.toolTip : V
            },
            getLabelColor: function(S) {
                return S && S.selected && S.type !== $m && S.type !== ud ? this._labelSelectColor : this._labelColor
            },
            onPropertyChanged: function(U) {
                this.iv(),
                U.property === Di && this._items.forEach(function(G) {
                    Hj(G)
                })
            },
            redraw: function() {
                this.iv()
            },
            addItem: function(b, Q) {
                var L = this._items;
                Q == V ? L.push(b) : L.splice(Q, 0, b),
                this.fp(Di, V, L)
            },
            removeItem: function(S) {
                if (S)
                    for (var _ = this._items, c = 0; c < _.length; c++)
                        S === _[c] && (_.splice(c, 1),
                        this.fp(Di, V, _))
            },
            removeItemById: function(D) {
                if (D != V)
                    for (var o = this._items, Y = 0; Y < o.length; Y++)
                        if (D === o[Y].id) {
                            var O = o.splice(Y, 1)[0];
                            return this.fp(Di, V, o),
                            O
                        }
            },
            getItemById: function(I) {
                if (I != V)
                    for (var v = this._items, q = 0; q < v.length; q++) {
                        var k = v[q];
                        if (I === k.id)
                            return k
                    }
            },
            setItemVisible: function(h, c) {
                var O = this.getItemById(h);
                O && (O.visible = c)
            },
            getItemInfos: function() {
                return this._30o
            },
            getItemInfoAt: function(G) {
                var v = this
                  , u = 0
                  , x = v._30o
                  , h = v.lp(G)
                  , e = h.x
                  , U = h.y;
                if (U >= 0 && U <= v.getHeight())
                    for (; u < x.size(); u++) {
                        var M = x.get(u);
                        if (M.startX <= e && e <= M.endX)
                            return M
                    }
                return V
            },
            drawItem: function(m, w, S, K, f) {
                if (w.visible === !1)
                    return 0;
                if (Vq(w.visible) && !w.visible())
                    return 0;
                var Q = this
                  , q = w.disabled;
                q && (m.globalAlpha = Uo);
                var J = Q.drawItemImpl(m, w, S, K, f)
                  , C = Q._itemGap;
                return q && (m.globalAlpha = 1),
                this._currentItem !== w || "separator" === w || w.separator === !0 || w.unfocusable || Mo(m, Q._separatorColor, S - C / 2, 0, J + C, K),
                J
            },
            drawItemImpl: function(U, i, y, n, f) {
                var s = this
                  , z = s._view
                  , I = s._itemGap
                  , w = n / 2
                  , Z = i.type
                  , p = i.element
                  , r = i.label;
                xe(p) && (r = p,
                p = V);
                var H, x = s.getLabelFont(i), e = s.getLabelColor(i), d = i.selected, N = bn(i.icon), Q = Cm(N, i), m = 0, u = Q + (r ? bk(x, r).width : 0);
                if ("separator" === i || i.separator === !0)
                    return Cp(U, s._separatorColor, y, n / 4, w),
                    1;
                if (p) {
                    N && Lk(U, N, y + Q / 2, w, i, s),
                    Gg(U, r, x, e, y + Q, 0, 0, n);
                    var L = $k(p);
                    f || s._90I.add(L),
                    L.parentNode !== z && mg(z, L),
                    p.iv && p.iv(),
                    p.validate && p.validate();
                    var Y = L.getBoundingClientRect()
                      , l = Y.width
                      , R = L.style;
                    return Fq(L),
                    R.left = s.tx() + y + u + gn,
                    R.top = (n - Y.height) / 2 + gn,
                    u + l
                }
                return Z === ud ? H = bn(d ? ke : eo) : Z === $m && (H = bn(d ? $m : wb)),
                H ? (m = Cm(H, i),
                Lk(U, H, y + m / 2, w, i, s),
                y += m,
                u += m) : d && he(U, y - I / 2, 0, u + I, n, s.getSelectBackground(i)),
                N && Lk(U, N, y + Q / 2, w, i, s),
                Gg(U, r, x, e, y + Q, 0, 0, n),
                u
            },
            validateImpl: function() {
                var q = this
                  , P = q._canvas
                  , p = q.getWidth()
                  , D = q.getHeight()
                  , g = q._30o
                  , Y = q._items;
                ug(P, p, D);
                var N = Zf(P)
                  , W = q._itemGap
                  , V = W / 2;
                Pk(N, q.tx(), 0, 1),
                N.clearRect(0, 0, p, D);
                var O = q._90I;
                q._90I = new Vr,
                g.clear(),
                Y.forEach(function(d) {
                    var K = q.drawItem(N, d, V, D);
                    g.add({
                        item: d,
                        startX: V,
                        endX: V + K,
                        width: K
                    }),
                    K && (V += K + W)
                }),
                O.each(function(Q) {
                    q._90I.contains(Q) || hp(Q)
                });
                var G = q._64I;
                q._64I = X(0, V),
                N.restore(),
                q._stickToRight ? (q._65O = 0,
                N = Zf(P),
                V = p - q._64I + W,
                Pk(N, 0, 0, 1),
                N.clearRect(0, 0, p, D),
                g.clear(),
                Y.forEach(function(P) {
                    var u = q.drawItem(N, P, V, D, !0);
                    g.add({
                        item: P,
                        startX: V,
                        endX: V + u,
                        width: u
                    }),
                    u && (V += u + W)
                }),
                N.restore()) : q.tx(q.tx()),
                G !== q._64I && q.onSumWidthChanged(G, q._64I)
            },
            onSumWidthChanged: function() {},
            handleClick: function(i, y) {
                var X = this
                  , Z = i.type
                  , d = i.action
                  , U = i.groupId
                  , H = i.selected;
                i.disabled || (U != V ? H || (i.selected = !0,
                this._items.forEach(function(B) {
                    B.groupId === U && i !== B && (B.selected = !1)
                }),
                d && i.action(i, X, y)) : Z === $m || "toggle" === Z ? (i.selected = !H,
                d && i.action(i, X, y)) : d && i.action(i, X, y)),
                Wr(),
                X.iv()
            }
        });
        var Uf = function(A) {
            this.tb = A,
            this.addListeners()
        };
        fh(Uf, m, {
            ms_listener: 1,
            getView: function() {
                return this.tb._view
            },
            handle_mousewheel: function($) {
                this.handleScroll($, 10 * ($.wheelDelta / 40))
            },
            handle_DOMMouseScroll: function(b) {
                this.handleScroll(b, 10 * -b.detail)
            },
            handleScroll: function(y, I) {
                vh(y);
                var n = this.tb;
                n.isScrollable() && !n._stickToRight && (n.tx(n.tx() + I),
                mb())
            },
            handle_mousemove: function(D) {
                var n = this;
                wq || n.setItem(D)
            },
            handle_mouseout: function(F) {
                var p = this;
                F.target === p.getView() ? p.tb.setCurrentItem(V) : p.handle_mousemove(F)
            },
            handle_mousedown: function(u) {
                this.handle_mousemove(u),
                this.handle_touchstart(u)
            },
            handle_touchstart: function(Z) {
                var H = this
                  , I = H.tb
                  , S = Z.target;
                _e(Z) && (S === H.getView() || S === I._canvas) && (vh(Z),
                I.setFocus(Z) && (this.setItem(Z, !0),
                (I.isScrollable() || H.info && !H.info.item.disabled) && (H.x = Qn(Z).x,
                H.tx = I.tx(),
                Dl(H, Z))))
            },
            handleWindowMouseMove: function(q) {
                this.handleWindowTouchMove(q)
            },
            handleWindowTouchMove: function(T) {
                var m = this
                  , l = m.tb;
                if (!l._stickToRight) {
                    var O = Qn(T).x - m.x;
                    !m._25o && t(O) > 2 && l.isScrollable() && (m._25o = 1),
                    m._25o && l.tx(m.tx + O)
                }
            },
            handleWindowMouseUp: function(e) {
                this.handleWindowTouchEnd(e)
            },
            handleWindowTouchEnd: function(N) {
                var n = this
                  , l = n.tb
                  , e = n.info
                  , d = n.tb.getItemInfoAt(N);
                if (!n._25o && e) {
                    var L = e.item;
                    d && d.item === L && l.handleClick(L, N)
                }
                n._25o = n.x = n.tx = V,
                n.setItem()
            },
            setItem: function(B, c) {
                var C = this
                  , P = C.tb
                  , a = C.info = B ? P.getItemInfoAt(B) : V
                  , S = a ? a.item : V;
                P.setCurrentItem(S),
                c && S && Vq(S.onDown) && S.onDown(B)
            }
        }),
        Ce.BorderPane = function() {
            this._view = Gc(1, this),
            this.iv()
        }
        ,
        lm("BorderPane", m, {
            ms_v: 1,
            ms_ac: ["topHeight", "bottomHeight", "leftWidth", "rightWidth"],
            ms_fire: 1,
            getLeftView: function() {
                return this._leftView
            },
            setLeftView: function(q, X) {
                this._12o("leftView", q),
                X != V && this.setLeftWidth(X)
            },
            getRightView: function() {
                return this._rightView
            },
            setRightView: function(R, X) {
                this._12o("rightView", R),
                X != V && this.setRightWidth(X)
            },
            getTopView: function() {
                return this._topView
            },
            setTopView: function(X, h) {
                this._12o("topView", X),
                h != V && this.setTopHeight(h)
            },
            getBottomView: function() {
                return this._bottomView
            },
            setBottomView: function(Y, h) {
                this._12o("bottomView", Y),
                h != V && this.setBottomHeight(h)
            },
            getCenterView: function() {
                return this._centerView
            },
            setCenterView: function(a) {
                this._12o("centerView", a)
            },
            _12o: function(t, c) {
                var s = this
                  , M = "_" + t
                  , Y = s._view
                  , L = s[M];
                L !== c && (L && (L.getView ? hp(L.getView()) : hp(L)),
                s[M] = c,
                c && (c.getView ? mg(Y, c.getView(), 1) : mg(Y, c, 1)),
                s.fp(t, L, c))
            },
            onPropertyChanged: function() {
                this.iv()
            },
            validateImpl: function() {
                var P = this
                  , l = P._topView
                  , s = P._bottomView
                  , B = P._leftView
                  , p = P._rightView
                  , A = P._centerView
                  , Q = P.getWidth()
                  , d = P.getHeight()
                  , I = 0
                  , k = 0
                  , w = Q
                  , f = d
                  , r = 0
                  , e = 0
                  , L = 0
                  , q = 0;
                l && (r = P._topHeight == V ? qo(l) : P._topHeight,
                k = r),
                s && (e = P._bottomHeight == V ? qo(s) : P._bottomHeight,
                f = d - e),
                B && (L = P._leftWidth == V ? Si(B) : P._leftWidth,
                I = L),
                p && (q = P._rightWidth == V ? Si(p) : P._rightWidth,
                w = Q - q);
                var J = X(0, w - I)
                  , G = X(0, f - k);
                l && Pc(l, 0, 0, Q, r),
                s && Pc(s, 0, f, Q, e),
                B && Pc(B, 0, k, L, G),
                p && Pc(p, w, k, q, G),
                A && Pc(A, I, k, J, G)
            }
        })
    }
}("undefined" != typeof global ? global : "undefined" != typeof self ? self : "undefined" != typeof window ? window : (0,
eval)("this"), Object);
