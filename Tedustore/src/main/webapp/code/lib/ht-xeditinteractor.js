!function(P,M,S){"use strict";var k="ht",Z=P[k],m=Z.Default,q=Z.graph,G=m.getInternal(),e=G.ui(),$=e.NodeUI.prototype,g=e.ShapeUI.prototype,V=q.GraphView,f=V.prototype,O=e.EdgeUI.prototype,Q=Z.Node,R=Z.Shape,F=Z.Edge,t=Z.Group,B=m.isTouchable,W=m.preventDefault,i=P.setTimeout,A=m.grow,y=m.isDragging,o=m.getDistance,L=null,X=Z.List,s="undefined"!=typeof Float32Array?Float32Array:Array,C=Math,J=C.PI,H="Crossing",T="No Crossing",p=J/2,r=2*J,v=C.atan2,l=C.sqrt,x=C.pow,n=C.sin,K=C.cos,u=C.min,w=C.max,I=C.abs,z=C.ceil,N=C.round,D=m.unionPoint,U=m.unionRect,a=m.containsPoint,_=m.clone,E="rgb(52, 152, 219)",d="red",j={northwest:0,north:1,northeast:2,west:7,east:3,southwest:6,south:5,southeast:4},c={width:400,height:100,comps:[{type:"shape",points:{func:function(){for(var C=[10,8,162,36,314,37,269,2,398,49,268,98,314,58,161,60,9,91,103,49,10,8],Q=0;Q<C.length;Q++){var p=C[Q];p=0===Q%2?p/400*c.width:p/100*c.height,C[Q]=p}return c.width>120&&(C[4]=c.width-26,C[6]=c.width-40,C[10]=c.width-40,C[12]=c.width-26,C[18]=33),C}},segments:[1,3,2,2,2,2,3,2,2],background:"white",gradient:"linear.east",gradientColor:"red"}]},h={width:300,height:300,comps:[{type:"circle",rect:[20,0,120,120],background:E,rotation:.61},{type:"circle",rect:[200,120,70,70],background:E,rotation:.61},{type:"circle",rect:[200,220,70,70],background:E,rotation:.61},{type:"shape",points:[80,60,80,155,200,155],borderWidth:20,borderColor:E},{type:"shape",points:[80,60,80,255,200,255],borderWidth:20,borderColor:E}]},Y={width:300,height:300,comps:[{type:"shape",points:[114,239,115,106,112,73,149,73,149,73,175,73,177,105,179,261,178,302,147,307,98,308,83,307,72,276,73,260,72,81,74,29,115,21,191,21,221,22,224,53,223,238],segments:[1,2,3,2,3,2,3,2,4,2,3,2,3,2],borderWidth:20,borderColor:d,rotation:.61}]},b={width:300,height:300,comps:[{type:"circle",rect:[210,0,90,90],background:E},{type:"circle",rect:[0,210,90,90],background:E},{type:"shape",points:[255,45,45,255],borderWidth:20,borderColor:E}]},Vr={width:300,height:300,comps:[{type:"shape",points:[20,20,280,280],borderWidth:30,borderColor:d},{type:"shape",points:[280,20,20,280],borderWidth:30,borderColor:d}]},ck={width:300,height:300,comps:[{type:"shape",points:[270,30,30,150,270,270],borderWidth:40,borderColor:E}]},ir={width:300,height:300,comps:[{type:"shape",points:[30,30,270,150,30,270],borderWidth:40,borderColor:d}]},Do={width:300,height:300,comps:[{type:"rect",rect:[125.58,52.76,40,231.96],background:"rgb(0,0,0)",borderWidth:1,borderColor:"#000"},{type:"rect",rect:[27.87,61.06,150,30],background:"rgb(0,0,0)",borderWidth:1,borderColor:"#000",rotation:5.5},{type:"rect",rect:[113.36,61,150,30],background:"rgb(0,0,0)",borderWidth:1,borderColor:"#000",rotation:.79}]},Cp={width:300,height:300,author:"",note:"",comps:[{type:"rect",rect:[135.15,38.76,28.63,82.84],background:"rgb(0,0,0)",borderWidth:1,borderColor:"#000"},{type:"triangle",rect:[94.69,2.35,110,44.77],background:"rgb(0,0,0)",borderWidth:1,borderColor:"#000"},{type:"rect",rect:[31.71,115.72,240,15],background:"rgb(0,0,0)",borderWidth:1,borderColor:"#000"},{type:"rect",rect:[31.71,167.62,240,15],background:"rgb(0,0,0)",borderWidth:1,borderColor:"#000"},{type:"rect",rect:[135.15,177.33,28.63,82.84],background:"rgb(0,0,0)",borderWidth:1,borderColor:"#000"},{type:"triangle",rect:[94.69,251.39,110,44.77],background:"rgb(0,0,0)",borderWidth:1,borderColor:"#000",rotation:3.14}]},Ck=function(D){var _=D.touches[0];return _?_:D.changedTouches[0]},Wf=function(T,J,u,w){return v(w-J,u-T)},ul=function(X,i){return{x:X.x*i,y:X.y*i}},gb=function(S,b){S.each(function(u){return S.isSelected(u)?b(u):void 0})},Qg=function(H,D){H.reverseEach(function(E){return H.isSelected(E)?D(E):void 0})},Tb=function(I,J,E){var S,K,O,z,k,w=this,A=J,o=w.gv;if(I instanceof R){O=I.getSegments();var F=o.getDataUI(I);k=F._55O.$15l,O&&O.size()||(O=xl(k)),I.isClosePath()&&O.indexOf(5)<0&&(O=new X(O._as),O.add(5)),S=xq(I,F,A),K=k[S]}else{var G=o.getDataUI(I);k=Om(G,I.s("edge.points")),O=I.s("edge.segments"),O&&O.size()||(O=xl(k)),k=k._as,S=xq(I,G,A),K=k[S]}if(O&&(z=O.get(A)),2===z||1===z||5===z){var B=k[S+1];5===z&&(B=k[0]);var x=Yj(K,E,B);return x}return E},yo=function(m,q,d,J){var j=q/2,R=d/2,E=ak(m,-j,-R,J),B=ak(m,j,-R,J),s=ak(m,-j,R,J),K=ak(m,j,R,J),o=ak(m,0,-R,J),b=ak(m,j,0,J),f=ak(m,0,R,J),e=ak(m,-j,0,J);return[E,B,s,K,o,b,f,e]},Yj=function(O,r,d){var _={x:r.x-O.x,y:r.y-O.y},n={x:d.x-O.x,y:d.y-O.y},G=l(x(d.x-O.x,2)+x(d.y-O.y,2)),y={x:n.x/G,y:n.y/G},Y=_.x*y.x+_.y*y.y,e={x:y.x*Y,y:y.y*Y};return{x:O.x+e.x,y:O.y+e.y}},ak=function(O,Q,C,r){var h=K(r)*Q-n(r)*C,$=n(r)*Q+K(r)*C;return O?{x:O.x+h,y:O.y+$}:{x:h,y:$}},rh=function(W,v){return v>2*W?W:v/2},Ci=function(d,S,k,f){var V=o(d,S);return k=f?u(k,V):rh(k,V),V?k/=V:k=0,{x:d.x+(S.x-d.x)*k,y:d.y+(S.y-d.y)*k}},Pp=function(F,K){var q,f,a=F.gv,Z=F._data,T=Z._40I,g=Z._41I,P=Z.s("edge.offset"),l=Z.s("edge.source.position"),m=Z.s("edge.target.position"),x=Z.s("edge.source.offset.x"),e=Z.s("edge.source.offset.y"),n=Z.s("edge.target.offset.x"),j=Z.s("edge.target.offset.y"),V=Z.s("edge.source.anchor.x"),t=Z.s("edge.source.anchor.y"),h=Z.s("edge.target.anchor.x"),d=Z.s("edge.target.anchor.y");if(K?(q=G.getEdgeAgentPosition(a,T,l,x,e,V,t),f=G.getEdgeAgentPosition(a,g,m,n,j,h,d)):(q=G.getEdgeAgentPosition(a,T,l,0,0,V,t),f=G.getEdgeAgentPosition(a,g,m,0,0,h,d)),"points"===Z.s("edge.type")&&P&&!Z.s("edge.center")&&q){var v=Z.s("edge.points")||new X,B=v.size(),E=Ci(q,B?v.get(0):f,P,B),i=Ci(f,B?v.get(B-1):q,P,B);q=E,f=i}return[q,f]},Om=function(D,P,E){var J=D._78o,v=D._data,s=v.s("edge.type"),n=[J.sourcePoint,J.targetPoint];return"points"===s?E&&(n=Pp(D)):n=J.center?s?E?Pp(D):Pp(D,!0):E?Pp(D):[J.c1,J.c2]:E?Pp(D):Pp(D,!0),P=new X(P?P._as:L),P.add(n[0],0),P.add(n[1]),P},fh=function(E){return E=new X(E._as),E.removeAt(0),E.removeAt(E.size()-1),E},xl=function(j){j._as||(j=new X(j));var P=new X;P.add(1);for(var d=1;d<j.size();d++)P.add(2);return P},jl=function(F,S){return{x:(F.x+S.x)/2,y:(F.y+S.y)/2}},Ap=function(u,b){return{x:u.x+1*(b.x-u.x)/4,y:u.y+1*(b.y-u.y)/4}},nh=function(f,n){return{x:f.x+3*(n.x-f.x)/4,y:f.y+3*(n.y-f.y)/4}},If=function(I,A,P,R){var E=A.x+A.width/2,s=A.y+A.height/2,y=l(E*E+s*s),_=v(s,E)+P;return{x:R.x+y*K(_),y:R.y+y*n(_)}},qj=f.validateImpl,vs=f.isRectEditable,mf=f.isPointEditable,fg=f._42,rl=g._79o,Zb=O._79o,Ki=g._48O,ij=g._47O,se=$._48O,Ai=$._80o,xo=g._80o,lh=$.getSelectWidth,Jp=$._47O,Rf=O._47O,vi=f.isEditable,Nn=["northwest","north","northeast","east","southeast","south","southwest","west"],sp=function(w,A,N,V,S,m,O,l,K,b){var e=w.x,y=w.y,G=w.width,q=w.height,t={x:e+G/2,y:y+q/2};V=V||0,A=ak(t,A.x-t.x,A.y-t.y,-V),O&&!l&&(A.x+=K,A.y+=b);var v=.01;if("northwest"===N?(A.x+S>e+G-v&&(A.x=e+G-S-v),A.y+S>y+q-v&&(A.y=y+q-S-v),w=D(A,{x:e+G,y:y+q})):"north"===N?(A.y+S>y+q-v&&(A.y=y+q-S-v),w=D({x:e,y:A.y},{x:e+G,y:y+q})):"northeast"===N?(A.x<e+S+v&&(A.x=e+S+v),A.y+S>y+q-v&&(A.y=y+q-S-v),w=D({x:e,y:A.y},{x:A.x,y:y+q})):"west"===N?(A.x+S>e+G-v&&(A.x=e+G-S-v),w=D({x:A.x,y:y},{x:e+G,y:y+q})):"east"===N?(A.x<e+S+v&&(A.x=e+S+v),w=D({x:e,y:y},{x:A.x,y:y+q})):"southwest"===N?(A.x+S>e+G-v&&(A.x=e+G-S-v),A.y<y+S+v&&(A.y=y+S+v),w=D({x:A.x,y:y},{x:e+G,y:A.y})):"south"===N?(A.y<y+S+v&&(A.y=y+S+v),w=D({x:e,y:y},{x:e+G,y:A.y})):"southeast"===N&&(A.x<e+S+v&&(A.x=e+S+v),A.y<y+S+v&&(A.y=y+S+v),w=D({x:e,y:y},A)),"keepRatio"===m&&(!O&&l||O&&!l)&&("northeast"===N||"southeast"===N||"northwest"===N||"southwest"===N)){var o=w.width,s=w.height,H=o/G,n=s/q,h=u(H,n);w.width=G*h,w.height=q*h,"northeast"===N?w.y=y+(q-w.height):"northwest"===N?(w.y=y+(q-w.height),w.x=e+(G-w.width)):"southwest"===N&&(w.x=e+(G-w.width))}w.x-=t.x,w.y-=t.y;var I=If(L,w,V,t);return w.x=I.x-w.width/2,w.y=I.y-w.height/2,w},Ie=function(C,l,T,$){var b=C.getRotation(),F=l,k=F.x,J=F.y,W=F.width,h=F.height,H={x:k+F.width/2,y:J+F.height/2};$=ak(H,$.x-H.x,$.y-H.y,-b),"northwest"===T?F=D($,{x:k+W,y:J+h}):"north"===T?F=D({x:k,y:$.y},{x:k+W,y:J+h}):"northeast"===T?F=D({x:k,y:$.y},{x:$.x,y:J+h}):"west"===T?F=D({x:$.x,y:J},{x:k+W,y:J+h}):"east"===T?F=D({x:k,y:J},{x:$.x,y:J+h}):"southwest"===T?F=D({x:$.x,y:J},{x:k+W,y:$.y}):"south"===T?F=D({x:k,y:J},{x:k+W,y:$.y}):"southeast"===T&&(F=D({x:k,y:J},$)),C.setRect(F),F.x-=H.x,F.y-=H.y;var u=If(C,F,b,H);C.p(u.x,u.y)},ph=function(t,s,v,T,o,X,G,Y){var O=L;X?(O=ak(L,o.x-s.x,o.y-s.y,-v),O.x-=G.x,O.y-=G.y):O=ak(L,o.x-s.x,o.y-s.y,0);var e={x:s.x+O.x,y:s.y+O.y};Y&&(e=Y(e.x,e.y)),e.e=t.getPoints().get(T).e,t.setPoint(T,e);var V=t.getWidth(),D=t.getHeight(),x=t.p().x-V/2,N=t.p().y-D/2;x-=s.x,N-=s.y;var p=If(t,{x:x,y:N,width:V,height:D},v,s);t.p(p.x,p.y)},xq=function(k,l,P){var e,y;if(k instanceof R?(e=k.getPoints(),y=k.getSegments()):k instanceof F&&"points"===k.s("edge.type")&&(e=k.s("edge.points"),y=k.s("edge.segments"),e=Om(l,e)),y&&y.size()||(y=xl(e)),k instanceof R&&k.isClosePath()&&y.indexOf(5)<0&&(y=new X(y._as),y.add(5)),y)for(var z=-1,$=0;$<y.size();$++){if($===P)return z;var N=y.get($);1===N?z+=1:2===N?z+=1:3===N?z+=2:4===N&&(z+=3)}},ik=function(V,T,k){var g,q;if(V instanceof R?(g=V.getPoints(),q=V.getSegments()):V instanceof F&&"points"===V.s("edge.type")&&(g=V.s("edge.points"),q=V.s("edge.segments"),g=Om(T,g)),q&&q.size()||(q=xl(g)),q)for(var C=-1,Z=0;Z<q.size();Z++){var K=q.get(Z);if(1===K?C+=1:2===K?C+=1:3===K?C+=2:4===K&&(C+=3),C===k)return Z}},nn=function(R,U){var s=[R[0]-U[0],R[1]-U[1],R[2]-U[2]];return s},We=function(){var T=new s(16);return T[0]=1,T[1]=0,T[2]=0,T[3]=0,T[4]=0,T[5]=1,T[6]=0,T[7]=0,T[8]=0,T[9]=0,T[10]=1,T[11]=0,T[12]=0,T[13]=0,T[14]=0,T[15]=1,T},Ig=function(e,P){var w=e[0],O=e[1],X=e[2];return e[0]=P[0]*w+P[4]*O+P[8]*X+P[12],e[1]=P[1]*w+P[5]*O+P[9]*X+P[13],e[2]=P[2]*w+P[6]*O+P[10]*X+P[14],e},eo=function(Z,z){if(z){var p=n(z),V=K(z),e=Z[0],$=Z[1],v=Z[2],G=Z[3],I=Z[8],Y=Z[9],A=Z[10],Q=Z[11];Z[0]=e*V-I*p,Z[1]=$*V-Y*p,Z[2]=v*V-A*p,Z[3]=G*V-Q*p,Z[8]=e*p+I*V,Z[9]=$*p+Y*V,Z[10]=v*p+A*V,Z[11]=G*p+Q*V}},jb=function(p,C){for(var X=p.s("grid.row.count"),I=p.s("grid.column.count"),j=0;X>j;j++)for(var f=0;I>f;f++){var Y=p.getCellRect(j,f);if(a(Y,C))return{rowIndex:j,columnIndex:f,rect:Y,grid:p}}return null},ei=function(D,e,p,n,F,E){var Y={},T=p-D,w=n-e,U=C.sqrt(T*T+w*w),v=T/U,k=w/U,R=(-D+F)*v+(-e+E)*k;return 0>=R?(Y.x=D,Y.y=e):R>=U?(Y.x=p,Y.y=n):(Y.x=D+R*v,Y.y=e+R*k),T=F-Y.x,w=E-Y.y,Y.z=C.sqrt(T*T+w*w),Y},wr=function(d,m){var U,N,H,A,E,p,w,O,s=d.getPoints(),z=d.getSegments(),K=d.p(),$=d.getRotation();if(!z||!(z.indexOf(3)>0||z.indexOf(4)>0)){for(O=0;O<=s.size()-1;O++)if(O===s.size()-1?(E=s.get(0),A=s.get(O)):(A=s.get(O),E=s.get(O+1)),A=ak(K,A.x-K.x,A.y-K.y,$),E=ak(K,E.x-K.x,E.y-K.y,$),p=ei(A.x,A.y,E.x,E.y,m.x,m.y),w=p.z,w<(d.s("shape.border.width")||10)){N=A,H=E,U=O;break}if(U!=L){var j=ei(N.x,N.y,H.x,H.y,m.x,m.y),g=o(N,j);return{attachIndex:U,attachOffset:g}}}},Ek=function(D){for(var $=D._data,J=$.p(),K=$.getRotation(),I=$.getPoints(),d=L,T=[],p=0;p<I.size();p++)d=I.get(p),T.push(ak(J,d.x-J.x,d.y-J.y,K));D._55O.$15l=T};m.setImage("xeditinteractor_parentIcon",h),m.setImage("xeditinteractor_hostIcon",Y),m.setImage("xeditinteractor_edgeIcon",b),m.setImage("xeditinteractor_removeIcon",Vr),m.setImage("xeditinteractor_sourceIcon",ck),m.setImage("xeditinteractor_targetIcon",ir),m.setImage("xeditinteractor_elevationIcon",Do),m.setImage("xeditinteractor_tallIcon",Cp),f._editPointSize=B?24:9,f._edgeHelpers=["parent","remove","source","target"],f._leftTopHelpers=["parent"],f._rightTopHelpers=["host"],f._leftBottomHelpers=["edge"],f._rightBottomHelpers=["remove"],Nn=Nn.concat(Nn).concat(Nn),O._79o=function(){var e=this,z=e.gv,J=z.getZoom(),O=z._editInteractor,X=Zb.call(e);if(!X)return null;var S=Pp(e,!0),f=S[0],y=S[1],n={x:X.x,y:X.y,width:X.width,height:X.height},Z=D(f,y);if(O instanceof q.XEditInteractor){n=U(n,Z);var F=e._55O,$=z.getEditPointSize()/J+2,C=0;F&&F._43O&&(C+=$/2,A(n,C))}return n},O._47O=function(H){var T=this,E=T.gv,y=E._editInteractor;y instanceof q.XEditInteractor||Rf.call(T,H)},O.rectIntersects=function(t){var c=this,e=c._data,$=c.gv,O=$.getZoom(),N=c._55O,d=$._editInteractor;if(d instanceof q.XEditInteractor&&$.isEditable(e)&&N&&N._43O&&"points"===e.s("edge.type")){var J=e.s("edge.points"),z=e.s("edge.segments");J=Om(c,J),z&&z.size()||(z=xl(J)),J=J._as;var S=!1,D=B?5:1,u=t.x+D,A=t.y+D,k={x:u,y:A};if(d._edge===e&&d._hoverSegmentIndex>=0){var I=$._editInteractor._hoverSegmentIndex,i=z.get(I),n=xq(e,c,I),T=L;if(n!=L&&n>=0){var U=J[n],Q=$.getSegmentHoverWidth()/O;if(2===i||1===i){var l=J[n+1];T=Rl(new an(U.x,U.y),new an(l.x,l.y),new an(k.x-Q,k.y-Q),new an(k.x+2*Q,k.y+2*Q)),T.$62l===H&&(S=!0)}else if(3===i){var W=J[n+1],l=J[n+2];T=Dd(new an(U.x,U.y),new an(W.x,W.y),new an(l.x,l.y),new an(k.x-Q,k.y-Q),new an(k.x+2*Q,k.y+2*Q)),T.$62l===H&&(S=!0)}else if(4===i){var G=J[n+1],s=J[n+2];l=J[n+3],T=vc(new an(U.x,U.y),new an(G.x,G.y),new an(s.x,s.y),new an(l.x,l.y),new an(k.x-Q,k.y-Q),new an(k.x+2*Q,k.y+2*Q)),T.$62l===H&&(S=!0)}}}if(S)return!0}return L},g._47O=function(w){var F=this,D=F.gv,I=D._editInteractor;I instanceof q.XEditInteractor||ij.call(F,w)},g.rectIntersects=function(X){var D=this,T=D._data,Q=D.gv,l=Q.getZoom(),P=D._55O,R=Q._editInteractor;if(R instanceof q.XEditInteractor&&Q.isEditable(T)&&P&&P._43O){var M=P.$15l,G=!1,U=B?5:1,j=X.x+U,g=X.y+U,b={x:j,y:g};if(M&&M.length===T.getPoints().size()||(Ek(D),M=P.$15l),R._shape===T&&R._hoverSegmentIndex>=0){var v=T.getSegments();v&&v.size()||(v=xl(M));var t=Q._editInteractor._hoverSegmentIndex,d=v.get(t),n=xq(T,D,t),C=L;if(n!=L&&n>=0){var s=M[n],Y=Q.getSegmentHoverWidth()/l;if(2===d||1===d){var Z=M[n+1];C=Rl(new an(s.x,s.y),new an(Z.x,Z.y),new an(b.x-Y,b.y-Y),new an(b.x+2*Y,b.y+2*Y)),C.$62l===H&&(G=!0)}else if(3===d){var I=M[n+1],Z=M[n+2];C=Dd(new an(s.x,s.y),new an(I.x,I.y),new an(Z.x,Z.y),new an(b.x-Y,b.y-Y),new an(b.x+2*Y,b.y+2*Y)),C.$62l===H&&(G=!0)}else if(4===d){var u=M[n+1],k=M[n+2];Z=M[n+3],C=vc(new an(s.x,s.y),new an(u.x,u.y),new an(k.x,k.y),new an(Z.x,Z.y),new an(b.x-Y,b.y-Y),new an(b.x+2*Y,b.y+2*Y)),C.$62l===H&&(G=!0)}}}if(G)return!0}return L},g._48O=function(){var W=this,H=W.gv,h=H._editInteractor;h instanceof q.XEditInteractor?($._48O.call(W),W._55O._43O&&Ek(W)):Ki.call(W)},g._79o=function(){var x=this,T=x.gv,F=T.getZoom(),n=T._editInteractor,u=rl.call(x);if(u){var r={x:u.x,y:u.y,width:u.width,height:u.height};if(n instanceof q.XEditInteractor){var Z=x._55O,L=T.getEditPointSize()/F+2,Y=0;Z&&Z._43O&&(Y+=L/2,A(r,Y))}return r}},$._47O=function(X){var T=this,A=T.gv,p=A._editInteractor;if(p instanceof q.XEditInteractor);else{var y=T._55O;y&&y._98o&&Jp.call(T,X)}},$.getSelectWidth=function(){var l=this,Z=l.gv,T=Z._editInteractor,z=l._data;return Z.isEditable(z)&&T instanceof q.XEditInteractor?0:lh.call(l)},$._80o=function(G){var f=this,i=f.gv._editInteractor;if(Ai.call(f,G),i&&i._debug){G.save(),G.beginPath(),G.lineWidth=1,G.strokeStyle="green";var c=f._79o();c&&(G.rect(c.x,c.y,c.width,c.height),G.stroke()),G.restore()}},g._80o=function(k){var L=this,Q=L.gv._editInteractor;if(xo.call(L,k),Q&&Q._debug){k.save(),k.beginPath(),k.lineWidth=1,k.strokeStyle="green";var c=L._79o();k.rect(c.x,c.y,c.width,c.height),k.stroke(),k.restore()}},$._48O=function(){var z=this,J=z.gv,g=z._data,S=J._editInteractor,L=z._55O,O=g.p(),u=g.getRotation();if(S instanceof q.XEditInteractor){if(L._42O){var x=yo(O,g.getWidth(),g.getHeight(),u),h=x[0],Q=x[1],i=x[2],n=x[3],I=x[4],P=x[5],X=x[6],T=x[7];L.$45l=[h,I,Q,P,n,X,i,T]}}else se.call(z)},f.getResizeMode=function(){return this.$25l||"normal"},f.setResizeMode=function(z){var M=this.$25l;this.$25l=z,this.fp("resizeMode",M,z)},f.getSnapAngle=function(){return this.$26l||Math.PI/36},f.setSnapAngle=function(v){var F=this.$26l;this.$26l=v,this.fp("snapAngle",F,v)},f.getSnapSpacing=function(){return this.$27l},f.setSnapSpacing=function(b){var f=this.$27l;this.$27l=b,this.fp("snapSpacing",f,b)},f.getPointSnapSpacing=function(){return this._pointSnapSpacing},f.setPointSnapSpacing=function(F){var W=this._pointSnapSpacing;this._pointSnapSpacing=F,this.fp("pointSnapSpacing",W,F)},f.setHelperEditableFunc=function(p){var A=this._helperEditableFunc;this._helperEditableFunc=p,this.fp("helperEditableFunc",A,p)},f.getHelperEditableFunc=function(){return this._helperEditableFunc},f.setLeftTopHelpers=function(E){var Z=this._leftTopHelpers;this._leftTopHelpers=E,this.fp("leftTopHelpers",Z,E)},f.getLeftTopHelpers=function(){return this._leftTopHelpers},f.setLeftTopHelpersAlign=function(v){var T=this._leftTopHelpersAlign;this._leftTopHelpersAlign=v,this.fp("leftTopHelpersAlign",T,v)},f.getLeftTopHelpersAlign=function(){return this._leftTopHelpersAlign},f.setRightTopHelpers=function(c){var d=this._rightTopHelpers;this._rightTopHelpers=c,this.fp("rightTopHelpers",d,c)},f.getRightTopHelpers=function(){return this._rightTopHelpers},f.setRightTopHelpersAlign=function(E){var R=this._rightTopHelpersAlign;this._rightTopHelpersAlign=E,this.fp("rightTopHelpersAlign",R,E)},f.getRightTopHelpersAlign=function(){return this._rightTopHelpersAlign},f.setLeftBottomHelpers=function(l){var q=this._leftBottomHelpers;this._leftBottomHelpers=l,this.fp("leftBottomHelpers",q,l)},f.getLeftBottomHelpers=function(){return this._leftBottomHelpers},f.setLeftBottomHelpersAlign=function(E){var j=this._leftBottomHelpersAlign;this._leftBottomHelpersAlign=E,this.fp("leftBottomHelpersAlign",j,E)},f.getLeftBottomHelpersAlign=function(){return this._leftBottomHelpersAlign},f.setRightBottomHelpers=function(t){var G=this._rightBottomHelpers;this._rightBottomHelpers=t,this.fp("rightBottomHelpers",G,t)},f.getRightBottomHelpers=function(){return this._rightBottomHelpers},f.setRightBottomHelpersAlign=function(N){var r=this._rightBottomHelpersAlign;this._rightBottomHelpersAlign=N,this.fp("rightBottomHelpersAlign",r,N)},f.getRightBottomHelpersAlign=function(){return this._rightBottomHelpersAlign},f.setEdgeHelpers=function(N){var w=this._edgeHelpers;this._edgeHelpers=N,this.fp("edgeHelpers",w,N)},f.getEdgeHelpers=function(){return this._edgeHelpers},f.isHelperEditable=function(j,R){return j instanceof F&&("host"===R||"edge"===R||"elevation"===R||"tall"===R)?!1:j instanceof Q&&("source"===R||"target"===R)?!1:"pointElevation"===R?this._helperEditableFunc?this._helperEditableFunc(j,R):!1:this._helperEditableFunc?this._helperEditableFunc(j,R):!0},f.getEditHelperSize=function(){return this._editHelperSize||(B?28:16)},f.setEditHelperSize=function(V){var b=this._editHelperSize;this._editHelperSize=V,this.fp("editHelperSize",b,V)},f.getEditRectBorderColor=function(){return this.$28l||"rgb(0, 168, 255)"},f.setEditRectBorderColor=function(s){var Y=this.$28l;this.$28l=s,this.fp("editRectBorderColor",Y,s)},f.getNodeBorderColor=function(){return this.$29l||"#1ABC9C"},f.setNodeBorderColor=function(M){var x=this.$29l;this.$29l=M,this.fp("nodeBorderColor",x,M)},f.getEditRectBorderStyle=function(){return this.$30l||"dashed"},f.setEditRectBorderStyle=function(D){var e=this.$30l;this.$30l=D,this.fp("editRectBorderStyle",e,D)},f.getControlPointBackground=function(){return this.$31l||"#ff0"},f.setControlPointBackground=function(z){var S=this.$31l;this.$31l=z,this.fp("controlPointBackground",S,z)},f.getControlPointBorderColor=function(){return this.$32l||this._editPointBorderColor},f.setControlPointBorderColor=function(Y){var R=this.$32l;this.$32l=Y,this.fp("controlPointBorderColor",R,Y)},f.getJoinPointBackground=function(){return this.$33l||this._editPointBackground},f.setJoinPointBackground=function(o){var v=this.$33l;this.$33l=o,this.fp("joinPointBackground",v,o)},f.getJoinPointBorderColor=function(){return this.$34l||this._editPointBorderColor},f.setJoinPointBorderColor=function(X){var $=this.$34l;this.$34l=X,this.fp("joinPointBorderColor",$,X)},f.getDirectionLineColor=function(){return this.$35l||"#888"},f.setDirectionLineColor=function(z){var D=this.$35l;this.$35l=z,this.fp("directionLineColor",D,z)},f.getSegmentHoverColor=function(){return this.$36l||"rgba(255, 0, 0, 0.3)"},f.setSegmentHoverColor=function(w){var Q=this.$36l;this.$36l=w,this.fp("segmentHoverColor",Q,w)},f.getSegmentHoverWidth=function(){return this.$22l||(B?16:8)},f.setSegmentHoverWidth=function(B){var A=this.$22l;this.$22l=B,this.fp("segmentHoverWidth",A,B)},f.getSnapPointBorderColor=function(){return this.$38l||"#f00"},f.setSnapPointBorderColor=function(N){var E=this.$38l;this.$38l=N,this.fp("snapPointBorderColor",E,N)},f.getEditRectPadding=function(){return this.$39l!=L?this.$39l:6},f.setEditRectPadding=function(L){var g=this.$39l;this.$39l=L,this.fp("editRectPading",g,L)},f.isRectEditable=function(Q){var e=this,v=e._editInteractor;return v instanceof q.XEditInteractor?e._rectEditableFunc?e._rectEditableFunc(Q):!0:vs.call(e,Q)},f.isPointEditable=function(M){var o=this,X=o._editInteractor;return X instanceof q.XEditInteractor?o._pointEditableFunc?o._pointEditableFunc(M):!0:mf.call(o,M)},f.validateImpl=function(){var T=this,A=T.$14l,U=T._editInteractor;if(A){var C=T.getWidth(),H=T.getHeight();(C!==A.clientWidth||H!==A.clientHeight)&&(U&&(U._68I=1),G.setCanvas(A,C,H),T._32I=1)}qj.call(this)},f.isEditable=function(X){var n=vi.call(this,X),D=this._editInteractor;if(D instanceof q.XEditInteractor&&X instanceof F){if(!X.s("2d.editable"))return!1;var T=this.getEditableFunc();n=T?T(X):!0}return n},f._42=function(z,h){var V=this,T=V._editInteractor;fg.call(V,z,h),T instanceof q.XEditInteractor&&T._68I&&T._42()},f.isSnapPoint=function(){return!0};var cf=function(J){arguments.length>0&&this.$58l(J)},Vo=cf.prototype;Vo.$58l=function(z){this.$62l=z,this.points=new Array},Vo.$56l=function(T){this.points.push(T)},Vo.$57l=function(D){this.points=this.points.concat(D)};var an=function(y,W){arguments.length>0&&this.$58l(y,W)},hc=an.prototype;hc.$58l=function(H,U){this.x=H,this.y=U},hc.add=function(b){return new an(this.x+b.x,this.y+b.y)},hc.addEquals=function(p){return this.x+=p.x,this.y+=p.y,this},hc.$55l=function(n){return new an(this.x*n,this.y*n)},hc.eq=function(e){return this.x==e.x&&this.y==e.y},hc.lt=function(H){return this.x<H.x&&this.y<H.y},hc.lte=function(E){return this.x<=E.x&&this.y<=E.y},hc.gt=function(x){return this.x>x.x&&this.y>x.y},hc.gte=function(q){return this.x>=q.x&&this.y>=q.y},hc.lerp=function(H,Y){return new an(this.x+(H.x-this.x)*Y,this.y+(H.y-this.y)*Y)},hc.distanceFrom=function(v){var b=this.x-v.x,n=this.y-v.y;return l(b*b+n*n)},hc.min=function(i){return new an(u(this.x,i.x),u(this.y,i.y))},hc.max=function(o){return new an(w(this.x,o.x),w(this.y,o.y))},hc.toString=function(){return this.x+","+this.y};var vg=function(){this.$58l(arguments)},bo=vg.prototype;vg.TO=1e-6,vg.AC=6,bo.$58l=function($){this.co=new Array;for(var l=$.length-1;l>=0;l--)this.co.push($[l])},bo.$55l=function(i){for(var $=new vg,O=0;O<=this.$50l()+i.$50l();O++)$.co.push(0);for(var O=0;O<=this.$50l();O++)for(var q=0;q<=i.$50l();q++)$.co[O+q]+=this.co[O]*i.co[q];return $},bo.$59l=function(){for(var R=this.$50l();R>=0&&I(this.co[R])<=vg.TO;R--)this.co.pop()},bo.$50l=function(){return this.co.length-1},bo.$51l=function(){var n;switch(this.$59l(),this.$50l()){case 0:n=new Array;break;case 1:n=this.$52l();break;case 2:n=this.$53l();break;case 3:n=this.$54l();break;case 4:n=this.$63l();break;default:n=new Array}return n},bo.$52l=function(){var P=new Array,j=this.co[1];return 0!=j&&P.push(-this.co[0]/j),P},bo.$53l=function(){var s=new Array;if(2==this.$50l()){var r=this.co[2],E=this.co[1]/r,K=this.co[0]/r,N=E*E-4*K;if(N>0){var d=l(N);s.push(.5*(-E+d)),s.push(.5*(-E-d))}else 0==N&&s.push(.5*-E)}return s},bo.$63l=function(){var X=new Array;if(4==this.$50l()){var t=this.co[4],k=this.co[3]/t,H=this.co[2]/t,m=this.co[1]/t,C=this.co[0]/t,B=new vg(1,-H,k*m-4*C,-k*k*C+4*H*C-m*m).$54l(),d=B[0],h=k*k/4-H+d;if(I(h)<=vg.TO&&(h=0),h>0){var Z=l(h),s=3*k*k/4-Z*Z-2*H,v=(4*k*H-8*m-k*k*k)/(4*Z),P=s+v,$=s-v;if(I(P)<=vg.TO&&(P=0),I($)<=vg.TO&&($=0),P>=0){var c=l(P);X.push(-k/4+(Z+c)/2),X.push(-k/4+(Z-c)/2)}if($>=0){var c=l($);X.push(-k/4+(c-Z)/2),X.push(-k/4-(c+Z)/2)}}else if(0>h);else{var v=d*d-4*C;if(v>=-vg.TO){if(0>v&&(v=0),v=2*l(v),s=3*k*k/4-2*H,s+v>=vg.TO){var D=l(s+v);X.push(-k/4+D/2),X.push(-k/4-D/2)}if(s-v>=vg.TO){var D=l(s-v);X.push(-k/4+D/2),X.push(-k/4-D/2)}}}}return X},bo.$54l=function(){var z=new Array;if(3==this.$50l()){var f=this.co[3],S=this.co[2]/f,V=this.co[1]/f,h=this.co[0]/f,t=(3*V-S*S)/3,p=(2*S*S*S-9*V*S+27*h)/27,X=S/3,j=p*p/4+t*t*t/27,b=p/2;if(I(j)<=vg.TO&&(j=0),j>0){var P,A,$=l(j);P=-b+$,A=P>=0?x(P,1/3):-x(-P,1/3),P=-b-$,P>=0?A+=x(P,1/3):A-=x(-P,1/3),z.push(A-X)}else if(0>j){var y=l(-t/3),e=v(l(-j),-b)/3,E=K(e),k=n(e),m=l(3);z.push(2*y*E-X),z.push(-y*(E+m*k)-X),z.push(-y*(E-m*k)-X)}else{var P;P=b>=0?-x(b,1/3):x(-b,1/3),z.push(2*P-X),z.push(-P-X)}}return z};var ib=function($,p){arguments.length>0&&this.$58l($,p)},lj=ib.prototype;lj.$58l=function(F,P){this.x=F,this.y=P},lj.length=function(){return l(this.x*this.x+this.y*this.y)},lj.$60l=function(V){return this.x*V.x+this.y*V.y};var xp=function(d,P,f,V){var O,X=(V.x-f.x)*(d.y-f.y)-(V.y-f.y)*(d.x-f.x),q=(P.x-d.x)*(d.y-f.y)-(P.y-d.y)*(d.x-f.x),C=(V.y-f.y)*(P.x-d.x)-(V.x-f.x)*(P.y-d.y);if(0!=C){var S=X/C,b=q/C;S>=0&&1>=S&&b>=0&&1>=b?(O=new cf(H),O.points.push(new an(d.x+S*(P.x-d.x),d.y+S*(P.y-d.y)))):O=new cf(T)}else O=0==X||0==q?new cf("C"):new cf("P");return O},fd=function(E,w,G,V,K){var B,S,x,O,i,r,o,h=V.min(K),t=V.max(K),M=new cf(T);B=w.$55l(-2),x=E.add(B.add(G)),B=E.$55l(-2),S=w.$55l(2),O=B.add(S),i=new an(E.x,E.y),o=new ib(V.y-K.y,K.x-V.x),r=V.x*K.y-K.x*V.y;for(var A=new vg(o.$60l(x),o.$60l(O),o.$60l(i)+r).$51l(),y=0;y<A.length;y++){var $=A[y];if($>=0&&1>=$){var e=E.lerp(w,$),l=w.lerp(G,$),k=e.lerp(l,$);V.x==K.x?h.y<=k.y&&k.y<=t.y&&(M.$62l=H,M.$56l(k)):V.y==K.y?h.x<=k.x&&k.x<=t.x&&(M.$62l=H,M.$56l(k)):k.gte(h)&&k.lte(t)&&(M.$62l=H,M.$56l(k))}}return M},Dd=function(h,y,t,Z,r){var u=Z.min(r),d=Z.max(r),w=new an(d.x,u.y),L=new an(u.x,d.y),K=fd(h,y,t,u,w),A=fd(h,y,t,w,d),s=fd(h,y,t,d,L),_=fd(h,y,t,L,u),I=new cf(T);return I.$57l(K.points),I.$57l(A.points),I.$57l(s.points),I.$57l(_.points),I.points.length>0&&(I.$62l=H),I},xd=function(t,m,P,c,o,W){var I,d,Y,F,k,w,C,b,O,_,i=o.min(W),q=o.max(W),s=new cf(T);I=t.$55l(-1),d=m.$55l(3),Y=P.$55l(-3),F=I.add(d.add(Y.add(c))),k=new ib(F.x,F.y),I=t.$55l(3),d=m.$55l(-6),Y=P.$55l(3),F=I.add(d.add(Y)),w=new ib(F.x,F.y),I=t.$55l(-3),d=m.$55l(3),Y=I.add(d),C=new ib(Y.x,Y.y),b=new ib(t.x,t.y),_=new ib(o.y-W.y,W.x-o.x),O=o.x*W.y-W.x*o.y;for(var R=new vg(_.$60l(k),_.$60l(w),_.$60l(C),_.$60l(b)+O).$51l(),X=0;X<R.length;X++){var A=R[X];if(A>=0&&1>=A){var l=t.lerp(m,A),e=m.lerp(P,A),v=P.lerp(c,A),M=l.lerp(e,A),x=e.lerp(v,A),f=M.lerp(x,A);o.x==W.x?i.y<=f.y&&f.y<=q.y&&(s.$62l=H,s.$56l(f)):o.y==W.y?i.x<=f.x&&f.x<=q.x&&(s.$62l=H,s.$56l(f)):f.gte(i)&&f.lte(q)&&(s.$62l=H,s.$56l(f))}}return s},vc=function(X,d,i,u,Q,O){var D=Q.min(O),V=Q.max(O),K=new an(V.x,D.y),E=new an(D.x,V.y),I=xd(X,d,i,u,D,K),G=xd(X,d,i,u,K,V),p=xd(X,d,i,u,V,E),_=xd(X,d,i,u,E,D),h=new cf(T);return h.$57l(I.points),h.$57l(G.points),h.$57l(p.points),h.$57l(_.points),h.points.length>0&&(h.$62l=H),h},Rl=function(g,S,L,h){var M=L.min(h),b=L.max(h),e=new an(b.x,M.y),o=new an(M.x,b.y),$=xp(M,e,g,S),O=xp(e,b,g,S),G=xp(b,o,g,S),x=xp(o,M,g,S),D=new cf(T);return D.$57l($.points),D.$57l(O.points),D.$57l(G.points),D.$57l(x.points),D.points.length>0&&(D.$62l=H),D},Mg=q.XEditInteractor=function(W){var v=this,f=v._view=document.createElement("canvas");f.className="editCanvas",f.style.position="absolute",Mg.superClass.constructor.call(v,W)};m.def(Mg,q.Interactor,{ms_edit:1,setUp:function(){var j=this,y=j.gv,N=y.getView(),o=j._view;Mg.superClass.setUp.call(j),y.setEditInteractor(j),y.$14l=o,y._79O?N.insertBefore(o,y._79O):N.appendChild(o);var q=j.$49l=j.$11l.bind(j);y.dm().md(q),y.sm().ms(q),y.mp(q)},tearDown:function(){var H=this,y=H.gv,c=y.getView(),l=H.$49l;Mg.superClass.tearDown.call(H),y.setEditInteractor(L),y.$14l=L,c.removeChild(H._view),y.dm().umd(l),y.sm().ums(l),y.ump(l)},clear:function(){var o=this,k=o.gv;delete o._hoverSegmentIndex,delete o._edge,delete o._shape,delete k._editing,delete o.$10l,delete o.$13l,delete o.$9l,delete o._removePointIndex,delete o._lp,o.$12l="",delete o.$40l,delete o.$67l,delete o.$72l,delete o.$73l,delete o.$75l,delete o.$1l,delete o.$3l,delete o.$2l,delete o.$92l,delete o.$93l,delete o.$94l,o.clearDragging()},handle_keydown:function(J){this.$48l!==J.shiftKey&&(this.$48l=J.shiftKey,this.handle_mousemove(J,S,!0))},handle_keyup:function(d){this.$48l!==d.shiftKey&&(this.$48l=d.shiftKey,this.handle_mousemove(d,S,!0))},handle_touchstart:function(b){this.handle_mousemove(b),this.handle_mousedown(b)},handle_mousedown:function(r){W(r);var V=this,f=V.$13l,s=V.gv,d=s.dm(),U=s.sm(),b=s.getZoom(),S=s.lp(r),l=m.isDoubleClick(r),F=m.isLeftButton(r),g=V.$7l,$=V._shape,A=V._hoverSegmentIndex,N=V._edge,B=V.$87l,e=V.$88l,D=function(){V._68I||B===V.$87l&&e===V.$88l||V.$43l()};if(7!==V.$67l&&(delete V.$87l,delete V.$88l),F&&($||N)&&A>=0&&l&&($&&U.contains($)||N&&U.contains(N))){var R=Tb.call(V,$||N,A,S);return V.addShapePoint($||N,A,R),i(function(){V.handle_mousemove(r)},40),void 0}if(F&&($||N)&&V._removePointIndex>=0&&l)return V.removeShapePoint(),V.$5l=1,i(function(){V.handle_mousemove(r)},40),void 0;if(!F||!s._editing)return D(),void 0;if($&&f>=0){var x=$.getPoints().get(f),I=$.p(),c=ak(I,x.x-I.x,x.y-I.y,-g+$.getRotation());u=ak(I,S.x-I.x,S.y-I.y,-g),V.$24l={x:u.x-c.x,y:u.y-c.y},V.startDragging(r),d.beginTransaction(),V.fi({kind:"beginEditPoint",event:r,data:$,index:f}),V.$88l=f,V.$87l=$}else if(V.$10l){var T=s.sm().getSelection(),z=V.$6l,G=V.$1l={},n=V.$3l={},y=V.$16l[j[V.$10l]],h={x:z.x,y:z.y},q={x:z.x+z.width/2,y:z.y+z.height/2};V.$24l={x:S.x-y.x/b,y:S.y-y.y/b},V.$2l=_(V.$8l),V.$4l=_(z),T.each(function(F){if(F instanceof Q){var d=F.p(),N=F.getWidth(),B=F.getHeight(),f=ak(q,d.x-q.x,d.y-q.y,-g);G[F.getId()]={x:d.x-N/2,y:d.y-B/2,width:N,height:B},n[F.getId()]={x:(f.x-h.x)/z.width,y:(f.y-h.y)/z.height}}}),V.startDragging(r),d.beginTransaction(),V.fi({kind:"beginEditRect",event:r,direction:V.$10l})}else if(N&&f>=0){var v=Om(s.getDataUI(N),N.s("edge.points")),x=v.get(f);V.$24l={x:S.x-x.x,y:S.y-x.y},V.startDragging(r),d.beginTransaction(),V.fi({kind:"beginEditPoint",event:r,data:N,index:f}),V.$88l=f,V.$87l=N}else if(V.$40l){var z=V.$6l,q={x:z.x+z.width/2,y:z.y+z.height/2},J=_(V.$23l);J.x/=b,J.y/=b;var P=ak(q,J.x-q.x,J.y-q.y,-g),u=ak(q,S.x-q.x,S.y-q.y,-g);V.$24l={x:u.x-P.x,y:u.y-P.y},V.startDragging(r),d.beginTransaction(),V.fi({kind:"beginEditRotation",event:r,data:V._rotationNode})}else if([1,2,3,5,6,7,8,9].indexOf(V.$67l)>=0){var w=V.$67l;(7===w||8===w||9===w)&&d.beginTransaction(),V.startDragging(r)}else if(V.$71l&&l&&V.$79l(V.$71l,S)){var O=U.toSelection();d.beginTransaction(),O.each(function(o){d.remove(o)}),d.endTransaction()}D()},$11l:function(){var I=this,f=I.gv;f._editing&&(I.$13l==L||I._shape==L&&I._edge==L)&&(I.$73l==L||1!==I.$67l&&5!==I.$67l&&6!==I.$67l)||(I.$5l=1),I._68I=1},$46l:function(x){var e=this,T=e.gv,X=T.lp(x),l=[];return Qg(T,function(v){var I=T.getDataUI(v);if(I){var s=I._79o();a(s,X)&&l.push(v)}}),l},$47l:function(O){var B=this,Q=B.$13l,g=B.gv.dm();B.$10l?(B.fi({kind:"endEditRect",event:O,direction:B.$10l}),g.endTransaction()):B._shape&&Q>=0?(B.fi({kind:"endEditPoint",event:O,data:B._shape,index:Q}),g.endTransaction()):B._edge&&Q>=0?(B.fi({kind:"endEditPoint",event:O,data:B._edge,index:Q}),g.endTransaction()):B.$23l&&B.$40l&&(B.fi({kind:"endEditRotation",event:O}),g.endTransaction())},handleWindowTouchEnd:function($){this.handleWindowMouseUp($)},handleWindowMouseUp:function(Y){var u=this,b=u.gv,h=b.dm(),M=u._shape,r=u._edge,p=u.$13l,c=u.$40l,C=u.$9l,y=u.$10l,w=u.$67l;if((M||r)&&p>=0&&C>=0){var O,R;if(M){var G=M.p(),K=M.getRotation();O=M.getPoints(),R=O.get(C),ph(M,G,K,p,R,!1)}else if(O=Om(b.getDataUI(r),r.s("edge.points"),!0),R=O.get(C),0===p){var X=O.get(0);r.s("edge.source.offset.x",R.x-X.x),r.s("edge.source.offset.y",R.y-X.y)}else if(p===O.size()-1){var m=O.get(O.size()-1);r.s("edge.target.offset.x",R.x-m.x),r.s("edge.target.offset.y",R.y-m.y)}else"points"===r.s("edge.type")&&(O.set(p,R),r.s("edge.points",fh(O)))}u.$47l(Y);var J=u.$73l;1===w?(h.beginTransaction(),J?b.sm().each(function(S){if(S.setHost&&b.isHelperEditable(S,"host")){S.setHost(J);
var H=u.$75l,s=u.$74l;H&&(S.s("attach.row.index",H.rowIndex),S.s("attach.column.index",H.columnIndex)),s&&(S.s("attach.index",s.attachIndex),S.s("attach.offset",s.attachOffset),S.s("attach.offset.relative",!1),S.s("attach.offset.opposite",!1))}}):b.sm().each(function(H){H.setHost&&b.isHelperEditable(H,"host")&&(H.setHost(L),H.s("attach.row.index",S),H.s("attach.column.index",S),H.s("attach.index",S),H.s("attach.offset",S),H.s("attach.offset.relative",!1),H.s("attach.offset.opposite",!1))}),h.endTransaction()):2===w?(h.beginTransaction(),J?b.sm().each(function(P){P.setParent&&b.isHelperEditable(P,"parent")&&P.setParent(J)}):b.sm().each(function(N){N.setParent&&b.isHelperEditable(N,"parent")&&N.setParent(L)}),h.endTransaction()):3===w?J&&(h.beginTransaction(),b.sm().each(function(C){if(b.isHelperEditable(C,"edge")&&C instanceof Q&&J instanceof Q){var c=new Z.Edge;h.add(c),c.setSource(C),c.setTarget(J),u.onEdgeCreated&&u.onEdgeCreated(Y,c)}}),h.endTransaction()):5===w||6===w?J&&(h.beginTransaction(),b.sm().each(function($){$ instanceof F&&J instanceof Q&&(5===w&&b.isHelperEditable($,"source")?$.setSource(J):6===w&&b.isHelperEditable($,"source")&&$.setTarget(J))}),h.endTransaction()):(7===w||8===w||9===w)&&h.endTransaction(),(y||c)&&u.$43l(!0),B?(u.clear(),delete u.$64l,u._68I||u.$43l()):(u.handle_mousemove(Y,!0),w&&!u._68I&&u.$43l())},handleWindowTouchMove:function(J){this.handleWindowMouseMove(J)},handleWindowMouseMove:function(H){this._78I(H)},handle_mousemove:function(J,e,E){if(!this._pause){if(!E){var x=B?Ck(J):J;this.$61l={clientX:x.clientX,clientY:x.clientY}}if(e===!0||!y()){var q=this,b=q.gv,H=!1,$=L;q.clear(),b.sm().size()>0&&($=b.lp(E?q.$61l:J),H=q._79I(J,$)),H&&(b._editing=1),q.$12l!==q.$65l&&(q.$65l=q.$12l,q.setCursor(q.$12l)),q.$40l!==q.$64l&&(q.$64l=q.$40l,q._68I||q.$43l()),q._hoverSegmentIndex!==q.$66l&&(q.$66l=q._hoverSegmentIndex,q._68I||q.$43l())}}},_78I:function(e){this.autoScroll(e);var G=this,K=G.gv,Y=K.lp(e),s=K.getZoom(),n=G.$13l;if((G._shape||G._edge)&&n>=0){var w,h,f,u=G._shape,W=G._edge,C=G.$24l,k=K.getPointSnapSpacing(),x=function(j,w){return k==L||isNaN(k)?{x:j,y:w}:{x:N(j/k)*k,y:N(w/k)*k}};if(u){w=u.getPoints();var b=u.p(),H=u.getRotation(),t=0;h=ak(b,Y.x-b.x,Y.y-b.y,-H),ph(u,b,H,n,Y,!0,C,x),G.fi({kind:"betweenEditPoint",event:e,data:u,index:n})}else if(W){w=Om(K.getDataUI(W),W.s("edge.points"),!0),Y.x-=C.x,Y.y-=C.y,h=Y;var M,V,y=W.s("edge.offset"),q=w.size(),z=q>2;if(0===n){var D=w.get(0);y&&(D=Ci(D,w.get(1),-y,z),Y=Ci(Y,w.get(1),-y,z)),M=Y.x-D.x,V=Y.y-D.y,f=x(M,V),W.s("edge.source.offset.x",f.x),W.s("edge.source.offset.y",f.y)}else if(n===q-1){var a=w.get(q-1);y&&(a=Ci(a,w.get(q-2),-y,z),Y=Ci(Y,w.get(q-2),-y,z)),M=Y.x-a.x,V=Y.y-a.y,f=x(M,V),W.s("edge.target.offset.x",f.x),W.s("edge.target.offset.y",f.y)}else"points"===W.s("edge.type")&&(f=x(Y.x,Y.y),f.e=w.get(n).e,w.set(n,f),W.s("edge.points",fh(w)));G.fi({kind:"betweenEditPoint",event:e,data:W,index:n})}if(delete G.$9l,K.isSnapPoint(u)||K.isSnapPoint(W))for(t=0;t<w.size();t++)if(t!==n){var Z=w.get(t);if(o(Z,h)<K.getEditPointSize()/s){G.$9l=t;break}}}else if(G.$10l){var C=G.$24l;Y.x-=C.x,Y.y-=C.y;var B=K.sm().getSelection(),O=G.$1l,P=G.$7l,g=G.$10l,c=G.$4l,$=G.$2l,j=K.getEditRectPadding()/s,A=2*j,_=K.getSnapSpacing(),S=_!=L&&!isNaN(_),d=sp($,Y,g,P,2*j,K.getResizeMode(),S,!0),U=G.$6l;if(S){var E=d.width-A,X=d.height-A,T=N(E/_)*_,Mo=N(X/_)*_,ed=T-E,zp=Mo-X;("west"===g||"northwest"===g||"southwest"===g)&&(ed=-ed),("north"===g||"northwest"===g||"northeast"===g)&&(zp=-zp),d=sp($,Y,g,P,2*j,K.getResizeMode(),S,!1,ed,zp)}G.$8l=d,U.x=d.x+j,U.y=d.y+j,U.width=d.width-A,U.height=d.height-A;var sg=d.x+d.width/2,ul=d.y+d.height/2,ko=U.x,Dm=U.y,sh=U.width/c.width,xp=U.height/c.height;B.each(function(Y){if(Y instanceof Q&&K.isEditable(Y)&&K.isRectEditable(Y)){var e=O[Y.getId()],Z=G.$3l[Y.getId()],n={x:e.x+e.width/2,y:e.y+e.height/2},R=0,a=0,c=g,s=180*I(P-Y.getRotation())/J;"northeast"===g?s>=315||45>s?(R=e.width*sh+e.x,a=e.height*(1-xp)+e.y,c="northeast"):s>=45&&135>s?(R=e.width*(1-xp)+e.x,a=e.height*(1-sh)+e.y,c="northwest"):s>=135&&225>s?(R=e.width*(1-sh)+e.x,a=e.height*xp+e.y,c="southwest"):(R=e.width*xp+e.x,a=e.height*sh+e.y,c="southeast"):"north"===g?s>=315||45>s?(a=e.height*(1-xp)+e.y,c="north"):s>=45&&135>s?(R=e.width*(1-xp)+e.x,c="west"):s>=135&&225>s?(a=e.height*xp+e.y,c="south"):(R=e.width*xp+e.x,c="east"):"northwest"===g?s>=315||45>s?(R=e.width*(1-sh)+e.x,a=e.height*(1-xp)+e.y,c="northwest"):s>=45&&135>s?(R=e.width*(1-xp)+e.x,a=e.height*sh+e.y,c="southwest"):s>=135&&225>s?(R=e.width*sh+e.x,a=e.height*xp+e.y,c="southeast"):(R=e.width*xp+e.x,a=e.height*(1-sh)+e.y,c="northeast"):"west"===g?s>=315||45>s?(R=e.width*(1-sh)+e.x,c="west"):s>=45&&135>s?(a=e.height*sh+e.y,c="south"):s>=135&&225>s?(R=e.width*sh+e.x,c="east"):(a=e.height*(1-sh)+e.y,c="north"):"southwest"===g?s>=315||45>s?(R=e.width*(1-sh)+e.x,a=e.height*xp+e.y,c="southwest"):s>=45&&135>s?(R=e.width*xp+e.x,a=e.height*sh+e.y,c="southeast"):s>=135&&225>s?(R=e.width*sh+e.x,a=e.height*(1-xp)+e.y,c="northeast"):(R=e.width*(1-xp)+e.x,a=e.height*(1-sh)+e.y,c="northwest"):"east"===g?s>=315||45>s?(R=e.width*sh+e.x,c="east"):s>=45&&135>s?(a=e.height*(1-sh)+e.y,c="north"):s>=135&&225>s?(R=e.width*(1-sh)+e.x,c="west"):(a=e.height*sh+e.y,c="south"):"south"===g?s>=315||45>s?(a=e.height*xp+e.y,c="south"):s>=45&&135>s?(R=e.width*xp+e.x,c="east"):s>=135&&225>s?(a=e.height*(1-xp)+e.y,c="north"):(R=e.width*(1-xp)+e.x,c="west"):"southeast"===g&&(s>=315||45>s?(R=e.width*sh+e.x,a=e.height*xp+e.y,c="southeast"):s>=45&&135>s?(R=e.width*xp+e.x,a=e.height*(1-sh)+e.y,c="northeast"):s>=135&&225>s?(R=e.width*(1-sh)+e.x,a=e.height*(1-xp)+e.y,c="northwest"):(R=e.width*(1-xp)+e.x,a=e.height*sh+e.y,c="southwest"));var V=ak(n,R-n.x,a-n.y,Y.getRotation());Ie(Y,e,c,{x:V.x,y:V.y});var v=ko+U.width*Z.x,C=Dm+U.height*Z.y,b={x:v,y:C};b=ak({x:sg,y:ul},b.x-sg,b.y-ul,P),Y.p(b.x,b.y)}}),G.fi({kind:"betweenEditRect",event:e,direction:g})}else if(G.$23l&&G.$40l){var Cr=G.$8l,or=Cr.width,_b=Cr.height,b={x:Cr.x+or/2,y:Cr.y+_b/2},C=G.$24l,Tp=G.$23l,Mc=Tp.x/s-b.x,_r=Tp.y/s-b.y,Xi=l(Mc*Mc+_r*_r),Cq=Math.asin(C.x/Xi),Do=K.sm().getSelection(),af=p+v(Y.y-b.y,Y.x-b.x)-Cq,ad=K.getSnapAngle(),af=N(af/ad)*ad;0>af&&(af+=r);var ke=af-G.$7l,rq=[b.x,0,b.y];Do.each(function(c){if(K.isEditable(c)&&K.isRotationEditable(c)&&K.isVisible(c)){var O=nn(c.p3(),rq),D=We();eo(D,-ke),c.setRotation(c.getRotation()+ke),Ig(O,D),c.p3(rq[0]+O[0],rq[1]+O[1],rq[2]+O[2])}}),G.$7l=af,G.fi({kind:"betweenEditRotation",event:e})}else if([1,2,3,5,6].indexOf(G.$67l)>=0)G.$72l=e,G.$78l||(G.$78l=1,i(function(){m.isDragging()&&G.$43l(),delete G.$78l},12));else if(7===G.$67l){if(G.$87l instanceof R){var u=G.$87l,sl=G.$88l,lj=m.clone(u.getPoints().get(sl)),Jc=Y.y-lj.y;lj.e||(lj.e=0),G.$92l||(G.$92l=lj.e),lj.e=G.$92l-Jc,u.setPoint(sl,lj)}else if(G.$87l instanceof F){var W=G.$87l,sl=G.$88l,w=Om(K.getDataUI(W),W.s("edge.points")),lj=w.get(sl),Jc=Y.y-lj.y;lj.e||(lj.e=0),G.$92l||(G.$92l=lj.e),lj.e=G.$92l-Jc,w.set(sl,lj),W.s("edge.points",fh(w))}}else if(8===G.$67l){var Do=K.sm().getSelection(),zq=G.$93l;zq||(zq=G.$93l={}),Do.each(function(j){if(j.p3){var n=j.p3(),D=zq[j.getId()];D==L&&(D=zq[j.getId()]=n[1]),j.p3([n[0],D-(Y.y-G.$90l.y/s),n[2]])}})}else if(9===G.$67l){var Do=K.sm().getSelection(),Qe=G.$94l;Qe||(Qe=G.$94l={}),Do.each(function(H){if(H.s3){var S=H.s3(),m=Qe[H.getId()];m==L&&(m=Qe[H.getId()]=S[1]);var l=m-(Y.y-G.$91l.y/s);0>l&&(l=.01),H.s3([S[0],l,S[2]])}})}},$79l:function(N,R){var V=this,M=V.gv,X=M.getZoom(),T=M.getEditHelperSize(),Z=N.x/X,I=N.y/X,k=T/X,O=k/2;return a({x:Z-O,y:I-O,width:k,height:k},R)?!0:void 0},getHelperCursor:function(){return"crosshair"},_79I:function(U,N){for(var E=this,I=E.gv,K=I.getZoom(),m=I.getEditPointSize(),d=m/K,D=d/2,Q=E.$46l(U),j=0;j<Q.length;j++){var c,s,S=Q[j],h=I.getDataUI(S);if(h&&h._55O){var V=h._55O;if(V._43O&&S instanceof F){if(c=S.s("edge.points"),c=Om(h,c),s=S.s("edge.segments"),s&&s.size()||(s=xl(c)),E.$42l(S,N,c._as,s,"edge"))return!0;if("points"===S.s("edge.type"))return E.$41l(S,N,c._as,s,"edge"),void 0}if(V._43O&&S instanceof R&&V.$15l&&V.$15l.length===S.getPoints().size()){if(c=V.$15l,s=S.getSegments(),s&&s.size()||(s=xl(c)),E.$42l(S,N,c,s,"shape"))return!0;if(E.$41l(S,N,c,s,"shape"))return}}}if(E.$16l){var c,$=E.$16l,B=$[3].x-$[7].x,P=$[3].y-$[7].y,i=l(B*B+P*P),A=$[1].x-$[5].x,e=$[1].y-$[5].y,q=l(A*A+e*e),p={x:N.x*K,y:N.y*K};if(E._80I(p,0,$[0],"northwest",i,q)||E._80I(p,1,$[1],"north",i,q)||E._80I(p,2,$[2],"northeast",i,q)||E._80I(p,7,$[7],"west",i,q)||E._80I(p,3,$[3],"east",i,q)||E._80I(p,6,$[6],"southwest",i,q)||E._80I(p,5,$[5],"south",i,q)||E._80I(p,4,$[4],"southeast",i,q))return!0}if(E.$23l){var J=E.$23l,o=J.x/K,M=J.y/K;if(a({x:o-D,y:M-D,width:d,height:d},N))return E.$40l=1,E.$12l=E.getHelperCursor("rotation")||"crosshair",!0}return E.$68l&&E.$79l(E.$68l,N)?(E.$67l=1,E.$12l=E.getHelperCursor("host")||"crosshair",!0):E.$69l&&E.$79l(E.$69l,N)?(E.$67l=2,E.$12l=E.getHelperCursor("parent")||"crosshair",!0):E.$70l&&E.$79l(E.$70l,N)?(E.$67l=3,E.$12l=E.getHelperCursor("edge")||"crosshair",!0):E.$71l&&E.$79l(E.$71l,N)?(E.$67l=4,E.$12l=E.getHelperCursor("remove")||"crosshair",!0):E.$82l&&E.$79l(E.$82l,N)?(E.$67l=5,E.$12l=E.getHelperCursor("source")||"crosshair",!0):E.$83l&&E.$79l(E.$83l,N)?(E.$67l=6,E.$12l=E.getHelperCursor("target")||"crosshair",!0):E._pointElevationHelperPoint&&E.$79l(E._pointElevationHelperPoint,N)?(E.$67l=7,E.$12l=E.getHelperCursor("pointElevation")||"crosshair",!0):E.$90l&&E.$79l(E.$90l,N)?(E.$67l=8,E.$12l=E.getHelperCursor("elevation")||"crosshair",!0):E.$91l&&E.$79l(E.$91l,N)?(E.$67l=9,E.$12l=E.getHelperCursor("tall")||"crosshair",!0):!1},_80I:function(i,U,x,m,_,$){var q=this,L=q.gv,G=L.getEditPointSize(),f=G/2,g=L.sm(),P=L.isDirectionEditable;if(P&&1===g.size()){var d=g.ld();if(P=P.bind(L),d instanceof Q){if(!P(d,m))return!1;if("east"===m){if(P(d,"northeast")&&P(d,"southeast")&&2*G>=$)return!1}else if("west"===m){if(P(d,"northwest")&&P(d,"southwest")&&2*G>=$)return!1}else if("north"===m){if(P(d,"northwest")&&P(d,"northeast")&&2*G>=_)return!1}else if("south"===m&&P(d,"southwest")&&P(d,"southeast")&&2*G>=_)return!1}}else{if(2*G>=_&&("north"===m||"south"===m))return!1;if(2*G>=$&&("east"===m||"west"===m))return!1}if(a({x:x.x-f,y:x.y-f,width:G,height:G},i)){if(q.$10l!==m){var W=180*q.$7l/J,I="";W>=337.5||22.5>W?I="north":W>=22.5&&67.5>W?I="northeast":W>=67.5&&112.5>W?I="east":W>=112.5&&157.5>W?I="southeast":W>=157.5&&202.5>W?I="south":W>=202.5&&247.5>W?I="southwest":W>=247.5&&292.5>W?I="west":W>=292.5&&337.5>W&&(I="northwest");var s=Nn.indexOf(I),I=Nn[U-(1-s)+8];switch(I){case"northwest":q.$12l="nwse-resize";break;case"northeast":q.$12l="nesw-resize";break;case"southwest":q.$12l="nesw-resize";break;case"southeast":q.$12l="nwse-resize";break;case"north":q.$12l="ns-resize";break;case"east":q.$12l="ew-resize";break;case"south":q.$12l="ns-resize";break;case"west":q.$12l="ew-resize"}q.$10l=m}return!0}return!1},$42l:function(u,d,f,s,m){var o,S=this,w=S.gv,c=w.getEditPointSize(),G=c/w.getZoom(),r=-1,e={x:d.x,y:d.y,width:0,height:0},R=function(d){"shape"===m?S._shape=u:S._edge=u,S._removePointIndex=d},D=function(F){"shape"===m?S._shape=u:S._edge=u,S.$13l=F,S.$12l="crosshair"};for(A(e,G/2),r=f.length-1,o=s.size()-1;o>=0;o--){var y=s.get(o);if(1===y||2===y)r-=1;else if(3===y){var Z=f[r-1];if(a(e,Z))return D(r-1),!0;r-=2}else if(4===y){var h=f[r-1],j=f[r-2];if(a(e,h))return D(r-1),!0;if(a(e,j))return D(r-2),!0;r-=3}}for(r=f.length-1,o=s.size()-1;o>=0;o--){var y=s.get(o),C=f[r];if(a(e,C))return R(r),D(r),!0;1===y||2===y?r-=1:3===y?r-=2:4===y&&(r-=3)}return!1},$41l:function(o,N,x,y,Q){var T=this,M=T.gv,v=-1,_=0,S={x:N.x,y:N.y,width:0,height:0},q=function(j,X){T._hoverSegmentIndex=X,T._lp=N,"shape"===Q?T._shape=o:T._edge=o};for(A(S,M.getSegmentHoverWidth()/2/M.getZoom()),o instanceof R&&o.isClosePath()&&y.indexOf(5)<0&&(y=new X(y._as),y.add(5));_<y.size();_++){var e=y.get(_);if(1===e){var f=x[v],V=x[v+1];if(f){var n=Rl(new an(f.x,f.y),new an(V.x,V.y),new an(S.x,S.y),new an(S.x+S.width,S.y+S.height));if(n.$62l===H&&n.points.length>0)return q(n,_),!0}v+=1}else if(2===e){var f=x[v],V=x[v+1],n=Rl(new an(f.x,f.y),new an(V.x,V.y),new an(S.x,S.y),new an(S.x+S.width,S.y+S.height));if(n.$62l===H&&n.points.length>0)return q(n,_),!0;v+=1}else if(3===e){var f=x[v],s=x[v+1],O=x[v+2],n=Dd(new an(f.x,f.y),new an(s.x,s.y),new an(O.x,O.y),new an(S.x,S.y),new an(S.x+S.width,S.y+S.height));if(n.$62l===H)return q(n,_),!0;v+=2}else if(4===e){var f=x[v],k=x[v+1],$=x[v+2],O=x[v+3],n=vc(new an(f.x,f.y),new an(k.x,k.y),new an($.x,$.y),new an(O.x,O.y),new an(S.x,S.y),new an(S.x+S.width,S.y+S.height));if(n.$62l===H)return q(n,_),!0;v+=3}else if(5===e){var f=x[v],V=x[0];if(f){var n=Rl(new an(f.x,f.y),new an(V.x,V.y),new an(S.x,S.y),new an(S.x+S.width,S.y+S.height));if(n.$62l===H&&n.points.length>0)return q(n,_),!0}}}return!1},addShapePoint:function(a,p,w){var f=this,S=f.gv,n=S.dm();if(n.beginTransaction(),0===arguments.length&&(a=f._shape||f._edge,p=f._hoverSegmentIndex,w=f._lp),a instanceof R||a instanceof F){var x=xq(a,S.getDataUI(a),p);if(!isNaN(p)&&w&&!isNaN(x)){var M=w;if(a instanceof R){var h=a.p(),m=a.getRotation(),k=a.toSegments();k&&k.size()||(k=xl(a.getPoints())),a.isClosePath()&&k.indexOf(5)<0&&(k=new X(k._as),k.add(5));var G=k.get(p),e="addPoint",$="removePointAt";if(2===G||1===G){var j={x:M.x,y:M.y};k.add(G,p),j=ak(h,j.x-h.x,j.y-h.y,-m),a[e](j,x+1)}else if(3===G){var t=a.getPoints(),l=t.get(x),r=t.get(x+2),j={x:M.x,y:M.y};j=ak(h,j.x-h.x,j.y-h.y,-m);var s=jl(l,j),J=jl(j,r);k.removeAt(p),k.add(3,p),k.add(3,p),a.setPoint(x+1,j),a[e](J,x+2),a[e](s,x+1)}else if(4===G){var t=a.getPoints(),l=t.get(x),r=t.get(x+3),j={x:M.x,y:M.y};j=ak(h,j.x-h.x,j.y-h.y,-m);var s=Ap(l,j),J=nh(l,j),Q=Ap(j,r),Z=nh(j,r);k.removeAt(p),k.add(4,p),k.add(4,p),a[$](x+1),a[$](x+1),a[e](j,x+1),a[e](Z,x+2),a[e](Q,x+2),a[e](J,x+1),a[e](s,x+1)}else if(5===G){var j={x:M.x,y:M.y};k.add(2,p),j=ak(h,j.x-h.x,j.y-h.y,-m),a[e](j,x+1)}a.isClosePath()&&k.remove(5),a.setSegments(k);var K=a.getWidth(),i=a.getHeight(),A=a.p().x-K/2,z=a.p().y-i/2;A-=h.x,z-=h.y;var o=If(a,{x:A,y:z,width:K,height:i},m,h);a.p(o.x,o.y)}else if(a instanceof F){if("points"!==a.s("edge.type"))return n.endTransaction(),void 0;var t=a.s("edge.points");k=a.s("edge.segments"),t=Om(S.getDataUI(a),t),k&&k.size()||(k=xl(t)),k=new X(k._as.slice(0)),t=new X(t._as.slice(0));var G=k.get(p);if(2===G||1===G){var j={x:M.x,y:M.y};k.add(G,p),t.add(j,x+1)}else if(3===G){var l=t.get(x),r=t.get(x+2),j={x:M.x,y:M.y},s=jl(l,j),J=jl(j,r);k.removeAt(p),k.add(3,p),k.add(3,p),t.set(x+1,j),t.add(J,x+2),t.add(s,x+1)}else if(4===G){var l=t.get(x),r=t.get(x+3),j={x:M.x,y:M.y},s=Ap(l,j),J=nh(l,j),Q=Ap(j,r),Z=nh(j,r);k.removeAt(p),k.add(4,p),k.add(4,p),t.removeAt(x+1),t.removeAt(x+1),t.add(j,x+1),t.add(Z,x+2),t.add(Q,x+2),t.add(J,x+1),t.add(s,x+1)}a.s("edge.points",fh(t)),a.s("edge.segments",k)}}}n.endTransaction()},removeShapePoint:function($,Y){var U=this,h="removeAt",b=U.gv,e=b.dm();if(e.beginTransaction(),0===arguments.length&&($=U._shape||U._edge,Y=U._removePointIndex),Y>=0&&($ instanceof R||$ instanceof F)){var V=ik($,U.gv.getDataUI($),Y),f=Y;if($ instanceof R){var d=$.p(),i=$.toSegments();i&&i.size()||(i=xl($.getPoints()));var P=i.get(V),t="removePointAt";if(1===P&&0===f)if($.getPoints().size()>1){var B=i.get(V+1);i[h](V+1),3===B?$[t](f+1):4===B&&($[t](f+2),$[t](f+1)),$[t](f)}else $.dm().remove($);else 2===P||1===P?(i[h](V),$[t](f)):3===P?(i[h](V),$[t](f),$[t](f-1)):4===P&&(i[h](V),$[t](f),$[t](f-1),$[t](f-2));$.setSegments(i);var w=$.getWidth(),L=$.getHeight(),S=$.p().x-w/2,y=$.p().y-L/2;S-=d.x,y-=d.y;var J=If($,{x:S,y:y,width:w,height:L},$.getRotation(),d);$.p(J.x,J.y)}else if($ instanceof F){if("points"!==$.s("edge.type"))return e.endTransaction(),void 0;var K=$.s("edge.points");if(i=$.s("edge.segments"),K&&(K=Om(U.gv.getDataUI($),K),i&&i.size()||(i=xl(K))),0===Y||Y===K.size()-1)return e.endTransaction(),void 0;i=new X(i._as.slice(0)),K=new X(K._as.slice(0));var P=i.get(V);2===P||1===P?(i[h](V),K[h](f)):3===P?(i[h](V),K[h](f),K[h](f-1)):4===P&&(i[h](V),K[h](f),K[h](f-1),K[h](f-2)),$.s("edge.segments",i),$.s("edge.points",fh(K))}}e.endTransaction()},changeShapeSegment:function(S,K,x){var p=this,G=p.gv,m=G.dm();if(m.beginTransaction(),1!==arguments.length||isNaN(S)||(x=S,S=p._shape||p._edge,K=p._hoverSegmentIndex),S instanceof R||S instanceof F){var H=xq(S,p.gv.getDataUI(S),K);if(!isNaN(K)&&!isNaN(H))if(S instanceof R){var _=S.p(),u=S.toSegments();u&&u.size()||(u=xl(S.getPoints()));var M=u.get(K),g=S.toPoints();if(1===x||2===x)1===M||2===M?u.set(K,x):3===M?(u.set(K,x),g.removeAt(H+1)):4===M&&(u.set(K,x),g.removeAt(H+1),g.removeAt(H+1));else if(3===x){var w=function(){var n=g.get(H),x=g.get(H+1),S=jl(n,x);u.set(K,3),g.add(S,H+1)};2===M||1===M?w():4===M&&(g.removeAt(H+1),g.removeAt(H+1),w())}else if(4===x){var r=function(){var O=g.get(H),q=g.get(H+1),E=Ap(O,q),i=nh(O,q);u.set(K,4),g.add(E,H+1),g.add(i,H+2)};2===M||1===M?r():3===M&&(g.removeAt(H+1),r())}S.setSegments(u),S.setPoints(g);var t=S.getWidth(),J=S.getHeight(),n=S.p().x-t/2,o=S.p().y-J/2;n-=_.x,o-=_.y;var s=new If(S,{x:n,y:o,width:t,height:J},S.getRotation(),_);S.p(s.x,s.y)}else if(S instanceof F){if("points"!==S.s("edge.type"))return m.endTransaction(),void 0;var g=S.s("edge.points");u=S.s("edge.segments"),g&&(g=Om(p.gv.getDataUI(S),g),u&&u.size()||(u=xl(g))),u=new X(u._as.slice(0)),g=new X(g._as.slice(0));var M=u.get(K);if(1===x||2===x)1===M||2===M?u.set(K,x):3===M?(u.set(K,x),g.removeAt(H+1)):4===M&&(u.set(K,x),g.removeAt(H+1),g.removeAt(H+1));else if(3===x){var w=function(){var n=g.get(H),m=g.get(H+1),w=jl(n,m);u.set(K,3),g.add(w,H+1)};2===M||1===M?w():4===M&&(g.removeAt(H+1),g.removeAt(H+1),w())}else if(4===x){var r=function(){var A=g.get(H),v=g.get(H+1),m=Ap(A,v),N=nh(A,v);u.set(K,4),g.add(m,H+1),g.add(N,H+2)};2===M||1===M?r():3===M&&(g.removeAt(H+1),r())}S.s("edge.points",fh(g)),S.s("edge.segments",u)}}m.endTransaction()},getDefaultSegments:function(L){var C=this.gv,W=C.getDataUI(L);if(L instanceof F){var M=L.s("edge.points");return M=Om(W,M),xl(M)}if(L instanceof R){var M=L.getPoints(),J=L.getSegments();return J&&J.size()>0?J:xl(M)}},$43l:function(f){var u=this;f&&(u.$5l=1),u._68I=1,u._42()},_42:function(){var Y=this;if(Y._68I){delete Y._68I;var h=Y.gv,g=Y.$5l,o=h.getZoom(),f=h.getEditPointSize(),N=f/2,B=new X,P=Y._view,O=Y._edge,n=Y._shape,I=P.getContext("2d"),k=h.tx(),p=h.ty(),q=L,s=h.getEditPointBackground(),$=h.getControlPointBackground(),W=h.getControlPointBorderColor(),J=h.getEditPointBorderColor(),V=h.getEditRectBorderColor(),v=h.getDirectionLineColor(),w=h.getSegmentHoverColor(),y=h.getSnapPointBorderColor(),S=h.getJoinPointBackground(),H=h.getJoinPointBorderColor(),C=h.getSegmentHoverWidth(),j=[5,5],u=h.getEditRectBorderStyle();gb(h,function(u){h.isSelected(u)&&h.isVisible(u)&&B.add(u)}),I.clearRect(0,0,z(P.width),z(P.height)),I.save(),G.translateAndScale(I,k,p,1);var T=L,M={x:0,y:0,width:0,height:0},x=0,K=0,b=0,i=0,e=0,a=0,Ql=0,Sb=0,Mm=0,tn=0,as=[];if(g?(delete Y.$6l,delete Y.$8l,delete Y.$7l,delete Y.$16l,delete Y.$23l):(T=Y.$6l,q=Y.$7l),delete Y.$68l,delete Y.$69l,delete Y.$71l,delete Y.$70l,delete Y.$82l,delete Y.$83l,delete Y._pointElevationHelperPoint,delete Y.$90l,delete Y.$91l,delete Y.$75l,delete Y.$74l,B.each(function(o){var p=h.getDataUI(o);if(p){var y=p._55O;if(h.isEditable(o))y._56O&&o instanceof Q&&K++,as.push(o),y._42O&&o instanceof Q&&x++,h.isHelperEditable(o,"host")&&i++,h.isHelperEditable(o,"parent")&&b++,h.isHelperEditable(o,"remove")&&e++,h.isHelperEditable(o,"edge")&&a++,h.isHelperEditable(o,"source")&&Ql++,h.isHelperEditable(o,"target")&&Sb++,h.isHelperEditable(o,"elevation")&&Mm++,h.isHelperEditable(o,"tall")&&tn++;else if(o instanceof t&&o.isExpanded()){var X=!0,d=h.getEditableFunc();d&&(X=d(o)),X&&(h.isHelperEditable(o,"host")&&i++,h.isHelperEditable(o,"parent")&&b++,h.isHelperEditable(o,"remove")&&e++,h.isHelperEditable(o,"edge")&&a++,h.isHelperEditable(o,"source")&&Ql++,h.isHelperEditable(o,"target")&&Sb++,h.isHelperEditable(o,"elevation")&&Mm++,h.isHelperEditable(o,"tall")&&tn++,as.push(o))}}}),I.beginPath(),I.lineWidth=1,I.strokeStyle=h.getNodeBorderColor(),as.forEach(function(K){var Z=h.getDataUI(K),m=Z._55O;if(g)if(q==L&&(q=K instanceof F?0:K instanceof t&&K.isExpanded()?0:K.getRotation(),Y.$7l=q),T==L){var v,$,e;if(K instanceof t&&K.isExpanded()||K instanceof F){var E=h.getDataUIBounds(K);$=E.width,e=E.height,v={x:E.x+$/2,y:E.y+e/2}}else v=K.p(),$=K.getWidth(),e=K.getHeight();T={x:v.x,y:v.y,width:0,height:0},M.x=v.x-$/2,M.y=v.y-e/2,M.width=$,M.height=e,T=U(T,M)}else{var v,$,e,A,C=T.x+T.width/2,c=T.y+T.height/2,X={x:C,y:c};if(K instanceof t&&K.isExpanded()||K instanceof F){A=0;var E=h.getDataUIBounds(K);$=E.width,e=E.height,v={x:E.x+$/2,y:E.y+e/2}}else v=K.p(),$=K.getWidth(),e=K.getHeight(),A=K.getRotation();var d={x:v.x-$/2,y:v.y-e/2,width:$,height:e},W={x:d.x,y:d.y},u={x:d.x+d.width,y:d.y},N={x:d.x,y:d.y+d.height},B={x:d.x+d.width,y:d.y+d.height},W=ak(v,W.x-v.x,W.y-v.y,A),N=ak(v,N.x-v.x,N.y-v.y,A),B=ak(v,B.x-v.x,B.y-v.y,A),u=ak(v,u.x-v.x,u.y-v.y,A),b=-q,G=ak(X,W.x-X.x,W.y-X.y,b),k=ak(X,u.x-X.x,u.y-X.y,b),R=ak(X,N.x-X.x,N.y-X.y,b),n=ak(X,B.x-X.x,B.y-X.y,b),l=D([G,k,R,n]);T=U(T,l),T.x-=C,T.y-=c;var f=If(L,T,q,X);T.x=f.x-T.width/2,T.y=f.y-T.height/2}if(x>1&&h.isEditable(K)&&h.isRectEditable(K)&&K instanceof Q){var P=K.getRect(),i=m.$45l,H=ul(i[0],o),s=ul(i[2],o),w=ul(i[4],o),y=ul(i[6],o);K.getRotation()?(I.moveTo(H.x,H.y),I.lineTo(s.x,s.y),I.lineTo(w.x,w.y),I.lineTo(y.x,y.y),I.lineTo(H.x,H.y)):I.rect(P.x*o,P.y*o,P.width*o,P.height*o)}}),I.stroke(),T){Y.$6l=_(T),A(T,h.getEditRectPadding()/o);var Zk={x:T.x+T.width/2,y:T.y+T.height/2},bk=yo(Zk,T.width,T.height,q),Cp=bk[0],xi=bk[1],ri=bk[2],Cd=bk[3],Sg=bk[4],zs=bk[5],Qp=bk[6],sg=bk[7];if(Cp=ul(bk[0],o),xi=ul(bk[1],o),ri=ul(bk[2],o),Cd=ul(bk[3],o),Sg=ul(bk[4],o),zs=ul(bk[5],o),Qp=ul(bk[6],o),sg=ul(bk[7],o),Y.$8l=T,x>0&&(Y.$16l=[Cp,Sg,xi,zs,Cd,Qp,ri,sg],I.beginPath(),I.lineWidth=1,I.strokeStyle=V,"dashed"===u&&I.setLineDash&&I.setLineDash(j),I.moveTo(Cp.x,Cp.y),I.lineTo(xi.x,xi.y),I.lineTo(Cd.x,Cd.y),I.lineTo(ri.x,ri.y),I.lineTo(Cp.x,Cp.y),I.stroke(),"dashed"===u&&I.setLineDash&&I.setLineDash([])),I.beginPath(),I.lineWidth=1,I.fillStyle=s,I.strokeStyle=J,x>0){var Nc=zs.x-sg.x,dn=zs.y-sg.y,$b=l(Nc*Nc+dn*dn),yl=Sg.x-Qp.x,Eg=Sg.y-Qp.y,Lj=l(yl*yl+Eg*Eg),Vh=2*f;if(h.isDirectionEditable&&1===as.length){var vb=as[0],Zb=h.getDataUI(vb),jr=Zb._55O,vp=h.isDirectionEditable.bind(h);if(jr._42O){var Hn,Ro,qk,xj;vp(vb,"northwest")&&(Hn=!0,I.rect(Cp.x-N,Cp.y-N,f,f)),vp(vb,"northeast")&&(Ro=!0,I.rect(xi.x-N,xi.y-N,f,f)),vp(vb,"southwest")&&(qk=!0,I.rect(ri.x-N,ri.y-N,f,f)),vp(vb,"southeast")&&(xj=!0,I.rect(Cd.x-N,Cd.y-N,f,f)),vp(vb,"north")&&(Hn&&Ro?$b>Vh&&I.rect(Sg.x-N,Sg.y-N,f,f):I.rect(Sg.x-N,Sg.y-N,f,f)),vp(vb,"south")&&(xj&&qk?$b>Vh&&I.rect(Qp.x-N,Qp.y-N,f,f):I.rect(Qp.x-N,Qp.y-N,f,f)),vp(vb,"west")&&(qk&&Hn?Lj>Vh&&I.rect(sg.x-N,sg.y-N,f,f):I.rect(sg.x-N,sg.y-N,f,f)),vp(vb,"east")&&(xj&&Ro?Lj>Vh&&I.rect(zs.x-N,zs.y-N,f,f):I.rect(zs.x-N,zs.y-N,f,f))}}else $b>Vh&&(I.rect(Sg.x-N,Sg.y-N,f,f),I.rect(Qp.x-N,Qp.y-N,f,f)),Lj>Vh&&(I.rect(zs.x-N,zs.y-N,f,f),I.rect(sg.x-N,sg.y-N,f,f)),I.rect(Cp.x-N,Cp.y-N,f,f),I.rect(xi.x-N,xi.y-N,f,f),I.rect(ri.x-N,ri.y-N,f,f),I.rect(Cd.x-N,Cd.y-N,f,f)}if(K>0){var Db=Y.$23l=ak(Sg,0,2*-f,q);I.moveTo(Db.x+N,Db.y),I.arc(Db.x,Db.y,N,0,r,!1)}I.fill(),I.stroke(),Y.$40l&&Y.$44l(I,T,q);var bl,Pg,_p=h.getLeftTopHelpers(),ci=h.getRightTopHelpers(),qo=h.getLeftBottomHelpers(),Go=h.getRightBottomHelpers(),oe=h.getEdgeHelpers(),Ik=h.getEditHelperSize(),Tn=Ik/2,cn=function(c,r,U,z){"leftTop"===r?(bl=T.x*o-Ik-N-("h"===z?U*(Ik+N):0)-1,Pg=T.y*o-Ik-N-("v"===z?U*(Ik+N):0)-1):"rightTop"===r?(bl=(T.x+T.width)*o+N+("h"===z?U*(Ik+N):0)+1,Pg=T.y*o-Ik-N-("v"===z?U*(Ik+N):0)-1):"leftBottom"===r?(bl=T.x*o-Ik-N-("h"===z?U*(Ik+N):0)-1,Pg=(T.y+T.height)*o+N+("v"===z?U*(Ik+N):0)+1):"rightBottom"===r&&(bl=(T.x+T.width)*o+N+("h"===z?U*(Ik+N):0)+1,Pg=(T.y+T.height)*o+N+("v"===z?U*(Ik+N):0)+1);var l=bl+Tn,O=Pg+Tn,Z=(T.x+T.width/2)*o,R=(T.y+T.height/2)*o,g=ak({x:Z,y:R},l-Z,O-R,q);if("host"===c){if(i>0)return Y.$77l(I,q,g),!0}else if("edge"===c){if(a>0)return Y.$80l(I,q,g),!0}else if("remove"===c){if(e>0)return as&&1===as.length&&as[0]instanceof F?Y.$81l(I,q,{x:Z+Ik/2+5,y:R}):Y.$81l(I,q,g),!0}else if("parent"===c){if(b>0)return as&&1===as.length&&as[0]instanceof F?Y.$76l(I,q,{x:Z-Ik/2-5,y:R}):Y.$76l(I,q,g),!0}else if("elevation"===c){if(Mm>0)return Y.$85l(I,q,g),!0}else if("tall"===c){if(tn>0)return Y.$86l(I,q,g),!0}else if("source"===c||"target"===c){var V=as[0],w=h.getDataUI(V),f=Pp(w,!0),M=f[0],L=f[1];if(Ql&&"source"===c)return Y.$84l(I,T,M,!0,V.isLooped(),r,U,z),!0;if(Sb&&"target"===c)return Y.$84l(I,T,L,!1,V.isLooped(),r,U,z),!0}};if(_p&&_p.length>0){var _j=0;_p.forEach(function(C){cn(C,"leftTop",_j,h.getLeftTopHelpersAlign()||"h")&&_j++})}if(ci&&ci.length>0){var _j=0;ci.forEach(function(b){cn(b,"rightTop",_j,h.getRightTopHelpersAlign()||"h")&&_j++})}if(qo&&qo.length>0){var _j=0;qo.forEach(function(I){cn(I,"leftBottom",_j,h.getLeftBottomHelpersAlign()||"h")&&_j++})}if(Go&&Go.length>0){var _j=0;Go.forEach(function(t){cn(t,"rightBottom",_j,h.getRightBottomHelpersAlign()||"h")&&_j++})}if(oe&&oe.length>0&&((Ql||Sb)&&as&&1===as.length&&as[0]instanceof F?!0:!1)){var _j=0;oe.forEach(function(H){cn(H,"edge",_j,"h")&&_j++})}if(Y.$72l){var ze,eo=Y.$67l,ji=Y.$68l,hr=Y.$69l,ys=(Y.$71l,Y.$70l),_c=Y.$82l,Bs=Y.$83l;if(1===eo?ze=ji:2===eo?ze=hr:3===eo?ze=ys:5===eo?ze=_c:6===eo&&(ze=Bs),ze){var Nk=h.lp(Y.$72l),td=h.getDataAt(Y.$72l);if(td&&td instanceof Q){var Nd,Hp,Sp;if(Y.$73l=td,1===eo)if(td instanceof Z.Grid)Nd=Y.$75l=jb(td,Nk);else if(td instanceof Z.Shape){Sp=Y.$74l=wr(td,Nk);var Wd=td.getPoints();if(Sp){var Kc=Sp.attachIndex,rl=xq(td,h.getDataUI(td),Kc)+1,am=rl+1>=Wd.size()?0:rl+1,Me=Wd.get(rl),Gd=Wd.get(am),Sd=td.p(),mp=td.getRotation();Me=ak(Sd,Me.x-Sd.x,Me.y-Sd.y,mp),Gd=ak(Sd,Gd.x-Sd.x,Gd.y-Sd.y,mp),I.beginPath(),I.strokeStyle=w,I.lineWidth=C,I.moveTo(Me.x*o,Me.y*o),I.lineTo(Gd.x*o,Gd.y*o),I.stroke()}}Nd?Hp=Nd.rect:(Hp=m.clone(h.getDataUIBounds(td)),m.grow(Hp,2)),I.beginPath(),I.rect(Hp.x*o,Hp.y*o,Hp.width*o,Hp.height*o),I.strokeStyle=1===eo||4===eo||6===eo?d:E,I.lineWidth=2,I.setLineDash&&I.setLineDash([8,8]),I.stroke()}else delete Y.$73l;Nk.x=Nk.x*o,Nk.y=Nk.y*o;var Ml=Wf(ze.x,ze.y,Nk.x,Nk.y),Gc=ak(ze,Nk.x-ze.x,Nk.y-ze.y,-Ml),Tj=Gc.x-ze.x;I.translate(ze.x,ze.y),I.rotate(Ml),c.width=Tj,c.height=40;var hf=E;(1===eo||4===eo||6===eo)&&(hf=d),c.comps[0].gradientColor=hf,m.drawImage(I,c,0,-20,Tj,40)}}}if(B.each(function(U){var F=h.getDataUI(U);if(F){var G,i,M=F._55O,E=F._78o;if(M&&M._43O&&U instanceof R?(G=M.$15l,i=U.getSegments(),i&&i.size()||(i=xl(G)),U.isClosePath()&&i.indexOf(5)<0&&(i=new X(i._as),i.add(5))):M&&E&&M._43O&&(G=U.s("edge.points"),i=U.s("edge.segments"),G=Om(F,G),i&&i.size()||(i=xl(G)),G&&(G=G._as)),G&&i){var B=0,j=i.size(),f=Y._hoverSegmentIndex;G=G.slice(0);for(var J=0;J<G.length;J++)G[J]=ul(G[J],o);I.beginPath(),I.strokeStyle=v,I.lineWidth=1,B=0;for(var J=0;j>J;J++){var m=i.get(J);if(1===m||2===m)B++;else if(3===m){var u=G[B-1],l=G[B],s=G[B+1];I.moveTo(u.x,u.y),I.lineTo(l.x,l.y),I.lineTo(s.x,s.y),B+=2}else if(4===m){var u=G[B-1],A=G[B],t=G[B+1],s=G[B+2];I.moveTo(u.x,u.y),I.lineTo(A.x,A.y),I.moveTo(t.x,t.y),I.lineTo(s.x,s.y),B+=3}}if(I.stroke(),n===U||O===U&&"points"===O.s("edge.type")){I.beginPath(),B=0,I.strokeStyle=w,I.lineWidth=C;for(var J=0;j>J;J++){var m=i.get(J);if(1===m||2===m){if(f===J){var u=G[B-1],s=G[B];I.moveTo(u.x,u.y),I.lineTo(s.x,s.y);break}B++}else if(3===m){if(f===J){var u=G[B-1],l=G[B],s=G[B+1];I.moveTo(u.x,u.y),I.quadraticCurveTo(l.x,l.y,s.x,s.y);break}B+=2}else if(4===m){if(f===J){var u=G[B-1],A=G[B],t=G[B+1],s=G[B+2];I.moveTo(u.x,u.y),I.bezierCurveTo(A.x,A.y,t.x,t.y,s.x,s.y);break}B+=3}else if(5===m&&f===J){var u=G[B-1],s=G[0];I.moveTo(u.x,u.y),I.lineTo(s.x,s.y);break}}I.stroke()}I.beginPath(),B=0,I.strokeStyle=H,I.lineWidth=1,I.fillStyle=S;for(var J=0;j>J;J++){var m=i.get(J);if(1===m||2===m){var s=G[B];I.moveTo(s.x+N,s.y),I.arc(s.x,s.y,N,0,r,!0),B++}else if(3===m){var s=G[B+1];I.moveTo(s.x+N,s.y),I.arc(s.x,s.y,N,0,r,!0),B+=2}else if(4===m){var s=G[B+2];I.moveTo(s.x+N,s.y),I.arc(s.x,s.y,N,0,r,!0),B+=3}}I.fill(),I.stroke(),I.beginPath(),B=0,I.strokeStyle=W,I.lineWidth=1,I.fillStyle=$;for(var J=0;j>J;J++){var m=i.get(J);if(1===m||2===m)B++;else if(3===m){var l=G[B];I.moveTo(l.x+N,l.y),I.arc(l.x,l.y,N,0,r,!0),B+=2}else if(4===m){var A=G[B],t=G[B+1];I.moveTo(A.x+N,A.y),I.arc(A.x,A.y,N,0,r,!0),I.moveTo(t.x+N,t.y),I.arc(t.x,t.y,N,0,r,!0),B+=3}}if(I.fill(),I.stroke(),I.beginPath(),B=0,I.strokeStyle=y,I.lineWidth=2,(n===U||O===U)&&Y.$9l!=L){var s=G[Y.$9l];I.moveTo(s.x+N,s.y),I.arc(s.x,s.y,N,0,r,!0),I.stroke()}}}}),Y.$87l&&h.sm().contains(Y.$87l)){var Vj,wj=Y.$87l,hb=Y.$88l,Ik=h.getEditHelperSize(),Tn=Ik/2;if(h.isHelperEditable(wj,"pointElevation"))if(wj instanceof R){var Ur=wj.getPosition();Vj=m.clone(wj.getPoints().get(hb)),Vj=ak({x:Ur.x,y:Ur.y},Vj.x-Ur.x,Vj.y-Ur.y,wj.getRotation()),Vj.x*=o,Vj.y*=o,I.translate(Vj.x,Vj.y),m.drawImage(I,m.getImage("xeditinteractor_elevationIcon"),Tn,-Tn,Ik,Ik),I.translate(-Vj.x,-Vj.y),Y._pointElevationHelperPoint={x:Vj.x+Ik,y:Vj.y}}else if(wj instanceof F){var Rr=Om(h.getDataUI(wj),wj.s("edge.points")),Vj=m.clone(Rr.get(hb));Vj.x*=o,Vj.y*=o,I.translate(Vj.x,Vj.y),m.drawImage(I,m.getImage("xeditinteractor_elevationIcon"),Tn,-Tn,Ik,Ik),I.translate(-Vj.x,-Vj.y),Y._pointElevationHelperPoint={x:Vj.x+Ik,y:Vj.y}}}I.restore(),Y.$5l=0}},$89l:function(A,V,q,S){A.save();var i=this,K=i.gv,d=K.getEditHelperSize(),D=d/2;A.beginPath(),A.translate(q.x,q.y),A.rotate(V),m.drawImage(A,S,-D,-D,d,d),A.restore()},$85l:function(n,y,E){var z=this;z.$90l=E,z.$89l(n,y,E,m.getImage("xeditinteractor_elevationIcon"))},$86l:function(s,W,I){var P=this;P.$91l=I,P.$89l(s,W,I,m.getImage("xeditinteractor_tallIcon"))},$77l:function(z,R,o){var J=this;J.$68l=o,J.$89l(z,R,o,m.getImage("xeditinteractor_hostIcon"))},$80l:function(Q,o,D){var F=this;F.$70l=D,F.$89l(Q,o,D,m.getImage("xeditinteractor_edgeIcon"))},$81l:function(e,N,x){var U=this;U.$71l=x,U.$89l(e,N,x,m.getImage("xeditinteractor_removeIcon"))},$76l:function(X,Y,p){var k=this;k.$69l=p,k.$89l(X,Y,p,m.getImage("xeditinteractor_parentIcon"))},$84l:function(O,P,L,J,h){var r,c=this,s=c.gv,E=s.getZoom(),l=s.getEditHelperSize(),j=l/2;L.x*=E,L.y*=E,h&&(J?L.x-=j+5:L.x+=j+5),L.y-=l-2,J?(c.$82l=L,r=m.getImage("xeditinteractor_sourceIcon")):(c.$83l=L,r=m.getImage("xeditinteractor_targetIcon")),O.beginPath(),O.translate(L.x,L.y),m.drawImage(O,r,-j,-j,l,l),O.translate(-L.x,-L.y)},$44l:function(f,b,u){f.save();var S=this.gv.getZoom(),c=l(x(b.width,2)+x(b.height,2))/2*S+10,t=c,U=t+8,g=t+18,d=u,q=b.x+b.width/2,i=b.y+b.height/2;f.translate(q*S,i*S),f.beginPath(),f.strokeStyle="rgb(150, 150, 150)";for(var $=0,o=0,r=0,Q=0,A=0,B=0;360>B;B++)$=B*J/180,0===B%5&&(o=K($)*t,r=n($)*t,Q=K($)*U,A=n($)*U,f.moveTo(o,r),f.lineTo(Q,A)),0===B%45&&(o=K($)*t,r=n($)*t,Q=K($)*g,A=n($)*g,f.moveTo(o,r),f.lineTo(Q,A));f.stroke(),f.beginPath(),f.rotate(-p),f.beginPath(),f.fillStyle="rgba(255, 0, 0, 0.1)",f.strokeStyle="rgb(157, 157, 157)",f.moveTo(0,0),f.arc(0,0,g,0,u,!1),f.fill(),f.beginPath(),f.moveTo(0+g,0),f.arc(0,0,g,0,u,!1),f.stroke(),f.rotate(p),f.font="bold 12px Verdana, Arial";var s=20*n(d),R=20*K(d),X=N(180*d/J)+"";f.textAlign="center",f.textBaseline="middle",f.beginPath();var Z=f.measureText("365.").width;f.fillStyle="white",f.rect(s-Z/2,-R-10,Z,20),f.fill(),f.beginPath(),f.fillStyle="rgb(79,79,79)",f.fillText(X,s,-R),f.restore()}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);